""" {{ namespace }}.

Do not edit this file by hand.
This is generated by parsing api.html service doc.
"""

{%- for exception in exceptions %}
from ambra_sdk.exceptions.service import {{ exception }}
{%- endfor %}

{%- for query_class_name in query_class_names %}
from ambra_sdk.service.query import {{ query_class_name }}
{%- endfor %}

class {{ namespace }}:
    """{{ namespace }}."""

    def __init__(self, api):
        self._api = api

    {% for api in apis %}
    def {{ api.func_name }}(
        self,
        {%- for req in api.request_params %}
        {{ req.name }}{% if req.optional %}=None{% endif %},
        {%- endfor %}
    ):
        """{{ api.func_head }}.

        {%- for req in api.request_params %}
        :param {{ req.name }}: {{ req.description }}
        {%- endfor %}
        {%- if api.notes %}

        Notes:

        {%- for note in api.notes %}
        {{ note.description }}
        {%- endfor %}
        {%- endif %}
        """
        request_data = {
        {%- for req in api.request_usual_params %}
           '{{ req.name }}': {{ req.name }},
        {%- endfor %}
        }

        {%- for req in api.request_multiple_params %}
        if {{req.name}} is not None:
            {{ req.name }}_dict = {'{prefix}{k}'.format(prefix='{{ req.multiliple_prefix }}', k=k): v for k,v in {{ req.name }}.items()}
            request_data.update({{ req.name }}_dict)
        {%- endfor %}
	
        errors_mapping = {}
	{%- for error in api.errors %}
        errors_mapping['{{ error.name }}'] = {{ error.exception_name() }}('{{error.description}}')
	{%- endfor %}
        query_data = {
            'api': self._api,
            'url': '{{ api.url }}',
            'request_data': request_data,
            'errors_mapping': errors_mapping,
            'required_sid': {{ api.sid_required }},
        }
        {%- if api.with_pagination %}
        query_data['paginated_field'] = '{{ api.paginated_field.name }}'
	{%- endif %}
        return {{ api.query_class_name }}(**query_data)
    {% endfor %}
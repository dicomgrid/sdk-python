<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>v3 Services Public API</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="stylesheet" type="text/css" href="common.css" />
<link rel="stylesheet" type="text/css" href="api.css" />
<link rel="stylesheet" href="lib/bootstrap.min.css">
</head>
<body>

    <div class="topbar">
        <div class="topbar-inner">
            <div class="container">
                <p class="brand"><a href="index.html">DICOM Grid (dba Ambra Health)</a></p>
            </div>
        </div>
    </div>

    <div id="content" style="padding-top: 80px;">
        <h2>v3 Services Public API</h2>

        <a name="toc"><h3>Table of contents</h3></a>
        <ol>
            <li><a href="#intro">Introduction</a>
            <li><a href="#global">Global information</a>
            <li><a href="#error">Error handling</a>
            <li><a href="#filter">Filters</a>
            <li><a href="#fields">Fields</a>
            <li><a href="#pagination">Pagination</a>
            <li><a href="#sort">Sorting</a>
            <li><a href="#bundled">Bundled calls</a>
            <li><a href="#permissions">Permissions</a>
            <li><a href="#schedule">Schedules</a>
            <li><a href="#account-settings">Account settings</a>
            <li><a href="#ai-questions">Study AI questions</a>
            <li><a href="#ai-ns-questions">Namespace AI questions</a>
            <li><a href="#session" name="session-idx">Session commands</a>
            <ul>
                <li><a href="#session_login">/session/login</a>
                <li><a href="#session_user">/session/user</a>
                <li><a href="#session_permissions">/session/permissions</a>
                <li><a href="#session_logout">/session/logout</a>
                <li><a href="#session_csrf_enable">/session/csrf/enable</a>
                <li><a href="#session_uuid">/session/uuid</a>
                <li><a href="#session_oauth_start">/session/oauth/start</a>
                <li><a href="#session_oauth">/session/oauth</a>
                <li><a href="#session_oauth_token">/session/oauth/token</a>
                <li><a href="#session_pin">/session/pin</a>
                <li><a href="#session_sign">/session/sign</a>
                <li><a href="#session_ttl">/session/ttl</a>
            </ul>
            <li><a href="#user" name="user-idx">User commands</a>
            <ul>
                <li><a href="#user_join">/user/join</a>
                <li><a href="#user_add">/user/add</a>
                <li><a href="#user_get">/user/get</a>
                <li><a href="#user_set">/user/set</a>
                <li><a href="#user_delete">/user/delete</a>
                <li><a href="#user_password_lost">/user/password/lost</a>
                <li><a href="#user_password_reset">/user/password/reset</a>
                <li><a href="#user_welcome">/user/welcome</a>
                <li><a href="#user_join_list">/user/join/list</a>
                <li><a href="#user_join_request">/user/join/request</a>
                <li><a href="#user_invite">/user/invite</a>
                <li><a href="#user_invite_accept">/user/invite/accept</a>
                <li><a href="#user_namespace_list">/user/namespace/list</a>
                <li><a href="#user_event">/user/event</a>
                <li><a href="#user_event_set">/user/event/set</a>
                <li><a href="#user_token">/user/token</a>
                <li><a href="#user_device_clear">/user/device/clear</a>
                <li><a href="#user_signature">/user/signature</a>
                <li><a href="#user_enable">/user/enable</a>
                <li><a href="#user_pubkey_list">/user/pubkey/list</a>
                <li><a href="#user_pubkey_get">/user/pubkey/get</a>
            </ul>
            <li><a href="#study" name="study-idx">Study commands</a>
            <ul>
                <li><a href="#study_add">/study/add</a>
                <li><a href="#study_set">/study/set</a>
                <li><a href="#study_delete">/study/delete</a>
                <li><a href="#study_list">/study/list</a>
                <li><a href="#study_count">/study/count</a>
                <li><a href="#study_count_by_filter">/study/count_by_filter</a>
                <li><a href="#study_cfind">/study/cfind</a>
                <li><a href="#study_get">/study/get</a>
                <li><a href="#study_permissions">/study/permissions</a>
                <li><a href="#study_exists">/study/exists</a>
                <li><a href="#study_push">/study/push</a>
                <li><a href="#study_push_hl7">/study/push/hl7</a>
                <li><a href="#study_pdf_hl7">/study/pdf/hl7</a>
                <li><a href="#study_fax_hl7">/study/fax/hl7</a>
                <li><a href="#study_cmove">/study/cmove</a>
                <li><a href="#study_node_can_remove">/study/node/can/remove</a>
                <li><a href="#study_share_who">/study/share/who</a>
                <li><a href="#study_share">/study/share</a>
                <li><a href="#study_share_stop">/study/share/stop</a>
                <li><a href="#study_share_list">/study/share/list</a>
                <li><a href="#study_approve">/study/approve</a>
                <li><a href="#study_reject">/study/reject</a>
                <li><a href="#study_audit">/study/audit</a>
                <li><a href="#study_star">/study/star</a>
                <li><a href="#study_report_detail">/study/report/detail</a>
                <li><a href="#study_report_series">/study/report/series</a>
                <li><a href="#study_viewer_settings">/study/viewer/settings</a>
                <li><a href="#study_viewer3_settings">/study/viewer3/settings</a>
                <li><a href="#study_status_get">/study/status/get</a>
                <li><a href="#study_status_set">/study/status/set</a>
                <li><a href="#study_status_locks">/study/status/locks</a>
                <li><a href="#study_status_history">/study/status/history</a>
                <li><a href="#study_move">/study/move</a>
                <li><a href="#study_duplicate">/study/duplicate</a>
                <li><a href="#study_clone">/study/clone</a>
                <li><a href="#study_split">/study/split</a>
                <li><a href="#study_freeze">/study/freeze</a>
                <li><a href="#study_manual_route">/study/manual/route</a>
                <li><a href="#study_find_order">/study/find/order</a>
                <li><a href="#study_archive">/study/archive</a>
                <li><a href="#study_retrieve">/study/retrieve</a>
                <li><a href="#study_comment_add">/study/comment/add</a>
                <li><a href="#study_comment_delete">/study/comment/delete</a>
                <li><a href="#study_comment_get">/study/comment/get</a>
                <li><a href="#study_validate">/study/validate</a>
                <li><a href="#study_attach_customfields">/study/attach/customfields</a>
                <li><a href="#study_external_viewer">/study/external/viewer</a>
                <li><a href="#study_question">/study/question</a>
                <li><a href="#study_dicomdata_load">/study/dicomdata/load</a>
                <li><a href="#study_timing_event">/study/timing/event</a>
                <li><a href="#study_timing_log">/study/timing/log</a>
                <li><a href="#study_sync">/study/sync</a>
                <li><a href="#study_take">/study/take</a>
                <li><a href="#study_request_add">/study/request/add</a>
                <li><a href="#study_request_get">/study/request/get</a>
                <li><a href="#study_request_match">/study/request/match</a>
                <li><a href="#study_revive">/study/revive</a>
            </ul>
            <li><a href="#tag" name="tag-idx">Tag commands</a>
            <ul>
                <li><a href="#tag_list">/tag/list</a>
                <li><a href="#tag_add">/tag/add</a>
                <li><a href="#tag_delete">/tag/delete</a>
            </ul>
            <li><a href="#annotation" name="annotation-idx">Annotation commands</a>
            <ul>
                <li><a href="#annotation_list">/annotation/list</a>
                <li><a href="#annotation_add">/annotation/add</a>
                <li><a href="#annotation_set">/annotation/set</a>
                <li><a href="#annotation_get">/annotation/get</a>
                <li><a href="#annotation_delete">/annotation/delete</a>
            </ul>
            <li><a href="#keyimage" name="keyimage-idx">Keyimage commands</a>
            <ul>
                <li><a href="#keyimage_list">/keyimage/list</a>
                <li><a href="#keyimage_add">/keyimage/add</a>
                <li><a href="#keyimage_get">/keyimage/get</a>
                <li><a href="#keyimage_delete">/keyimage/delete</a>
            </ul>
            <li><a href="#validate" name="validate-idx">Study validation commands</a>
            <ul>
                <li><a href="#validate_list">/validate/list</a>
                <li><a href="#validate_add">/validate/add</a>
                <li><a href="#validate_set">/validate/set</a>
                <li><a href="#validate_get">/validate/get</a>
                <li><a href="#validate_delete">/validate/delete</a>
            </ul>
            <li><a href="#dicomdata" name="dicomdata-idx">Study DICOM data commands</a>
            <ul>
                <li><a href="#dicomdata_list">/dicomdata/list</a>
                <li><a href="#dicomdata_get">/dicomdata/get</a>
            </ul>
            <li><a href="#radreport" name="radreport-idx">Radiology reports commands</a>
            <ul>
                <li><a href="#radreport_add">/radreport/add</a>
                <li><a href="#radreport_set">/radreport/set</a>
                <li><a href="#radreport_get">/radreport/get</a>
                <li><a href="#radreport_audit">/radreport/audit</a>
                <li><a href="#radreport_delete">/radreport/delete</a>
                <li><a href="#radreport_description">/radreport/description</a>
                <li><a href="#radreport_user_list">/radreport/user/list</a>
                <li><a href="#radreportmacro_list">/radreportmacro/list</a>
                <li><a href="#radreportmacro_add">/radreportmacro/add</a>
                <li><a href="#radreportmacro_set">/radreportmacro/set</a>
                <li><a href="#radreportmacro_get">/radreportmacro/get</a>
                <li><a href="#radreportmacro_delete">/radreportmacro/delete</a>
                <li><a href="#radreport_pdf">/radreport/pdf</a>
                <li><a href="#radreport_fax">/radreport/fax</a>
                <li><a href="#radreport_email">/radreport/email</a>
                <li><a href="#radreport_template_list">/radreport/template/list</a>
                <li><a href="#radreport_template_add">/radreport/template/add</a>
                <li><a href="#radreport_template_set">/radreport/template/set</a>
                <li><a href="#radreport_template_get">/radreport/template/get</a>
                <li><a href="#radreport_template_get_type">/radreport/template/get/type</a>
                <li><a href="#radreport_template_delete">/radreport/template/delete</a>
                <li><a href="#radreport_template_activate">/radreport/template/activate</a>
            </ul>
            <li><a href="#customcode" name="customcode-idx">Custom code commands</a>
            <ul>
                <li><a href="#customcode_add">/customcode/add</a>
                <li><a href="#customcode_get">/customcode/get</a>
                <li><a href="#customcode_set">/customcode/set</a>
                <li><a href="#customcode_zip">/customcode/zip</a>
                <li><a href="#customcode_delete">/customcode/delete</a>
                <li><a href="#customcode_list">/customcode/list</a>
                <li><a href="#customcode_deploy">/customcode/deploy</a>
                <li><a href="#customcode_undeploy">/customcode/undeploy</a>
                <li><a href="#customcode_deploy_get">/customcode/deploy/get</a>
                <li><a href="#customcode_deploy_list">/customcode/deploy/list</a>
            </ul>
            <li><a href="#case" name="case-idx">Case commands</a>
            <ul>
                <li><a href="#case_get">/case/get</a>
                <li><a href="#case_set">/case/set</a>
                <li><a href="#case_return">/case/return</a>
                <li><a href="#case_delete">/case/delete</a>
                <li><a href="#case_list">/case/list</a>
                <li><a href="#case_attach">/case/attach</a>
            </ul>
            <li><a href="#patient" name="patient-idx">Patient commands</a>
            <ul>
                <li><a href="#patient_add">/patient/add</a>
                <li><a href="#patient_get">/patient/get</a>
                <li><a href="#patient_set">/patient/set</a>
                <li><a href="#patient_delete">/patient/delete</a>
                <li><a href="#patient_merge">/patient/merge</a>
                <li><a href="#patient_list">/patient/list</a>
                <li><a href="#patient_study_list">/patient/study/list</a>
                <li><a href="#patient_portal_find">/patient/portal/find</a>
                <li><a href="#patient_portal_pin">/patient/portal/pin</a>
                <li><a href="#patient_portal_login">/patient/portal/login</a>
                <li><a href="#patient_portal_list">/patient/portal/list</a>
            </ul>
            <li><a href="#order" name="order-idx">Order commands</a>
            <ul>
                <li><a href="#order_add">/order/add</a>
                <li><a href="#order_get">/order/get</a>
                <li><a href="#order_set">/order/set</a>
                <li><a href="#order_delete">/order/delete</a>
                <li><a href="#order_list">/order/list</a>
                <li><a href="#order_sps_add">/order/sps/add</a>
                <li><a href="#order_sps_set">/order/sps/set</a>
                <li><a href="#order_sps_delete">/order/sps/delete</a>
                <li><a href="#order_sps_status">/order/sps/status</a>
                <li><a href="#order_sps_find">/order/sps/find</a>
            </ul>
            <li><a href="#hl7" name="hl7-idx">HL7 commands</a>
            <ul>
                <li><a href="#hl7_list">/hl7/list</a>
                <li><a href="#hl7_add">/hl7/add</a>
                <li><a href="#hl7_get">/hl7/get</a>
                <li><a href="#hl7_delete">/hl7/delete</a>
                <li><a href="#hl7_study_report">/hl7/study/report</a>
                <li><a href="#hl7_extract_report">/hl7/extract/report</a>
                <li><a href="#hl7_template_list">/hl7/template/list</a>
                <li><a href="#hl7_template_add">/hl7/template/add</a>
                <li><a href="#hl7_template_set">/hl7/template/set</a>
                <li><a href="#hl7_template_get">/hl7/template/get</a>
                <li><a href="#hl7_template_render">/hl7/template/render</a>
                <li><a href="#hl7_template_delete">/hl7/template/delete</a>
                <li><a href="#hl7_transform_list">/hl7/transform/list</a>
                <li><a href="#hl7_transform_add">/hl7/transform/add</a>
                <li><a href="#hl7_transform_set">/hl7/transform/set</a>
                <li><a href="#hl7_transform_get">/hl7/transform/get</a>
                <li><a href="#hl7_transform_delete">/hl7/transform/delete</a>
                <li><a href="#hl7_transform_test">/hl7/transform/test</a>
                <li><a href="#hl7_parse_fields">/hl7/parse/fields</a>
            </ul>
            <li><a href="#setting" name="setting-idx">Settings commands</a>
            <ul>
                <li><a href="#setting_set">/setting/set</a>
                <li><a href="#setting_get">/setting/get</a>
                <li><a href="#setting_get_all">/setting/get/all</a>
            </ul>
            <li><a href="#node" name="node-idx">Node commands</a>
            <ul>
                <li><a href="#node_list">/node/list</a>
                <li><a href="#node_public">/node/public</a>
                <li><a href="#node_connect">/node/connect</a>
                <li><a href="#node_approve">/node/approve</a>
                <li><a href="#node_add">/node/add</a>
                <li><a href="#node_set">/node/set</a>
                <li><a href="#node_get">/node/get</a>
                <li><a href="#node_ping">/node/ping</a>
                <li><a href="#node_ping_ack">/node/ping/ack</a>
                <li><a href="#node_deliver">/node/deliver</a>
                <li><a href="#node_retrieve">/node/retrieve</a>
                <li><a href="#node_webhook">/node/webhook</a>
                <li><a href="#node_configuration">/node/configuration</a>
                <li><a href="#node_delete">/node/delete</a>
                <li><a href="#node_study_queued">/node/study/queued</a>
                <li><a href="#node_study_anonymized">/node/study/anonymized</a>
                <li><a href="#node_found">/node/found</a>
                <li><a href="#node_found_mwl">/node/found/mwl</a>
                <li><a href="#node_event">/node/event</a>
                <li><a href="#node_log">/node/log</a>
                <li><a href="#node_xml">/node/xml</a>
                <li><a href="#node_metric">/node/metric</a>
                <li><a href="#node_performance_set">/node/performance/set</a>
                <li><a href="#node_performance_get">/node/performance/get</a>
                <li><a href="#node_progress_add">/node/progress/add</a>
                <li><a href="#node_progress_list">/node/progress/list</a>
                <li><a href="#node_progress_get">/node/progress/get</a>
            </ul>
            <li><a href="#destination" name="destination-idx">Destination commands</a>
            <ul>
                <li><a href="#destination_list">/destination/list</a>
                <li><a href="#destination_add">/destination/add</a>
                <li><a href="#destination_set">/destination/set</a>
                <li><a href="#destination_get">/destination/get</a>
                <li><a href="#destination_delete">/destination/delete</a>
                <li><a href="#destination_search">/destination/search</a>
                <li><a href="#destination_search_report">/destination/search/report</a>
                <li><a href="#destination_retrieve">/destination/retrieve</a>
                <li><a href="#destination_search_mwl">/destination/search/mwl</a>
            </ul>
            <li><a href="#route" name="route-idx">Route commands</a>
            <ul>
                <li><a href="#route_list">/route/list</a>
                <li><a href="#route_add">/route/add</a>
                <li><a href="#route_set">/route/set</a>
                <li><a href="#route_get">/route/get</a>
                <li><a href="#route_delete">/route/delete</a>
                <li><a href="#route_physician_alias_match">/route/physician/alias/match</a>
            </ul>
            <li><a href="#account" name="account-idx">Account commands</a>
            <ul>
                <li><a href="#account_list">/account/list</a>
                <li><a href="#account_set">/account/set</a>
                <li><a href="#account_get">/account/get</a>
                <li><a href="#account_user_add">/account/user/add</a>
                <li><a href="#account_user_set">/account/user/set</a>
                <li><a href="#account_user_get">/account/user/get</a>
                <li><a href="#account_user_delete">/account/user/delete</a>
                <li><a href="#account_user_list">/account/user/list</a>
                <li><a href="#account_user_report_login">/account/user/report/login</a>
                <li><a href="#account_can_share">/account/can/share</a>
                <li><a href="#account_can_share_stop">/account/can/share/stop</a>
                <li><a href="#account_can_share_list">/account/can/share/list</a>
                <li><a href="#account_css">/account/css</a>
                <li><a href="#account_settings">/account/settings</a>
                <li><a href="#account_settings_validate">/account/settings/validate</a>
                <li><a href="#account_connect">/account/connect</a>
                <li><a href="#account_md5_counter">/account/md5/counter</a>
                <li><a href="#account_list_requestable">/account/list/requestable</a>
                <li><a href="#account_radreport_email_authorize">/account/radreport/email/authorize</a>
            </ul>
            <li><a href="#location" name="location-idx">Location commands</a>
            <ul>
                <li><a href="#location_list">/location/list</a>
                <li><a href="#location_add">/location/add</a>
                <li><a href="#location_set">/location/set</a>
                <li><a href="#location_get">/location/get</a>
                <li><a href="#location_delete">/location/delete</a>
                <li><a href="#location_user_add">/location/user/add</a>
                <li><a href="#location_user_delete">/location/user/delete</a>
                <li><a href="#location_user_list">/location/user/list</a>
            </ul>
            <li><a href="#group" name="group-idx">Group commands</a>
            <ul>
                <li><a href="#group_list">/group/list</a>
                <li><a href="#group_add">/group/add</a>
                <li><a href="#group_set">/group/set</a>
                <li><a href="#group_get">/group/get</a>
                <li><a href="#group_delete">/group/delete</a>
                <li><a href="#group_user_add">/group/user/add</a>
                <li><a href="#group_user_delete">/group/user/delete</a>
                <li><a href="#group_user_list">/group/user/list</a>
                <li><a href="#group_scanner_validate">/group/scanner/validate</a>
            </ul>
            <li><a href="#role" name="role-idx">Role commands</a>
            <ul>
                <li><a href="#role_list">/role/list</a>
                <li><a href="#role_add">/role/add</a>
                <li><a href="#role_set">/role/set</a>
                <li><a href="#role_settings">/role/settings</a>
                <li><a href="#role_get">/role/get</a>
                <li><a href="#role_delete">/role/delete</a>
                <li><a href="#role_default_permissions">/role/default/permissions</a>
                <li><a href="#role_report_detail">/role/report/detail</a>
            </ul>
            <li><a href="#activity" name="activity-idx">Activity commands</a>
            <ul>
                <li><a href="#activity_list">/activity/list</a>
                <li><a href="#activity_list_count">/activity/list/count</a>
                <li><a href="#activity_get">/activity/get</a>
                <li><a href="#activity_delete">/activity/delete</a>
            </ul>
            <li><a href="#audit" name="audit-idx">Audit commands</a>
            <ul>
                <li><a href="#audit_object">/audit/object</a>
                <li><a href="#audit_user">/audit/user</a>
                <li><a href="#audit_account">/audit/account</a>
                <li><a href="#audit_deleted">/audit/deleted</a>
                <li><a href="#audit_log">/audit/log</a>
                <li><a href="#audit_failedlogins">/audit/failedlogins</a>
            </ul>
            <li><a href="#namespace" name="namespace-idx">Namespace commands</a>
            <ul>
                <li><a href="#namespace_permissions">/namespace/permissions</a>
                <li><a href="#namespace_settings">/namespace/settings</a>
                <li><a href="#namespace_share_code">/namespace/share_code</a>
                <li><a href="#namespace_share_pricing">/namespace/share/pricing</a>
                <li><a href="#namespace_share_price">/namespace/share/price</a>
                <li><a href="#namespace_anonymize">/namespace/anonymize</a>
                <li><a href="#namespace_coverpage">/namespace/coverpage</a>
                <li><a href="#namespace_validate_customfields">/namespace/validate/customfields</a>
                <li><a href="#namespace_event_defaults">/namespace/event/defaults</a>
                <li><a href="#namespace_study_defaults">/namespace/study/defaults</a>
                <li><a href="#namespace_engine_fqdn">/namespace/engine/fqdn</a>
                <li><a href="#namespace_removed_user_report">/namespace/removed/user/report</a>
                <li><a href="#namespace_question">/namespace/question</a>
                <li><a href="#namespace_audit">/namespace/audit</a>
            </ul>
            <li><a href="#help" name="help-idx">Help commands</a>
            <ul>
                <li><a href="#help_get">/help/get</a>
                <li><a href="#help_set">/help/set</a>
            </ul>
            <li><a href="#terminology" name="terminology-idx">Terminology commands</a>
            <ul>
                <li><a href="#terminology_account_overrides">/terminology/account/overrides</a>
                <li><a href="#terminology_tags">/terminology/tags</a>
                <li><a href="#terminology_set">/terminology/set</a>
                <li><a href="#terminology_list">/terminology/list</a>
                <li><a href="#terminology_i18next">/terminology/i18next</a>
            </ul>
            <li><a href="#analytics" name="analytics-idx">Analytics commands</a>
            <ul>
                <li><a href="#analytics_study">/analytics/study</a>
                <li><a href="#analytics_patient_portal">/analytics/patient/portal</a>
                <li><a href="#analytics_radreport">/analytics/radreport</a>
                <li><a href="#analytics_user">/analytics/user</a>
            </ul>
            <li><a href="#filter" name="filter-idx">Filter commands</a>
            <ul>
                <li><a href="#filter_list">/filter/list</a>
                <li><a href="#filter_add">/filter/add</a>
                <li><a href="#filter_get">/filter/get</a>
                <li><a href="#filter_set">/filter/set</a>
                <li><a href="#filter_delete">/filter/delete</a>
                <li><a href="#filter_share">/filter/share</a>
                <li><a href="#filter_share_stop">/filter/share/stop</a>
                <li><a href="#filter_share_list">/filter/share/list</a>
            </ul>
            <li><a href="#customfield" name="customfield-idx">Custom field commands</a>
            <ul>
                <li><a href="#customfield_list">/customfield/list</a>
                <li><a href="#customfield_add">/customfield/add</a>
                <li><a href="#customfield_set">/customfield/set</a>
                <li><a href="#customfield_get">/customfield/get</a>
                <li><a href="#customfield_delete">/customfield/delete</a>
                <li><a href="#customfield_lookup">/customfield/lookup</a>
                <li><a href="#customfield_search">/customfield/search</a>
                <li><a href="#customfield_mapping_add">/customfield/mapping/add</a>
                <li><a href="#customfield_mapping_set">/customfield/mapping/set</a>
                <li><a href="#customfield_mapping_delete">/customfield/mapping/delete</a>
            </ul>
            <li><a href="#webhook" name="webhook-idx">Webhook commands</a>
            <ul>
                <li><a href="#webhook_list">/webhook/list</a>
                <li><a href="#webhook_add">/webhook/add</a>
                <li><a href="#webhook_set">/webhook/set</a>
                <li><a href="#webhook_get">/webhook/get</a>
                <li><a href="#webhook_delete">/webhook/delete</a>
                <li><a href="#webhook_trigger">/webhook/trigger</a>
                <li><a href="#webhook_run">/webhook/run</a>
                <li><a href="#webhook_event">/webhook/event</a>
                <li><a href="#webhook_email">/webhook/email</a>
            </ul>
            <li><a href="#purge" name="purge-idx">Purge commands</a>
            <ul>
                <li><a href="#purge_list">/purge/list</a>
                <li><a href="#purge_add">/purge/add</a>
                <li><a href="#purge_set">/purge/set</a>
                <li><a href="#purge_get">/purge/get</a>
                <li><a href="#purge_delete">/purge/delete</a>
                <li><a href="#purge_run">/purge/run</a>
            </ul>
            <li><a href="#link" name="link-idx">Link commands</a>
            <ul>
                <li><a href="#link_list">/link/list</a>
                <li><a href="#link_add">/link/add</a>
                <li><a href="#link_get">/link/get</a>
                <li><a href="#link_delete">/link/delete</a>
                <li><a href="#link_status">/link/status</a>
                <li><a href="#link_session">/link/session</a>
                <li><a href="#link_redirect">/link/redirect</a>
                <li><a href="#link_external">/link/external</a>
                <li><a href="#link_sso">/link/sso</a>
                <li><a href="#link_sid">/link/sid</a>
                <li><a href="#link_mail">/link/mail</a>
                <li><a href="#link_charge">/link/charge</a>
                <li><a href="#link_pin">/link/pin</a>
            </ul>
            <li><a href="#message" name="message-idx">Message commands</a>
            <ul>
                <li><a href="#message_list">/message/list</a>
                <li><a href="#message_add">/message/add</a>
                <li><a href="#message_get">/message/get</a>
                <li><a href="#message_delete">/message/delete</a>
                <li><a href="#message_count">/message/count</a>
            </ul>
            <li><a href="#dictionary" name="dictionary-idx">Dictionary commands</a>
            <ul>
                <li><a href="#dictionary_list">/dictionary/list</a>
                <li><a href="#dictionary_add">/dictionary/add</a>
                <li><a href="#dictionary_set">/dictionary/set</a>
                <li><a href="#dictionary_get">/dictionary/get</a>
                <li><a href="#dictionary_delete">/dictionary/delete</a>
                <li><a href="#dictionary_entries">/dictionary/entries</a>
                <li><a href="#dictionary_entry_add">/dictionary/entry/add</a>
                <li><a href="#dictionary_entry_delete">/dictionary/entry/delete</a>
                <li><a href="#dictionary_attach">/dictionary/attach</a>
                <li><a href="#dictionary_attach_set">/dictionary/attach/set</a>
                <li><a href="#dictionary_detach">/dictionary/detach</a>
            </ul>
            <li><a href="#report" name="report-idx">Report commands</a>
            <ul>
                <li><a href="#report_status">/report/status</a>
                <li><a href="#report_zip">/report/zip</a>
            </ul>
            <li><a href="#meeting" name="meeting-idx">Meeting commands</a>
            <ul>
                <li><a href="#meeting_add">/meeting/add</a>
                <li><a href="#meeting_set">/meeting/set</a>
                <li><a href="#meeting_get">/meeting/get</a>
                <li><a href="#meeting_join">/meeting/join</a>
                <li><a href="#meeting_leave">/meeting/leave</a>
                <li><a href="#meeting_roster">/meeting/roster</a>
                <li><a href="#meeting_presenter">/meeting/presenter</a>
                <li><a href="#meeting_ping">/meeting/ping</a>
                <li><a href="#meeting_delete">/meeting/delete</a>
                <li><a href="#meeting_events_add">/meeting/events/add</a>
            </ul>
            <li><a href="#appointment" name="appointment-idx">Appointment commands</a>
            <ul>
                <li><a href="#appointment_add">/appointment/add</a>
                <li><a href="#appointment_get">/appointment/get</a>
                <li><a href="#appointment_set">/appointment/set</a>
                <li><a href="#appointment_delete">/appointment/delete</a>
                <li><a href="#appointment_list">/appointment/list</a>
            </ul>
            <li><a href="#training" name="training-idx">Training commands</a>
            <ul>
                <li><a href="#training_todo">/training/todo</a>
                <li><a href="#training_done">/training/done</a>
            </ul>
            <li><a href="#rsna" name="rsna-idx">RSNA commands</a>
            <ul>
                <li><a href="#rsna_phr_study">/rsna/phr_study</a>
            </ul>
            <li><a href="#npi" name="npi-idx">NPI commands</a>
            <ul>
                <li><a href="#npi_find">/npi/find</a>
            </ul>
            <li><a href="#site" name="site-idx">Site commands</a>
            <ul>
                <li><a href="#site_list">/site/list</a>
                <li><a href="#site_add">/site/add</a>
                <li><a href="#site_set">/site/set</a>
                <li><a href="#site_get">/site/get</a>
                <li><a href="#site_delete">/site/delete</a>
                <li><a href="#site_user_add">/site/user/add</a>
                <li><a href="#site_user_set">/site/user/set</a>
                <li><a href="#site_user_list">/site/user/list</a>
                <li><a href="#site_user_delete">/site/user/delete</a>
            </ul>
            <li><a href="#scanner" name="scanner-idx">Scanner commands</a>
            <ul>
                <li><a href="#scanner_list">/scanner/list</a>
                <li><a href="#scanner_add">/scanner/add</a>
                <li><a href="#scanner_set">/scanner/set</a>
                <li><a href="#scanner_get">/scanner/get</a>
                <li><a href="#scanner_delete">/scanner/delete</a>
            </ul>
            <li><a href="#query" name="query-idx">Query commands</a>
            <ul>
                <li><a href="#query_list">/query/list</a>
                <li><a href="#query_count">/query/count</a>
                <li><a href="#query_add">/query/add</a>
                <li><a href="#query_set">/query/set</a>
                <li><a href="#query_get">/query/get</a>
                <li><a href="#query_delete">/query/delete</a>
                <li><a href="#query_seen">/query/seen</a>
                <li><a href="#query_status_set">/query/status/set</a>
                <li><a href="#query_attachment_add">/query/attachment/add</a>
                <li><a href="#query_attachment_commit">/query/attachment/commit</a>
                <li><a href="#query_attachment_delete">/query/attachment/delete</a>
            </ul>
            <li><a href="#qctask" name="qctask-idx">QC task commands</a>
            <ul>
                <li><a href="#qctask_add">/qctask/add</a>
                <li><a href="#qctask_set">/qctask/set</a>
                <li><a href="#qctask_get">/qctask/get</a>
                <li><a href="#qctask_status_set">/qctask/status/set</a>
            </ul>
            <li><a href="#anonymization" name="anonymization-idx">Anonymization profile commands</a>
            <ul>
                <li><a href="#anonymization_list">/anonymization/list</a>
                <li><a href="#anonymization_add">/anonymization/add</a>
                <li><a href="#anonymization_set">/anonymization/set</a>
                <li><a href="#anonymization_get">/anonymization/get</a>
                <li><a href="#anonymization_delete">/anonymization/delete</a>
            </ul>
            <li><a href="#rule_set" name="rule_set-idx">Rule set commands</a>
            <ul>
                <li><a href="#rule_set_list">/rule_set/list</a>
                <li><a href="#rule_set_add">/rule_set/add</a>
                <li><a href="#rule_set_set">/rule_set/set</a>
                <li><a href="#rule_set_get">/rule_set/get</a>
                <li><a href="#rule_set_delete">/rule_set/delete</a>
            </ul>
            <li><a href="#timer_rule" name="timer_rule-idx">Study timer rule commands</a>
            <ul>
                <li><a href="#timer_rule_list">/timer_rule/list</a>
                <li><a href="#timer_rule_add">/timer_rule/add</a>
                <li><a href="#timer_rule_set">/timer_rule/set</a>
                <li><a href="#timer_rule_get">/timer_rule/get</a>
                <li><a href="#timer_rule_delete">/timer_rule/delete</a>
            </ul>
        </ol>

        <a name="intro"><h3>Introduction</h3></a>
        The API is implemented as a REST like interface. A call is made to a URL using either a POST or a GET. The URL will return either a HTTP error code or a JSON data structure.

        <a name="global"><h3>Global information</h3></a>

        <ul>
            <li> <i>Italic</i> words represent field's names
            <li> UPPER CASE words represent input data or error tokens
            <li> Every returned data structure has a <i>status</i> field that holds either OK or ERROR
            <li> Date and time stamps are in UTC
            <li> Fields are required unless noted as optional
            <li> Flags are numeric fields with a 1 or 0 value for true or false
        </ul>

        <a name="error"><h3>Error handling</h3></a>
        Errors are flagged by an HTTP error code as follows:
        <ul>
            <li> 401 Authorization required - The call needs a valid, logged in session id (sid), valid basic authentication user name and password or an OAuth token
            <li> 405 Method not allowed - The call must be a POST not a GET
            <li> 412 Precondition failed - The returned json data structure will have the <i>status</i> flag set to ERROR.
            The <i>error_type</i> and the optional <i>error_subtype</i> fields will hold tokens that describe the error.
            The optional <i>error_data</i> field can hold additional error data.
        </ul>

        <a name="filter"><h3>Filter clauses</h3></a>
        Filters can typically be applied to list commands
        <ul>
            <li>A filter is one or more parameters of the format filter.FIELD.CONDITION
            <li>The following conditions are supported
            <ul>
                <li>equals - an exact match e.g. <code>filter.name.equals=jack</code> - Name field is equal to 'jack'
                <li>equals_or_null - an exact match plus any null values
                <li>not_equals - Not equals an exact match e.g. <code>filter.name.not_equals=jack</code> - Name field is not equal to 'jack'
                <li>not_equals_or_null - Not equals an exact match or is null e.g. <code>filter.name.not_equals_or_null=jack</code> - Name field is not equal to 'jack' or is null
                <li>like - a wildcard match e.g. <code>filter.last.like=jack%</code> - Last name is like 'jack%'
                <li>gt - a greater than match e.g. <code>filter.date.gt=2001-10-10</code> - Date is greater than 2001-10-10
                <li>ge - a greater than or equal to match e.g. <code>filter.date.ge=2001-10-10</code> - Date is greater than or equal to 2001-10-10
                <li>lt - a less than match e.g. <code>filter.date.lt=2001-10-10</code> - Date is less than 2001-10-10
                <li>le - a less than or equal to match e.g. <code>filter.date.le=2001-10-10</code> - Date is less than or equal to 2001-10-10
                <li>in - match one of the items in the JSON array e.g. <code>filter.study_status.in=["stage1","stage2"]</code> - Study status is either stage1 or stage2
                <li>in_or_null - match one of the items in the JSON array or the null value
            </ul>
            <li>FIELD like <code>field->'xyz'</code> to access 'xyz' key for hstore field
            <li>Multiple filters are AND'ed together
            <li>Custom fields can be filtered by specifying the field as customfield-CUSTOMFIELD_UUID
            <li>A timezone offset in numeric format can be passed in the filter.tz and will be applied to any dates in the filter e.g. <code>filter.tz=-4:00</code>
            <li>A timezone name from Olson database can be passed in the filter.tz. Deprecated timezones will apply as UTC.
            <li>Supported date and datetime formats are: YYYY-MM-DD, YYYYMMDD, YYYY-MM-DD hh:mm:ss[.uuuuuu][(+|-)ZZ[:ZZ]]. Timezone offsets are ignored. Server-side timestamps are truncated to seconds before comparison when a filter lacks microseconds part.
            <li>Timezones apply in this order: current user's time zone, filter.tz parameter, UTC by default.
            <li>A filter can be applied on a secondary table by putting the table names into the parameter e.g. filter.TABLE.FIELD.CONDITION
            <li>Invalid filters will return the following error messages
            <ul>
                <li>INVALID_FIELD &bull; The field is not valid for this object. The <i>error_subtype</i> will hold the filter expression this applies to<br>
                <li>INVALID_CONDITION &bull; The condition is not support. The <i>error_subtype</i> will hold the filter expression this applies to<br>
                <li>FILTER_NOT_FOUND  &bull; The filter can not be found. The <i>error_subtype</i> will hold the filter UUID<br>
            </ul>
            <li>Filters can be saved and manipulated by the <a href="#sfilter">Filter</a> commands.<br>
            <li>A saved filter can be applied by passing the filter UUID as a filter_id parameter rather than the filter expression.<br>
            <li>To create an OR type of search specify multiple saved filters in the configuration of a saved search as per the <a href="#filter_add">/filter/add</a> notes
        </ul>

        <a name="fields"><h3>Fields</h3></a>
        <ul>
            <li> The returned fields for an object can be limited by passing a fields.OBJECT_NAME parameter that contains a JSON array of the fields to return e.g. <code>fields.account=["uuid","name"]</code>

            <li> All the top level returned fields except <code>status</code> can be filter via the special fields._top parameter. e.g.<code>fields._top=["session_expire"]</code>
        </ul>

        <a name="pagination"><h3>Pagination</h3></a>
        If pagination is applied to the list command the following parameters control pagination:
        <ul>
            <li>page.rows = Number of rows to return. The default is 100 or 1000 depending on the object type and the maximum is 5000
            <li>page.number = Which page number to display. The default is 1
        </ul>
        <p>
        The command will return a hash called page with the following parameters in it.
        <ul>
            <li> more - flag if there are more records
            <li> rows - The maximum number of rows in the page
            <li> number - The page number
        </ul>
        <a name="sort"><h3>Sorting</h3></a>
        If a  list can be sorted it will support the sort_by parameter in the call. The value of the sort_by parameter is a comma delimited list of fields with the direction of ordering (ascending or descending) appended to the field(s).
        For example
        <br><br>
        <code>
            sort_by=name-asc,date-desc,customfield-d3a6b1f8-a3af-4400-9b96-c5f1578d375d-desc
        </code>
        <br><br>
        will sort the results by name in ascending order and then date in descending order.<br>
        For customfield-UUID-(asc|desc) sorts type=number as interger, type=date as date, other types as strings.
        <p>
        Invalid sort_by values will return the following error messages
        <p><p>
        INVALID_SORT_FIELD &bull; The field is not valid for this object. The <i>error_subtype</i> will hold the field name this applies to<br>
        INVALID_SORT_ORDER &bull; The sort order for the field is invalid. The <i>error_subtype</i> will hold the field name this applies to<br>
        <p>

        <a name="bundled"><h3>Bundled calls</h3></a>
        You can bundle a series of calls into a single call to the server. To do this, POST to /bundle a textual representation of a JSON array of hashes. Each hash must contain the URL key with the value the
        API entry point, the rest of the keys should be the parameters for the call. The server will process all the calls in order and return a JSON array of the responses in the same order. For example to get
        the account detail and the user's permissions for the account in a single call send
        <br><br>
        <code>
            POST /bundle [<br>
            {"URL":"/account/get", "sid":"XYZ", "uuid":"ABC"},<br>
            {"URL":"/session/permissions", "sid":"XYZ", "account_id":"ABC"}<br>
            ]
        </code>
        <br><br>
        and you will get back an array with two hashes the containing the results of the call. If the POST is malformed the server will return an HTTP_BAD_REQUEST error code. The returned hashes have an additional
        HTTP_STATUS_CODE field with the result code for the request. Each call will return a hash even if it is an error hash so you can mix successful and unsuccessful calls and parse the results.
        <br><br>
        Within a bundled call you can use values from previous calls using templated values. If the value is of the form {{TOKEN}} the value will be substituted if TOKEN was returned by any of the previous calls.
        Here is an example of the usage
        <br><br>
        <code>
            POST /bundle [<br>
            {"URL":"/session/login", "login":"a@b.com", "password":"XYZ"},<br>
            {"URL":"/study/list", "sid":"{{sid}}"},<br>
            {"URL":"/study/get", "sid":"{{sid}}", "uuid":"{{studies.[0].uuid}}"}<br>
            ]
        </code>
        <br><br>
        The templated values can use dot notation to recurse into the arrays and hashes in the returned data structure as per the last line on the previous example.
        <br><br>
        Here is an example of how to run a bundled session from your desktop
        <ol>
            <li> Create a text file called data.json with the following text in it
            <pre>
            [
            {"URL":"/session/login", "login":"a@b.com", "password":"XYZ"},
            {"URL":"/study/list", "sid":"{{sid}}"},
            {"URL":"/study/get", "sid":"{{sid}}", "uuid":"{{studies.[0].uuid}}"}
            ]
            </pre>
            <li> Run it using curl<br>
            <code> curl -H "Content-Type: application/json" -X POST -d @data.json https://uat.dicomgrid.com/api/v3/bundle</code>
        </ol>

        <a name="permissions"><h3>Permissions</h3></a>
        A role has the following permission flags. The default roles are Admin, User, PHR and Anonymous and have the following settings.<br>
        An additional <code>role_id=role.UUID</code> is returned in each <i>permissions</i> JSON hash.
        <p>

        <table class="bordered-table">
            <tr>
                <th>Flag</th>
                <th>Admin<br>Value</th>
                <th>User<br>Value</th>
                <th>PHR<br>Value</th>
                <th>Anonymous<br>Value</th>
                <th>Description</th>
            </tr>
            <tr>
                <td>account_edit</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they add and edit the account</td>
            </tr>
            <tr>
                <td>account_view</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view account information</td>
            </tr>
            <tr>
                <td>account_user_view</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view or list the users in the account</td>
            </tr>
            <tr>
                <td>account_user_edit</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they add, edit and remove users from an account</td>
            </tr>
            <tr>
                <td>account_user_invite</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they invite users to an account</td>
            </tr>
            <tr>
                <td>user_edit</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they create and edit users on the grid</td>
            </tr>
            <tr>
                <td>destination_view</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view or list the destinations in the account</td>
            </tr>
            <tr>
                <td>destination_edit</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they add, edit and remove destinations from an account</td>
            </tr>
            <tr>
                <td>destination_search</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they search a destination</td>
            </tr>
            <tr>
                <td>destination_search_mwl</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they run a modality worklist search on a destination</td>
            </tr>
            <tr>
                <td>group_view</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view or list the groups in the account</td>
            </tr>
            <tr>
                <td>group_edit</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they add, edit and remove groups from an account</td>
            </tr>
            <tr>
                <td>group_clone</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they clone groups in the account</td>
            </tr>
            <tr>
                <td>location_view</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view or list the locations in the account</td>
            </tr>
            <tr>
                <td>location_edit</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they add, edit and remove locations from an account</td>
            </tr>
            <tr>
                <td>location_clone</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they clone locations in the account</td>
            </tr>
            <tr>
                <td>role_view</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view or list the roles in the account</td>
            </tr>
            <tr>
                <td>role_edit</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they add, edit and remove roles from an account</td>
            </tr>
            <tr>
                <td>route_view</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view or list the routes in the account</td>
            </tr>
            <tr>
                <td>role_setting_edit</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they call <a href="#role_settings">/role/settings</a> to set <i>role.settings</i>. Note: look <a href="#permission_setting_">permission setting_</a>.</td>
            </tr>
            <tr>
                <td>route_edit</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they add, edit and remove routes from an account</td>
            </tr>
            <tr>
                <td>node_view</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view or list the nodes in the account</td>
            </tr>
            <tr>
                <td>node_edit</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they add, edit and remove nodes from an account</td>
            </tr>
            <tr>
                <td>node_edit_own</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they add, edit and remove their own nodes from an account</td>
            </tr>
            <tr>
                <td>node_connect</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view and connect to public nodes</td>
            </tr>
            <tr>
                <td>node_approve_connect</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they approve connect to theirs public nodes</td>
            </tr>
            <tr>
                <td>study_approve</td>
                <td>1</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>Can they approve or reject shared studies in the account, group, location</td>
            </tr>
            <tr>
                <td>study_view</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>Can they view the studies in the account, group, location</td>
            </tr>
            <tr>
                <td>study_edit</td>
                <td>1</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>Can they edit the PHI of the study</td>
            </tr>
            <tr>
                <td>&#8627; study_edit_approved</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>0</td>
                <td>Can they edit the PHI of an approved study</td>
            </tr>
            <tr>
                <td>&#8627; study_edit_unapproved</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>0</td>
                <td>Can they edit the PHI of an unapproved study</td>
            </tr>
            <tr>
                <td>study_star</td>
                <td>1</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Can they star studies</td>
            </tr>
            <tr>
                <td>study_tag</td>
                <td>1</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Can they tag studies</td>
            </tr>
            <tr>
                <td>study_upload</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they upload a study to the account, group, location</td>
            </tr>
            <tr>
                <td>study_upload_validate</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>An upload requires session validation</td>
            </tr>
            <tr>
                <td>study_report_detail</td>
                <td>1</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>Can they get the detail report for studies in the account, group, location</td>
            </tr>
            <tr>
                <td>study_download</td>
                <td>1</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>Can they download the study</td>
            </tr>
            <tr>
                <td>study_download_viewer</td>
                <td>1</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>Can they download the local study viewer</td>
            </tr>
            <tr>
                <td>study_download_iso</td>
                <td>1</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>Can they download the study ISO</td>
            </tr>
            <tr>
                <td>study_browse</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>Can they view studies in the web viewer</td>
            </tr>
            <tr>
                <td>study_push</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they push the study to a destination</td>
            </tr>
            <tr>
                <td>study_share</td>
                <td>1</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>Can they share the study</td>
            </tr>
            <tr>
                <td>&#8627; study_share_email</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>Can they share the study via email</td>
            </tr>
            <tr>
                <td>&#8627; study_share_share_code</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>0</td>
                <td>Can they share the study via a share code</td>
            </tr>
            <tr>
                <td>&#8627; study_share_account</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>0</td>
                <td>Can they share the study with  accounts</td>
            </tr>
            <tr>
                <td>&#8627; study_share_location</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>0</td>
                <td>Can they share the study with locations</td>
            </tr>
            <tr>
                <td>&#8627; study_share_group</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>0</td>
                <td>Can they share the study with groups</td>
            </tr>
            <tr>
                <td>&#8627; study_share_user</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>0</td>
                <td>Can they share the study with users</td>
            </tr>
            <tr>
                <td>&#8627; study_share_rsna</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they share the study with the RSNA network</td>
            </tr>
            <tr>
                <td>&#8627; study_share_npi</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they share the study with a NPI number</td>
            </tr>
            <tr>
                <td>&#8627; study_share_request</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they share the study by a study request</td>
            </tr>
            <tr>
                <td>study_delete</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>Can they delete a study</td>
            </tr>
            <tr>
                <td>study_delete_image</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they delete images and series within a study</td>
            </tr>
            <tr>
                <td>study_thin</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they create a thin study</td>
            </tr>
            <tr>
                <td>study_report_view</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>Can they view attached reports for a study</td>
            </tr>
            <tr>
                <td>study_report_view_approved</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>Can they view attached reports for an approved study</td>
            </tr>
            <tr>
                <td>study_report_view_unapproved</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view attached reports for an unapproved study</td>
            </tr>
            <tr>
                <td>study_report_view_only_own</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they only view reports they attached to the study</td>
            </tr>
            <tr>
                <td>study_timing_view</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view the timing log for a study</td>
            </tr>
            <tr>
                <td>study_report_hl7_view</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>Can they view HL7 reports for a study</td>
            </tr>
            <tr>
                <td>study_report_hl7_view_approved</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>Can they view HL7 reports for an approved study</td>
            </tr>
            <tr>
                <td>study_report_hl7_view_unapproved</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view HL7 reports for an unapproved study</td>
            </tr>
            <tr>
                <td>study_report_upload</td>
                <td>1</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>Can they upload a report to a study</td>
            </tr>
            <tr>
                <td>study_report_upload_approved</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>0</td>
                <td>Can they upload a report to an approved study</td>
            </tr>
            <tr>
                <td>study_report_upload_unapproved</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they upload a report to an unapproved study</td>
            </tr>
            <tr>
                <td>study_report_delete</td>
                <td>1</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>Can they delete a report from a study</td>
            </tr>
            <tr>
                <td>study_report_delete_approved</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>0</td>
                <td>Can they delete a report from an approved study</td>
            </tr>
            <tr>
                <td>study_report_delete_unapproved</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they delete a report from an unapproved study</td>
            </tr>
            <tr>
                <td>study_send_status_view</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>Can they view study push statuses when enabled</td>
            </tr>
            <tr>
                <td>study_sync</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they force a study to sync against storage and re-run routing rules</td>
            </tr>
            <tr>
                <td>study_status_view</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view the status of the study</td>
            </tr>
            <tr>
                <td>study_status_edit</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they edit the status of the study</td>
            </tr>
            <tr>
                <td>study_status_manual_edit</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>Can they manually edit the status of the study if study_status_edit is enabled</td>
            </tr>
            <tr>
                <td>study_status_tags_ignore_rules</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they ignore behaviour of account.settings.<i>study_status_tags_rules</i></td>
            </tr>
            <tr>
                <td>study_comment_view</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view the comments for the study</td>
            </tr>
            <tr>
                <td>study_comment_edit</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they edit comments for the study</td>
            </tr>
            <tr>
                <td>study_audio_record</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they record an audio report for the study</td>
            </tr>
            <tr>
                <td>study_audio_play</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they playback audio reports for the study</td>
            </tr>
            <tr>
                <td>study_move</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they move the study to another PHI namespace</td>
            </tr>
            <tr>
                <td>study_freeze</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they freeze or thaw the study</td>
            </tr>
            <tr>
                <td>study_duplicate</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they duplicate studies to another namespace</td>
            </tr>
            <tr>
                <td>study_clone</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they clone studies to the same namespace with new study, series and image UIDs</td>
            </tr>
            <tr>
                <td>study_duplicate_request</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they duplicate studies by a study requests</td>
            </tr>
            <tr>
                <td>study_manual_route</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they manually route a study</td>
            </tr>
            <tr>
                <td>study_split</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they split a study</td>
            </tr>
            <tr>
                <td>study_merge</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they merge studies together</td>
            </tr>
            <tr>
                <td>study_take</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they take a study into namespace with <a href="#study_take">/study/take</a></td>
            </tr>
            <tr>
                <td>study_request_edit</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they create study requests</td>
            </tr>
            <tr>
                <td>study_request_view</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view outgoing study requests</td>
            </tr>
            <tr>
                <td>study_request_view_only_own</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they only view their own study requests</td>
            </tr>
            <tr>
                <td>study_request_view_inbound</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view incoming study requests</td>
            </tr>
            <tr>
                <td>
                    study_field_patient_name<br>
                    study_field_patientid<br>
                    study_field_study_description<br>
                    study_field_accession_number<br>
                    study_field_modality<br>
                    study_field_referring_physician<br>
                    study_field_patient_sex<br>
                    study_field_study_date<br>
                    study_field_patient_birth_date<br>
                    study_field_customfield_UUID<br>
                </td>
                <td>F</td>
                <td>F</td>
                <td>F</td>
                <td>F</td>
                <td>Permission for study fields. Customfields contain the UUID of the customfield. Valid values are.
                    <ul>
                        <li> F = Full permissions
                        <li> H = Hidden field
                        <li> O = Read only field
                        <li> R = Required field
                    </ul>
                </td>
            </tr>
            <tr>
                <td><a name="permission_setting_"></a>
                    setting_{SETTING_NAME}
                </td>
                <td>1</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Permission for set <i>role.setings.{SETTING_NAME}</i> in <a href="#role_settings">/role/settings</a>.
                    <ul>
                        <li> 1 = allowed (default)
                        <li> 0 = disallowed
                    </ul>
                </td>
            </tr>
            <tr>
                <td>audit_view</td>
                <td>1</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>Can they view audit information</td>
            </tr>
            <tr>
                <td>analytics_view</td>
                <td>1</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>Can they view analytics information</td>
            </tr>
            <tr>
                <td>study_search_require_patient_name</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Patient name is required for a study search</td>
            </tr>
            <tr>
                <td>study_search_require_patient_sex</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Patient gender is required for a study search</td>
            </tr>
            <tr>
                <td>study_search_require_accession_number</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Accession number is required for a study search</td>
            </tr>
            <tr>
                <td>study_search_require_patient_birth_date</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Patient birth date is required for a study search</td>
            </tr>
            <tr>
                <td>study_search_require_patientid</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>MRN is required for a study search</td>
            </tr>
            <tr>
                <td>pathology_upload</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they upload pathology report</td>
            </tr>
            <tr>
                <td>filter_share</td>
                <td>1</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>Can they share filters</td>
            </tr>
            <tr>
                <td>filter_edit_only_own</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they only edit their own filters</td>
            </tr>
            <tr>
                <td>customfield_view</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view or list the customfields in the account for administration purposes</td>
            </tr>
            <tr>
                <td>customfield_list</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view or list the customfields in the account for account introspection purposes</td>
            </tr>
            <tr>
                <td>customfield_edit</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they add, edit and remove customfields from an account</td>
            </tr>
            <tr>
                <td>case_view</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view or list the cases in the account</td>
            </tr>
            <tr>
                <td>case_view_only_own</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they only view or list their own cases in the account (when assigned as medical user)</td>
            </tr>
            <tr>
                <td>case_edit</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they add, edit and remove cases from an account</td>
            </tr>
            <tr>
                <td>case_edit_only_own</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they only edit and remove their own cases from an account (when assigned as medical user)</td>
            </tr>
            <tr>
                <td>case_delete</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they delete cases</td>
            </tr>
            <tr>
                <td>customcode_view</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view or list the code in the account</td>
            </tr>
            <tr>
                <td>customcode_edit</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they add, edit and remove code from an account</td>
            </tr>
            <tr>
                <td>customcode_deploy</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they deploy code for a namespace</td>
            </tr>
            <tr>
                <td>patient_view</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view or list the patients in the account</td>
            </tr>
            <tr>
                <td>patient_edit</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they add, edit and remove patients from an account</td>
            </tr>
            <tr>
                <td>patient_merge</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they merge patients in the account</td>
            </tr>
            <tr>
                <td>order_view</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view or list the orders in the account</td>
            </tr>
            <tr>
                <td>order_edit</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they add, edit and remove orders from an account</td>
            </tr>
            <tr>
                <td>webhook_view</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view or list the webhooks in the account</td>
            </tr>
            <tr>
                <td>webhook_edit</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they add, edit and remove webhooks from an account</td>
            </tr>
                <td>webhook_run</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they manually run a webhook</td>
            </tr>
            <tr>
                <td>can_proxy_login</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they proxy login for "owned" users in an account</td>
            </tr>
            <tr>
                <td>radreport_view</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view or list the radreports in the account</td>
            </tr>
            <tr>
                <td>radreport_view_only_own</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view only their radreports</td>
            </tr>
            <tr>
                <td>radreport_edit</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they add, edit and remove radreports from an account</td>
            </tr>
            <tr>
                <td>radreport_html_format</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they use HTML formatting in radreports</td>
            </tr>
            <tr>
                <td>dictionary_view</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view or list the dictionaries in the account</td>
            </tr>
            <tr>
                <td>dictionary_edit</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they add, edit and remove dictionaries from an account</td>
            </tr>
            <tr>
                <td>hl7_message_view</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view or list the HL7 messages in the account</td>
            </tr>
            <tr>
                <td>hl7_message_delete</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they delete the HL7 messages in the account</td>
            </tr>
            <tr>
                <td>hl7_template_view</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view or list the HL7 templates in the account</td>
            </tr>
            <tr>
                <td>hl7_template_edit</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they add, edit and remove HL7 templates from an account</td>
            </tr>
            <tr>
                <td>hl7_transform_view</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view or list the HL7 transformations in the account</td>
            </tr>
            <tr>
                <td>hl7_transform_edit</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they add, edit and remove HL7 transformations from an account</td>
            </tr>
            <tr>
                <td>annotation_view</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>Can they view annotations on a study</td>
            </tr>
            <tr>
                <td>annotation_view_only_own</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view only their annotations on a study</td>
            </tr>
            <tr>
                <td>annotation_edit</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>0</td>
                <td>Can edit annotations on a study</td>
            </tr>
            <tr>
                <td>annotation_edit_only_own</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>Can they only edit their annotations on a study</td>
            </tr>
            <tr>
                <td>meeting_view</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>Can they view meetings for a study</td>
            </tr>
            <tr>
                <td>meeting_edit</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can create and edit meetings for a study</td>
            </tr>
            <tr>
                <td>appointment_view</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view or list the appointments in the account</td>
            </tr>
            <tr>
                <td>appointment_view_only_own</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view only their appointments</td>
            </tr>
            <tr>
                <td>appointment_edit</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they add, edit and remove appointments from an account</td>
            </tr>
            <tr>
                <td>keyimage_view</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>Can they view key images on a study</td>
            </tr>
            <tr>
                <td>keyimage_edit</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>0</td>
                <td>Can edit key images on a study</td>
            </tr>
            <tr>
                <td>validate_view</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view or list the validation rules in the account</td>
            </tr>
            <tr>
                <td>validate_edit</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they add, edit and remove validation rules from an account</td>
            </tr>
            <tr>
                <td>dicomdata_view</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view the DICOM data for a study</td>
            </tr>
            <tr>
                <td>dicomdata_edit</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they edit the DICOM data for a study</td>
            </tr>
            <tr>
                <td>purge_view</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view or list the purge rules in the account</td>
            </tr>
            <tr>
                <td>purge_edit</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they add, edit and remove purge rules from an account</td>
            </tr>
            <tr>
                <td>link_direct</td>
                <td>1</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view and copy the direct link to the study</td>
            </tr>
            <tr>
                <td>link_view</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view or list the links in the account</td>
            </tr>
            <tr>
                <td>link_edit</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they add, edit and remove links from an account</td>
            </tr>
            <tr>
                <td>link_edit_pin</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they generate a one-time pin for a link</td>
            </tr>
            <tr>
                <td>link_edit_upload</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they add, edit and remove study upload links from an account</td>
            </tr>
            <tr>
                <td>message_view</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>0</td>
                <td>Can they view messages in the namespace</td>
            </tr>
            <tr>
                <td>message_edit</td>
                <td>1</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>Can they send messages to the namespace</td>
            </tr>
            <tr>
                <td>user_modify_sharecode</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>0</td>
                <td>Can they modify their personal share code</td>
            </tr>
            <tr>
                <td>user_modify_defaults</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>0</td>
                <td>Can they modify their personal defaults</td>
            </tr>
            <tr>
                <td>user_modify_notifications</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>0</td>
                <td>Can they modify their notifications</td>
            </tr>
            <tr>
                <td>user_view_others_notifications</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>0</td>
                <td>Can they view other user's notifications</td>
            </tr>
            <tr>
                <td>user_modify_others_notifications</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they modify other user's notifications</td>
            </tr>
            <tr>
                <td>user_modify_others_email</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they modify other user's email address</td>
            </tr>
            <tr>
                <td>user_modify_others_pkey</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they modify other user's public key</td>
            </tr>
            <tr>
                <td>user_request_access</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>0</td>
                <td>Can they request access to an org</td>
            </tr>
            <tr>
                <td>user_edit_shared_filter</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they edit saved searches that have been shared with them</td>
            </tr>
            <tr>
                <td>channel_activity</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>0</td>
                <td>Can they subscribe to an activity channel</td>
            </tr>
            <tr>
                <td>channel_study</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>Can they subscribe to a job channel</td>
            </tr>
            <tr>
                <td>viewer_config</td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td>JSON viewer configuration for the role. Optionally pass in the UUID of a user and that user's viewer configuration will be copied into the role</td>
            </tr>
            <tr>
                <td>viewer3_config</td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td>JSON hash for the viewer3 configuration for the role.</td>
            </tr>
            <tr>
                <td>ui_json</td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td>JSON structure to control the application UI</td>
            </tr>
            <tr>
                <td>namespace_question</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they ask AI questions for a namespace</td>
            </tr>
            <tr>
                <td>job_view</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>Can they view asynchronous job statuses</td>
            </tr>
            <tr>
                <td>site_add</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they add sites to the account</td>
            </tr>
            <tr>
                <td>site_edit>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they edit sites in the account</td>
            </tr>
            <tr>
                <td>site_view</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view sites in the account</td>
            </tr>
            <tr>
                <td>site_delete</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they delete sites from the account</td>
            </tr>
            <tr>
                <td>site_qualify</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they qualify sites for a trial and inactivate sites</td>
            </tr>
            <tr>
                <td>scanner_add</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they add scanners</td>
            </tr>
            <tr>
                <td>scanner_edit</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they edit scanners</td>
            </tr>
            <tr>
                <td>scanner_view</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view scanners</td>
            </tr>
            <tr>
                <td>scanner_delete</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they delete scanners</td>
            </tr>
            <tr>
                <td>site_user_add</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they add users to site contact lists</td>
            </tr>
            <tr>
                <td>site_user_edit</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they edit users in site contact lists</td>
            </tr>
            <tr>
                <td>site_user_view</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view site contact lists</td>
            </tr>
            <tr>
                <td>site_user_delete</td>
                <td>09</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they delete users from site contact lists</td>
            </tr>
            <tr>
                <td>terminology_view</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they see the terminology administration tab</td>
            </tr>
            <tr>
                <td>terminology_edit</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they edit terminology records</td>
            </tr>
            <tr>
                <td>query_add</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they add queries owned by the namespace</td>
            </tr>
            <tr>
                <td>query_edit</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they edit queries owned by the namespace</td>
            </tr>
            <tr>
                <td>query_view</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view queries owned by the namespace</td>
            </tr>
            <tr>
                <td>query_view_meta</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view query metadata for queries owned by the namespace</td>
            </tr>
            <tr>
                <td>query_view_only_own</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>Can they only view queries owned by them</td>
            </tr>
            <tr>
                <td>query_delete</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they delete queries owned by the namespace</td>
            </tr>
            <tr>
                <td>query_reply</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they reply in queries owned by the namespace</td>
            </tr>
            <tr>
                <td>query_attachment_add</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they add attachments to queries owned by the namespace</td>
            </tr>
            <tr>
                <td>query_attachment_view</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view attachments of queries owned by the namespace</td>
            </tr>
            <tr>
                <td>query_attachment_delete</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they delete attachments from queries owned by the namespace</td>
            </tr>
            <tr>
                <td>query_attachment_delete_only_own</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>Can they only delete query attachments added by them</td>
            </tr>
            <tr>
                <td>qctask_add</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they add QC tasks assigned to the namespace</td>
            </tr>
            <tr>
                <td>qctask_edit</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they edit QC tasks assigned to the namespace</td>
            </tr>
            <tr>
                <td>qctask_view</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they view QC tasks assigned to the namespace</td>
            </tr>
            <tr>
                <td>qctask_delete</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they delete QC tasks assigned to the namespace</td>
            </tr>
            <tr>
                <td>qctask_prioritize</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Can they change priorities of QC tasks assigned to the namespace</td>
            </tr>
        </table>

        <a name="schedule"><h3>Schedules</h3></a>
        Objects with schedules support a JSON hash with the following fields
        <p>
        <ul>
            <li> start - The daily start time in 24hr HH:MM format
            <li> stop - The daily stop time in 24hr HH:MM format
            <li> mon - Flag if the start and end time should be applied on this day
            <li> tue - Flag if the start and end time should be applied on this day
            <li> wed - Flag if the start and end time should be applied on this day
            <li> thu - Flag if the start and end time should be applied on this day
            <li> fri - Flag if the start and end time should be applied on this day
            <li> sat - Flag if the start and end time should be applied on this day
            <li> sun - Flag if the start and end time should be applied on this day
            <li> tz - The timezone for the schedule. The currently support values for this are.
            <ul>
                <li>US/Eastern
                <li>US/Central
                <li>US/Mountain
                <li>US/Arizona
                <li>US/Pacific
                <li>US/Alaska
                <li>Brazil/East
                <li>Brazil/West
                <li>Africa/Johannesburg
                <li>Europe/London
                <li>Asia/Shanghai
            </ul>
            <li> invert - A flag which means run the schedule outside the scheduled times rather than during it. This is useful for setting a "reverse" schedule. i.e. during business hours do "A", the rest of the time do "B".
        </ul>

        <a name="account-settings"><h3>Account settings</h3></a>
        Account setting control the application workflow and UI for an account. The following settings are available.

        <table class="bordered-table">
            <tr>
                <th>Name</th>
                <th>Type</th>
                <th>Default</th>
                <th>Un-authenticated<br>access<br>allowed</th>
                <th>User<br>override<br>allowed</th>
                <th>Namespace<br>override<br>allowed</th>
                <th>Node<br>override<br>allowed</th>
                <th>Role<br>override<br>allowed</th>
                <th>Description</th>
            </tr>
            <tr>
                <td>show_hl7_report_physician_alias_regexp</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Show the hl7_report_physician_alias_regexp option for the routing rules in the UI</td>
            </tr>
            <tr>
                <td>update_study_source_on_notify</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Update the study source for every notification</td>
            </tr>
            <tr>
                <td>allow_phr_upload</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Allow study upload into the PHR namespaces for users associated with this account</td>
            </tr>
            <tr>
                <td>enable_credit_card_processor</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Enable credit card processing for the account</td>
            </tr>
            <tr>
                <td>paypal_account</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>The paypal account email for credit card processing</td>
            </tr>
            <tr>
                <td>request_join_on_vanity_registration</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Automatically submit a join request if a user registers under a vanity domain</td>
            </tr>
            <tr>
                <td>vanity_registration_customfields</td>
                <td>Text</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Comma-delimited list of customfield uuids to show on vanity registration page</td>
            </tr>
            <tr>
                <td>login_json</td>
                <td>Text</td>
                <td></td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>JSON structure to control the login page HTML</td>
            </tr>
            <tr>
                <td>ui_json</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>1</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>JSON structure to control the application UI:
                    <ul>
                        <li>
                            always_show_advanced_search (boolean) &bull; force the study list advanced search to unfurl
                        </li>
                        <li>
                            include_first_name_advanced_search (boolean) &bull; add a first name field to the study list advanced search, append it with wildcard separator to the last name when posting to services
                        </li>
                        <li>
                            add_study_dropdown_is_button (boolean) &bull; the study list "Add Study" dropdown becomes a button when there is only one action
                        </li>
                        <li>
                            view_study_button_action (text) &bull; Action token to trigger when view study button is clicked
                            <div>Possible view study actions:</div>
                            <ul>
                                <li>browse-study - Open with Study Viewer</li>
                                <li>browse-study-new-tab - Open with Study Viewer in New Tab</li>
                                <li>browse-study-new-window - Open with Study Viewer in New Window</li>
                                <li>browse-study-ambra - Open with Ambra Study Viewer</li>
                                <li>browse-study-ambra-new-tab - Open with Ambra Study Viewer in New Tab</li>
                                <li>browser-study-ambra-new-window - Open with Ambra Study Viewer in New Window</li>
                                <li>browse-as-related-study - Open as Related Study</li>
                                <li>browse-study-no-canvas - Open with Simple Viewer</li>
                                <li>browse-study-webgl - Open with WebGL Viewer</li>
                                <li>browse-key-images - View Key Images</li>
                                <li>browse-study-dashboard - View Study Dashboard</li>
                                <li>browse-study-viewer-report-split - Open Study Viewer with Reporting</li>
                            </ul>
                        </li>
                        <li>
                            view_study_dropdown_actions (JSON) &bull; Array of action tokens for view study dropdown
                            <div>Possible view study actions are the same as above setting</div>
                        </li>
                        <li>
                            default_date_format (string) &bull; Date format to be used for patient portal
                        </li>
                        <li>
                            view_study_namespace_filter_types (array) &bull; Show selected types of namespaces in the study list namespace dropdown. If none are selected, all types will show
                            <div>Possible options:</div>
                            <ul>
                                <li>account_id</li>
                                <li>location_id</li>
                                <li>group_id</li>
                                <li>user_id</li>
                            </ul>
                        </li>
                        <li>
                            view_study_namespace_filter_types_role_id (string) &bull; Study list namespace filter role. Namespace type filter applies for users with this role.
                        </li>
                        <li>
                            mwl_search_filters (array) &bull; Specifies MWL Search dropdown filter options. If none are selected, all filters will show.
                            <div>Possible filter options:</div>
                            <ul>
                                <li>mwl_search_filter_patient-name</li>
                                <li>mwl_search_filter_patient-sex</li>
                                <li>mwl_search_filter_dob</li>
                                <li>mwl_search_filter_mrn</li>
                                <li>mwl_search_filter_accession-number</li>
                                <li>mwl_search_filter_order-number</li>
                                <li>mwl_search_filter_order-date</li>
                            </ul>
                        </li>
                        <li>
                            mwl_must_match_fields (array) &bull; MWL must match fields. User will see a confirmation modal if they're not match.
                            <div>Possible options:</div>
                            <ul>
                                <li>patient_name</li>
                                <li>patient_sex</li>
                                <li>patient_birth_date</li>
                                <li>patientid</li>
                                <li>accession_number</li>
                                <li>study_description</li>
                                <li>modality</li>
                                <li>referring_physician</li>
                            </ul>
                        </li>
                        <li>
                            study_edit_reason_per_field (boolean) &bull; display one reason field for each edited study field
                        </li>
                        <li>
                            study_oru_report_limit (number) &bull; Only show that number of latest ORU in the Study Reports dropdown. Zero value is for no limit
                        </li>
                        <li>
                            enable_patient_search_in_order_create_form (boolean) &bull; Enable patient search in order create form
                        </li>
                        <li>
                            enable_first_last_in_order_create_form (boolean) &bull; Enable first/last names in order create form
                        </li>
                        <li>
                            enable-order-physicians-predefined-values (boolean) &bull; Enable order physicians predefined values
                        </li>
                        <li>
                            order_referring_physicians (array) &bull; list of predefined values for quick order creation
                        </li>
                        <li>
                            enable-order-descriptions-predefined-values (boolean) &bull; Enable order descriptions predefined values
                        </li>
                        <li>
                            order_descriptions (array) &bull; list of predefined description for quick order creation
                        </li>
                        <li>
                            enable-order-accnum-generation (boolean) &bull; Automatically generate orders accession numbers. You also need to configure a special dictionary.
                        </li>
                        <li>
                            order-default-aetitle (string) &bull; Orders default AE title
                        </li>
                        <li>
                            orders_req_fields (array) &bull; Orders additional required fields. If nothing selected only standart fields are required: Patient Name, Patient ID, AETitle, Modality
                            <div>Possible options:</div>
                            <ul>
                                <li>accession_number</li>
                                <li>patient_sex</li>
                                <li>patient_birth_date</li>
                                <li>referring_physician</li>
                                <li>requested_procedure_description</li>
                                <li>scheduled_procedure_step_start_date</li>
                                <li>scheduled_procedure_step_start_time</li>
                            </ul>
                        </li>
                        <li>
                            enable-study-reject-predefined-messages (boolean) &bull; Enable study reject predefined messages
                        </li>
                        <li>
                            study_reject_messages (array) &bull; list of predefined messages you can choose rejecting study in activities
                        </li>
                        <li>
                            is_utility_account (boolean) &bull; Makes account as utility. Even if user has no permissions UI elements will be visible but disabled
                        </li>
                        <li>
                            utility_elements_blacklist (array) &bull; ability to disable any UI element in the utility account (ex. upload buttons, tabs, etc)
                        </li>
                        <li>
                            advanced_search (array) &bull; list of fields visible in advanced search. All fields will show if list is empty
                            <div>Possible options:</div>
                            <ul>
                                <li>patient_name</li>
                                <li>patient_sex</li>
                                <li>patientid</li>
                                <li>patient_birth_date</li>
                                <li>accession_number</li>
                                <li>study_description</li>
                                <li>referring_physician</li>
                                <li>study_status</li>
                                <li>study_push_status</li>
                                <li>study_push_status.destination_uuid</li>
                                <li>date_range</li>
                                <li>created_range</li>
                                <li>star</li>
                                <li>thin</li>
                                <li>modality</li>
                                <li>study_uid</li>
                                <li>uuid</li>
                                <li>tags</li>
                                <li>customfield-UUID you can specify any custom field</li>
                            </ul>
                        </li>
                        <li>
                            internal_notes (string) &bull; any notes administrator can write and save
                        </li>
                        <li>
                            study_list_send_messages (boolean) &bull; enable sending messages from study list
                        </li>
                        <li>
                            activity_list_send_messages (boolean) &bull; enable sending messages from activity list
                        </li>
                        <li>
                            study_messages_to_users (boolean) &bull; Ability to select a user when sending message from the worklist or activities
                        </li>
                        <li>
                            enable_gateway_queue_status (boolean) &bull; Show/hide gateway status
                        </li>
                        <li>
                            show_user_analytics (boolean) &bull; Show "User Analytics" sub tab in Analytics section
                        </li>
                        <li>
                            query_retrieve_form_fields (array) &bull; Query retrieve form fields. All fields will show if nothing is selected
                            <div>Possible options:</div>
                            <ul>
                                <li>patient_name</li>
                                <li>patient_sex</li>
                                <li>patientid</li>
                                <li>patient_dob</li>
                                <li>study_uid</li>
                                <li>accession_number</li>
                                <li>referring_physician</li>
                                <li>modality</li>
                                <li>start_datetime</li>
                                <li>end_datetime</li>
                                <li>create_study</li>
                                <li>create_thin</li>
                            </ul>
                        </li>
                        <li>
                            user_setting_default-user_list_sort_study_list (string) &bull; study list initial sort
                            <div>Possible options:</div>
                            <ul>
                                <li>study_date-asc,study_time-asc</li>
                                <li>study_date-desc,study_time-desc</li>
                            </ul>
                        </li>
                        <li>
                            limit_gateway_status_queues (array) &bull; Gateway Status Queues
                            <div>Possible options:</div>
                            <ul>
                                <li>BURN</li>
                                <li>DOWNLOAD</li>
                                <li>DOWNLOADTRANSCODE</li>
                                <li>HL7CLIENT</li>
                                <li>HL7UPLOAD</li>
                                <li>MOVE</li>
                                <li>QUERYCLIENT</li>
                                <li>RETRIEVECLIENT</li>
                                <li>STORAGECOMMIT</li>
                                <li>UPLOAD</li>
                                <li>UPLOADTRANSCODE</li>
                            </ul>
                        </li>
                        <li>
                            remove-send-status-icon-after-days (number) &bull; Remove Send Status icon after this amount of days. Send status icon is displayed forever if nothing specified
                        </li>
                        <li>
                            activities-default-sub-tab (string) &bull; Activities default sub tab
                            <div>Possible options:</div>
                            <ul>
                                <li>STUDY_APPROVE</li>
                                <li>DESTINATION_SEARCH</li>
                                <li>USER_INVITE</li>
                                <li>JOIN_REQUEST</li>
                                <li>STUDY_REQUEST</li>
                                <li>NODE_CONNECT</li>
                            </ul>
                        </li>
                        <li>
                            enable-patient-mrn-generation (boolean) &bull; Automatically generate patient MRN numbers. You also need to configure speciial dictionary for this feature
                        </li>
                        <li>
                            worklist_reset_search_login (boolean) &bull; Start user session with empty search criteria
                        </li>
                        <li>
                            separate_non_dicom_upload_form (boolean) &bull;  Separate DICOM and Non-DICOM upload forms
                        </li>
                        <li>
                            study_oru_report_limit (boolean) &bull;  Only show most recent ORU in reports popup
                        </li>
                        <li>
                            enable_orders_link (boolean) &bull;  Enable finding orders in the study list
                        </li>
                        <li>
                            uncheck_send_notification_by_default (boolean) &bull;  Uncheck "Send a notification email to user's email address" checkbox by default
                        </li>
                        <li>
                            patient_default_event_share (boolean) &bull;  Use Event Share = 1 by default when creating Patient via UI
                        </li>
                        <li>
                            show_study_actions_in_user_audit_trail (boolean) &bull;  Show study actions in User's audit trail
                        </li>
                        <li>
                            show_last_login_date_in_user_list (boolean) &bull;  Show date of last login in the user list
                        </li>
                        <li>
                            show_under_approval_reason (boolean) &bull;  Show why the study is under approval
                        </li>
                        <li>
                            study_custom_field_customization (array of objects) &bull;  Study Custom Field color customization
                            <div>Possible object fields:</div>
                            <ul>
                                <li>uuid (string) &bull; uuid of the custom field</li>
                                <li>color (string) &bull; css color attribute value</li>
                                <li>forms (array) &bull; array of forms that field customization applied to ("share_form", "upload_form", "edit_form", "study_list")</li>
                                <li>field-parts (array) &bull; array of field parts to be painted ("label", "value", "border", "input-value")</li>
                            </ul>
                        </li>
                        <li>
                            require_guest_link_password (boolean) &bull; Require password for a Guest study link
                        </li>
                        <li>
                            enable_study_list_context_menu (boolean) &bull; Show study List Context Menu
                        </li>
                        <li>
                            study_list_context_menu (array) &bull; List of items
                            <div>Possible options:</div>
                            <ul>
                                <li>images</li>
                                <li>retrieve</li>
                                <li>edit</li>
                                <li>download</li>
                                <li>download_iso</li>
                                <li>download_viewer</li>
                                <li>export_csv</li>
                                <li>study_link</li>
                                <li>study_audit</li>
                                <li>reports</li>
                                <li>send</li>
                                <li>share</li>
                                <li>remove_share</li>
                                <li>change_study_stage</li>
                                <li>split</li>
                                <li>delete</li>
                            </ul>
                        </li>
                        <li>
                            request_study_customfields (array of uuid) &bull; Request Study custom fields (e.g. ["e54f5da0-5287-4688-9783-11de90099b23"])
                        </li>
                        <li>
                            worklist_phi_fields_customization (array of objects) &bull; PHI fields customization
                            <div>For example:</div>
                            <pre>
[{"field":"PatientName","type":"primary"}]
                            </pre>
                            <div>Possible field values:</div>
                            <ul>
                                <li>PatientName</li>
                                <li>StudyDescription</li>
                                <li>PatientSex</li>
                                <li>PatientBitrhDate</li>
                                <li>PatientId</li>
                                <li>Modality</li>
                                <li>AccessionNumber</li>
                                <li>ReferringPhysician</li>
                            </ul>
                            <div>Possible type values:</div>
                            <ul>
                                <li>primary</li>
                                <li>secondary</li>
                            </ul>
                        </li>
                        <li>
                            case_days_old_colors (array of objects) &bull; Case Days Old Color
                            <div>For example:</div>
                            <pre>
[{ "days": 10, "color": "white", "background": "black" }]
                            </pre>
                            <div>Possible colors:</div>
                            <ul>
                                <li>white</li>
                                <li>silver</li>
                                <li>gray</li>
                                <li>black</li>
                                <li>red</li>
                                <li>maroon</li>
                                <li>yellow</li>
                                <li>olive</li>
                                <li>lime</li>
                                <li>green</li>
                                <li>aqua</li>
                                <li>teal</li>
                                <li>blue</li>
                                <li>navy</li>
                                <li>fuchsia</li>
                                <li>purple</li>
                            </ul>
                        </li>
                        <li>
                            enable_epic_find_order (boolean) &bull; Enable separate FHIR patient lookup button in activities
                        </li>
                        <li>
                            fhir_search_filters (array) &bull; Configure FHIR lookup search by fields. All fields available if nothing selected
                            <div>Possible options:</div>
                            <ul>
                                <li>accession_number</li>
                                <li>patientid</li>
                                <li>patient_name</li>
                            </ul>
                        </li>
                        <li>
                            split_save_approve_activity (boolean) &bull; Split Save and Approve button into two buttons in activities
                        </li>
                        <li>
                            hide_site_information (boolean) &bull; Hide "Site Information" button in the location/group list
                        </li>
                        <li>
                            study_browse_reason_to_view (boolean) &bull; Enable request of study view reason before image browse
                        </li>
                        <li>
                            move_to_after_approval (boolean) &bull; ability to move study to another namespace after approval. 'study_move' permission required.
                        </li>
                        <li>
                            move_to_before_approval (boolean) &bull; ability to move study activity to another namespace. 'study_move' permission required.
                        </li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td>pacs_config_customized</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>JSON structure for PACS. Look <a href="#permission_setting_">permission setting_{SETTING_NAME}</a> for permission flags.</td>
            </tr>
            <tr>
                <td>baa_text</td>
                <td>Text</td>
                <td></td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>The HTML to display next to a BAA checkbox that must be accepted for registration</td>
            </tr>
            <tr>
                <td>training_text</td>
                <td>Text</td>
                <td></td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>The HTML to display for the training manual link</td>
            </tr>
            <tr>
                <td>faq_text</td>
                <td>Text</td>
                <td></td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>The HTML to display for the FAQ link</td>
            </tr>
            <tr>
                <td>other_manual_text</td>
                <td>Text</td>
                <td></td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>The HTML to display for the "other" manual link</td>
            </tr>
            <tr>
                <td>pin_auth_text</td>
                <td>Text</td>
                <td></td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>The HTML to display for a failed pin_auth for /link/session</td>
            </tr>
            <tr>
                <td>homepage_links</td>
                <td>Text</td>
                <td></td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>A JSON list of hashes of the links to display on the home page</td>
            </tr>
            <tr>
                <td>enable_dicom_wrapping</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Enable dicom wrapping support on uploading</td>
            </tr>
            <tr>
                <td>auto_enable_dicom_wrapping</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Enable dicom wrapping support on uploading if no DICOM is detected</td>
            </tr>
            <tr>
                <td>single_file_dicom_wrapping</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Limit DICOM wrapping on upload to a single file</td>
            </tr>
            <tr>
                <td>disable_mobile_dicom_wrapping</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Disable dicom wrapping support on uploading for mobile devices</td>
            </tr>
            <tr>
                <td>enable_multipart_uploader</td>
                <td>Flag</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Enable multipart uploading</td>
            </tr>
            <tr>
                <td>allow_drag_and_drop_in_study_uploader</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Allow Drag-n-Drop in the web uploader</td>
            </tr>
            <tr>
                <td>enable_dicom_deidentification</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Enable the dicom de-identification tool on uploading</td>
            </tr>
            <tr>
                <td>dicom_deidentification_at_ingress</td>
                <td>Flag</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>De-identify at ingress</td>
            </tr>
            <tr>
                <td>enable_dicomdir_scan</td>
                <td>Flag</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Enable dicomdir scanning on uploading</td>
            </tr>
            <tr>
                <td>from_email_address</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Use this email address as the from address for email sent from the account. This will be validated as an email address</td>
            </tr>
            <tr>
                <td>from_email_name</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Use this display name in emails for email sent from the account.</td>
            </tr>
            <tr>
                <td>enable_v2_viewer</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Use the version 2 viewer for this account</td>
            </tr>
            <tr>
                <td>enable_v3_viewer</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Use the version 3 proviewer for this account</td>
            </tr>
            <tr>
                <td>auto_create_patient</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Auto create patients from approved studies</td>
            </tr>
            <tr>
                <td>auto_update_patient_studies</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Update the patient's studies when the patient's information changes</td>
            </tr>
            <tr>
                <td>patient_unique_email_phone</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Require that the patient primary phone and email address be unique</td>
            </tr>
            <tr>
                <td>anonymize_at_ingress</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Should anonymization rules be applied at ingress by the uploader or gateway</td>
            </tr>
            <tr>
                <td>limit_query_retrieve_to_input_gateway</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Limit the HL7 driven query retrieve to the gateway that received the HL7 message</td>
            </tr>
            <tr>
                <td>include_mapped_custom_fields_from_storage_ns</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Include DICOM mapped custom fields from the storage namespace when updating the PHI in storage</td>
            </tr>
            <tr>
                <td>include_mapped_custom_fields_from_last_share</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Include DICOM mapped custom fields from the last share namespace when updating the PHI in storage</td>
            </tr>
            <tr>
                <td>update_phi_hl7</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Update the PHI from ADT HL7 messages</td>
            </tr>
            <tr>
                <td>update_phi_hl7_namespaces</td>
                <td>Text</td>
                <td></td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>A CSV list of PHI namespaces to limit the update_phi_hl7 feature too. e.g. <nobr><code>f6b013b3-71be-40c6-b26c-5db6a4a2eada,4fcb78c2-ea21-4975-a318-cf5fc1bdf085</code></nobr>. Alternatively this can be a JSON hash keyed by the PHI namespace uuid with the HL7 message subtype as the value, only messages of the subtype will be applied to the namespace e.g. <nobr><code>{"37b607eb-083e-497f-9923-48119076f62e":"A08","b6465cd6-d39b-4012-ba44-92e4ece81144":"A34"}</code></nobr></td>
            </tr>
            <tr>
                <td>update_accession_from_orm</td>
                <td>Text</td>
                <td></td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Using a field in the HL7 ORM find the studies that match and update their accession number to the HL7 accession number. Configure this via a JSON hash with the following keys
                    <ul>
                        <li> hl7_field &bull; The field that contains the matching accession number e.g.<code>OBR_5_2</code>
                        <li> namespaces &bull; A list of uuid of the the namespaces to search for studies in
                    </ul>
            </tr>
            <tr>
                <td>update_phi_syngo_match</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Update the PHI from Syngo patient match ORM messages</td>
            </tr>
            <tr>
                <td>upload_event_on_study_sync</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Fire the upload event notification when the /study/sync webhook is run</td>
            </tr>
            <tr>
                <td>logo_action</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>What action to take when the logo is clicked</td>
            </tr>
            <tr>
                <td>viewer3_config</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>JSON hash of the viewer3 settings</td>
            </tr>
            <tr>
                <td>viewer_show_reports</td>
                <td>Flag</td>
                <td>1</td>
                <td>0</td>
                <td>1</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Show reports in the viewer</td>
            </tr>
            <tr>
                <td>viewer_study_enable_cpp_transcoding</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Flag for <a href="#study_viewer_settings">/study/viewer/settings</a> and <a href="#study_viewer3_settings">/study/viewer3/settings</a>. Can be set only by sysadmin.</td>
            </tr>
            <tr>
                <td>enable_viewer_print</td>
                <td>Flag</td>
                <td>1</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Enable the print feature on the viewer</td>
            </tr>
            <tr>
                <td>enable_viewer_export</td>
                <td>Flag</td>
                <td>1</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Enable the export feature on the viewer</td>
            </tr>
            <tr>
                <td>viewer_diagnostic_quality</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Diagnostic quality viewing</td>
            </tr>
            <tr>
                <td>viewer_diagnostic_quality_always</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Diagnostic quality viewing in all modes including tools</td>
            </tr>
            <tr>
                <td>viewer_preload_diagnostic_images</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Preload diagnostic images in the viewer</td>
            </tr>
            <tr>
                <td>viewer_enable_mpr</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Flag to enable multi planar reconstruction in the viewer</td>
            </tr>
            <tr>
                <td>viewer_store_extra_annotation_data</td>
                <td>Number</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Capture extra annotation information</td>
            </tr>
            <tr>
                <td>viewer_default_drop_shape_width</td>
                <td>Number</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Customize the default size of circle and square drop shapes</td>
            </tr>
            <tr>
                <td>viewer_link_series</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Link the series</td>
            </tr>
            <tr>
                <td>viewer_single_instance_series</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Flag to enable viewing each image as a series</td>
            </tr>
            <tr>
                <td>viewer_multiframe_split_method</td>
                <td>Number</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Method to use when splitting multiframes out of their original series</td>
            </tr>
            <tr>
                <td>viewer_study_page_link_visible</td>
                <td>Flag</td>
                <td>1</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Should the "Go to Study Page" link display in the viewer</td>
            </tr>
            <tr>
                <td>viewer_study_page_link_url</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Optional URL for the "Go to Study Page" link in the viewer</td>
            </tr>
            <tr>
                <td>viewer_setting_not_diagnostic</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Show a dialog explaining diagnostic usage when opening the viewer</td>
            </tr>
            <tr>
                <td>viewer_show_priors_worklist_only</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Only priors currently in the worklist will be displayed as thumbnails in the viewer</td>
            </tr>
            <tr>
                <td>probe_for_accelerator</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Have the viewer look for available accelerators</td>
            </tr>
            <tr>
                <td>enable_viewer_toggle_annotations</td>
                <td>Flag</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Enable the toggle annotations button for the viewer</td>
            </tr>
            <tr>
                <td>viewer_default_mouse_tool</td>
                <td>Text</td>
                <td>Scroll</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>The default mouse tool in the viewer</td>
            </tr>
            <tr>
                <td>auto_transcode</td>
                <td>Flag</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Enable pre-caching of all transcoded images during upload</td>
            </tr>
            <tr>
                <td>auto_transcode_modalities</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Comma separated list of modalities to preemptively transcode data for</td>
            </tr>
            <tr>
                <td>case_status_tags</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Comma separated list of case status tags</td>
            </tr>
            <tr>
                <td>case_notify_submitted</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Comma separated list of email addresses to send a case_submitted email when a case is submitted. The special values <code>user</code> <code>assigned_admin</code> and <code>assigned_medical</code> will be replaced by the appropriate email address for the case.
            </tr>
            <tr>
                <td>case_notify_completed</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Comma separated list of email addresses to send a case_completed email when a case is completed. The special values <code>user</code> <code>assigned_admin</code> and <code>assigned_medical</code> will be replaced by the appropriate email address for the case.
            </tr>
            <tr>
                <td>study_status_tags</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Comma separated list of study status tags</td>
            </tr>
            <tr>
                <td>study_status_tags_default</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>The tag from <i>study_tatus_tags</i> to be interpreted as default for <a href="#study_get">/study/get</a></td>
            </tr>
            <tr>
                <td>study_status_set_default_if_empty</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>If set then each new study would have study_status = (<i>study_status_tags_default</i> || <i>study_status_tags[0]</i>) by default, undef otherwise</td>
            </tr>
            <tr>
                <td>study_status_mutex_tags</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Comma separated list of study status tags that lock the study to the user when set</td>
            </tr>
            <tr>
                <td>study_status_singleton_tags</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Comma separated list of study status tags that allow the user to have only one locked study in the stage</td>
            </tr>
            <tr>
                <td>study_status_role_tags</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>A JSON hash. The keys are study status tags and the values are a list of the role uuids that can change to the status</td>
            </tr>
            <tr>
                <td>study_status_tags_attributes</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>A JSON hash. The keys are study status tags and the values are a list of the attributes attached to the tag</td>
            </tr>
            <tr>
                <td>study_status_tags_rules</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>A JSON hash where keys are current study_status and values are array of hashes like {"condition":condition-hash-or-bool,"values":["next","possible","statuses"]}, where condition-hash-or-bool is a condition in format used by customfield's <i>show_when</i> field for Study object: hash or [01].<br>
                    Example:<pre>{
  "first":[{ # simple next
       "condition":"1", # or {} == true
       "values":["second"]
  }],
  "second":[
      { # some condition to match
        "condition":{"-and":[
           {"-eq":[{"-field":"must_appprove"},"1"]},
           {"-eq":[{"-field":"modality"},"MG"]}
        ]},
        "values":["third"]
      },
      { # some http-request parameter value
        "condition":{"-eq":[{"-param":"some_param"},"13"]},
        "values":["third","fourth"],
      },
      { # user_account.role.name check with sql-like matching
        "condition":{"-ilike":[{"-role":"name"},"some_rol%"]},
        "values":["fifth"],
      },
      { # user_account.role.uuid check
        "condition":{"-eq":[{"-role":"id"},"cf443e65-0115-42a3-87e9-6ee2c569da86"]},
        "values":["fourth"],
      },
      { # match by customfield
        "condition":{"-eq":[{"-field":"customfield-cf443e65-0115-42a3-87e9-6ee2c569da86"},"42"]},
        "values":["first"],
      },
      { # else
        "condition":{}, # same as 1 == true
        "values":["third","fourth"]
      }
  ],
  "third":[
      { # condition
        "condition":{"-eq":[{"-field":"modality"},"MR"]},
        "values":["fourth"]
      },
      { # unmatched like slashed specsymbols against 'third'
        "condition":{"-ilike":[{"-field":"study_status"},"t\_i\%d"]},
         "values":["third"],
      },
      { # case-sensitive check fails
        "condition":{"-like":[{"-field":"study_status"},"_H%d"]},
        "values":["third"],
      },
      {   # ok, with case-insensitive check against 'third'
        "condition":{"-ilike":[{"-field":"study_status"},"_H%d"]},
        "values":["first"],
      },
      # if not matched anything before, then cant change status
  ]
};
</pre><br>
                    If value is set to non-empty array and there is no role permission <i>study_status_tags_ignore_rules</i>, then the "values" for the first matched "condition" are applied to:<br>
                    <ul>
                        <li>If <i>study_status_tags_ignore_rules_on_set</i> is <b>NOT</b> set, then <a href="#study_status_set">/study/status/set</a> returns error=INVALID_TAG if new status is not in this values list</li>
                        <li><a href="#study_get">/study/get</a> returns intersection of study_status_tags and this values list</li>
                        <li><a href="#study_status_get">/study/status/get</a> returns intersection of study_status_tags and this values list</li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td>study_status_tags_ignore_rules_on_set</td>
                <td>Flag</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>If it is set, the behaviour of the above setting <i>study_status_tags_rules</i> is ignored <b>only</b> in <a href="#study_status_set">/study/status/set</a></td>
            </tr>
            <tr>
                <td>study_status_timer_suspensive_tags</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Comma separated list of study status tags that stop the study status timer. This setting is of lower priority than <i>study_status_timer_starting_tags</i></td>
            </tr>
            <tr>
                <td>study_status_timer_starting_tags</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Comma separated list of study status tags that start the study status timer. This setting is of higher priority than <i>study_status_timer_suspensive_tags</i></td>
            </tr>
            <tr>
                <td>study_status_timer_reset_on_status_change</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>JSON array of ["status-from","status-to"] pairs which triggers timer reset. Example: <code>[["first","second"],["second","fifth"]]</code>.</td>
            </tr>
            <tr>
                <td>study_status_timer_visible_at_last_status</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>When a study is at its final status show current timer value. Otherwise -1 will be returned</td>
            </tr>
            <tr>
                <td>study_share_use_account_template</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>When sharing a study from the account or attaching a new report use the account mail template instead of the destination template</td>
            </tr>
            <tr>
                <td>study_share_email_confirm</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Require double entry of the share email address to confirm it</td>
            </tr>
            <tr>
                <td>logout_url</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>URL to take the user to on logout</td>
            </tr>
            <tr>
                <td>consolidate_wrapped_jpegs</td>
                <td>Flag</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Consolidate JPEGS when wrapping them</td>
            </tr>
            <tr>
                <td>enable_masshiway</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Enable Mass Hiway integration</td>
            </tr>
            <tr>
                <td>default_list_view</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>The default list view. Accepts: namespace ids, 'USER_NAMESPACE' and 'FILTER-*' (*  for a filter ID)</td>
            </tr>
            <tr>
                <td>enable_dicom_tag_customfields</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Enable storage of any DICOM tag in the study customfield</td>
            </tr>
            <tr>
                <td>patients_from_hl7</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Generate patients from HL7 ORM messages using the email address in the HL7 field specified in this setting. Use the notation specified in <a href="#hl7_transform_add">/hl7/transform/add</a> e.g. <code>PID_13_4</code>. Optionally you can pass a JSON hash formatted as per the patients_from_hl7_adt setting</td>
            </tr>
            <tr>
                <td>patients_from_hl7_conditions</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>A condition to generate patients from HL7 ORM messages. Use the notation specified for conditions in <a href="#hl7_transform_add">/hl7/transform/add</a></td>
            </tr>
            <tr>
                <td>patients_from_hl7_adt</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Generate patients from HL7 ADT messages. The value for this setting is a JSON hash that maps the Patient fields to corresponding HL7 fields. Customfields and Text::Template expressions are supported e.g. <code>{"birth_date":"PID_7","last":"PID_5_1","email":"PID_13_4","first":"PID_5_2","mobile_phone":"PID_13_1","sex":"PID_8", "customfield-UUID":"{$PV1_35_2} to {$PV1_35_4}"}</code></td>
            </tr>
            <tr>
                <td>patients_from_hl7_adt_conditions
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>A condition to generate patients from HL7 ADT messages. Use the notation specified for conditions in <a href="#hl7_transform_add">/hl7/transform/add</a></td>
            </tr>
            <tr>
                <td>patients_from_hl7_siu</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Generate patients from HL7 SIU S12 messages. The setting is formatted as per the patients_from_hl7_adt setting.</td>
            </tr>
            <tr>
                <td>patients_from_hl7_siu_conditions
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>A condition to generate patients from HL7 SIU S12 messages. Use the notation specified for conditions in <a href="#hl7_transform_add">/hl7/transform/add</a></td>
            </tr>
            <tr>
                <td>update_patients_from_hl7</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Update patients from the hl7 messages</td>
            </tr>
            <tr>
                <td>appointments_from_hl7_adt</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Generate appointments from HL7 ADT messages. The value for this setting is a JSON hash that maps the appointment fields to corresponding HL7 fields. Customfields and Text::Template expressions are supported e.g. <code>{"start_time":"PV1_33","end_time":"PV1_34","customfield-UUID":"{$PV1_35_2} to {$PV1_35_4}"</code>. In addition if the map has a referring_physician key a PHYSICIAN_ALIAS lookup is performed using the value to find the matching user in the account.
            </tr>
            <tr>
                <td>appointments_from_hl7_siu</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Generate appointments from HL7 SIU messages. The setting is a JSON hash in the same format as for <i>appointments_from_hl7_adt</i> setting but with additional keys:
                <ul>
                    <li> KEY &bull; The list of fields to use for appointment identification. By default user_id, start_time and end_time are used (optional)
                    <li> EVENTS &bull; The list of SIU events to handle. Supported events are S12 through S17. S12 handler is enabled by default when there is no EVENTS key in the setting (optional)
                </ul>
            </tr>
            <tr>
                <td>users_from_hl7_mfn</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Manage users from HL7 MFN messsages. The value for this setting is a JSON hash with the following fields
                    <ul>
                        <li> last &bull; location of the last name in the HL7 message e.g. STF_3_1
                        <li> first &bull; location of the first name in the HL7 message e.g. STF_3_2
                        <li> email &bull; location of the email address in the HL7 message e.g. STF_10_8
                        <li> npi &bull; location of the NPI in the HL7 message e.g. PRA_6_1
                        <li> npi_to_alias &bull; flag indicating that the NPI should be mapped to the account_alias field
                        <li> append_npi_to_last &bull; flag indicating that the NPI should be appended with a ^ to the users last name
                        <li> role_id &bull; UUID of the role to add the users to the account as
                    </ul>
                </td>
            </tr>
            <tr>
                <td>orders_from_hl7</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Generate orders from HL7 ORM messages</td>
            </tr>
            <tr>
                <td>update_order_status_from_hl7</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Update orders from HL7 ORM messages. orders_from_hl7 is also required</td>
            </tr>
            <tr>
                <td>orders_from_hl7_adt</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Generate orders from HL7 ADT messages</td>
            </tr>
            <tr>
                <td>reload_hl7_customfields_on_phi_update</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Re-load custom fields when study is edited</td>
            </tr>
            <tr>
                <td>allow_multiple_use_of_orders</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Allow an order to be applied to multiple studies</td>
            </tr>
            <tr>
                <td>link_first_study_only</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>When using the filter feature in the /link/* API return only the first study created if multiple studies match the filter</td>
            </tr>
            <tr>
                <td>enable_order_lookup_in_approval</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Enable look of HL7 orders to override PHI in the approval process</td>
            </tr>
            <tr>
                <td>study_push_status</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Enable tracking and display of the study push status for the account</td>
            </tr>
            <tr>
                <td>show_study_copy_push_status</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Enable display of the study push status for the account when they push to a destination node in a different namespace</td>
            </tr>
            <tr>
                <td>show_study_same_uid_push_status</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Enable display of the study push status from all study versions with the same UID in the account</td>
            </tr>
            <tr>
                <td>reverse_patient_name</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Define patient name as last^first instead of first^last</td>
            </tr>
            <tr>
                <td>enable_click_to_filter</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Enable the click to filter feature in the UI</td>
            </tr>
            <tr>
                <td>customfields_last_on_search</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Show the customfields last on the study search dialog</td>
            </tr>
            <tr>
                <td>auto_wrap_images</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Auto wrap the images in storage</td>
            </tr>
            <tr>
                <td>reencode_dicom_mp4</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Re-encode MP4 DICOM</td>
            </tr>
            <tr>
                <td>render_wrapped_pdf</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Convert PDF to viewer format</td>
            </tr>
            <tr>
                <td>render_wrapped_avi</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Convert AVI to viewer format</td>
            </tr>
            <tr>
                <td>render_wrapped_video</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Convert video to viewer format</td>
            </tr>
            <tr>
                <td>render_wrapped_docx</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Convert *.docx files to viewer format</td>
            </tr>
            <tr>
                <td>sr_render_css</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>CSS for SR rendering>
            </tr>
            <tr>
                <td>upload_one_study</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Only allow one study to be selected and uploaded</td>
            </tr>
            <tr>
                <td>send_oru_instead_of_orm</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Send the study ORU with an embedded link instead of the ORM for the destination_hl7_orm routing action and the /study/send/hl7 action</td>
            </tr>
            <tr>
                <td>radreport_branding_from_phi_namespace</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Get the radreport branding from the PHI namespace instead of the storage namespace</td>
            </tr>
            <tr>
                <td>viewer_anon_annotations_clear</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Clear out the annotations created by an anonymous viewer</td>
            </tr>
            <tr>
                <td>viewer_enable_tap_navigation</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Enable tap to scroll on the viewer</td>
            </tr>
            <tr>
                <td>viewer_hide_thumbnails</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Hide the viewer thumbnails by default</td>
            </tr>
            <tr>
                <td>viewer_hide_thumbnails_datetime</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Hide the viewer datetime on the thumbnails by default</td>
            </tr>
            <tr>
                <td>viewer_hide_ruler</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Hide the viewer annotation ruler</td>
            </tr>
            <tr>
                <td>viewer_hide_active_measurement_info</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Hide the viewer thumbnails by default</td>
            </tr>
            <tr>
                <td>viewer_show_std_dev</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Show the standard deviation calculation</td>
            </tr>
            <tr>
                <td>other_ingress_tags</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>A JSON list of DICOM tags to be used for the OTHER_INGRESS_TAGS anonymization metafield</td>
            </tr>
            <tr>
                <td>use_other_ingress_tags_server_side</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Use the other ingress tags for server side anonymization as well as client side anonymization</td>
            </tr>
            <tr>
                <td>login_location</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>A JSON hash of location names and session_expire values for the account</td>
            </tr>
            <tr>
                <td>sso_share_phr_workflow</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Enable the PHR sharing workflow of the account</td>
            </tr>
            <tr>
                <td>sso_share_phr_workflow_options</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>JSON hash to configure the SSO PHR sharing workflow. The hash can contain the following keys
                    <ul>
                        <li> create_patient - flag to create a patient record
                        <li> search_for_thins - A JSON array of the destination uuid(s) to search using the create_thin and copy_to the users namespace parameters
                        <li> search_for_studies - A JSON array of the destination uuid(s) to search using the create_study and copy_to the users namespace parameters
                        <li> accession_number - Specify the name of the assertion attribute to add the accession number to the study search
                        <li> blocked_emails - A JSON array of email addresses to block from this workflow. Use this to block system assigned dummy email addresses that would result in multiple patients accessing others patients PHI
                        <li> source_namespace - The uuid of the namespace to share the studies from if the user is not a patient. If the user is a patient the entire account is searched for studies.
                        <li> skip_patient_search - Flag to force the use of the source_namespace if the user is a patient.
                        <li> force_reshare - Flag to force a reshare of the studies. This is useful for picking up changed study information.
                    </ul>
                </td>
            </tr>
            <tr>
                <td>sso_second_opinion_workflow</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>JSON hash to configure the SSO second opinion workflow. The hash must contain a key called namespace_id with the value the UUID of the second opinion namespace. An optional key called data_map contains a hash of field names and the SAML attribute to lookup for the field name, this information will be passed to the UI to populate the second opinion form. e.g. <code>{"data_map":{"customfield-83873415-38ab-4100-9a83-235664771cd3":"validated","date_of_birth":"dob"},"namespace_id":"2433468e-96e5-452d-b1e1-b91551425dd8"}</code></td>
            </tr>
            <tr>
                <td>add_oru_report_to_study</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Add the report for ORU HL7 messages to the study if the account has an hl7_template</td>
            </tr>
            <tr>
                <td>create_thin_study_from_oru</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Create a thin study from the ORU if the ORU does not match any existing studies</td>
            </tr>
            <tr>
                <td>create_thin_study_from_orm</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Create a thin study from the ORM if the ORM does not match any existing studies</td>
            </tr>
            <tr>
                <td>create_thin_study_from_oru_study_uid</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Get the study uid for the create_thin_study_from_oru or create_thin_study_from_orm feature from this hl7 field .e.g. <code>OBX_5_1</code></td>
            </tr>
            <tr>
                <td>create_thin_study_from_hl7_data_map</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>A JSON hash that has field names for the /study/add command as the keys and the values are the HL7 field specification to get the value from e.g. <code>{"referring_physician":"OBX_5_1"}</code>. This map will be applied to thin studies created via the create_thin_study_from_oru or create_thin_study_from_orm settings to futher populate the thin study with values from the HL7
            </tr>
            <tr>
                <td>accession_number_for_study_uid</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Allow the study_uid to be set to the accession number when a study is added and then update with the real study_uid on study acquisition</td>
            </tr>
            <tr>
                <td>ignore_blank_accession_number</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Ignore a blank or empty accession number from storage</td>
            </tr>
            <tr>
                <td>study_stat_filter</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>A JSON array to specify the "stat" studies filter for the account. The first element is a customfield UUID and the second element is the "stat" value</td>
            </tr>
            <tr>
                <td>refresh_data_on_reshare</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Refresh the integration key and customfields on a re-share of a study</td>
            </tr>
            <tr>
                <td>force_reload_load_dicom_tag</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Force a reload of the load_dicom_tag customfields from the DICOM for all downstream versions of a study on a new notify</td>
            </tr>
            <tr>
                <td>study_status_timer</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Enable the study status timer feature</td>
            </tr>
            <tr>
                <td>max_link_studies</td>
                <td>Text</td>
                <td>100</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Maximum number of studies allowed in an anonymous link or link integration</td>
            </tr>
            <tr>
                <td>update_study_status_in_all_versions</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Update the study status in all versions of the study</td>
            </tr>
            <tr>
                <td>athena_subscribe_orders</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Subscribe to orders from Athena healthcare. In addition to this switch the account needs the following named customfields created and populated.
                    <ul>
                        <li> athena_client_id &bull; The Athena client id
                        <li> athena_site &bull; The Athena instance to contact either 'prod' or 'preview'
                        <li> athena_mwl_modality &bull; The modality type the MWL order will be created for
                        <li> athena_mwl_ae_title &bull; The ae title of the modality the MWL order  will be created for
                        <li> athena_mwl_lookup &bull; An optional field that contains a JSON list of hashes that can override the modality and ae_title values. The hash(es) have the following keys.
                        The list is processed in order and the first match is applied to the order.
                        e.g. <nobr><code>'[{"ae_title":"abc","regexp":"/chest/","modality":"CT"}]'</code></nobr>
                        <ul>
                            <li> regexp &bull; A regular expression to match against the requested procedure description returned from Athena
                            <li> modality &bull; The modality for the MWL order
                            <li> ae_title &bull; The ae_title for the MWL order
                        </ul>
                        <li> Optionally the Athena orders will  be turned into hl7 messages rather than orders if the following three account named customfields are populated with values
                        <ul>
                            <li> athena_hl7_template &bull; A field that contains a Text::Template that will be run against the retrieved order and the resultant hl7 sent to /hl7/add
                            <li> athena_hl7_node_uuid &bull; A field that contains the uuid of the node that will be used for the /hl7/add call
                            <li> athena_hl7_node_serial_no &bull; A field that contains the serial_no of the node that will be used for the /hl7/add call
                        </ul>
                    </ul>
                </td>
            </tr>
            <tr>
                <td>athena_unsolicited_namespace</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>The UUID of the namespace that will invoke the Athena unsolicited orders workflow.
                    This extends the /study/find/order API to search for the patient in Athena for studies in the namespace.
                    The patient_name for the search must have both a first and last name and the study birth date must match the birth date in Athena.
                    It has the same customfield requirements as the athena_subscribe_orders setting.
                </td>
            </tr>
            <tr>
                <td>athena_orders_filter</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>A JSON hash of order field names and the regular expression it must match to be processed as an order .e.g. <code>{"description":"/XRAY/"}</code>
                </td>
            </tr>
            <tr>
                <td>allow_user_password_for_account_login</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Authenticate against both the account_password and user password when logging in using an account_alias</td>
            </tr>
            <tr>
                <td>welcome_password_reset_token_ttl</td>
                <td>Number</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Reset tokens generated for welcome messages are valid for so many seconds</td>
            </tr>
            <tr>
                <td>ip_whitelist</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>Restrict logins to the specified network or IP address e.g. 195.114.80/24,38.32.26.106/32 A CSV list can be used to specify multiple networks. This is only applied to users who solely belong to the account</td>
            </tr>
            <tr>
                <td>link_external_whitelist</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Restrict external links access to the specified network or IP address. Further documentations is in the <a href="link_external.html">External links</a> page.
            </tr>
            <tr>
                <td>load_ack_as_hl7</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Load the ACK from a delivered study HL7 message back into the system as an incoming HL7 message</td>
            </tr>
            <tr>
                <td>add_on_invite</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Modify the /user/invite behavior to automatically add the user to the account if they are already on the system</td>
            </tr>
            <tr>
                <td>invite_ttl</td>
                <td>Number</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Account user invites are valid for so many seconds</td>
            </tr>
            <tr>
                <td>duplicate_study_check</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Check for a duplicate study on upload</td>
            </tr>
            <tr>
                <td>disable_duplicate_study_upload</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Disable upload of a duplicate study by uid across account</td>
            </tr>
            <tr>
                <td>must_approve_duplicate_study_uid</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Require approval of a study if the same study_uid already exists in the namespace</td>
            </tr>
            <tr>
                <td>study_set_unapproved_allow_bypass_required_fields</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Enable <i>partial_save</i> for <a href="#study_set">/study/set</a> to bypass empty required customfields.</td>
            </tr>
            <tr>
                <td>force_new_study_on_upload</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>On upload create a new UID for the study if it already exists in the namespace</td>
            </tr>
            <tr>
                <td>save_original_to_pre_anon_cf</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>For client side anonymization save the original values to any pre_anon_* customfields</td>
            </tr>
            <tr>
                <td>add_patientid_to_hl7_query_retrieve</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>Add the MRN to the query retrieve triggered via a HL7 message</td>
            </tr>
            <tr>
                <td>max_match_study_hl7</td>
                <td>Number</td>
                <td>100</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Maximum number of studies to match against an HL7 message</td>
            </tr>
            <tr>
                <td>include_orm_in_study_find_order</td>
                <td>Flag</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Include ORM messages when search for orders in /study/find/order</td>
            </tr>
            <tr>
                <td>include_adt_in_study_find_order</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Include ADT messages when search for orders in /study/find/order</td>
            </tr>
            <tr>
                 <td>include_only_latest_adt_in_study_find_order</td>
                 <td>Flag</td>
                 <td>0</td>
                 <td>0</td>
                 <td>0</td>
                 <td>0</td>
                 <td>0</td>
                 <td>0</td>
                 <td>Include just one ADT message (the most recent) when searching for orders in /study/find/order</td>
             </tr>
             <tr>
                <td>include_only_latest_order_when_searching_by_accession_in_study_find_order</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Include just one order (the most recent) when searching for orders by accession number in /study/find/order</td>
            </tr>
             <tr>
                <td>study_find_order_latest_in_progress</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Include only orders with status=IN_PROGRESS(IP,SC) for ORM/ADT in /study/find/order. This filter is applied before <i>include_only_latest*</i></td>
            </tr>
            <tr>
                <td>include_manual_orders_in_study_find_order</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Include orders created in Ambra through the API when search for orders in /study/find/order</td>
            </tr>
            <tr>
                <td>use_namespace_name_on_upload_request</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Use the upload namespace name instead of the requestors name and email for upload requests</td>
            </tr>
            <tr>
                <td>confirm_before_upload</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Require the user confirm that they are authorized to upload the study</td>
            </tr>
            <tr>
                <td>study_status_timer_attributes</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>The JSON for color coding studies based on a timer</td>
            </tr>
            <tr>
                <td>enable_patient_portal</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Enable the patient portal feature</td>
            </tr>
            <tr>
                <td>expose_patient_portal</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Make a patient portal publicly visible</td>
            </tr>
            <tr>
                <td>patient_portal_options</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>JSON hash to configure native patient portal options. An optional key called <i>source_namespace</i> contains a namespace UUID (or an array of namespace UUIDs), this namespace will be searched for studies to share with a patient, other account namespaces will be ignored.</td>
            </tr>
            <tr>
                <td>patient_portal_limit_hl7</td>
                <td>Number</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>The number of ORU reports visible in the patient portal</td>
            </tr>
            <tr>
                <td>require_mrn_for_patient_portal</td>
                <td>Flag</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Require a MRN when searching for patients in the portal</td>
            </tr>
            <tr>
                <td>eshare_on_patient_portal_login</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Unshare all studies and then share patient's studies in the portal on a patient login</td>
            </tr>
            <tr>
                <td>enable_thin_retrieve_in_patient_portal</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Allow retrieving of thin studies in the patient portal</td>
            </tr>
            <tr>
                <td>ignore_mrn_on_thin_retrieve</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Ignore MRN on thin retrieve</td>
            </tr>
            <tr>
                <td>allow_portal_pin_to_dup_addresses</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Allow the patient portal pin to be send to duplicate patient emails or phone numbers</td>
            </tr>
            <tr>
                <td>hide_patient_portal_email_regex</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>A regular expression to hide matching email addresses from the patient portal access screen</td>
            </tr>
            <tr>
                <td>use_link_on_patient_portal_share</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>The uuid of a link that will be duplicated and emailed when a patient shares a study via email. The link must be a STUDY_VIEW link and have a study_id which will be replaced by the shared study id</td>
            </tr>
            <tr>
                <td>suppress_new_patient_share_event</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Suppress the emails for the share of existing studies when a new patient is created</td>
            </tr>
            <tr>
                <td>suppress_all_patient_emails</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Suppress all emails to the patients</td>
            </tr>
            <tr>
                <td>suppress_new_report_event_in_phr_for_patients</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Make sure a patient will not get twin new_report emails as a patient and as a PHR namespace user</td>
            </tr>
            <tr>
                <td>study_search_modifiers</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>The JSON hash to change to default study searching behavior
                    e.g. <code>{"patientid":"equals"}</code> will make the MRN an exact match,
                    <code>{"accession_number":"like"}</code> will make accession number a partial match</td>
            </tr>
            <tr>
                <td>study_edit_reason</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Require a reason for a PHI update</td>
            </tr>
            <tr>
                <td>radreport_sign</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>A JSON hash holding the information for signing a radreport</td>
            </tr>
            <tr>
                <td>passwdqc</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>The specification string for a passwdqc check against proposed passwords for account users</td>
            </tr>
            <tr>
                <td>passwd_regexp</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>A JSON list of regular expressions to match against the proposed password for account users. All regular expression must match to allow the password to be used.</td>
            </tr>
            <tr>
                <td>include_patientid_in_hl7_match</td>
                <td>Flag</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>Match HL7 message to studies by both the accession number and the MRN (patientid - (0010,0020))</td>
            </tr>
            <tr>
                <td>include_patientid_other_in_hl7_match</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>Match HL7 message to studies by both the accession number and the patientid_other value (0010,1000) </td>
            </tr>
            <tr>
                <td>mwl_search_is_cfind</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Use a cfind instead of a MWL query for the MWL searching workflow</td>
            </tr>
            <tr>
                <td>mwl_search_is_cfind_all_rows</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Return all rows instead of 1 if <i>mwl_search_is_cfind</i> is set</td>
            </tr>
            <tr>
                <td>mwl_filter_if_matching_study</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Exclude orders with a matching study for /order/sps/find MWL queries</td>
            </tr>
            <tr>
                <td>force_download_of_attachments</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>All attachments must be downloaded before they can be opened</td>
            </tr>
            <tr>
                <td>show_radreport_in_all_namespaces</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Show radreports on all versions of the study</td>
            </tr>
            <tr>
                <td>enable_radreport_attestation</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Require electronic signing of radreport</td>
            </tr>
            <tr>
                <td>enable_radreport_lock_reading</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Enables mechanism "only one report in a study can be edited at the moment". Look <a href="ipi.html#study_lock">/study/lock?type=RADREPORT</a></td>
            </tr>
            <tr>
                <td>csrf_cookie_samesite_none</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Enable SameSite=None attribute for CSRF cookies set in /link/redirect</td>
            </tr>
            <tr>
                <td>disable_csrf_on_links</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Disable the CSRF cookie for /link/redirect</td>
            </tr>
            <tr>
                <td>disable_link_session</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Disable the /link/session API call for the account</td>
            </tr>
            <tr>
                <td>report_view_phr_delay</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>A setting to delay a study report exposure in patient's portal. A delay can be expressed in a number of minutes to delay or a number of work hours with suffix 'wh', possible setting's formats:
                    <ul>
                        <li> A delay specified directly as a scalar value
                        <li> A JSON object with delays by modality. Object fields are modalities or a special value <i>ALL</i> for default. Values are delays.
                        <li> A delay table. It is a JSON list of conditional delays (JSON objects) with two fields: <i>delay</i> specifies a delay, <i>condition</i> is a condition in format used by customfield's show_when field. Possible condition's parameter types are 'field' and 'customfield'. Conditions are checked sequentially, first match gives the delay.
                    </ul>
            </tr>
            <tr>
                <td>account_time_zone</td>
                <td>Text</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>A timezone for the account. Used for date and time calculations.</td>
            </tr>
            <tr>
                <td>work_hour_matrix</td>
                <td>Text</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>A JSON list of lists which makes up a matrix 7 by 24 of work hours for the account. 1s mark work hours, 0s mark non-work hours, tailing zeroes are optional. The first index is for day of week (0 means monday), the second is for day hour (0 means 00:00-01:00am). </td>
            </tr>
            <tr>
                <td>study_view_phr_delay</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>A setting to delay studies visibility in patient's portal. See format description for <i>report_view_phr_delay</i></td>
            </tr>
            <tr>
                <td>link_defaults</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>A JSON hash of the default link add values for the UI</td>
            </tr>
            <tr>
                <td>upload_settings</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>A JSON hash of the upload settings</td>
            </tr>
            <tr>
                <td>hl7_fetch_filter</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>A transform condition expression (see /transform/add for format) to match against the HL7 message. Only fire a query retrieve if the message matches the condition</td>
            </tr>
            <tr>
                <td>account_hl7_map</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>A JSON hash mapping the value in MSH_3 or MSH_5 to another account uuid. The hash key is an HL7 message field, the value can be an comma separated list of account uuids, a hash with account_id and node_id(optional) keys or a list of hashes. The HL7 message will be attached to the mapped account and a node will be replaced with the given one. The special hash key <code>_HL7_FIELD_</code> can be used to set a different place to get the value .e.g. <code>MSH_6_1</code>  This can only be set by a sysadmin or support user</td>
            </tr>
            <tr>
                <td>duplicate_account_hl7_map</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>A JSON hash in the same format as the <i>account_hl7_map</i> setting. The HL7 message will be duplicated to all the mapped accounts with nodes replaced by the corresponding ones. This can only be set by a sysadmin or support user</td>
            </tr>
            <tr>
                <td>report_csv_download_concat</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Export all CSV rad reports into one CSV file</td>
            </tr>
            <tr>
                <td>update_all_studies</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>JSON array of the field names that should be synced across all copies of the study in the account e.g. <code>["patient_name","patientid","customfield-UUID"]</code></td>
            </tr>
            <tr>
                <td>batch_encode_cine</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Use slower batched rendering for producing cine files from series; use only if older OS/browser combination prevents viewing regular cine files</td>
            </tr>
            <tr>
                <td>encapsulate_wrapped_pdf</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Storage setting for DICOM encapsulated PDF's</td>
            </tr>
            <tr>
                <td>compress_audio_recordings</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Compress audio recordings in the browser before sending them to storage</td>
            </tr>
            <tr>
                <td>upload_hold</td>
                <td>Number</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Upload hold time in storage. This is used if the namespace doesn't have an explicit hold time</td>
            </tr>
            <tr>
                <td>namespace_child_study_defaults</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Propagate study default values for parent child namespace setups</td>
            </tr>
            <tr>
                <td>compress_audio_recordings</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Compress audio in the browser before uploading</td>
            </tr>
            <tr>
                <td>study_search_require_regexp</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>A JSON hash of regexp to apply to the study_search_require_* field checks. The keys are the field names and the values are the regexp e.g. <code>{"patient_name":"/^\\\w{3}/"}</code>
            </tr>
            <tr>
                <td>query_retrieve_require_regexp</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>A JSON hash of regexp to apply to the /destination/search and /destination/search/mwl calls. The keys are the field names and the values are the regexp e.g. <code>{"patient_name":"/^\\\w{3}/"}</code>
            </tr>
            <tr>
                <td>query_retrieve_require_regexp_mwl</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>A JSON hash of regexp to apply to the /destination/search/mwl calls instead of the query_retrieve_require_regexp. The keys are the field names and the values are the regexp e.g. <code>{"patient_name":"/^\\\w{3}/"}</code>
            </tr>
            <tr>
                <td>query_retrieve_auto_reject_period_in_days</td>
                <td>Number</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Number of days after which a /destination/search result is automatically removed from the activity list.  Defaults to 0 meaning that search results are not removed automatically.</td>
            </tr>
            <tr>
                <td>query_retrieve_require_criteria_min</td>
                <td>Number</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Minimal number of search criteria for /destination/search Default is 1</td>
            </tr>
            <tr>
                <td>enable_drchrono</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Enable the drchrono integration</td>
            </tr>
            <tr>
                <td>exclude_load_dicom_tag</td>
                <td>Flag</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Do not sync customfields with the load_dicom_tag flag enabled back to the storage DICOM</td>
            </tr>
            <tr>
                <td>auto_fill_patient_in_activity</td>
                <td>Flag</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Auto fill the patient name when using the MWL or Find Orders features in the Activities queue</td>
            </tr>
            <tr>
                <td>report_from_hl7</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>
                    A JSON hash that specifies the message type as the key and directions to extract the report as the value. The base64 encoded report will be extracted from message and be linked with the associated studies.
                    SR and attachment types of reports are supported. Possible values for the JSON hash are the hl7 field/subfield as string (for pdf attachment reports only) or an object with the following keys (both report types are supported):
                    <ul>
                        <li> report_type &bull; <i>SR</i> - for structured reports, <i>attachment</i> (by default) - for pdf attachments, requires the <i>field</i> key additionally (SR|attachment)
                        <li> field &bull; Hl7 field/subfield to extract for the <i>attachment</i> report type. E.g. <code>OBX-12_5_5</code>
                    </ul>
                    Examples: <code>{"ORU":"OBX-12_5_5"}</code>, <code>{"ORU":{"report_type":"SR"}}</code>, <code>{"ORU":{"report_type":"attachment", "field": "OBX-12_5_5"}}</code>
                </td>
            </tr>
              <tr>
                <td>hl7_use_attachment_file_name</td>
                <td>Text</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>A string which indicates the field and subfield of the HL7 OBX segment with an attachment that defines the attachment file name; e.g. <code>OBX_3_3</code> would indicated the third field and third subfield. If a file name is not found in the indicated field, if the filename contains disallowed characters or its greater than 64 characters in length we instead use a default naming convention: <code>hl7_report_${id}.pdf</code>. If the setting is undefined or a zero length string we don't look for a filename and just use the default naming template (this is he default for this setting).</td>
            </tr>
            <tr>
                <td>upload_select_none</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Require selecting studies to upload when multiple studies are added</td>
            </tr>
            <tr>
                <td>link_external_referer</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Limit access to /link/external to the specific referer. The referer can be a regexp to match multiple referers</td>
            </tr>
            <tr>
                <td>link_external_whitelist</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>IP address whitelist to apply to the /link/external call. Further documentation <a href="link_external.html">here</a>
            </tr>
            <tr>
                <td>link_external_whitelist_all_links</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Flag to apply the link_external_whitelist setting to all links</td>
            </tr>
            <tr>
                <td>link_external_study_list_path</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>The URL (the path part of it) to redirect /link/external calls to for links of STUDY_LIST type. E.g. '/worklist' </td>
            </tr>
            <tr>
                <td>link_sticky_anon_users</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Stick anonymous users to links via the email_address so they can edit annotations etc. over multiple sessions </td>
            </tr>
            <tr>
                <td>audit_failed_logins</td>
                <td>Number</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>The maximum number of failed logins against the account vanity(s) to hold for up to 30 days. The information on the failed logins is available via the /audit/failedlogins end point.</td>
            </tr>
                <td>storage_delete_delay</td>
                <td>Number</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>The number of minutes to delay deleting a study from storage. During the delay the study can be re-injected into the system via the /study/revive call</td>
            </tr>
            <tr>
                <td>radreport_attestation_signature</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Attach the users signature to the radreport</td>
            </tr>
            <tr>
                <td>hide_help_tool</td>
                <td>Flag</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Hide the help icon from the UI</td>
            </tr>
            <tr>
                <td>mwl_sending_facility_filter</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>A JSON list of sending_facility values to limit node queries for /order/sps/find too.</td>
            </tr>
            <tr>
                <td>mwl_filter_expression</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>A filter expression to limit node queries for /order/sps/find e.g. <code>filter.order_sps.modality.equals=MR</code>
            </tr>
            <tr>
                <td>siu_push</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>
                    A JSON hash to configure a SIU push workflow.
                    A SIU^12 message will schedule the patient studies in the destination namespace to be pushed to the destination.
                    A SIU^15 message will cancel the scheduled push.
                    The keys and values in the hash are as follows:
                    <ul>
                        <li> transform &bull; A transform condition expression (see /transform/add for format) to match against the HL7 SIU messages. If the message matches the workflow is triggered.
                        <li> mrn &bull; The HL7 field that holds the MRN(s) to push studies for e.g. <code>PID_4</code>
                        <li> procedure_date &bull; The HL7 field that holds the scheduled procedure date and time e.g. <code>SCH_11_4</code>
                        <li> minutes_before &bull; The number of minute before the procedure date the siu_push workflow should be run
                        <li> destination_field &bull; The HL7 field that holds the destination value e.g. <code>PV1_3_1</code>
                        <li> destination_map &bull; A JSON hash that maps the value from the destination_field to a destination UUID e.g. <code>{"ABC": "DESTINATION_UUID"}</code>
                        <li> cancel_field &bull; The HL7 field that holds the value to link a S15 cancel message with the S12 appointment message e.g. <code>SCH_2</code>
                        <li> destination_options &bull; A JSON hash that defines options per destination. The keys are destination UUIDs, values are JSON objects with the following keys:
                        <ul>
                            <li> number_of_studies &bull; The maximum number of studies to push, 10 by default.
                            <li> start_datetime &bull; The DICOM date or datetime to limit the studies list by study date. Substitution tokens are supported. Account time zone is considered.
                            <li> end_datetime &bull; The DICOM date or datetime to limit the studies list by study date. Substitution tokens are supported. Account time zone is considered.
                            <li> namespaces &bull; A comma separated list of namespace UUIDs to push studies from. Only a destination's namespace is considered by default. Studies from namespaces other than the destination's one are shared to the destination's namespace prior to push.
                        </ul>
                    </ul>
                </td>
            </tr>
            <tr>
                <td>mrn_qr</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>
                    A JSON hash to configure a MRN query retrieve and PHI fixup workflow. The keys and values in the hash are as follows:
                    <ul>
                        <li> transform &bull; A transform condition expression (see /transform/add for format) to match against the HL7 ORM or SIU messages. If the message matches a query retrieve is triggered against the destinations
                        <li> mrn &bull; The HL7 field that holds the MRN(s) to query on e.g. <code>PID_4</code>
                        <li> destination &bull; A JSON list of the destination uuid(s) to query for studies
                        <li> match &bull; A JSON hash of the study fields and HL7 fields that must match in addition to the MRN  e.g. <code>{"patient_birth_date":"PID_7"}</code>
                        <li> fields &bull; A JSON hash of the study fields and HL7 fields to update the matched study with e.g. <code>{"patientid":"PID_3"}</code>
                        <li> webhook_match &bull; The uuid of the webhook to call if the study and ORM match. The type of the webhook needs to be 'MANUAL'.
                        <li> webhook_no_match &bull; The uuid of the webhook to call if the study and ORM do not match. The type of the webhook needs to be 'MANUAL'.
                        <li> only_once &bull; Set this flag to 1 if you want this run only on the first order
                        <li> start_datetime &bull; DICOM start date time stamp to bound the search (optional)
                        <li> end_datetime &bull; DICOM end date time stamp to bound the search (optional)
                        <li> squelch &bull; The number of minutes to squelch repeated queries for the patient and destination. (optional)
                        <li> delay &bull; The number of seconds to delay the fetch for. (optional)
                        <li> siu &bull; A JSON hash if appointment SIU messages should be included in the workflow. The following keys and values are supported:
                        <ul>
                            <li> procedure_date &bull; The HL7 field that holds the scheduled procedure date and time e.g. <code>SCH_11_4</code>
                            <li> minutes_before &bull; The number of minute before the procedure date the query retrieve workflow should be run
                            <li> cancel_field &bull; The HL7 field that holds the value to link a S15 cancel message with the S12 appointment message e.g. <code>SCH_2</code>
                        </ul>
                    </ul>
                    A JSON list of hash can also be passed and the HL7 message will run against the first matching hash
                </td>
            </tr>
            <tr>
                <td>search_qr</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>
                    A JSON hash to configure a search, retrieve and PHI fixup workflow. The keys and values in the hash are as follows:
                    <ul>
                        <li> transform &bull; A transform condition expression (see /transform/add for format) to match against the HL7 ORU messages. If the message matches a query retrieve is triggered against the destinations
                        <li> search &bull; A JSON hash of the /destination/search fields and associated HL7 field to get the search data from e.g. <code>{"accession_number":"OBR_3","patient_birth_date":"PID_7","patient_sex":"PID_8"}</code>
                        <li> destination &bull; A JSON list of the destination uuid(s) to query for studies
                        <li> fields &bull; A JSON hash of the study fields and HL7 fields to update the retrieved study(s) with e.g. <code>{"patientid":"PID_3"}</code>
                        <li> max &bull; The maximum number of studies to retrieve. If the search returns more than the max the retrieve is not run. This defaults to 1.
                        <li> rerun &bull; Flag to re-run the search and retrieve even if a study is already associated with the message
                    </ul>
                </td>
            </tr>
            <tr>
                <td>hl7_delay_route</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>
                    A JSON hash to configure a routing delay for an HL7 message. The keys and values in the hash are as follows:
                    <ul>
                        <li> transform &bull; A transform condition expression (see /transform/add for format) to match against the HL7 message. If the message matches the date is extracted from the HL7 message and the route is delayed.
                        <li> procedure_date &bull; The HL7 field that holds the procedure date and time e.g. <code>OBR_7</code>
                        <li> minutes_before &bull; The number of minute before the procedure date the route should be run
                    </ul>
                </td>
            </tr>
            <tr>
                <td>saml_sync_on_create_only</td>
                <td>Flag</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Sync up the SAML roles and assignments when the user is provisioned. Do not sync up on subsequent logins and the SAML role attribute is not required</td>
            </tr>
            <tr>
                <td>saml_sync_across_vendor_accounts</td>
                <td>Flag</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Sync up the SAML roles and assignments for all accounts with the same vendor tag as this account has</td>
            </tr>
            <tr>
                <td>external_viewer</td>
                <td>Text</td>
                <td> </td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>
                    A JSON hash or an array of hashes to configure an external viewer or a list of viewers for the account. The keys and values in the hash are as follows:
                    <ul>
                        <li> tag &bull; The external viewer tag
                        <li> type &bull; The type of external viewer (resmd|eunity|iconnect|traumacad)
                        <li> key &bull; The api key for resmd or the CLO Access Key ID for eunity or the encryption key for iconnect
                        <li> url &bull; The root url for resmd or the base eunity, iconnect or traumacad server url
                        <li> secret &bull; The shared secret for resmd or the CLO Secret Key for eunity
                        <li> encrypt_id &bull; The encryption id for resmd
                        <li> serviceInstanceParameter &bull; Optional value for eunity (defaults to DG_HARVESTER)
                        <li> userID &bull; userID value for iconnect
                        <li> domain &bull; domain for iconnect (defaults to AMBRA)
                        <li> role &bull; role for iconnect (defaults to EMRUSERS)
                        <li> priors &bull; Flag to include priors in eunity (same patientid, patient_birth_date and phi_namespace)
                        <li> most_recent_prior &bull; Flag to include the most recent prior in eunity
                        <li> other_params &bull; A JSON array of other parameters to add to the URL
                    </ul>
                </td>
            </tr>
            <tr>
                <td>disable_external_viewer_for_links</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Do not use the external viewer for studies viewed via a link by an anonymous user</td>
            </tr>
            <tr>
                <td>default_external_viewer</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>The default external viewer tag corresponding to an external viewer from the <code>external_viewer</code> list</td>
            </tr>
            <tr>
                <td>limit_oru_by_storage_namespace</td>
                <td>Text</td>
                <td> </td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>
                    A JSON hash of storage namespaces that ORU messages can be attached to studies in. The hash keys should be the storage namespace uuid and the hash value should be 1. e.g. <code>{"2b14215c-44a8-4aa6-af70-f7b14d5e32ed":1,"587d5b83-917c-4d95-89a8-f537debaf9de":1}</code>
                </td>
            </tr>
            <tr>
                <td>epic_patient_lookup_info</td>
                <td>Text</td>
                <td> </td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>
                    A JSON hash to with the information needed for the Epic patient lookup workflow. If the lookup does not return a unique patient the study will be routed to the activity queue for approvals. This setting can also be set at the brand level if multiple Epic integrations are needed into an account. The keys and values in the hash are as follows:
                    <ul>
                        <li> user &bull; The EPIC user name to use for basic auth against the Epic FHIR API (not needed for the OAuth integration)
                        <li> password &bull; The basic auth password, this will be encrypted for storage and future viewing (not needed for the OAuth integration)
                        <li> epic_client_id &bull; The EPIC client id
                        <li> url &bull; The root EPIC url to call. <code>api/FHIR/DSTU2/Patient</code> will be appended to it
                        <li> version &bull; Optional version number to be used after DSTU (defaults to 2)
                        <li> full_url &bull; Optional full URL for the Epic endpoint if is not in the standard location.
                        <li> use_iss_host &bull; Flag to substitute the host passed in the iss parameter during the OAuth cycle into the full_url
                        <li> mrn_field &bull; The name of the identifier field that holds the MRN e.g. <code>urn:oid:1.2.840.114350.1.13.0.1.7.5.737384.0</code>. If the integration supports multiple Epic instances that can be a JSON array of the identifier fields to search for.
                        <li> timeout &bull; Optional number of seconds for the timeout on the FHIR call to Epic, defaults to 5
                        <li> upload_namespace_id &bull; UUID of the namespace to upload into. Defaults to the account namespace if not specified
                        <li> include_first_in_match &bull; Flag to include the first name in the search. Default is last, dob and gender.
                        <li> mrn_search &bull; Search by MRN instead of patient PHI. This field must contain a text template to create the Epic identifier value e.g. <nobr><code>MRN|{$patientid}</code></nobr>
                        <li> mrn_search_activity &bull; Search by MRN in the activity list. This field must contain a text template to create the Epic identifier value e.g. <nobr><code>MRN|{$patientid}</code></nobr>
                        <li> skip_phi_update &bull; Skip the lookup for patient phi to update the study, send the study to activities queue
                        <li> server_oauth_url &bull; Full URL to the Epic endpoint to get the server to server OAuth token from e.g. <code>https://apporchard.epic.com/interconnect-aocurprd-oauth/oauth2/token</code>
                        <li> server_oauth_private_key &bull; The private key to encrypt the JWT token for server OAuth. The public key is registered with Epic. Each setup requires a unique key setup and the the keys can be generated as follows<br><code>openssl genrsa -out privatekey.pem 2048</code><br><code>openssl req -new -x509 -key privatekey.pem -out publickey509.pem -subj '/CN=myapp'</code><br>To convert the private key to a single line for JSON usage run the following command<br><code>jq -sR < privatekey.pem</code>
                        <li> create_thin_study &bull; Flag to create a thin study for the view_study action if the study does not exist. The account setting accession_number_for_study_uid needs to be on for the study retrieval to work.
                        <li> include_priors &bull; Flag to include priors for anonymous user links created by the view_study action
                        <li> link_user &bull; UUID of the user to create the anonymous links with
                        <li> apply_epic_name_format &bull; Flag to apply the epic_name_format value to the result patient names
                        <li> inbasket_setup &bull; A JSON hash with the information needed to send <a href="https://apporchard.epic.com/Sandbox/Index?api=384">inbasket messages</a>. The keys and values are as follows:
                        <ul>
                            <li> url &bull; The full URL to post the message too e.g. <code>https://apporchard.epic.com/interconnect-aocurprd-username/api/epic/2014/Common/Utility/SENDMESSAGE/Message</code>
                            <li> SenderID &bull; The value as per the Epic API documents e.g. <code>FAMMD</code>
                            <li> Recipients &bull; The value as per the Epic API documents e.g. <code>[{"ID":"IPMD","IDType":"External","IsPool":""}]</code>
                            <li> MessageType &bull; The value as per the Epic API documents
                            <li> MessagePriority &bull; The value as per the Epic API documents
                            <li> message_template &bull; A text template to apply against the study for the message. Use a pipe symbol to split the message into multiple lines e.g. <code>A study for {$patientid} was uploaded|Date: {$study_date}|Call us for support</code>
                        </ul>
                    </ul>
                    This integration also supports the following additional workflows that are triggered by the action parameter value sent to the /epic/oauth2 entry point. The supported actions are
                    <ul>
                        <li> upload &bull; Trigger the Epic upload workflow
                        <li> sso_share_phr_workflow &bull; Trigger the account sso_share_phr_workflow workflow
                        <li> view_study &bull; Launch a viewer for the passed accession_number or study_uid and namespace_id. Additional the mrn (patID) and the accession_number needs to passed if the create_thin_study option is enabled
                        <li> view_patient &bull; Launch a study list for the passed mrn (or patID)
                    </ul>
                </td>
            </tr>
            <tr>
                <td>epic_name_format</td>
                <td>Text</td>
                <td> </td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>
                    By default the patient name is formatted as LAST^MIDDLE^FIRST, change it via this setting e.g. <code>LAST^FIRST^MIDDLE</code>
                </td>
            </tr>
            <tr>
                <td>enable_epic_patient_lookup</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Enable the Epic patient lookup for the account or namespace</td>
            </tr>
            <tr>
                <td>epic_prompt_for_anonymize</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Enable the prompt_for_anonymize feature for uploads via the Epic integration</td>
            </tr>
            <tr>
                <td>epic_upload_match</td>
                <td>Text</td>
                <td> </td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>
                    Enable the upload_match feature on links to restrict studies can that be uploaded. This field should be in the same format as the upload_match link field. The regular expressions can contain the special tags _LAST_,_FIRST_,_DOB_, _MRN_ or _SEX_  which will be replaced with the data from Epic. For example to restrict uploads to studies that match the patients last name and date of birth use the following setting <code>{"(0010,0030)":"/^_DOB_$/","(0010,0010)":"/_LAST_/"}</code>
                </td>
            </tr>
            <tr>
                <td>cerner_fhir</td>
                <td>Text</td>
                <td> </td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>
                    A JSON hash to with the information needed for the <a href="cerner.html">Cerner SMAR on FHIR</a> integration. The keys and values in the hash are as follows:
                    <ul>
                        <li> study_upload_client_id &bull; client_id of the Cerner app created to support STUDY_UPLOAD
                        <li> view_study_list_client_id &bull; client_id of the Cerner app created to support VIEW_STUDY_LIST
                        <li> aud &bull; The dstu2 FHIR spec url from the Cerner app
                        <li> upload_namespace &bull; The uuid of the namespace to upload the studies to
                        <li> link_user &bull; UUID of the user to create the anonymous links with
                        <li> mrn_field &bull; Name of the field that holds the MRN, defaults to <code>urn:oid:2.16.840.1.113883.3.787.0.0</code>
                        <li> prompt_for_anonymize &bull; Flag to prompt if the anonymization rules should be applied (optional)
                        <li> upload_match &bull; Same format and functionality as the epic_upload_match setting (optional)
                    </ul>
                </td>
            </tr>
            <tr>
                <td>cerner_patient_lookup_info</td>
                <td>Text</td>
                <td> </td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>
                    A JSON hash to with the information needed for the Cerner patient lookup workflow. The keys and values in the hash are as follows:
                    <ul>
                        <li> auth_url &bull; The root Cerner url to call for oauth token
                        <li> data_url &bull; The root Cerner url to call for the user data API
                        <li> key &bull; The Cerner OAuth key
                        <li> secret &bull; The Cerner OAuth secret, this will be encrypted for storage and future viewing
                    </ul>
                </td>
            </tr>
            <tr>
                <td>mrn_and_family_from_saml</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Extract the mrn and associated family members mrn from the SAML assertion for image viewing</td>
            </tr>
            <tr>
                <td>enable_link_charging</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Enable charging for accessing a link</td>
            </tr>
            <tr>
                <td>ai_attach_scanned_docs_as_pdf</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Settings for the AI question</td>
            </tr>
            <tr>
                <td>ai_anonymize_study_images</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Settings for the AI question</td>
            </tr>
            <tr>
                <td>ai_anonymize_study_hl7</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Settings for the AI question</td>
            </tr>
            <tr>
                <td>anonymize_study_images_google_dlp</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Settings for the AI question</td>
            </tr>
            <tr>
                <td>anonymize_study_images_aws_rekognition</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Settings for the AI question</td>
            </tr>
            <tr>
                <td>anonymize_study_images_aws_textract</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Settings for the AI question</td>
            </tr>
            <tr>
                <td>anonymize_study_images_tensorflow_east</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Settings for the AI question</td>
            </tr>
            <tr>
                <td>anonymize_study_images_atalanta</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Settings for the AI question</td>
            </tr>
            <tr>
                <td>anonymize_photo_docs</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Settings for the AI question</td>
            </tr>
            <tr>
                <td>analyze_regions_pyradiomics</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Settings for the AI question</td>
            </tr>
            <tr>
                <td>detect_phi_in_study_images_google_dlp</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Settings for the AI question</td>
            </tr>
            <tr>
                <td>ai_classify_hemorrhage_in_study_images</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Settings for the AI question</td>
            </tr>
            <tr>
                <td>ai_study_manual_route</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Settings for the AI question</td>
            </tr>
            <tr>
                <td>ai_search_and_replace_study_tags</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Settings for the AI question</td>
            </tr>
            <tr>
                <td>ai_delete_duplicate_images</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Settings for the AI question</td>
            </tr>
            <tr>
                <td>ai_delete_scanned_docs</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Settings for the AI question</td>
            </tr>
            <tr>
                <td>ai_anonymize_attached_pdf</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Settings for the AI question</td>
            </tr>
            <tr>
                <td>ai_anonymize_attached_pdf_google_dlp</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Settings for the AI question</td>
            </tr>
            <tr>
                <td>ai_lookup_billing_code</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Settings for the AI question</td>
            </tr>
            <tr>
                <td>ai_run_custom_code_scripts</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Settings for the AI question</td>
            </tr>
            <tr>
                <td>ai_bodypart_abdomen_chest_pelvis</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Settings for the AI question</td>
            </tr>
            <tr>
                <td>ai_ocr_study_images_google_vision</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Settings for the AI question</td>
            </tr>
            <tr>
                <td>ai_anonymize_study_hl7_dwf</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Settings for the AI question</td>
            </tr>
            <tr>
                <td>ai_classify_contrast_in_study_series</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Settings for the AI question</td>
            </tr>
            <tr>
                <td>ai_categorize_phi_in_study_images_google_vision_then_dlp</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Settings for the AI question</td>
            </tr>
            <tr>
                <td>ai_run_custom_code_namespace_scripts</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Settings for the AI question</td>
            </tr>
            <tr>
                <td>ai_obfuscate_faces</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Settings for the AI question</td>
            </tr>
            <tr>
                <td>enable_namespace_ai_questions</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>A JSON list of enabled namespace AI questions</td>
            </tr>
            <tr>
                <td>apply_settings_to_owned_phr</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Apply account settings to studies in owned PHR accounts</td>
            </tr>
            <tr>
                <td>cloud_storage_config</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Configuration for the cloud storage provider</td>
            </tr>
            <tr>
                <td>enable_doximity_auth</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Enable Doximity login for the account vanity(s)</td>
            </tr>
            <tr>
                <td>enable_google_auth</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Enable Google login for the account vanity(s)</td>
            </tr>
            <tr>
                <td>enable_recaptcha</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Enable recaptcha on join for the account vanity(s)</td>
            </tr>
            <tr>
                <td>suppress_hl7_eom_sep</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Supress the FS separator at the end of HL7 template messages</td>
            </tr>
            <tr>
                <td>no_default_study_date_time</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Do not set a default date and time if the study does not have one</td>
            </tr>
            <tr>
                <td>include_date_in_smart_search</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>In a smart search try parse the value as a DOB</td>
            </tr>
            <tr>
                <td>only_this_account_in_vanity</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Only show this account if accessing it via a vanity URL</td>
            </tr>
            <tr>
                <td>require_pin_to_view</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Hide this account when user did not login with 2FA</td>
            </tr>
            <tr>
                <td>sync_user_login_to_account_login</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Sync the user credentials on account_login and account_password when they are added to an account. If they change their password under an account vanity only update the account_password</td>
            </tr>
            <tr>
                <td>include_in_global_purge</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Include this account in global purging rules</td>
            </tr>
            <tr>
                <td>helpscout_beacon_id</td>
                <td>Text</td>
                <td></td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Account override for the helpscout beacon id</td>
            </tr>
            <tr>
                <td>sendgrid_key</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Account Sendgrid API key. This is setting is never displayed after it is set</td>
            </tr>
            <tr>
                <td>pixel_anonymize_color</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Set the background color for pixel anonymization</td>
            </tr>
            <tr>
                <td>priority_notifications</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Prioritize notifications on the storage queue for the account or namespace</td>
            </tr>
            <tr>
                <td>try_update_original_study</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Enable original study updates within the account</td>
            </tr>
            <tr>
                <td>try_update_original_study_from_namespaces</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Enable study updates for studies shared to these namespaces (comma delimited list of namespace UUIDs). Namespaces from another account are allowed to be listed here. <i>try_update_original_study_to_namespaces</i> should also be enabled appropriately</td>
            </tr>
            <tr>
                <td>try_update_original_study_to_namespaces</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Enable study updates for studies shared from these namespaces (comma delimited list of namespace UUIDs). Namespaces from another account are allowed to be listed here. <i>try_update_original_study_to_namespaces</i> should also be enabled appropriately</td>
            </tr>
            <tr>
                <td>disable_user_days</td>
                <td>Number</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>User accounts will be disabled after this number of days</td>
            </tr>
            <tr>
                <td>see_all_destination_search_in_activity</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Allow users to see all the available destination searches in the activity queue</td>
            </tr>
            <tr>
                <td>multiple_sso_connections</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Support multiple Pingone connections for the account</td>
            </tr>
            <tr>
                <td>mpi_config</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>A JSON hash to with the information needed for the MPI (master patient index) ORM triggered workflow. Each key is the facility code and the value is a configuration hash with the following KV pairs:
                   <ul>
                        <li> search_namespaces &bull; List of namespace uuid(s) to search for the MRN
                        <li> search_destinations &bull; List of destination uuid(s) to query retrieve for the MRN if the namespace search do not find any results
                        <li> share_namespace &bull; UUID of namespace to share the search results into
                        <li> search_status_customfield &bull; UUID of optional Study customfield to put either "primary" or "secondary" for the search source
                        <li> secondary_search &bull; Hash of Flag if a secondary search of namespaces and destinations by patient name and DOB should be run if the primary MRN search does not return any results
                        <li> patient_name &bull; Specify where the patient name is located in the HL7 message, defaults to PID_5
                        <li> patient_birth_date &bull; Specify where the birthdate is located in the HL7 message, defaults to PID_7
                        <li> other_customfields &bull; Optional hash of customfields UUID and HL7 fields to update the study with
                    </ul>
                    The facility code and MRN are extracted from the triplets in PID_3 of the ORM
                </td>
            </tr>
            <tr>
                <td>mpi_allowed</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>UUID of the account that is allowed to perform MPI queries into this account</td>
            </tr>
            <tr>
                <td>study_download_no_reports</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Remove reports from study downloads</td>
            </tr>
            <tr>
                <td>group_local_pushes_by</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>JSON array of fields to form a group by key for local pushes' statuses. The only allowed value for now is "destination_address"</td>
            </tr>
            <tr>
                <td>set_phantom_on_reload</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Set the study to phantom state on a re-upload</td>
            </tr>
            <tr>
                <td>bundle_notify_destination_search</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Condense email notifications for destination searhes initiated from a bundle</td>
            </tr>
            <tr>
                <td>always_use_services_phi</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>On a notify load the latest services phi into the notify payload so that edits to the study after the notify was generated are preserved</td>
            </tr>
            <tr>
                <td>disable_sticky_phi</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Do not make the PHI information sticky so that if the study data changes it is reflected in the UI</td>
            </tr>
            <tr>
                <td>enable_messages_by_study_uid</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Show messages tied to studies with the same UID in the same account</td>
            </tr>
            <tr>
                <td>duplicate_oru_with_study</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Flag to duplicate Hl7 ORU messages when they duplicate a study between accounts</td>
            </tr>
            <tr>
                <td>enable_take_study_feature</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Flag to enable <a href="#study_take">study take feature</a></td>
            </tr>
            <tr>
                <td>take_study_number_to_take_at_a_time</td>
                <td>Number</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Number of studies to take by <a href="#study_take">/study/take</a></td>
            </tr>
            <tr>
                <td>take_study_source_namespace</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>A namespace UUID from which studies will be taken by <a href="#study_take">/study/take</a></td>
            </tr>
            <tr>
                <td>take_study_dedup_by_field</td>
                <td>Text</td>
                <td>study_uid</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Ordinary study field name or a 'customfield-UUID' used to guarantee study uniqueness in <a href="#study_take">/study/take</a> destination namespace</td>
            </tr>
            <tr>
                <td>take_study_sort_by</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Prioritize studies to take on <a href="#study_take">/study/take</a> call, for sorting specifications see <a href="#sort">Sorting</a></td>
            </tr>
            <tr>
                <td>take_study_filter</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Filter studies to take on <a href="#study_take">/study/take</a> call. This should be a JSON object where each key is a filter, see <a href="#filter">Filters</a></td>
            </tr>
            <tr>
                <td>take_study_method</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Select if studies should be moved or shared with the destination namespace on <a href="#study_take">/study/take</a> call. Possible values are: "move", "share", "share" by default</td>
            </tr>
            <tr>
                <td>enable_orders_in_worklist</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Flag to show linked studies in orders tab and linked orders in worklist</td>
            </tr>
            <tr>
                <td>study_requestable_accounts</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>A JSON list of account UUIDs that are allowed to request studies from. This can only be set by a sysadmin</td>
            </tr>
            <tr>
                <td>study_requestable_namespaces</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>A comma separated list of namespace UUIDs that the requested account is allowed to share/duplicate studies from by request.</td>
            </tr>
            <tr>
                <td>associate_oru_by_original_accession_number</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Flag to associate Hl7 messages with a study using an accession number of another study which the study is split from</td>
            </tr>
            <tr>
                <td>associate_adt_by_mrn_for_push_hl7</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Flag to associate ADT Hl7 messages with a study using an patientid of the study during the /study/push/hl7 call processing</td>
            </tr>
            <tr>
                <td>require_site_id_for_groups</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Flag to require site_id attribute to be set for groups in the account. <i>site_id</i> must be set on group creation and edits when the flag is set</td>
            </tr>
            <tr>
                <td>default_query_owner_namespace</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>A namespace UUID to be used as a default owning namespace for the queries created (e.g. auto created queries). </td>
            </tr>
            <tr>
                <td>query_types</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>A JSON list of allowed query types for the account. Each of the query type is defined by a hash, the keys and values in the hash are as follows:
                    <ul>
                        <li> tag &bull; The query type tag
                        <li> arm &bull; The subject arm or an arm list the tag is limited to (optional)
                    </ul>

                </td>
            </tr>
            <tr>
                <td>query_status_tags</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>A JSON list of allowed query statuses for the account. The first status in the list is used as a default status for newly created queries. The Closed status is processed in a special way. Each of the query status is defined by a hash, the keys and values in the hash are as follows:
                    <ul>
                        <li> tag &bull; The query status
                    </ul>
                </td>
            </tr>
            <tr>
                <td>trial_communication_plan</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>A JSON list of escalation rules for the account. Every rule is a hash with the <code>condition</code> and <code>action</code> keys. Each of the condition and action is defined by a hash, <code>condition</code> should follow the condition format used by customfield's <i>show_when</i> field.
                The topmost HASH condition is interpreted with AND logic. Condition parameters (the fields to be referred in the condition) are as follows:
                    <ul>
                        <li> elapsed_from_reply &bull; The number of seconds passed from the last reply
                        <li> elapsed_from_status_change &bull; The number of seconds passed from the last query status change
                        <li> elapsed_from_reminder &bull; The number of seconds passed from the last reminder sent out for the query
                        <li> any query field &bull; Any query field can be referred here
                    </ul>
                    The keys and values for the <code>action</code> are as follows:
                    <ul>
                        <li> do &bull; The action to perform on condition match (remind|add_recipient)
                        <li> user_id &bull; The user ID (or an array of user IDs) to add as a recipient to the query. Applies for the add_recipient action only (optional)
                    </ul>

                </td>
            </tr>
            <tr>
                <td>query_auto_upload_to_unqualified_site</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>A JSON hash with the information needed to create an auto query on study upload for an unqualfied site without <code>test_upload</code> named customfield set for the uploaded study. The keys and values in the hash are as follows:
                    <ul>
                        <li> subject &bull; The query subject line
                        <li> body &bull; The query body
                        <li> key &bull; The query  type tag
                    </ul>
                </td>
            </tr>
            <tr>
                <td>query_emails_reply_to</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>An email address to be used for the Reply-To email header of the query-related emails sent out by the service</td>
            </tr>
            <tr>
                <td>iocm_delete_thin_studies</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Flag to delete a thin study if storage recieves an IOCM delete request</td>
            </tr>
            <tr>
                <td>remove_private_tags_on_upload</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Flag to anonymize or remove all private tags from a study in storage</td>
            </tr>
            <tr>
                <td>maximum_allowed_download_studies</td>
                <td>Number</td>
                <td>10</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>A number of studies to be included in a patient zip download</td>
            </tr>
            <tr>
                <td>cache_series_level_tags</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>Flag to enable series level tags caching in the storage for the dicomweb series metadata call to perform better</td>
            </tr>
            <tr>
                <td>user_pkey_expiration</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>A JSON hash with user public key expiration settings. The keys and values in the hash are as follows:
                    <ul>
                        <li> warn &bull; The number of days after which a public key is considered outdated
                        <li> expire &bull; The number of days after which a public key is considered expired and can no longer be used to log in
                        <li> notify &bull; A comma separated list of emails to warn about an outdated public key
                    </ul>
                </td>
            </tr>
            <tr>
                <td>namespace_names_globally_unique</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Flag to require every namespace to have a unique name (even Groups, for example, must have different names than Locations)</td>
            </tr>
            <tr>
                <td>return_matching_manual_routes_for_study</td>
                <td>Flag</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Flag to return only matching manual routes with studies</td>
            </tr>
            <tr>
                <td>patient_portal_event_new_report_notify_type</td>
                <td>Text</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Notification type for this event. Either <b>sms</b> or <b>email</b>, default is email. Can be overriden in <a href="#patient_set">/patient/set</a>.<br>
                Note: If there is no valid address (email or mobile) for that type, then the opposite type is used.</td>
            </tr>
            <tr>
                <td>patient_portal_event_share_notify_type</td>
                <td>Text</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>Notification type for this event. Either <b>sms</b> or <b>email</b>, default is email. Can be overriden in <a href="#patient_set">/patient/set</a>.<br>
                Note: If there is no valid address (email or mobile) for that type, then the opposite type is used.</td>
            </tr>
            <tr>
                <td>study_push_sms_on_in_process_options</td>
                <td>Text</td>
                <td></td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>It is JSON Hash like <code>{"timeout":<b>0</b>,"interval":<b>60</b>,"limit":<b>3</b>,"users":["uuid1","uuid2",...]}</code>. Bold digit is default value for each key.<br>
                <i>users</i> is array of uuids of users in that account having mobile phone. Error is returned on <a href="#account_set">/account/set</a> if these conditions are not fulfilled, with setting <i>error_subtype</i>=<code>study_push_sms_on_in_process_options:$type:$uuid</code> where $type is one of <code>USER_NOT_IN_ACCOUNT,USER_NOT_FOUND,USER_NOT_IN_ACCOUNT,MOBILE_NOT_FOUND</code>.<br>
                If <i>timeout</i>==0, then this feature is disabled.<br>
                If enabled and for some <i>node</i> there is any <i>study_push_status.status</i>=~<code>I|P</code> hanging for more than <i>timeout</i> minutes, then each <i>interval</i> minutes sms is sent to <i>users</i> defined in options for this node account. Sending stops when no <i>study_push_status.status</i>=~<code>I|P</code> for that <i>destionation</i> or <i>limit</i> sms messages were sent.<br>
                Sms template is <i>study_push_sms_on_in_process_timeout</i>.<br>
                Note: <i>timeout</i> cant be set to nonzero if <i>users</i> is empty. The counter is reset after <code>2*(timeout + interval*limit)</code> minutes since last added study_push. Then it could be reactivated on next hanging <a href="#study_push">/study/push</a>.<br>
                It is triggered on node::monitor, so if interval&lt;15 minutes, it will be triggered later on next node::monitor check.</td>
            </tr>
        </table>

        <a name="ai-questions"><h3>Study AI questions</h3></a>
        AI questions can be run for a study against the AI neural network stack via the <a href="#study_question">/study/question</a> call. The following questions are available:
        <table class="bordered-table">
            <tr>
                <th>Question</th>
                <th>Description</th>
                <th>Account setting</th>
            </tr>
            <tr>
                <td>which_body_part</td>
                <td>Which body part is the study showing</td>
                <td></td>
            </tr>
            <tr>
                <td>has_scanned_docs</td>
                <td>Does the study have any scanned documents in it</td>
                <td></td>
            </tr>
            <tr>
                <td>delete_scanned_docs</td>
                <td>Delete the scanned documents</td>
                <td>ai_delete_scanned_docs</td>
            </tr>
            <tr>
                <td>attach_scanned_docs_as_pdf</td>
                <td>Deletes AI identified scanned images within the study</td>
                <td>ai_attach_scanned_docs_as_pdf</td>
            </tr>
            <tr>
                <td>anonymize_study_images</td>
                <td>Anonymize the study images</td>
                <td>ai_anonymize_study_images</td>
            </tr>
            <tr>
                <td>anonymize_study_images_google_dlp</td>
                <td>Anonymize the study images using Google DLP</td>
                <td>ai_anonymize_study_images_google_dlp</td>
            </tr>
            <tr>
                <td>anonymize_study_images_tensorflow_east</td>
                <td>Anonymize the study images using Tensorflow EAST</td>
                <td>ai_anonymize_study_images_tensorflow_east</td>
            </tr>
            <tr>
                <td>analyze_regions_pyradiomics</td>
                <td>Analyze regions on the study using Pyradiomics</td>
                <td>ai_analyze_regions_pyradiomics</td>
            </tr>
            <tr>
                <td>detect_phi_in_study_images_google_dlp</td>
                <td>Detect PHI presence in the study images using Google DLP</td>
                <td>ai_detect_phi_in_study_images_google_dlp</td>
            </tr>
            <tr>
                <td>anonymize_study_images_aws_rekognition</td>
                <td>Anonymize the study images using AWS Rekognition</td>
                <td>ai_anonymize_study_images_aws_rekognition</td>
            </tr>
            <tr>
                <td>anonymize_study_images_aws_textract</td>
                <td>Anonymize the study images using AWS Textract</td>
                <td>ai_anonymize_study_images_aws_textract</td>
            </tr>
            <tr>
                <td>anonymize_study_hl7</td>
                <td>Anonymize the study HL7</td>
                <td>ai_anonymize_study_hl7</td>
            </tr>
            <tr>
                <td>qureai_detect_brain_bleeds</td>
                <td>Detect brain bleeds</td>
                <td></td>
            </tr>
            <tr>
                <td>qureai_detect_chestxray</td>
                <td>Read chest xray</td>
                <td></td>
            </tr>
            <tr>
                <td>study_manual_route</td>
                <td>Runs routing rules</td>
                <td>ai_study_manual_route</td>
            </tr>
            <tr>
                <td>search_and_replace_study_tags</td>
                <td>Performs search and replace rules on all images in the study</td>
                <td>ai_search_and_replace_study_tags</td>
            </tr>
            <tr>
                <td>delete_duplicate_images</td>
                <td>Deletes images which values are identical to specified DICOM tages</td>
                <td>ai_delete_duplicate_images</td>
            </tr>
            <tr>
                <td>analyze_study_hl7</td>
                <td>Takes hl7 report and analyzes it</td>
                <td></td>
            </tr>
            <tr>
                <td>anonymize_attached_pdf</td>
                <td>Takes all pdf attachments from a study and removes all PHI from them</td>
                <td>ai_anonymize_attached_pdf</td>
            </tr>
            <tr>
                <td>anonymize_attached_pdf_google_dlp</td>
                <td>Takes all pdf attachments from a study and removes all PHI from them</td>
                <td>ai_anonymize_attached_pdf_google_dlp</td>
            </tr>
            <tr>
                <td>lookup_billing_code</td>
                <td>Takes study description and populates billing code mapping</td>
                <td>ai_lookup_billing_code</td>
            </tr>
            <tr>
                <td>run_custom_code_scripts</td>
                <td>Implements ability to run custom code.</td>
                <td>ai_run_custom_code_scripts</td>
            </tr>
            <tr>
                <td>bodypart_abdomen_chest_pelvis</td>
                <td>Detects if the study image(s) contain(s) abdomen, chest and/or pelvis</td>
                <td>ai_bodypart_abdomen_chest_pelvis</td>
            </tr>
            <tr>
                <td>ocr_study_images_google_vision</td>
                <td>Performs OCR using Google Vision API and returns detected text</td>
                <td>ai_ocr_study_images_google_vision</td>
            </tr>
            <tr>
                <td>ai_anonymize_study_hl7_dwf</td>
                <td>Detects if text contains PHI and replaces it with asterisk chars</td>
                <td>anonymize_study_hl7_dwf</td>
            </tr>
            <tr>
                <td>classify_contrast_in_study_series</td>
                <td>Detects the presence of contrast in a series of study images</td>
                <td>ai_classify_contrast_in_study_series</td>
            </tr>
            <tr>
                <td>categorize_phi_in_study_images_google_vision_then_dlp</td>
                <td>Detects the presence of phi in study images and assigns categories to results</td>
                <td>ai_categorize_phi_in_study_images_google_vision_then_dlp</td>
            </tr>
            <tr>
                <td>classify_hemorrhage_in_study_images</td>
                <td>Takes a batch of images and predicts hemorrhages in each image</td>
                <td>ai_classify_hemorrhage_in_study_images</td>
            </tr>
            <tr>
                <td>obfuscate_faces</td>
                <td>Automatically recognizes coordinates of faces within images in the study and blocks them out</td>
                <td>ai_obfuscate_faces</td>
            </tr>
        </table>

        <a name="ai-ns-questions"><h3>Namespace AI questions</h3></a>
        AI questions can be run for a namespace against the AI neural network stack via the <a href="#namespace_question">/namespace/question</a> call. The following questions are available:
        <table class="bordered-table">
            <tr>
                <th>Question</th>
                <th>Description</th>
                <th>Account setting</th>
            </tr>
            <tr>
                <td>run_custom_code_namespace_scripts</td>
                <td>Implements ability to run custom code.</td>
                <td>ai_run_custom_code_namespace_scripts</td>
            </tr>
        </table>

        <a name="session"><h3>Session commands</h3></a>

        <p><a name="session_login"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Log in a session</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/session/login</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>(email || account_name && account_login)</i> &bull; The users email address or the account name and account_login (DEPRECIATED - Use login and vanity)<br>
                    <i>login</i> &bull; The user account_login or email address<br>
                    <i>vanity</i> &bull; The account vanity name. (optional)<br>
                    <i>(password || use_pkey)</i> &bull; The password for password authentication or a flag to use public key authentication<br>
                    <i>new_password</i> &bull; Change the password or account password to this. (optional)<br>
                    <i>validate_session</i> &bull; If you would like to validate an existing session rather than create a new one pass in the sid of the session to valid in this parameter. It will check if the session is still valid and the credentials are for the session. (optional)<br>
                    <i>location</i> &bull; Login location. (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>sid</i> &bull; The session id<br>
                    <i>uuid</i> &bull; The users uuid<br>
                    <i>name</i> &bull; The users name<br>
                    <i>training_todo</i> &bull; Flag if the user is required to do training<br>
                    <i>pin_required</i> &bull; Flag if a PIN is required to validate this session<br>
                    <i>pin_via</i> &bull; How was the PIN sent, the options are TOKEN,EMAIL or SMS<br>
                    <i>sign_required</i> &bull; Flag if a signature is required to validate this session<br>
                    <i>terms_md5</i> &bull; MD5 of the accepted terms of service<br>
                    <i>privacy_md5</i> &bull; MD5 of the accepted privacy policy<br>
                    <i>indicator_md5</i> &bull; MD5 of the accepted indications of use<br>
                    <i>patientid</i> &bull; The primary patientid this session is for (optional)<br>
                    <i>is_proxy</i> &bull; Flag if this is a proxy login<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    INVALID_CREDENTIALS &bull; Invalid user name or password.<br>
                    LOCKOUT &bull; Too many failed attempts<br>
                    BAD_PASSWORD &bull; The new_password does not meet the password requirements<br>
                    PASSWORD_RESET &bull; The password needs to be changed<br>
                    VALIDATION_FAILED &bull; The session validation failed<br>
                    WHITELIST_LOCKOUT &bull; Login blocked by the account whitelist<br>
                    BLOCKED &bull; The user is blocked from the system<br>
                    DISABLED &bull; The user is disabled and needs to be /user/enabled to allow access<br>
                    BRAND_NOT_ALLOWED &bull; The user is limited to some brands to login with allowed_login_brands setting<br>
                    SSO_ONLY &bull; The user can only login via SSO<br>
                    ONLY_ONE &bull; You can pass either the password or use_pkey flag, not both<br>
                    PUBLIC_KEY_EXPIRED &bull; The public key has expired and needs to be changed<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ol>
                        <li> A user can have up to 10 active sessions. Old sessions are dropped first.
                        <li> The call must be a POST
                        <li> If vanity is not passed but the call is from a vanity URL vanity will be populated
                        <li> vanity/login processing rules
                        <ul>
                            <li> If the call has a login but no vanity the user email address is used for searching.
                            <li> If there is a vanity the account_login is used for searching.
                            <li> If the vanity/login search fails the login is used for a user email search
                        </ul>
                        <li> If the user has an account_password the password will be checked against that, if not it will be checked against the user's password
                        <li> At login the user is assigned a session_expire value that is either the system default of 3 hours or the first specific user account session override or the lowest value of all accounts the user is a member of. If a location is passed it will override the session_expire with the value from the login_location account setting. Likewise a brand session_expire will override any other value.
                        <li> If a validate_session succeeds a SESSION_VALIDATED event is written to the users audit log.
                    </ol>
                </td>
            </tr>
        </table>
        <a href="#session-idx">top</a>

        <p><a name="session_user"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get the user information for the session owner</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/session/user</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>settings</i> &bull; A JSON list of user settings set via /setting/set to return (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>namespaces</i> &bull; An array of the namespaces the user can access. Each namespace holds the following fields.<br>
                    * <i>uuid</i> &bull; Id of the namespace<br>
                    * <i>name</i> &bull; Description of the namespace<br>
                    <i>sid_md5</i> &bull; The md5 of the sid<br>
                    <i>accelerator_used</i> &bull; Flag if the session is running through an accelerator<br>
                    <i>session_expire</i> &bull; The session expiration value in minutes<br>
                    <i>settings</i> &bull; JSON hash of the requested settings (optional)<br>
                    The rest of the fields are the same as <a href="#user_get">/user/get</a><br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#session-idx">top</a>

        <p><a name="session_permissions"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get the permissions information for the session owner</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/session/permissions</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>(account_id || namespace_id)</i> &bull; Either the account or namespaces to get the users permissions for<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    The <a href="#permissions">permissions</a> for the user in this account<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account_id or namespace_id was not found<br>
                </td>
            </tr>
        </table>
        <a href="#session-idx">top</a>

        <p><a name="session_logout"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Log out a session</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/session/logout</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>logout_url</i> &bull; URL to take to use to. Optional and driven by the account setting<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The sid was not found
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#session-idx">top</a>

        <p><a name="session_csrf_enable"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Enable cross site request forgery checking for the session</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/session/csrf/enable</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id<br>
                    <i>redirect_uri</i> &bull; The URL to redirect to<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    A redirect to the passed URL which sets an httponly CSFR token cookie
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    INVALID_URL &bull; The URL must be a relative URL<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    The client must not store the sid in a cookie for CSRF checking to work
                </td>
            </tr>
        </table>
        <a href="#session-idx">top</a>

        <p><a name="session_uuid"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a uuid from the server</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/session/uuid</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; A uuid<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#session-idx">top</a>

        <p><a name="session_oauth_start"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Redirect to the brands OAuth provider</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/session/oauth/start</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    A redirect to the brand OAuth provider
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NO_OAUTH &bull; OAuth is not setup for the associated brand<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#session-idx">top</a>

        <p><a name="session_oauth"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Register and login with oauth</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/session/oauth</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>code</i> &bull; The OAuth code<br>
                    <i>vendor</i> &bull; The OAuth vendor (doximity|google|brand)<br>
                    <i>redirect_uri</i> &bull; The redirect_uri used to get the code parameter<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The users uuid<br>
                    <i>name</i> &bull; The users name<br>
                    <i>new_user</i> &bull; Flag if they are a new user<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    INVALID_CODE &bull; Invalid code<br>
                    INVALID_VENDOR &bull; Invalid vendor<br>
                    OTHER_OAUTH &bull; The user is already setup to OAuth via another vendor<br>
                    MISSING_INFORMATION &bull; The response from the OAuth provider is missing either the email, first_name or last_name fields<br>
                    NO_OAUTH &bull; OAuth is not setup for the associated brand<br>
                    AUTH_FAILED &bull; OAuth failed or a user id was not returned<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#session-idx">top</a>

        <p><a name="session_oauth_token"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get an OAuth token to access other API calls</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/session/oauth/token</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>grant_type</i> &bull; The grant type, set to <code>client_credentials</code><br>
                    <i>client_id</i> &bull; The users email address<br>
                    <i>client_secret</i> &bull; The users password<br>
                    <i>duration</i> &bull; The number of seconds the token is valid for (optional and defaults to 3600 with a maximum value of 86400)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>access_token</i> &bull; The access token<br>
                    <i>created_at</i> &bull; Timestamp when the token was created<br>
                    <i>expires_in</i> &bull; Number of seconds before the token expires<br>
                    <i>token_type</i> &bull; The token type <code>bearer</code><br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    LOCKOUT &bull; Too many failed attempts<br>
                    AUTH_FAILED &bull; Authentication failed<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> The access_token should be passed as the Bearer value in the Authorization headers to access API entry points that require validation
                        <li> The call must be a POST
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#session-idx">top</a>

        <p><a name="session_pin"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Validate the PIN for the session</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/session/pin</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id<br>
                    <i>pin</i> &bull; The PIN<br>
                    <i>remember_device</i> &bull; Remember the device as trusted. (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    INVALID_SID &bull; Invalid sid<br>
                    INVALID_PIN &bull; Invalid PIN<br>
                    PIN_EXPIRED &bull; The PIN has expired<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> The PIN expires after 10 minutes or 3 invalid attempts to validate it
                        <li> Other API calls that require a sid will return a 401 until the PIN is validated
                        <li> <i>remember_device</i> parameter enables "Remember this device" feature used to suppress second authentication factor (PIN) on next login. The device_id HTTP cookie will be set and the device will be remembered. Both cookie and IP address should match for PIN step to be skipped the next login. Cookie is set for 30 days. Number of trusted devices is limited to 100, the most old ones are evicted when a new device is remembered.
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#session-idx">top</a>

        <p><a name="session_sign"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Validate the session using a public key</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/session/sign</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id<br>
                    <i>signature</i> &bull; The Base64-encoded signature<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    INVALID_SID &bull; Invalid sid<br>
                    INVALID_SIGNATURE &bull; Invalid signature<br>
                    PUBLIC_KEY_EXPIRED &bull; The public key has expired and needs to be changed<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> The session is invalidated when invalid signature is provided
                        <li> Other API calls that require a sid will return a 401 until the session which requires a signature is validated
                        <li> The signature is calculated for a message consisting of the following parts joined by null character: user email, the current sid (binary form), the user's public key in DER form and the 'sha256' string. The signature should be calculated using the user public key's algorithm with the SHA-256 hashing algorithm.
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#session-idx">top</a>

        <p><a name="session_ttl"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Return the TTL for the sid</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/session/ttl</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>ttl</i> &bull; Number of minutes the session has to live <br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    EXPIRED &bull; Expired<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#session-idx">top</a>

        <a name="us"><h3>User commands</h3></a>

        <p><a name="user_join"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Join the system</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/user/join</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>first</i> &bull; First name<br>
                    <i>last</i> &bull; Last name<br>
                    <i>password</i> &bull; Password<br>
                    <i>email</i> &bull; Email<br>
                    <i>share_code</i> &bull; Share code they are joining from (optional)<br>
                    <i>captcha_response</i> &bull; Response from captcha (optional)<br>
                    <i>customfield-{CUSTOMFIELD_UUID}</i> &bull; Custom field(s) defined in the vanity_registration_customfields account setting (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; uuid of the user<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    DUPLICATE_EMAIL &bull; The email is already used<br>
                    LOCKOUT &bull; Too many joins attempt<br>
                    BAD_PASSWORD &bull; Password needs to be at least 8 characters long, contain at least two numbers, contain at least two characters and can't be one of your last three passwords<br>
                    CAPTCHA_FAILED &bull; Verifying the captcha failed<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> The call must be a POST
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#user-idx">top</a>

        <p><a name="user_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add a user</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/user/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; Account id to check for the user_edit permission<br>
                    <i>first</i> &bull; First name<br>
                    <i>last</i> &bull; Last name<br>
                    <i>password</i> &bull; Password<br>
                    <i>email</i> &bull; Email<br>
                    <i>mobile_phone</i> &bull; SMS phone number<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; uuid of the user<br>
                    <i>namespace_id</i> &bull; The association namespace uuid<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    user_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    DUPLICATE_EMAIL &bull; The email is already used<br>
                    BAD_PASSWORD &bull; Password needs to be at least 8 characters long, contain at least two numbers, contain at least two characters and can't be one of your last three passwords<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> The call must be a POST
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#user-idx">top</a>

        <p><a name="user_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get the information for a user</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/user/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The users uuid (optional). Uses the session user if not passed<br>
                    <i>account_id</i> &bull; Account id if you are trying to get a user other than yourself (optional)<br>
                    <i>public_key_format</i> &bull; The desired public key format to be returned <i>rfc4716</i>, by default (rfc4716|openssh|asis) (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The user uuid<br>
                    <i>name</i> &bull; The user name<br>
                    <i>first</i> &bull; First name<br>
                    <i>last</i> &bull; Last name<br>
                    <i>email</i> &bull; Email<br>
                    <i>mobile_phone</i> &bull; SMS phone number<br>
                    <i>namespace_id</i> &bull; Namespace for the user<br>
                    <i>sysadmin</i> &bull; Is the user a sysadmin<br>
                    <i>support</i> &bull; Is the user a support user<br>
                    <i>is_anonymous</i> &bull; Is this an anonymous user<br>
                    <i>event_share</i> &bull; Notify the user on a share into the users namespace<br>
                    <i>event_approve</i> &bull; Notify the user on a approval needed into the users namespace<br>
                    <i>event_upload</i> &bull; Notify the user on an upload into the users namespace<br>
                    <i>event_upload_fail</i> &bull; Notify the user on a failed upload into the users namespace<br>
                    <i>event_harvest</i> &bull; Notify the user on a harvest into the users namespace<br>
                    <i>event_new_report</i> &bull; Notify the user when a report is attached in the users namespace<br>
                    <i>event_report_remove</i> &bull; Notify the user when a report is removed in the users namespace<br>
                    <i>event_study_comment</i> &bull; Notify the user when a comment is attached to a study in the users namespace<br>
                    <i>event_status_change</i> &bull; Notify the user when the status of a study is changed<br>
                    <i>event_message</i> &bull; Notify the user when a message is sent to the users namespace<br>
                    <i>event_link</i> &bull; Notify the user when an anonymous link is hit in the namespace<br>
                    <i>event_link_mine</i> &bull; Notify the user when an anonymous link created by the user is hit in the namespace<br>
                    <i>event_thin_study_success</i> &bull; Notify the user when a thin study retrieval they initiated succeeds<br>
                    <i>event_thin_study_fail</i> &bull; Notify the user when a thin study retrieval they initiated fails<br>
                    <i>event_case_assignment</i> &bull; Notify the user when they are assigned a case as a medical or admin user<br>
                    <i>event_query_add</i> &bull; Notify the user when a new query is issued<br>
                    <i>event_query_edit</i> &bull; Notify the user when a query is edited<br>
                    <i>event_query_new_recipient</i> &bull; Notify the user when they are added to a query as a new recipient<br>
                    <i>event_query_reply</i> &bull; Notify the user when they leave a new reply in a query<br>
                    <i>event_site_qualified</i> &bull; Notify the user when a trial site is qualified for the clinical trial account<br>
                    <i>share_code</i> &bull; The share code of the user<br>
                    <i>share_description</i> &bull; The share description of the user<br>
                    <i>time_zone</i> &bull; The users time zone abbreviation<br>
                    <i>pin_required</i> &bull; Flag to require a PIN for every login<br>
                    <i>allowed_login_brands</i> &bull; A comma separated list of Brand UUIDs that the user is allowed to use when logging in<br>
                    <i>npi</i> &bull; NPI number<br>
                    <i>terms_md5</i> &bull; MD5 of the accepted terms of service<br>
                    <i>privacy_md5</i> &bull; MD5 of the accepted privacy policy<br>
                    <i>indicator_md5</i> &bull; MD5 of the accepted indications of use<br>
                    <i>last_login</i> &bull; Timestamp of the last login<br>
                    <i>event_incoming_study_request</i> &bull; Notify the user when they get an incoming study request<br>
                    <i>public_key</i> &bull; A public key for public key authentication<br>
                    <i>ui_json</i> &bull; JSON for UI settings. <span>Possible options:</span>
                    <ul>
                        <li>show_org_manage_link (boolean) &bull; Show link to manage multiple organizations</li>
                        <li>advanced_search (array) &bull; Advanced search customization for role. See account level "advanced_search" ui_json param for possible values</li>
                        <li>enable_v3_viewer (boolean) &bull; If set, enables ProViewer for PHR account</li>
                    </ul>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The user can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to access this user record<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#user-idx">top</a>

        <p><a name="user_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Set the information for a user</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/user/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The users uuid (optional). Uses the session user if not passed<br>
                    <i>first</i> &bull; First name (optional)<br>
                    <i>last</i> &bull; Last name (optional)<br>
                    <i>email</i> &bull; Email (optional)<br>
                    <i>mobile_phone</i> &bull; SMS phone number (optional)<br>
                    <i>password</i> &bull; User password (optional)<br>
                    <i>old_password</i> &bull; Previous user password (optional)<br>
                    <i>share_code</i> &bull; The share code of the user (optional)<br>
                    <i>share_description</i> &bull; The share description of the user (optional)<br>
                    <i>account_id</i> &bull; Account id if you are trying to set a user other than yourself (optional)<br>
                    <i>cc_token</i> &bull; The credit card token to attach to the users account (optional)<br>
                    <i>time_zone</i> &bull; The users time zone name as per https://www.postgresql.org/docs/9.1/static/view-pg-timezone-names.html (optional)<br>
                    <i>pin_required</i> &bull; Flag to require a PIN for every login (optional)<br>
                    <i>allowed_login_brands</i> &bull; A comma separated list of Brand UUIDs that the user is allowed to use when logging in (optional)<br>
                    <i>terms_md5</i> &bull; MD5 of the accepted terms of service<br>
                    <i>privacy_md5</i> &bull; MD5 of the accepted privacy policy<br>
                    <i>indicator_md5</i> &bull; MD5 of the accepted indications of use<br>
                    <i>public_key</i> &bull; A public key for public key authentication (optional)<br>
                    <i>ui_json</i> &bull; JSON for UI settings (optional) <span>possible options:</span>
                    <ul>
                        <li>show_org_manage_link (boolean) &bull; Show link to manage multiple organizations</li>
                        <li>advanced_search (array) &bull; Advanced search customization for role. See account level "advanced_search" ui_json param for possible values</li>
                        <li>enable_v3_viewer (boolean) &bull; If set, enables ProViewer for PHR account</li>
                    </ul>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The user can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to edit this user record. The <i>error_subtype</i> will hold the specific reason permission was denied.<br>
                    DUPLICATE_EMAIL &bull; The email is already used<br>
                    BAD_PASSWORD &bull; Password needs to be at least 8 characters long, contain at least two numbers, contain at least two characters and can't be one of your last three passwords<br>
                    INVALID_TOKEN &bull; The cc_token is invalid<br>
                    INVALID_PASSWORD &bull; The old_password does not match the current password<br>
                    INVALID_TIME_ZONE &bull; The time zone is invalid<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ol>
                        <li> The call must be a POST
                        <li> If you are trying to set a user other than yourself you must have user_edit permissions in the account and the user must only be in your account.
                        <li> You can not change the password, email or cc_token or MD5 of acceptances of another user. Any changes will be ignored.
                        <li> Only sysadmins and support users are allowed to change <i>allowed_login_brands</i>. An ordinary cannot change allowed_login_brands even for himself.
                        <li> If a time_zone is set it will take precedence over any time zone passed in filter.tz. This allows a distributed organization to ensure that everyone is looking at the same data.
                        <li> The public key should be in RFC4716 or OpenSSH format.
                    </ol>
                </td>
            </tr>
        </table>
        <a href="#user-idx">top</a>

        <p><a name="user_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete yourself from the system</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/user/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                    IN_USE &bull; The user is a sid user for a webhook<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#user-idx">top</a>

       <p><a name="user_password_lost"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>A lost password request</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/user/password/lost</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>email</i> &bull; The email<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    LOCKOUT &bull; Too many failed attempts<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    An email with a link to reset the password will be mailed to the user
                </td>
            </tr>
        </table>
        <a href="#user-idx">top</a>

        <p><a name="user_password_reset"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Reset the users password</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/user/password/reset</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>token</i> &bull; The reset token<br>
                    <i>password</i> &bull; The new password<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    INVALID_TOKEN &bull; The token is invalid<br>
                    BAD_PASSWORD &bull; Password needs to be at least 8 characters long, contain at least two numbers, contain at least two characters and can't be one of your last three passwords<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#user-idx">top</a>

       <p><a name="user_welcome"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Send a welcome message to the user</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/user/welcome</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>email</i> &bull; The email of the user to welcome<br>
                    <i>account_id</i> &bull; Id of the account to welcome them to<br>
                    <i>link</i> &bull; URL to reset the password at. The reset token will be appended to the link<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The user can not be found<br>
                    INVALID_LINK &bull; The link needs to be a https link within the site domain
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> The welcome email with a password reset link with be mailed to the user
                        <li> If the user_account record has a customfield named <code>welcome_email_vanity</code> the value of that field will be used as the vanity to brand the email
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#user-idx">top</a>

        <p><a name="user_join_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a list of the accounts the user can join</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/user/join/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>accounts</i> &bull; An array of the accounts. Each account holds the following fields.<br>
                    * <i>uuid</i> &bull; Id of the account<br>
                    * <i>name</i> &bull; Name of the account<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    This will only return accounts the user is not a member of
                </td>
            </tr>
        </table>
        <a href="#user-idx">top</a>

        <p><a name="user_join_request"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Request to join an account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/user/join/request</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; Id of the account to request to join<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to join this account<br>
                    ALREADY_MEMBER &bull; The user is already a member of the account<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#user-idx">top</a>

        <p><a name="user_invite"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Invite a user to join an account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/user/invite</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; The account to invite the person too<br>
                    <i>role_id</i> &bull; The role to give the user (optional)<br>
                    <i>email</i> &bull; Email address of the person to invite<br>
                    <i>link</i> &bull; URL to accept the invitation at. The invitation id will be appended to the link<br>
                    <i>link_already</i> &bull; URL to accept the invitation at for an existing user on the system. The invitation id will be appended to the link (optional)<br>
                    <i>groups</i> &bull; A JSON hash with the keys the group uuids to add the user to and the values the role uuid for the group (optional)<br>
                    <i>locations</i> &bull; A JSON hash with the keys the location uuids to add the user to and the values the role uuid for the location (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; Id of the invitation<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    account_user_invite
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account or role can not be found. The <i>error_subtype</i> holds the uuid of the not found item<br>
                    NOT_PERMITTED &bull; You are not permitted to invite users to this account<br>
                    INVALID_EMAIL &bull; Enter a valid email address<br>
                    ALREADY_EXISTS &bull; They are already in this account<br>
                    INVALID_JSON &bull; The field is not in valid JSON format. The <i>error_subtype</i> holds the name of the field<br>
                    NOT_HASH &bull; The field is not a JSON hash. The <i>error_subtype</i> holds the name of the field<br>
                    INVALID_LINK &bull; The link needs to be a https link within the site domain
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li>An email will be sent to the user inviting them to join this account.
                        <li>The email will contain a link of the form {link}{invite_id}.
                        <li>The UI should process this link to extract the invite_id and use it on the <a href="#user_invite_accept">/user/invite/accept</a> command.
                        <li>If a role is not specified the user will be given the default role.
                        <li>The account switch add_on_invite changes the behavior so that the user is automatically added if they are a member of the system
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#user-idx">top</a>

        <p><a name="user_invite_accept"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Accept an invitation</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/user/invite/accept</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; Id of the invitation<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The invitation was not found<br>
                    ACCEPTED &bull; The invitation was already accepted<br>
                    ALREADY_EXISTS &bull; They are already in this account<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    The user will be added to the account and the invitor will be emailed a notification.
                </td>
            </tr>
        </table>
        <a href="#user-idx">top</a>

        <p><a name="user_namespace_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get the namespace the user has access to</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/user/namespace/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; Only return the namespaces for this account (optional)<br>
                    <i>plus_phr</i> &bull; Flag to include the PHR account as well if account_id was specified (optional)<br>
                    <i>name_and_id_only</i> &bull; Flag to return only the the namespace name and uuid (optional)<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>namespaces</i> &bull; An array of the namespaces. Each namespace holds the following fields.<br>
                    * <i>uuid</i> &bull; Id of the namespace<br>
                    * <i>name</i> &bull; Description of the namespace<br>
                    * <i>type</i> &bull; Type of object the namespace is linked to (account_id|group_id|location_id|user_id)<br>
                    * <i>type_uuid</i> &bull; Id of the object the namespace is linked to<br>
                    * <i>permissions</i> &bull; The users permissions in the namespace<br>
                    * <i>role_id</i> &bull; The role's UUID or null if was not used any for permissions calculation<br>
                    * <i>settings</i> &bull; The namespace settings<br>
                    * <i>destinations</i> &bull; An array of the destinations the users can push to. Each object in the array has the same fields as the <a href="#destination_get">/destination/get</a> command.<br>
                    * <i>events</i> &bull; A hash of the event flags for the namespace.<br>
                    * <i>share_code</i> &bull; The share code of the namespace.<br>
                    * <i>study_count</i> &bull; The total number of approved, non-phantom studies in the namespace<br>
                    * <i>thin_study_count</i> &bull; The total number of thin studies in the namespace<br>
                    * <i>search_threshold</i> &bull; The total number of studies that should trigger a switch over to a search rather than a list UI<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#user-idx">top</a>

        <p><a name="user_event"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get the users event flags for a namespace</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/user/event</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>namespace_id</i> &bull; Id of the namespace to set the flags on<br>
                    <i>uuid</i> &bull; Return event flags for this user, not current user (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>event_share</i> &bull; Notify the user on a share into the namespace (optional)<br>
                    <i>event_approve</i> &bull; Notify the user on a approval needed into the namespace (optional)<br>
                    <i>event_upload</i> &bull; Notify the user on an upload into the namespace (optional)<br>
                    <i>event_upload_fail</i> &bull; Notify the user on a failed upload into the namespace (optional)<br>
                    <i>event_harvest</i> &bull; Notify the user on a harvest into the namespace (optional)<br>
                    <i>event_new_report</i> &bull; Notify the user when a report is attached in the namespace (optional)<br>
                    <i>event_report_remove</i> &bull; Notify the user when a report is removed in the namespace (optional)<br>
                    <i>event_study_comment</i> &bull; Notify the user when a comment is attached to a study in the namespace (optional)<br>
                    <i>event_status_change</i> &bull; Notify the user when the status of a study is changed (optional)<br>
                    <i>event_message</i> &bull; Notify the user when a message is sent to the namespace (optional)<br>
                    <i>event_node</i> &bull; Notify the user when an account node sends an event (optional)<br>
                    <i>event_link</i> &bull; Notify the user when an anonymous link is hit in the namespace (optional)<br>
                    <i>event_link_mine</i> &bull; Notify the user when an anonymous link created by the user is hit in the namespace (optional)<br>
                    <i>event_thin_study_success</i> &bull; Notify the user when a thin study retrieval they initiated succeeds (optional)<br>
                    <i>event_thin_study_fail</i> &bull; Notify the user when a thin study retrieval they initiated fails (optional) <br>
                    <i>event_case_assignment</i> &bull; Notify the user when they are assigned a case as a medical or admin user (optional)<br>
                    <i>event_incoming_study_request</i> &bull; Notify the user when they get an incoming study request (optional)<br>
                    <i>event_query_add</i> &bull; Notify the user when a new query is issued (optional)<br>
                    <i>event_query_edit</i> &bull; Notify the user when a query is edited (optional)<br>
                    <i>event_query_new_recipient</i> &bull; Notify the user when they are added to a query as a new recipient (optional)<br>
                    <i>event_query_reply</i> &bull; Notify the user when they leave a new reply in a query (optional)<br>
                    <i>event_site_qualified</i> &bull; Notify the user when a trial site is qualified for the clinical trial account (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The namespace or user can not be found<br>
                    NOT_MEMBER &bull; The user is not a member of this namespace<br>
                    NOT_PERMITTED &bull; You are not allowed to get user's event flags<br>
                    INVALID_FLAG &bull; An invalid flag was passed. The <i>error_subtype</i> holds the name of the invalid flag<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> * To get event flags of an other user you must be a sysadmin user, a support user for the namespace or have a role with the <i>user_view_others_notifications</i> permission for the namespace
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#user-idx">top</a>

        <p><a name="user_event_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Set the users event flags for a namespace</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/user/event/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>namespace_id</i> &bull; Id of the namespace to set the flags on<br>
                    <i>uuid</i> &bull; Return event flags for this user, not current user (optional)<br>
                    <i>event_share</i> &bull; Notify the user on a share into the namespace (optional)<br>
                    <i>event_approve</i> &bull; Notify the user on a approval needed into the namespace (optional)<br>
                    <i>event_upload</i> &bull; Notify the user on an upload into the namespace (optional)<br>
                    <i>event_upload_fail</i> &bull; Notify the user on a failed upload into the namespace (optional)<br>
                    <i>event_harvest</i> &bull; Notify the user on a harvest into the namespace (optional)<br>
                    <i>event_new_report</i> &bull; Notify the user when a report is attached in the namespace (optional)<br>
                    <i>event_report_remove</i> &bull; Notify the user when a report is removed in the namespace (optional)<br>
                    <i>event_study_comment</i> &bull; Notify the user when a comment is attached to a study in the namespace (optional)<br>
                    <i>event_status_change</i> &bull; Notify the user when the status of a study is changed (optional)<br>
                    <i>event_message</i> &bull; Notify the user when a message is sent to the namespace (optional)<br>
                    <i>event_link</i> &bull; Notify the user when an anonymous link is hit in the namespace (optional)<br>
                    <i>event_link_mine</i> &bull; Notify the user when an anonymous link created by the user is hit in the namespace (optional)<br>
                    <i>event_thin_study_success</i> &bull; Notify the user when a thin study retrieval they initiated succeeds (optional)<br>
                    <i>event_thin_study_fail</i> &bull; Notify the user when a thin study retrieval they initiated fails (optional) <br>
                    <i>event_case_assignment</i> &bull; Notify the user when they are assigned a case as a medical or admin user (optional)<br>
                    <i>event_incoming_study_request</i> &bull; Notify the user when they get an incoming study request (optional)<br>
                    <i>event_query_add</i> &bull; Notify the user when a new query is issued (optional)<br>
                    <i>event_query_edit</i> &bull; Notify the user when a query is edited (optional)<br>
                    <i>event_query_new_recipient</i> &bull; Notify the user when they are added to a query as a new recipient (optional)<br>
                    <i>event_query_reply</i> &bull; Notify the user when they leave a new reply in a query (optional)<br>
                    <i>event_site_qualified</i> &bull; Notify the user when a trial site is qualified for the clinical trial account (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The namespace or user can not be found<br>
                    NOT_MEMBER &bull; The user is not a member of this namespace<br>
                    NOT_PERMITTED &bull; You are not allowed to set user's event flags<br>
                    INVALID_FLAG &bull; An invalid flag was passed. The <i>error_subtype</i> holds the name of the invalid flag<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> * To set your own event flags you must have the <i>user_modify_notifications</i> permission for the namespace
                        <li> * To set event flags of an other user you must be a sysadmin user, a support user for the namespace or have a role with the <i>user_modify_others_notifications</i> permission for the namespace
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#user-idx">top</a>

        <p><a name="user_token"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Set and get the shared secret for a token authenticator</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/user/token</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>generate</i> &bull; Flag to generate the shared secret for a token authenticator and enable TOKEN PIN authentication<br>
                    <i>delete</i> &bull; Flag to delete the shared secret and disable TOKEN PIN authentication<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>enabled</i> &bull; Flag if token authentication is enabled<br>
                    <i>secret</i> &bull; The base32 encoded shared secret for the authenticator (only returned if the generate flag is passed)<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                    ALREADY_DONE &bull; A shared secret was already generated<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#user-idx">top</a>

        <p><a name="user_device_clear"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Forget all trusted (remembered) devices for the user</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/user/device/clear</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#user-idx">top</a>


        <p><a name="user_signature"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Set and get the users signature</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/user/signature</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>signature</i> &bull; Set the users signature to this base64 encoded image<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>signature</i> &bull; The users signature as a base64 encoded image<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#user-idx">top</a>

        <p><a name="user_enable"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Enable a disabled user</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/user/enable</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; User uuid<br>
                    <i>disable</i> &bull; A flag indicating whether to disable the user (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The user can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to enable this user<br>
                    NOT_DISABLED &bull; The user is not disabled<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> You can not enable yourself
                        <li> A sysadmin or support user can enable anyone else
                        <li> An account user with an adminstrative role can enable any user in the account
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#user-idx">top</a>

        <p><a name="user_pubkey_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>List the users that use public key authentication</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/user/pubkey/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>uuid</i> &bull; The node id<br>
                    <i>serial_no</i> &bull; The serial number of the node<br>
                    <i>public_key_format</i> &bull; The desired public key format to be returned, <i>rfc4716</i> by default (rfc4716|openssh|asis) (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>users</i> &bull; An array of the users.  Each object holds the following fields: email, public_key<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The node can not be found<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> The list is sorted by creation order from most recent to oldest
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#user-idx">top</a>

        <p><a name="user_pubkey_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Set the public key for a user</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/user/pubkey/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>uuid</i> &bull; The node id<br>
                    <i>serial_no</i> &bull; The serial number of the node<br>
                    <i>email</i> &bull; The users email<br>
                    <i>public_key</i> &bull; A public key for public key authentication<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The node or user can not be found<br>
                    NO_USER_PUBKEY &bull; The user does not use public key authentication<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    The user must have a public key already to set the new public key
                </td>
            </tr>
        </table>
        <a href="#user-idx">top</a>

        <a name="study"><h3>Study commands</h3></a>

        <p><a name="study_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add a study from a node</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>(sid || uuid && serial_no)</i> &bull; Either the sid or the node id and serial number<br>
                    <i>(study_uid || study_uid && storage_namespace && phi_namespace)</i> &bull; The study uid if node authentication  or the storage triplet if sid authentication<br>
                    <i>thin</i> &bull; Flag to add this as a thin study (optional)<br>
                    <i>patient_name</i> &bull; DICOM tag (0010,0010)(optional)<br>
                    <i>patientid</i> &bull; DICOM tag (0010,0020) (optional)<br>
                    <i>patient_sex</i> &bull; DICOM tag (0010,0040) (optional)<br>
                    <i>patient_birth_date</i> &bull; DICOM tag (0010,0030) (optional)<br>
                    <i>patient_birth_time</i> &bull; DICOM tag (0010,0032) (optional)<br>
                    <i>patient_age</i> &bull; DICOM tag (0010,1010) (optional)<br>
                    <i>patient_weight</i> &bull; DICOM tag (0010,1030) (optional)<br>
                    <i>patient_address</i> &bull; DICOM tag (0010,1040) (optional)<br>
                    <i>patient_size</i> &bull; DICOM tag (0010,1020) (optional)<br>
                    <i>patientid_other</i> &bull; DICOM tag (0010,1000) (optional)<br>
                    <i>patient_name_other</i> &bull; DICOM tag (0010,1001) (optional)<br>
                    <i>patient_phone</i> &bull; DICOM tag (0010,2154) (optional)<br>
                    <i>patient_additional_history</i> &bull; DICOM tag (0010,21B0) (optional)<br>
                    <i>study_description</i> &bull; DICOM tag (0008,1030) (optional)<br>
                    <i>accession_number</i> &bull; DICOM tag (0008,0050) (optional)<br>
                    <i>patient_birthname</i> &bull; DICOM tag (0010,1005) (optional)<br>
                    <i>patient_mother_birthname</i> &bull; DICOM tag (0010,1060) (optional)<br>
                    <i>medical_record_locator</i> &bull; DICOM tag (0010,1090) (optional)<br>
                    <i>patient_religious_preference</i> &bull; DICOM tag (0010,21F0) (optional)<br>
                    <i>patient_comments</i> &bull; DICOM tag (0010,4000) (optional)<br>
                    <i>patient_current_location</i> &bull; DICOM tag (0038,0300) (optional)<br>
                    <i>patient_institution_residence</i> &bull; DICOM tag (0038,0400) (optional)<br>
                    <i>patient_ethnic_group</i> &bull; DICOM tag (0010,2160) (optional)<br>
                    <i>patient_occupation</i> &bull; DICOM tag (0010,2180) (optional)<br>
                    <i>study_date</i> &bull; DICOM tag (0008,0020) (optional)<br>
                    <i>study_time</i> &bull; DICOM tag (0008,0030) (optional)<br>
                    <i>modality</i> &bull; DICOM tag (0008,0060) (optional)<br>
                    <i>referring_physician</i> &bull; DICOM tag (0008,0090) (optional)<br>
                    <i>image_count</i> &bull; Images in the study (optional)<br>
                    <i>attachment_count</i> &bull; Attachment count (optional)<br>
                    <i>integration_key</i> &bull; Integration key for the study (optional)<br>
                    <i>destination_ae_title</i> &bull; The destination aetitle (optional)<br>
                    <i>source_ae_title</i> &bull; The source aetitle (optional)<br>
                    <i>node_id</i> &bull; If this is a thin study the gateway UUID to retrieve it from can be specified (optional)<br>
                    <i>customfield-{CUSTOMFIELD_UUID|DICOM_TAG}</i> &bull; Custom field(s), see notes in /study/add (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The study uuid<br>
                    <i>engine_fqdn</i> &bull; The FQDN of the engine to store the study on<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    study_upload or study_thin<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    INVALID_INTEGER &bull; An invalid integer was passed. The <i>error_subtype</i> holds the name of the invalid integer<br>
                    INVALID_FLAG &bull; An invalid flag was passed. The <i>error_subtype</i> holds the name of the invalid flag<br>
                    INVALID_CREDENTIALS &bull; The sid or node credentials are invalid<br>
                    ALREADY_EXISTS &bull; The study already exists. The <i>error_subtype</i> holds the uuid of the study and <i>error_data</i> holds the data from the <a href="#study_get">/study/get</a> call<br>
                    INVALID_CUSTOMFIELD &bull; Invalid custom field(s) name or value were passed. The <i>error_subtype</i> holds an array of the error details<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                    NAMESPACE_NOT_FOUND &bull; The namespace was not found<br>
                    NOT_FOUND &bull; The <i>error_subtype</i> holds the name of the key for the object that can not be found<br>
                    PENDING_RESTORE &bull; The study is getting retrieved from the archive. Try this call again after a delay<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> The study will be added as phantom study unless the thin flag is set. A /study/notify call from storage will remove the phantom status.
                        <li> If the node configuration has do_local_push set to true then routing rules will be run to create any push job(s) to send the study to other locations attached to the node. The detail field in /node/ping will contain use_cache for these push jobs.
                        <li> A customfield either be a defined customfield or an arbitrary DICOM tag if the account setting enable_dicom_tag_customfields is on. For a defined customfield pass the UUID for a DICOM tag pass the tag in (XXXX,XXXX) format.
                        <li> If this is a thin study the study_uid does not need to be and should not be passed in
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Update a study</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>(sid || uuid && serial_no)</i> &bull; Either the sid or the node id and serial number<br>
                    <i>(study_id || study_uid || study_uid && storage_namespace && phi_namespace)</i> &bull; The uuid of the study if sid authentication or the study_uid if node authentication or the storage triplet if you want a future set<br>
                    <i>patient_name</i> &bull; DICOM tag (0010,0010) (optional)<br>
                    <i>patientid</i> &bull; DICOM tag (0010,0020) (optional)<br>
                    <i>patient_sex</i> &bull; DICOM tag (0010,0040) (optional)<br>
                    <i>patient_birth_date</i> &bull; DICOM tag (0010,0030) (optional)<br>
                    <i>patient_birth_time</i> &bull; DICOM tag (0010,0032) (optional)<br>
                    <i>patient_age</i> &bull; DICOM tag (0010,1010) (optional)<br>
                    <i>patient_weight</i> &bull; DICOM tag (0010,1030) (optional)<br>
                    <i>patient_address</i> &bull; DICOM tag (0010,1040) (optional)<br>
                    <i>patient_size</i> &bull; DICOM tag (0010,1020) (optional)<br>
                    <i>patientid_other</i> &bull; DICOM tag (0010,1000) (optional)<br>
                    <i>patient_name_other</i> &bull; DICOM tag (0010,1001) (optional)<br>
                    <i>patient_phone</i> &bull; DICOM tag (0010,2154) (optional)<br>
                    <i>patient_additional_history</i> &bull; DICOM tag (0010,21B0) (optional)<br>
                    <i>study_description</i> &bull; DICOM tag (0008,1030) (optional)<br>
                    <i>accession_number</i> &bull; DICOM tag (0008,0050) (optional)<br>
                    <i>patient_birthname</i> &bull; DICOM tag (0010,1005) (optional)<br>
                    <i>patient_mother_birthname</i> &bull; DICOM tag (0010,1060) (optional)<br>
                    <i>medical_record_locator</i> &bull; DICOM tag (0010,1090) (optional)<br>
                    <i>patient_religious_preference</i> &bull; DICOM tag (0010,21F0) (optional)<br>
                    <i>patient_comments</i> &bull; DICOM tag (0010,4000) (optional)<br>
                    <i>patient_current_location</i> &bull; DICOM tag (0038,0300) (optional)<br>
                    <i>patient_institution_residence</i> &bull; DICOM tag (0038,0400) (optional)<br>
                    <i>patient_ethnic_group</i> &bull; DICOM tag (0010,2160) (optional)<br>
                    <i>patient_occupation</i> &bull; DICOM tag (0010,2180) (optional)<br>
                    <i>study_date</i> &bull; DICOM tag (0008,0020) (optional)<br>
                    <i>study_time</i> &bull; DICOM tag (0008,0030) (optional)<br>
                    <i>modality</i> &bull; DICOM tag (0008,0060) (optional)<br>
                    <i>referring_physician</i> &bull; DICOM tag (0008,0090) (optional)<br>
                    <i>image_count</i> &bull; Images in the study (optional)<br>
                    <i>attachment_count</i> &bull; Attachment count (optional)<br>
                    <i>integration_key</i> &bull; Integration key for the study (optional)<br>
                    <i>destination_ae_title</i> &bull; The destination aetitle (optional)<br>
                    <i>source_ae_title</i> &bull; The source aetitle (optional)<br>
                    <i>node_id</i> &bull; If this is a thin study the gateway UUID to retrieve it from can be specified (optional)<br>
                    <i>customfield-{CUSTOMFIELD_UUID|DICOM_TAG}</i> &bull; Custom field(s), see notes in /study/add (optional)<br>
                    <i>use_upload_permission</i> &bull; Flag to use the upload permissions for the permissions check (optional)<br>
                    <i>find_order_uuid</i> &bull; UUID of the search record used to modify the study (optional)<br>
                    <i>seconds_to_ingest</i> &bull; Flag to re-calculate the seconds_to_ingest metric (optional)<br>
                    <i>parital_save</i> &bull; Flag to bypass unset required customfields. Works only if account setting <i>study_set_unapproved_allow_bypass_required_fields</i> is set (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The study uuid<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    study_edit or study_thin or study_upload if the study was previously uploaded and the use_upload_permission flag was set<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    INVALID_CREDENTIALS &bull; The sid or node credentials are invalid<br>
                    NOT_FOUND &bull; The study can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to edit this study<br>
                    INVALID_CUSTOMFIELD &bull; Invalid custom field(s) name or value were passed. The <i>error_subtype</i> holds an array of the error details<br>
                    PENDING_MUST_MATCH &bull; The study is pending a must match approval from storage and can not be edited in this state<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li>A node can edit a phantom study a user can not.
                        <li>A future set will update the study when it is received from storage
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete a study</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>(sid || node_id && serial_no)</i> &bull; Either the sid or the node id and serial number<br>
                    <i>(uuid || study_uid && storage_namespace && phi_namespace)</i> &bull; The study uuid or the storage triplet<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    study_delete
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to delete this study<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a list of the studies the user can see</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                    <i>template</i> &bull; A JSON hash with name, account_id and language of the template to return (optional)<br>
                    <i>extra</i> &bull; Flag to return extra data as detailed in /study/get (optional)<br>
                    <i>customfield_h</i> &bull; Flag to return a customfield hash as detailed in /study/get (optional)<br>
                    <i>permissions_diff</i> &bull; Flag to return only the permissions that differ from the namespace permissions (optional)<br>
                    <i>fields</i> &bull; A JSON list of the study fields to return (optional)<br>
                    <i>limit.hl7</i> &bull; Limit the length of Hl7 list to return. Zero means no limit (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>studies</i> &bull; An array of the studies the user has. Each object holds the following same fields as the <a href="#study_get">/study/get</a> call<br>
                    <i>template</i> &bull; The template HTML if a template was requested<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    INVALID_TEMPLATE &bull; The template is invalid the <i>error_subtype</i> holds the detail<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> The list is sorted by creation order from most recent to oldest
                        <li> The additional information flag fields to /study/get can also be passed
                        <li> If a filter has the virtual filter <code>filter.SMART_SEARCH.equals</code> a "smart" filter will be applied to the list
                        <li> A filter on the study_push_status field will return all studies that have at least one push status that matches e.g. <code>filter.study_push_status.equals=S</code> or <code>filter.study_push_status.in=["S","N"]</code>
                        <li> A study_push_status filter can be further scoped down to a destination name with a like filter e.g. <code>filter.study_push_status.destination_name.like=north%</code> or a destination uuid equals filter e.g. <code>filter.study_push_status.destination_uuid.equals=UUID</code>
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_count"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a count of the studies the user can see</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/count</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>count</i> &bull; The study count<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> All filters from the /study/list call apply here
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_count_by_filter"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>PACS mode. Get a count of the studies the user can see per each filter set</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/count_by_filter</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>filter.*</i> &bull; <a href="#filter">Filters</a> (optional)<br>
                    <i>filter_uuids</i> &bull; JSON array of <a href="#filter_add">filter</a>.uuid (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>count_by_filter</i> &bull; JSON hash of pairs {<a href="#filter_add">filter</a>.uuid =&gt; $count}</code><br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    INVALID_FIELD &bull; Invalid <i>filter_uuids</i> JSON array of uuids<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> All filters from the /study/list call apply here.<br>
                            If <i>filter_uuids</i> is not empty, then only for that uuids list counters are returned.
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_cfind"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a list of the studies the node can see</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/cfind</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>uuid</i> &bull; The node id<br>
                    <i>serial_no</i> &bull; The serial number of the node<br>
                    <i>entire_account</i> &bull; Flag to search the entire account rather than just the nodes namespace. (optional)<br>
                    <i>is_available</i> &bull; Flag to limit search to studies that are ready for viewing. (optional)<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>studies</i> &bull; An array of the studies the user has. Each object holds the following same fields as the <a href="#study_get">/study/get</a> call<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The node can not be found<br>
                    RUNNING &bull; This cfind is currently in process<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    The list is sorted by creation order from most recent to oldest
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a study</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>(sid || node_id && serial_no)</i> &bull; Either the sid or the node uuid and serial number<br>
                    <i>(uuid || study_uid && storage_namespace && phi_namespace)</i> &bull; The study uuid or the storage triplet<br>
                    <i>full_hl7</i> &bull; Flag to return the full hl7 record instead of just the uuid (optional)<br>
                    <i>limit.hl7</i> &bull; Limit the length of Hl7 list to return. Zero means no limit (optional)<br>
                    <i>permissions_diff</i> &bull; Flag to return only the permissions that differ from the namespace permissions (optional)<br>
                    <i>extra</i> &bull; Flag to return extra data as detailed below (optional)<br>
                    <i>customfield_h</i> &bull; Flag to return a customfield hash as detailed below (optional)<br>
                    <i>fields</i> &bull; A JSON list of the study fields to return (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; Study uuid<br>
                    <i>star</i> &bull; The study star flag<br>
                    <i>study_uid</i> &bull; Study uid in storage<br>
                    <i>phi_namespace</i> &bull; PHI namespace<br>
                    <i>phi_namespace_name</i> &bull; PHI namespace description<br>
                    <i>storage_namespace</i> &bull; Storage namespace<br>
                    <i>engine_fqdn</i> &bull; The FQDN of the storage engine the study is stored on<br>
                    <i>source</i> &bull; Source of the study (upload|harvest|share|copy)<br>
                    <i>source_ae_title</i> &bull; The source aetitle for the harvesting<br>
                    <i>destination_ae_title</i> &bull; The destination aetitle for the harvesting<br>
                    <i>must_approve</i> &bull; A flag that the study must be approved or rejected before it is generally visible in the namespace<br>
                    <i>share_message</i> &bull; If this study was shared this field will exist and hold any share message<br>
                    <i>phantom</i> &bull; Is this a phantom study, a phantom study is one that is loading into storage<br>
                    <i>thin</i> &bull; Is this a thin study, a thin study is not in storage and needs to be query retrieved to be loaded into storage<br>
                    <i>patient_name</i> &bull; DICOM tag (0010,0010)<br>
                    <i>patientid</i> &bull; DICOM tag (0010,0020)<br>
                    <i>patient_sex</i> &bull; DICOM tag (0010,0040)<br>
                    <i>patient_birth_date</i> &bull; DICOM tag (0010,0030)<br>
                    <i>patient_birth_time</i> &bull; DICOM tag (0010,0032)<br>
                    <i>patient_age</i> &bull; DICOM tag (0010,1010)<br>
                    <i>patient_weight</i> &bull; DICOM tag (0010,1030)<br>
                    <i>patient_address</i> &bull; DICOM tag (0010,1040)<br>
                    <i>patient_size</i> &bull; DICOM tag (0010,1020)<br>
                    <i>patientid_other</i> &bull; DICOM tag (0010,1000)<br>
                    <i>patient_name_other</i> &bull; DICOM tag (0010,1001)<br>
                    <i>patient_phone</i> &bull; DICOM tag (0010,2154)<br>
                    <i>patient_additional_history</i> &bull; DICOM tag (0010,21B0)<br>
                    <i>study_description</i> &bull; DICOM tag (0008,1030)<br>
                    <i>accession_number</i> &bull; DICOM tag (0008,0050)<br>
                    <i>patient_birthname</i> &bull; DICOM tag (0010,1005)<br>
                    <i>patient_mother_birthname</i> &bull; DICOM tag (0010,1060)<br>
                    <i>medical_record_locator</i> &bull; DICOM tag (0010,1090)<br>
                    <i>patient_religious_preference</i> &bull; DICOM tag (0010,21F0)<br>
                    <i>patient_comments</i> &bull; DICOM tag (0010,4000)<br>
                    <i>patient_current_location</i> &bull; DICOM tag (0038,0300)<br>
                    <i>patient_institution_residence</i> &bull; DICOM tag (0038,0400)<br>
                    <i>patient_ethnic_group</i> &bull; DICOM tag (0010,2160)<br>
                    <i>patient_occupation</i> &bull; DICOM tag (0010,2180)<br>
                    <i>study_date</i> &bull; DICOM tag (0008,0020)<br>
                    <i>study_time</i> &bull; DICOM tag (0008,0030)<br>
                    <i>modality</i> &bull; DICOM tag (0008,0060)<br>
                    <i>referring_physician</i> &bull; DICOM tag (0008,0090)<br>
                    <i>image_count</i> &bull; Images in the study<br>
                    <i>attachment_count</i> &bull; Attachment count<br>
                    <i>size</i> &bull; Size of the study in bytes<br>
                    <i>compressed_size</i> &bull; Compressed size of the study in bytes<br>
                    <i>integration_key</i> &bull; Integration key for the study<br>
                    <i>permissions</i> &bull; A hash of the study_* type permissions for this study<br>
                    <i>patient_id</i> &bull; If the user has patient_view permissions in the account this field will exist and hold the patient uuid<br>
                    <i>created</i> &bull; Created datetime stamp of the study<br>
                    <i>updated</i> &bull; Updated datetime stamp of the study<br>
                    <i>study_status</i> &bull; The study status. Is null for just created study.<br>
                    <i>study_status_tags</i> &bull; The available study status tags. (This is only returned if they have study_status_edit permissions on the study and the study is not locked by another user)<br>
                    <i>study_status_tags_default</i> &bull; The "default" value for study_status. It is calculated as <code>(account.settings.<i>study_status_tags_default</i> || account.settings.<i>study_status_tags[0]</i>)</code><br>
                    <i>study_status_timer</i> &bull; The study status timer value in seconds. A value of -1 means the timer has completed and this is only returned if the study_status_timer account flag is on.<br>
                    <i>is_dicom_wrapped</i> &bull; Is the study a wrapped DICOM<br>
                    <i>is_locked</i> &bull; Is the study locked by another user<br>
                    <i>is_frozen</i> &bull; Is the study frozen<br>
                    <i>is_being_retrieved</i> &bull; Is this a thin study in the process of being retrieved<br>
                    <i>has_external_viewer</i> &bull; A flag if the study has an external viewer option<br>
                    <i>seconds_to_ingest</i> &bull; The number of seconds it took to ingest the study. Blank if the study was ingested before this feature was added, -1 if we don't have enough data to calculate this<br>
                    <i>accelerators</i> &bull; A JSON list of accelerator FQDN the study may be on (only returned if the probe_for_accelerator flag is on)<br>
                    <i>viewer_link</i> &bull; Link to the study viewer. If the account has SAML SSO the link will be to the SSO entry point, if not it will be a direct link.<br>
                    <i>hl7</i> &bull; An array of the hl7 objects associated with this study. Each object has the following fields or is the complete record from /hl7/get if the full_hl7 flag is passed<br>
                    * <i>uuid</i> &bull; Id of the object<br>
                    <i>tags</i> &bull; An array of user tags associated with this object (This is only returned if the object has tags)<br>
                    <i>customfields</i> &bull; An array of the custom fields associated with this study. Each object has the following <a href="#customfields">fields</a> (This is only returned if the study has custom fields)<br>
                    <i>customfields_DICOM</i> &bull; An array of the DICOM tag custom fields associated with this study. Each object has the following fields (This is only returned if the study has DICOM tag custom fields)<br>
                    * <i>tag</i> &bull; DICOM tag<br>
                    * <i>value</i> &bull; Value of the custom field<br>
                    <i>radreports</i> &bull; An array of the radreports associated with this study. Each object has the fields in the <a href="#radreport_description">/radreport/description</a> call<br>
                    <i>routes</i> &bull; An array of the manual routes that the user can run against this study. Each object has the following fields (This is only returned if manual routes are available)<br>
                    * <i>uuid</i> &bull; Route id<br>
                    * <i>name</i> &bull; Route name<br>
                    * <i>capture_email</i> &bull; Does an email need to be captured to run this rule - flag<br>
                    <i>meetings</i> &bull; An array of the meetings the user can join. Each object has the fields in <a href="#meeting_get">/meeting/get</a> call  (This is only returned if meetings are available)<br>
                    <i>comments</i> &bull; An array of the study comments, order from most recent too earliest. This is only returned if the user has the study_comment_view permissions. Each object has the fields in the <a href="#study_comment_get">/study/comment/get</a> call.<br>
                    <i>study_push_status</i> &bull; An array of the study push status. This is only returned if the study_push_status account setting is enabled. Each object has the following fields.<br>
                    * <i>destination_uuid</i> &bull; Destination Id<br>
                    * <i>destination_name</i> &bull; Destination Name<br>
                    * <i>status</i> &bull; The status, either 'I'n process, pe'N'ding, 'S'uccessful, 'P'artial or 'F'ailed<br>
                    * <i>status_reason</i> &bull; Additional detail for the status<br>
                    * <i>image_count</i> &bull; The image count for the push<br>
                    * <i>updated</i> &bull; Date and time the status was last updated<br>
                    * <i>created</i> &bull; Date and time the push  was created<br>
                    * <i>group_key</i> &bull; The string key used to group push statuses. Statuses that group: local pushes (by destination address), copy statuses, same UID statuses<br>
                    * <i>is_local</i> &bull; The flag indicating if the corresponding push was local<br>
                    --- The following fields are only returned if the extra flag is specified ---<br>
                    <i>created_at</i> &bull; Date and time the record was created<br>
                    <i>primary_created</i> &bull; Date and time the record for the primary study was created<br>
                    <i>account_name</i> &bull; Name of the account the study is in<br>
                    <i>created_by_name</i> &bull; Name of the user who created the study<br>
                    <i>created_by_email</i> &bull; Email of the user who created the study<br>
                    <i>created_by_mobile_phone</i> &bull; Mobile phone number of the user who created the study<br>
                    <i>created_by_type</i> &bull; Type of user who created the study<br>
                    <i>created_for_name</i> &bull; Name of the user who the study was created for<br>
                    <i>created_for_type</i> &bull; Type of user the study was created for<br>
                    <i>hipaa_name</i> &bull; HIPAA compliant version of the patient name<br>
                    <i>first_name</i> &bull; Patient first name<br>
                    <i>last_name</i> &bull; Patient last name<br>
                    <i>study_status</i> &bull; Study status value<br>
                    <i>message_count</i> &bull; Number of messages associated with this study<br>
                    <i>last_access</i> &bull; Date and time the study was last accessed in storage<br>
                    <i>query_count</i> &bull; Number of open queries associated with this study<br>
                    --- The following field is only returned if the customfield_h flag is specified ---<br>
                    <i>customfield_h</i> &bull; A JSON hash of the customfield values keyed by the UUID<br>
                    --- The following field is only returned if the enable_orders_in_worklist account setting is enabled ---<br>
                    <i>order_count</i> &bull; Number of orders linked with this study (having the same accession_number). This field is filterable.<br>
                    --- The following field is only returned if the enable_radreport_lock_reading account setting is enabled ---<br>
                    <i>radreport_locked_user_id</i> &bull; Only if there is some locked radreport for this study. Contains uuid of lock owner.<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to access this study<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_permissions"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get the users permissions on the study</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/permissions</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The study uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>study_edit</i> &bull; The permission flag setting<br>
                    <i>&#8627; study_edit_approved</i> &bull; The permission flag setting<br>
                    <i>&#8627; study_edit_unapproved</i> &bull; The permission flag setting<br>
                    <i>study_download</i> &bull; The permission flag setting<br>
                    <i>study_browse</i> &bull; The permission flag setting<br>
                    <i>study_share</i> &bull; The permission flag setting<br>
                    <i>&#8627; study_share_email</i> &bull; The permission flag setting<br>
                    <i>&#8627; study_share_share_code</i> &bull; The permission flag setting<br>
                    <i>&#8627; study_share_account</i> &bull; The permission flag setting<br>
                    <i>&#8627; study_share_location</i> &bull; The permission flag setting<br>
                    <i>&#8627; study_share_group</i> &bull; The permission flag setting<br>
                    <i>&#8627; study_share_user</i> &bull; The permission flag setting<br>
                    <i>&#8627; study_share_rsna</i> &bull; The permission flag setting<br>
                    <i>&#8627; study_share_npi</i> &bull; The permission flag setting<br>
                    <i>&#8627; study_share_request</i> &bull; The permission flag setting<br>
                    <i>study_push</i> &bull; The permission flag setting<br>
                    <i>study_delete</i> &bull; The permission flag setting<br>
                    <i>study_approve</i> &bull; The permission flag setting<br>
                    <i>study_view</i> &bull; The permission flag setting<br>
                    <i>study_upload</i> &bull; The permission flag setting<br>
                    <i>study_report_view</i> &bull; The permission flag setting<br>
                    <i>study_report_view_only_own</i> &bull; The permission flag setting<br>
                    <i>study_report_hl7_view</i> &bull; The permission flag setting<br>
                    <i>study_report_upload</i> &bull; The permission flag setting<br>
                    <i>study_report_delete</i> &bull; The permission flag setting<br>
                    <i>study_sync</i> &bull; The permission flag setting<br>
                    <i>study_status_tags_ignore_rules</i> &bull; The permission flag setting<br>
                    <i>radreport_edit</i> &bull; The permission flag setting<br>
                    <i>radreport_view</i> &bull; The permission flag setting<br>
                    <i>radreport_view_only_own</i> &bull; The permission flag setting<br>
                    <i>meeting_edit</i> &bull; The permission flag setting<br>
                    <i>meeting_view</i> &bull; The permission flag setting<br>
                    <i>link_direct</i> &bull; The permission flag setting<br>
                    <i>link_edit</i> &bull; The permission flag setting<br>
                    <i>link_edit_pin</i> &bull; The permission flag setting<br>
                    <i>link_view</i> &bull; The permission flag setting<br>
                    <i>reports</i> &bull; A JSON array of the report ids they can view. This is not returned if they can view all reports<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to access this study<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_exists"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Check if a study exists in a namespace</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/exists</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>(uuid || study_uid && storage_namespace && phi_namespace || study_uid && account_id)</i> &bull; The study uuid, the storage triplet, or the study uid and account id<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>exists</i> &bull; Flag if the study exists<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td></td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_push"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Push a study to a destination</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/push</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The study uuid<br>
                    <i>destination_id</i> &bull; The destination to push it to<br>
                    <i>batch_no</i> &bull; The batch number if pushing to a CD burner<br>
                    <i>ping</i> &bull; Flag to send the ping job back in this call<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>(uuid|ping)</i> &bull; Id of the push job or the ping job if the ping flag was sent<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    study_push
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study or destination can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to push this study<br>
                    PENDING &bull; There is already a pending push job<br>
                    NOT_READY &bull; The study is not ready for pushing<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_push_hl7"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Push a study HL7 message to a destination</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/push/hl7</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The study uuid<br>
                    <i>destination_id</i> &bull; The destination to push it to<br>
                    <i>hl7_template_id</i> &bull; The HL7 template to use (optional)<br>
                    <i>hl7_id</i> &bull; HL7 message to use in the template (optional)<br>
                    <i>once</i> &bull; Flag that this message should only be sent a maximum of one time (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; Id of the push job<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    study_push
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study, destination, template or hl7 message can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to push this study<br>
                    NO_HL7_SUPPORT &bull; The destination doesn't support HL7<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> If a hl7_template_id is not passed a ORM message will be created
                        <li> hl7_id can be of the form <code>first_HL7-TYPE</code> or <code>last_HL7-TYPE</code> in which case it will find either the first or the last HL7 message for the study of the given type e.g. <code>first_ORM</code> or <code>last_ADT</code>
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_pdf_hl7"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Returns a PDF report for the study HL7 message</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/pdf/hl7</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The study uuid<br>
                    <i>hl7_id</i> &bull; HL7 message to create the PDF report for<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    Streams back the PDF report
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    study_report_hl7_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    [404] &bull; Not found<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_fax_hl7"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Fax a PDF report for the study's HL7 message</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/fax/hl7</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The study uuid<br>
                    <i>hl7_id</i> &bull; HL7 message to create the PDF report for<br>
                    <i>number</i> &bull; The fax number to send the PDF report to<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    study_report_hl7_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study or HL7 message can not be found<br>
                    INVALID_PHONE &bull; The fax number is invalid<br>
                    PDF_FAILED &bull; The PDF report failed to generate<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_cmove"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Request a cmove of a study</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/cmove</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>uuid</i> &bull; The node id<br>
                    <i>serial_no</i> &bull; The serial number of the node<br>
                    <i>study_uid</i> &bull; The study uid<br>
                    <i>aetitle</i> &bull; The aetitle to send to<br>
                    <i>detail</i> &bull; Additional detail to send on the <a href="#node_ping">/node/ping</a> (optional)<br>
                    <i>ping</i> &bull; Flag to send the ping job back in this call<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>(uuid|ping)</i> &bull; Id of the push job or the ping job if the ping flag was sent<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The node can not be found<br>
                    STUDY_NOT_FOUND &bull; The study can not be found<br>
                    DESTINATION_NOT_FOUND &bull; The destination can not be found<br>
                    PENDING &bull; There is already a pending push job<br>
                    NOT_READY &bull; The study is not ready for pushing<br>
                    RETRIEVE &bull; A thin study retrieval error. The <i>error_subtype</i> holds further detail<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> If this is a thin study and the ping flag is not set retrieval will be started for the study and the uuid which be returned as RETRIEVING

                    </ul>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_node_can_remove"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Can a node remove a study from local disk cache</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/node/can/remove</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>uuid</i> &bull; The node id<br>
                    <i>serial_no</i> &bull; The serial number of the node<br>
                    <i>study_uid</i> &bull; The study uid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>can_remove</i> &bull; Flag if the node can remove the study from local cache<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The node can not be found<br>
                    STUDY_NOT_FOUND &bull; The study can not be found<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_share_who"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Who can they share a study</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/share/who</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The study uuid<br>
                    <i>type</i> &bull; Type of objects you want (account|location|group|user)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>shares</i> &bull; An array of the objects they can share this study with. Each object in the array will have the following fields<br>
                    * <i>uuid</i> &bull; Id of the object<br>
                    * <i>name</i> &bull; Name of the object<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    study_share
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study or share object can not be found. The <i>error_subtype</i> holds a the name of the key that can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to share this study<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_share"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Share a study</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/share</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>(uuid || study_uid && storage_namespace && phi_namespace)</i> &bull; The study uuid or the storage triplet if you want a future share<br>
                    <i>(account_id || location_id || group_id || user_id || share_code || email || masshiway || rsna || npi || study_request_id)</i> &bull; uuid of the account, location, group, user, study request or share code, email address(es), RSNA, NPI or masshiway recipient to share this study with<br>
                    <i>message</i> &bull; Message to the recipient (optional)<br>
                    <i>integration_key</i> &bull; Integration key to tag the share with (optional)<br>
                    <i>charge_authorized</i> &bull; Flag that the sender authorized charging for this share (optional)<br>
                    <i>charge_modality</i> &bull; Modality of the study the charge was authorized for (optional)<br>
                    <i>customfield-{CUSTOMFIELD_UUID}</i> &bull; Custom field(s) to apply to the shared study (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    study_share
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study or share object can not be found. The <i>error_subtype</i> holds a the name of the key that can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to share this study<br>
                    NOT_MATCHED &bull; This study does not match the study request criteria<br>
                    REQUEST_CLOSED &bull; The study request is closed<br>
                    INVALID_PARAMETERS &bull; Only pass a account_id or a location_id or a group_id or a user_id or a share code or an email<br>
                    INVALID_EMAIL &bull; An invalid email was passed for an email share<br>
                    INVALID_NPI &bull; An invalid NPI was passed for a NPI share<br>
                    PHANTOM &bull; This is a phantom study<br>
                    INVALID_JSON &bull; The field is not in valid JSON format. The <i>error_subtype</i> holds the name of the field<br>
                    NOT_HASH &bull; The field is not a JSON hash. The <i>error_subtype</i> holds the name of the field<br>
                    SHARE_FAILED (SAME) &bull; The study can't be shared into the same namespace.<br>
                    SHARE_FAILED (NO_DESTINATION) &bull; The study can't be shared with a deleted object.<br>
                    SHARE_FAILED (DECLINED) &bull; The charge card was declined.<br>
                    SHARE_FAILED (NO_CARD) &bull; The user does not have a card on file.<br>
                    SHARE_FAILED (NO_CHARGE_MODALITY) &bull; The charge modality is required if charge_authorized is set and the charging is by modality.<br>
                    SHARE_FAILED (NO_DUP_SHARE) &bull; The destination namespace has the no_dup_share flag turned on and this study is a duplicate of an existing study in the namespace.<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> If the storage triplet is used the share is deferred until the study is loaded into services. The deferred share will expire after 2 hours.
                        <li> The masshiway parameter is a JSON hash with three of the following keys required and one must be last name: last_name, first_name, speciality, zip, phone, hiway_id
                        <li> The rsna parameter is a JSON hash with pin and exam_id fields
                        <li> The email parameter can be a list of email addresses
                        <li> The sharer is charged with namespace's <a href="#share-pricing">Share pricing table</a> by modality or by customfields depending on namespace's <i>share_charge_by_modality</i> flag
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_share_stop"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Stop sharing a study</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/share/stop</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The study uuid<br>
                    <i>(account_id || location_id || group_id || user_id || user_invite_share_id)</i> &bull; uuid of the account, location, group, user or user invitation to stop sharing this study with<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    study_share
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study or share object can not be found. The <i>error_subtype</i> holds a the name of the key that can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to stop sharing this study<br>
                    INVALID_PARAMETERS &bull; Only pass a account_id or a location_id or a group_id or a user_id<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_share_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get the study shares</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/share/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The study uuid<br>
                    <i>name</i> &bull; Flag to return a hash with both the uuid and name of the object (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>account_id</i> &bull; A list of the <i>account_id</i>s the study is shared with<br>
                    <i>location_id</i> &bull; A list of the <i>location_id</i>s the study is shared with<br>
                    <i>group_id</i> &bull; A list of the <i>group_id</i>s the study is shared with<br>
                    <i>user_id</i> &bull; A list of the <i>user_id</i>s the study is shared with<br>
                    <i>user_invite_share_id</i> &bull; A list of the user invitations the study is shared with<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    study_share
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view this list<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_approve"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Approve a study</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/approve</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The study uuid<br>
                    <i>delay</i> &bull; Number of seconds to delay showing the study as approved and running routing and events on it (optional)<br>
                    <i>must_match</i> &bull; A JSON hash of study field names and values that must match before showing the study as approved and running routing and events on it (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    study_approve
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to approve this study<br>
                    DELAY_OR_MATCH &bull; You can either delay or match, not both<br>
                    INVALID_DELAY &bull; A delay must be between 0 and 600 seconds<br>
                    INVALID_JSON &bull; The field is not in valid JSON format. The <i>error_subtype</i> holds the name of the field<br>
                    INVALID_FIELD &bull; An invalid must match field was passed. The <i>error_subtype</i> holds the name of the field<br>
                    INVALID_CUSTOMFIELD &bull; Some custom fields are required and not set. The <i>error_subtype</i> holds an array of the error details<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li>If there is a customfield called <code>approved_by_name</code> in the account then it will be populated with the current user's name
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_reject"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Reject a study</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/reject</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The study uuid<br>
                    <i>message</i> &bull; Message to send to the person who shared the study (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    study_approve
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to approve this study<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li>The message will be put into the named customfield reject_message of the original study if it exists
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_audit"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Attach an audit action to a study</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/audit</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The id of the study (optional if study_uid and storage_namespace are passed)<br>
                    <i>study_uid</i> &bull; The v3 storage uid of the study (optional if uuid is passed)<br>
                    <i>storage_namespace</i> &bull; The storage namespace of the study (optional if uuid is passed)<br>
                    <i>phi_namespace</i> &bull; The phi namespace of the study (optional)<br>
                    <i>action</i> &bull; The audit action (STUDY_VIEW|STUDY_VIEW_REASON|STUDY_EDIT|STUDY_ANONYMIZE|REPORT_UPLOAD|REPORT_REMOVE|REPORT_VIEW|IMAGE_ADDED|IMAGE_UPDATED|IMAGE_DELETED|STUDY_DOWNLOAD|ACCEPTED_NOT_DIAGNOSTIC|CANCELED_NOT_DIAGNOSTIC|AI_ACTION|VIEWER_ACTION|SIGNED_REPORT_ADDENDUM)<br>
                    <i>detail</i> &bull; Additional information<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study can not be found<br>
                    INVALID_ACTION &bull; An invalid action was passed<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li>STUDY_VIEW_REASON should be sent prior to the corresponding STUDY_VIEW event for the view reason to be tracked
                        <li>SIGNED_REPORT_ADDENDUM should be sent prior to the attachment upload
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_star"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Set the star flag on a study for the user</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/star</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The id of the study<br>
                    <i>star</i> &bull; Star flag set on or off (1|0)<br>

                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    study_star
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_PERMITTED &bull; You are not permitted to star this study<br>
                    NOT_FOUND &bull; The study can not be found<br>
                    INVALID_FLAG &bull; An invalid flag was passed. The <i>error_subtype</i> holds the name of the invalid flag<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_report_detail"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Build a study detailed report</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/report/detail</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; Limit to studies in the passed account<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                    <i>limit</i> &bull; Maximum size of the report. The default is 30,000 rows. If the report will be bigger than this an error will be returned (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>report_id</i> &bull; The report id<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                   study_report_detail
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    REPORT_ERROR &bull; Unable to start the report<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    This call will kick off the building of the report. Poll for the report status with /report/status command and download it with the /report/zip command.
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_report_series"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Build a series detail report for recently acquired studies</td >
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/report/series</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>namespace_id</i> &bull; Namespace to run the report on<br>
                    <i>hours</i> &bull; Report on studies acquired within the last number of hours<br>
                    <i>limit</i> &bull; Maximum size of the report. The default is 30,000 studies. If the report will be bigger than this an error will be returned (optional)<br>
                    <i>email</i> &bull; Send the report to this email address(es) when it is done<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>report_id</i> &bull; The report id<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                   study_report_detail
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    REPORT_ERROR &bull; Unable to start the report<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li>This call will kick off the building of the report. Poll for the report status with /report/status command and download it with the /report/zip command.
                        <li> The report will contain one line per series for studies acquired (uploaded or harvest) within the last number of hours. The report fields are as follows:
                        <ul>
                            <li> Patient ID
                            <li> StudyInstanceUID
                            <li> SeriesInstanceUID
                            <li> Acquisition Date  (DICOM tag (0008,0022))
                            <li> Acquisition File Count (number of images uploaded).
                        </ul>
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_viewer_settings"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get the viewer settings for the study</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/viewer/settings</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>(study_id || study_uid && storage_namespace && phi_namespace)</i> &bull; Either the study uuid or the storage triplet<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>enable_v2_viewer</i> &bull; Value for the account flag<br>
                    <i>enable_v3_viewer</i> &bull; Value for the account flag<br>
                    <i>enable_viewer_print</i> &bull; Value for the account flag<br>
                    <i>viewer_show_reports</i> &bull; Value for the account flag<br>
                    <i>enable_viewer_export</i> &bull; Value for the account flag<br>
                    <i>viewer_diagnostic_quality</i> &bull; Value for the account flag<br>
                    <i>viewer_diagnostic_quality_always</i> &bull; Value for the account flag<br>
                    <i>viewer_preload_diagnostic_images</i> &bull; Value for the account flag<br>
                    <i>viewer_enable_mpr</i> &bull; Value for the account flag<br>
                    <i>viewer_single_instance_series</i> &bull; Value for the account flag<br>
                    <i>viewer_multiframe_split_method</i> &bull; Value for the account flag<br>
                    <i>viewer_study_page_link_visible</i> &bull; Value for the account flag<br>
                    <i>viewer_study_page_link_url</i> &bull; Value for the account flag<br>
                    <i>viewer_setting_not_diagnostic</i> &bull; Value for the account flag<br>
                    <i>auto_transcode</i> &bull; Value for the account flag<br>
                    <i>auto_transcode_modalities</i> &bull; Value for the account flag<br>
                    <i>viewer_default_mouse_tool</i> &bull; Value for the account flag<br>
                    <i>viewer_link_series</i> &bull; Value for the account flag<br>
                    <i>enable_viewer_toggle_annotations</i> &bull; Value for the account flag<br>
                    <i>enable_dicom_tag_customfields</i> &bull; Value for the account flag<br>
                    <i>radreport_branding_from_phi_namespace</i> &bull; Value for the account flag<br>
                    <i>viewer_anon_annotations_clear</i> &bull; Value for the account flag<br>
                    <i>accession_number_for_study_uid</i> &bull; Value for the account flag<br>
                    <i>viewer_study_enable_cpp_transcoding</i> &bull; Value for the namespace || account flag<br>
                    <i>no_edit_dicom_tags</i> &bull; If enable_dicom_tag_customfields is on this is a JSON list of the DICOM tags that can not be edited<br>
                    <i>accelerators</i> &bull; A JSON list of accelerator FQDN the study may be on (only returned if the probe_for_accelerator flag is on)<br>
                    <i>viewer_config</i> &bull; The viewer configuration JSON<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study can not be found<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_viewer3_settings"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get the viewer3 settings for the study</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/viewer3/settings</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>(study_id || study_uid && storage_namespace && phi_namespace)</i> &bull; Either the study uuid or the storage triplet<br>
                    <i>settings</i> &bull; A JSON list of user settings set via /setting/set to return (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>account_config</i> &bull; The account viewer3_config setting<br>
                    <i>role_config</i> &bull; The role viewer3_config settings<br>
                    <i>user_config</i> &bull; The user viewer3_confing settings<br>
                    <i>accelerators</i> &bull; A JSON list of accelerator FQDN the study may be on (only returned if the probe_for_accelerator flag is on)<br>
                    <i>enable_dicom_tag_customfields</i> &bull; Value for the account flag<br>
                    <i>accession_number_for_study_uid</i> &bull; Value for the account flag<br>
                    <i>viewer_study_page_link_visible</i> &bull; Value for the account flag with any brand override applied<br>
                    <i>no_edit_dicom_tags</i> &bull; If enable_dicom_tag_customfields is on this is a JSON list of the DICOM tags that can not be edited<br>
                    <i>viewer_study_enable_cpp_transcoding</i> &bull; Value for the namespace || account flag<br>
                    <i>settings</i> &bull; JSON hash of the requested settings (optional)<br>
                    The rest of the fields are the same as <a href="#user_get">/user/get</a><br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study can not be found<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_status_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Gets the status and next available tags for a study according to account settings: <i>study_status_tags</i> + <i>study_status_role_tags</i> + <i>study_status_tags_rules</i> and role permission <i>study_status_tags_ignore_rules</i></td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/status/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id<br>
                    <i>study_id</i> &bull; Study uuid<br>
                    * &bull; Any other parameters that could be processed by <i>study_status_tags_rules</i><br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>study_status</i> &bull; The study status. Is null for just created study.<br>
                    <i>study_status_tags</i> &bull; The available study status tags. (This is only returned if they have <i>study_status_edit</i>i> permission on the study and the study is not locked by another user)<br>
                    <i>study_status_tags_default</i> &bull; The "default" value for study_status. It is calculated as <code>(account.settings.<i>study_status_tags_default</i> || account.settings.<i>study_status_tags[0]</i>)</code><br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    study_status_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view the status for this study<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>Now study_status_tags is calculated this way:<br>
                    1. Original list is account.settings.<i>study_status_tags</i>.<br>
                    2. If account.settings.<i>study_status_role_tags</i> is non-empty, then all tags which are not set there for provided user_account.role are deleted from the list.<br>
                    3. If permission <i>study_status_tags_ignore_rules</i> is not set and account.settings.<i>study_status_tags_rules</i> is non-empty, then "next values list" is calculated from that rules and the result is intersection of that two lists.<br>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_status_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Set the status of a study</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/status/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>study_id</i> &bull; Study uuid<br>
                    <i>old</i> &bull; The old study status value<br>
                    <i>new</i> &bull; The new study status value<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to set the status for this study<br>
                    STALE &bull; The study status you have is stale<br>
                    INVALID_TAG &bull; The study status new value is not a valid value<br>
                    LOCKED &bull; Another user has locked this study<br>
                    SINGLETON &bull; The stage is a singleton stage and the user already has a locked study<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>Possible tags against INVALID_VALUE are calculated as in <a href="#study_status_get">/study/status/get</a> with one exception - if account.settings.<i>study_status_tags_ignore_rules_on_set</i> is set, then it is calculated with no regard to account.settings.<i>study_status_tags_rules</i>, so only account.settings.<i>study_status_role_tags</i> is relevant.<br>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_status_locks"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Returns a list of the studies the user has locked in the order they were locked</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/status/locks</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>studies</i> &bull; An array of the locked studies. Each object holds the following same fields as the <a href="#study_get">/study/get</a> call<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_status_history"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Returns the history of the study status changes for the study</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/status/history</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>study_id</i> &bull; Study uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>history</i> &bull; An array of the status changes for the study. Each record has the following fields<br>
                    * <i>date</i> &bull; Date and time of the change<br>
                    * <i>old</i> &bull; The old status value<br>
                    * <i>new</i> &bull; The new status value<br>
                    * <i>seconds</i> &bull; The number of seconds the study was in the old status<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view the status for this study<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_move"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Move the study to another PHI namespace</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/move</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The study id<br>
                    <i>namespace_id</i> &bull; The namespace id<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    study_move
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study or namespace was not found.<br>
                    NOT_PERMITTED &bull; You are not permitted to move the study to this namespace<br>
                    ALREADY_EXISTS &bull; The study already exists in the destination namespace<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    The user must have share permissions on the namespace they are trying to move the study too.
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_duplicate"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Duplicate a study to another namespace</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/duplicate</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The study id<br>
                    <i>(namespace_id || study_request_id)</i> &bull; The namespace or study request id to duplicate it to<br>
                    <i>include_attachments</i> &bull; Also duplicate attachments (optional)<br>
                    <i>overwrite</i> &bull; Flag if you want to overwrite an existing study in the destination namespace (optional)<br>
                    <i>exclude_phi</i> &bull; Flag to not duplicate PHI data (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    study_duplicate for the study and study_upload for the destination namespace. study_duplicate_request is required additionally when duplicating by request
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study or namespace was not found.<br>
                    NOT_PERMITTED &bull; You are not permitted to duplicate the study to this namespace<br>
                    ALREADY_EXISTS &bull; The study already exists in the destination namespace<br>
                    FAILED &bull; The storage call failed to run<br>
                    NOT_MATCHED &bull; This study does not match the study request criteria<br>
                    REQUEST_CLOSED &bull; The study request is closed<br>
                    NO_DESTINATION &bull; The study can't be duplicated to a deleted object's namespace<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    This creates a full copy of the study as if it was uploaded into the namespace
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_clone"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Clone a study optionally changing series/images uids</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/clone</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The study id<br>
                    <i>new_series_uids</i> &bull; Flag if you want to generate new uids for the study series (optional)<br>
                    <i>new_image_uids</i> &bull; Flag if you want to generate new uids for the study images (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>study_uid</i> &bull; new study uid<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    study_view and study_clone
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    INVALID_FLAG &bull; An invalid flag was passed. The <i>error_subtype</i> holds the name of the invalid flag<br>
                    NOT_FOUND &bull; The study was not found.<br>
                    NOT_PERMITTED &bull; You are not permitted to clone the study<br>
                    NOT_AVAILABLE &bull; The study is not available.<br>
                    FAILED &bull; The storage call failed to run<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    This creates a copy of the study with a new UID in the storage namespace.
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_split"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Split a study into multiple studies, one per series</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/split</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The study id<br>
                    <i>namespace_id</i> &bull; The namespace id to split it into<br>
                    <i>no_split</i> &bull; Do not split on the series just create a new study with a study UID<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    study_split for the study and study_upload for the destination namespace
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study or namespace was not found.<br>
                    NOT_AVAILABLE &bull; The study is not available.<br>
                    NOT_PERMITTED &bull; You are not permitted to split the study to this namespace<br>
                    RECENT_NAMESPACE_SPLIT &bull; The study was the result of a split in this namespace within the last 24 hours<br>
                    RUNNING &bull; The split job is currently running<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_freeze"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Freeze or thaw a study</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/freeze</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The study id<br>
                    <i>thaw</i> &bull; Flag to thaw a frozen study<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    study_freeze
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study<br>
                    NOT_AVAILABLE &bull; The study is not available.<br>
                    NOT_PERMITTED &bull; You are not permitted to freeze or thaw the study<br>
                    ALREADY &bull; The study is already frozen or thawed<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> When a study is frozen the following permissions are set to zero <code>study_edit study_move study_split study_replicate study_duplicate study_report_upload study_report_delete study_upload study_thin annotation_edit keyimage_edit radreport_edit dicomdata_edit study_merge study_manual_route study_comment_edit study_status_edit study_share study_delete_image study_audio_record</code>
                        <li> All versions of the study (i.e. shares) are frozen or thawed
                        <li> The study audit trail will show a <code>FREEZE</code> or <code>THAW</code> event
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_manual_route"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Run a manual routing rule on a study</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/manual/route</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The study id<br>
                    <i>route_id</i> &bull; The routing rule id<br>
                    <i>email</i> &bull; The email to share with if the rule has a share_email action with the USER_ENTRY token (optional)<br>
                    <i>message</i> &bull; The share message for the email share (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    study_manual_route
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study or routing rule was not found.<br>
                    NOT_PERMITTED &bull; You are not permitted to manually route the study<br>
                    ROUTE_NOT_MATCHED &bull; The study does not match the route criteria<br>
                    INVALID_EMAIL &bull; An invalid email address was passed<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_find_order"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Find matching HL7 orders for the study</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/find/order</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The study id<br>
                    <i>(accession_number || patientid || patient_name)</i> &bull; The full or partial accession number, MRN or patient name to search by. If none are passed the studies accession number will be used (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>orders</i> &bull; An array of the orders. Each order has the following fields<br>
                    * <i>find_order_uuid</i> &bull; UUID of the search record<br>
                    * <i>accession_number</i> &bull; Accession number<br>
                    * <i>patientid</i> &bull; Patient MRN<br>
                    * <i>patient_name</i> &bull; Patient name<br>
                    * <i>patient_sex</i> &bull; Patient sex<br>
                    * <i>patient_phone</i> &bull; Patient phone<br>
                    * <i>patient_birth_date</i> &bull; Patient birth date<br>
                    * <i>order_datetime</i> &bull; Date and time of the order<br>
                    * <i>study_description</i> &bull; Study description<br>
                    * <i>ordering_provider</i> &bull; Ordering provider<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    study_approve
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study was not found.<br>
                    NOT_PERMITTED &bull; You are not permitted to find orders for this study<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li>If you pass an accession number it is wildcarded as accession_number% search
                        <li>If you pass a patientid it is wildcarded as patientid% search
                        <li>If you pass a patientName it is wildcarded as %patient_name% search
                        <li>ORM messages are searched; if the account setting include_adt_in_study_find_order is enabled ADT messages will also be searched
                        <li>For ORM/ADT search setting study_find_order_latest_in_progress can be enabled to filter only IN_PROGRESS orders.
                        <li>When the account setting include_adt_in_study_find_order is enabled, the setting include_only_latest_adt_in_study_find_order may also be enabled to further limit any ADT messages searched to only the most recent
                        <li>When the account setting include_adt_in_study_find_order is NOT enabled, the setting include_only_latest_adt_in_study_find_order has no effect even if it is enabled
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_archive"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Archive a study</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/archive</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The study id<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    study_delete and the study needs to be either the last copy or primary copy
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                    ALREADY_THIN &bull; This is already a thin study<br>
                    NO_FRESH_ARCHIVE &bull; A fresh archive copy of the study does not exist
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_retrieve"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Request that a thin study be retrieved and loaded into storage</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/retrieve</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The study id<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study was not found.<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                    NOT_THIN &bull; This is not a thin study<br>
                    MISSING_INFO &bull; The study needs a study_uid and an accession number<br>
                    NO_QUERY_DESTINATION &bull; No query retrieve destination for a node that creates phantoms is available<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_comment_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add a comment to the study</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/comment/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>study_id</i> &bull; The study id<br>
                    <i>body</i> &bull; The comment body<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The comment uuid<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    study_comment_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study was not found.<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_comment_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete a study comment</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/comment/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The comment id<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    study_comment_edit and you must be the creator of the comment
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The comment was not found.<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_comment_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a study comment</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/comment/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The comment id<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; Comment id<br>
                    <i>study_id</i> &bull; Id of the study the comment is associated with<br>
                    <i>user_id</i> &bull; Id of the user who created the comment<br>
                    <i>user_name</i> &bull; Name of the user who created the comment<br>
                    <i>body</i> &bull; The comment body<br>
                    <i>created</i> &bull; Created datetime stamp of the comment<br>
                    <i>is_mine</i> &bull; Flag if I created this comment<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    study_comment_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The comment was not found.<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_validate"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Run a validation rule against the study</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/validate</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The study id<br>
                    <i>validate_id</i> &bull; The validation id<br>
                    <i>series</i> &bull; Only validate the specified series (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>score</i> &bull; The validation score. The score is the number of conditions that failed<br>
                    <i>conditions</i> &bull; An array of the conditions that failed<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study or validation was not found.<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                    UNABLE_TO_VALIDATE &bull; The study is not available or did not return the data needed to validate<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> Any failed conditions will have a field called <code>failed</code> which holds the count for the number of times the condition failed
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_attach_customfields"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Attach a customfield report to the study</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/attach/customfields</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The study id<br>
                    <i>report_name</i> &bull; The report name (optional defaults to customfields.txt)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study was not found.<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                    NOT_AVAILABLE &bull; The study is available<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    A text report with the names and values of the customfields for the study will be attached to the study
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_external_viewer"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Return the link to the external viewer for the study</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/external/viewer</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The study id<br>
                    <i>viewer_tag</i> &bull; An external viewer's tag (optional)<br>
                    <i>redirect</i> &bull; A flag to return an HTTP redirect to the viewer URL rather than the JSON structure<br>
                    <i>view_reason</i> &bull; The view reason to be tracked in the audit trail (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>url</i> &bull; The url for the external viewer<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study was not found.<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                    NOT_AVAILABLE &bull; The study is not available<br>
                    UNABLE_TO_GENERATE &bull; The link could not be successfully generated<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    The account's default external viewer (the <code>default_external_viewer</code>) is selected in case <code>viewer_tag</code> was not passed. The first external viewer from the configured list is selected in case neither <code>viewer_tag</code> nor <code>default_external_viewer</code> were specified.
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_question"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Ask an AI question for the study</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/question</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The study id<br>
                    <i>question</i> &bull; The question to ask or a JSON array of questions to ask<br>
                    <i>detail</i> &bull; Optional detail to pass through to the AI stack<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    study_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study or question was not found.<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                    NOT_ENABLED &bull; The account does not have the ai_QUESTION customfield<br>
                    NODE_NOT_SETUP &bull; A node needs to be attached to the study namespace for this question<br>
                    IN_PROCESS &bull; The question is currently in process<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> To enable the question the account needs to be configured with a study customfield named ai_QUESTION e.g. <code>ai_which_body_part</code>
                        <li> The answer to the question will be put into the ai_QUESTION customfield and any STUDY_AI_QUESTION webhooks will be triggered.
                        <li> The full raw answer to the question will be put into the ai_QUESTION_raw customfield if it exists.
                        <li> A JSON array of questions is processed sequentially and waits for the answer before asking the next question
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_dicomdata_load"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Load the DICOM data for a study </td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/dicomdata/load</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The study id<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    study_view and dicomdata_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study or question was not found.<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                    NOT_AVAILABLE &bull; The study is not available in storage<br>
                    RUNNING &bull; A load job is already running<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_timing_event"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Record a timing event for the study</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/timing/event</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>(sid || node_id && serial_no)</i> &bull; Either the sid or the node uuid and serial number<br>
                    <i>study_uid</i> &bull; The study uid<br>
                    <i>storage_namespace</i> &bull; The storage namespace<br>
                    <i>event</i> &bull; The event<br>
                    <i>size</i> &bull; The number of bytes associated with the event (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    study_upload for sid authentication
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_timing_log"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get the timing log for the study</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/timing/log</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The study uuid<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>events</i> &bull; An array of the events. Each object has the following fields
                    ** <i>created</i> &bull; The time stamp for the event<br>
                    ** <i>event</i> &bull; The description of the event<br>
                    ** <i>size</i> &bull; The number of bytes associated with the event<br>
                    ** <i>node_id</i> &bull; UUID of the associated node<br>
                    ** <i>node_name</i> &bull; Name of the associated node<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    study_timing_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_sync"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Sync the study against the storage data and re-run routing rules</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/sync</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>(sid || node_id && serial_no)</i> &bull; Either the sid or the node id and serial number<br>
                    <i>(study_id || study_uid && storage_namespace && phi_namespace)</i> &bull; The study id or the study_uid/storage_namespace/phi_namespace triplet<br>
                    <i>image_count</i> &bull; Update the study image count and then sync (optional)<br>
                    <i>reload_load_dicom_tag</i> &bull; Flag to force a reload of all load_dicom_tag customfields (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    sysadmin or study_sync permissions or if image_count is passed then study_upload or phr namespace is required<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to sync this study<br>
                    BLOCKED &bull; This is a repeat sync which is not allowed<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> This runs the /study/notify logic
                        <li> The block expires in 60 seconds
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_take"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Take studies from <i>take_study_source_namespace</i> namespace. Studies will be shared.</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/take</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>namespace_id</i> &bull; The namespace id to take a study into<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    study_take
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOTHING_TO_TAKE &bull; There is no unshared studies in the source namespace<br>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The namespace was not found.<br>
                    NOT_PERMITTED &bull; You are not permitted to take a study in this account<br>
                    NOT_ENABLED &bull; the feature is not enabled check the <i>enable_take_study_feature</i> and <i>take_study_source_namespace</i> account settings<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> The feature should be enabled with <i>enable_take_study_feature</i> acount setting and <i>take_study_source_namespace</i> account setting should be set to one of account's namespaces for /study/take to work
                        <li> The call shares up to <i>take_study_number_to_take_at_a_time</i> studies
                        <li> The call checks studies for duplicates in the target namespace using study field defined by <i>take_study_dedup_by_field</i> account setting prior to sharing
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_request_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Reuest studies from one of <i>study_request_accounts</i> accounts. Studies will be shared or duplicated.</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/request/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>namespace_id</i> &bull; The namespace id requested studies to put (share or duplicate) into<br>
                    <i>comments</i> &bull; Free form request comments<br>
                    <i>account_id</i> &bull; The account id to send the study request to<br>
                    <i>patientid</i> &bull; The MRN a study should match (optional)<br>
                    <i>patient_first_name</i> &bull;  The patient first name a study should match<br>
                    <i>patient_last_name</i> &bull;  The patient last name a study should match<br>
                    <i>patient_sex</i> &bull;  The patient sex a study should match (optional)<br>
                    <i>patient_birth_date</i> &bull;  The patient date of birth a study should match<br>
                    <i>modality</i> &bull; The modality a study should match (optional)<br>
                    <i>study_date_start</i> &bull; The DICOM date that a study date should be greater or equal to (optional)<br>
                    <i>study_date_end</i> &bull; The DICOM date that a study date should be less or equal to (optional)<br>
                    <i>study_description</i> &bull; The string a study description should partially match (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The study request uuid<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    study_request_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    ALREADY &bull; An active (pending or in progress) study request with the same study criteria and the same namespace/account combination already exists<br>
                    NOT_FOUND &bull; The namespace or account was not found.<br>
                    NOT_PERMITTED &bull; You are not permitted to request a study into this namespace<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> The feature should be enabled with <i>study_request_accounts</i>
                        <li> Users with the <i>incoming_study_request</i> notification turned on in the requested account will be notified of the incoming study request
                        <li> The call checks studies for duplicates in the target namespace using study field defined by <i>take_study_dedup_by_field</i> account setting prior to sharing
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_request_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get the study_request</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/request/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The study request uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The study request uuid<br>
                    <i>comments</i> &bull; Free form request comments<br>
                    <i>study_request_status</i> &bull; Status of the study request. 'N' - pending, 'I' - in progress, 'R' - rejected, 'C' - closed<br>
                    <i>patientid</i> &bull; The MRN a study should match<br>
                    <i>patient_first_name</i> &bull;  The patient first name a study should match<br>
                    <i>patient_last_name</i> &bull;  The patient last name a study should match<br>
                    <i>patient_sex</i> &bull;  The patient sex a study should match<br>
                    <i>patient_birth_date</i> &bull;  The patient date of birth a study should match<br>
                    <i>modality</i> &bull; The modality a study should match<br>
                    <i>study_date_start</i> &bull; The DICOM date that a study date should be greater or equal to<br>
                    <i>study_date_end</i> &bull; The DICOM date that a study date should be less or equal to<br>
                    <i>study_description</i> &bull; The string a study description should partially match<br>
                    <i>message_count</i> &bull; The number of message passed through the study request. Returned if the user has message_view permission<br>
                    --- The following fields are only returned if the user has study_request_view permission in the requesting account ---<br>
                    <i>requested_account_id</i> &bull; The account id that the study request is sent to<br>
                    <i>namespace_id</i> &bull; Id of the namespace a study will be received into<br>
                    --- The following fields are only returned if the user has study_request_view_inbound permission in the requested account ---<br>
                    <i>requesting_account_id</i> &bull; Id of the account that the study request was received from<br>
                    <i>requesting_account_name</i> &bull; Name of the account that the study request was received from<br>
                    <i>searches</i> &bull; A list of searches initiated using this study request. Each search is an destination search object with the following fields: uuid, pickup, status, created, updated, destination_id<br>
                    <i>found</i> &bull; A list of search results produced for searches initiated using this study request. Each search result is an object with the following fields: uuid, destination_search_id, study_fetch_id, and other fields provided by a node (see studies parameter in <a href="#node_found">/node/found</a>)<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The study request was not found<br>
                    NOT_PERMITTED &bull; You are not permitted to access this study request<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_request_match"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get matching studies for the request</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/request/match</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>study_request_id</i> &bull; The study request uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>studies</i> &bull; An array of the studies that are mathing request's criteria and the user has <i>study_share_request</i> or <i>study_duplicate_request</i> access permission. Each object holds the same fields as the <a href="#study_get">/study/get</a> call<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The study request was not found<br>
                    REQUEST_CLOSED &bull; The request is not active (pending or in progress)<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="study_revive"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Revive a deleted study from storage during the storage_delete_delay period</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/study/revive</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The study uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    sysadmin or support
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_SYSADMIN_OR_SUPPORT &bull; The user is not a sysadmin or support user<br>
                    NOT_FOUND &bull; The deleted study can not be found
                    CAN_NOT_REVIVE &bull; The study can not be revived
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    This will reload the study from storage as a new study.
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <a name="tag"><h3>Tag commands</h3></a>

        <p><a name="tag_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>List the tags</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/tag/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>object</i> &bull; Object class (Study|User_account|Group|Location|Account|Patient|Case|Order|Message)<br>
                    <i>filter.*</i> &bull; <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>tags</i> &bull; An array of the tags
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> Use the <code>tag</code> field for searching and sorting this list
                        <li> To apply tags to a list of objects that supports tags use the field name <code>tags</code> with the <code>in</code> expression e.g. <code>filter.tags.in=>["green","blue"]</code>
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#tag-idx">top</a>

        <p><a name="tag_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add a tag to an object</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/tag/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>tag</i> &bull; Value of the tag <br>
                    <i>object</i> &bull; Object class to apply it to (Study|User_account|Group|Location|Account|Patient|Case|Order|Message|Query)<br>
                    <i>object_id</i> &bull; UUID of the object<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    study_tag
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    INVALID_OBJECT &bull; The object type is invalid<br>
                    NOT_FOUND &bull; The object was not found<br>
                    NOT_PERMITTED &bull; You are not permitted to tag this object<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#tag-idx">top</a>

        <p><a name="tag_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete a tag from an object</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/tag/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>tag</i> &bull; Value of the tag <br>
                    <i>object</i> &bull; Object class to apply it to (Study|User_account|Group|Location|Account|Patient|Case|Order)<br>
                    <i>object_id</i> &bull; UUID of the object<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    INVALID_OBJECT &bull; The object type is invalid<br>
                    NOT_FOUND &bull; The object was not found<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#tag-idx">top</a>

        <a name="annotation"><h3>Annotation commands</h3></a>

        <p><a name="annotation_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>List the annotations</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/annotation/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>(study_id || study_uid && storage_namespace && phi_namespace)</i> &bull; The uuid of the study or the storage triplet<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>annotations</i> &bull; An array of the annotations. Each object holds the same fields as the <a href="#annotation_get">/annotation/get</a> call<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    annotation_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study was not found.<br>
                    NOT_PERMITTED &bull; You are not permitted to view the study of the annotations<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    The list command will return all annotation done on every version of the study. This will allow annotations to be viewed across shares.
                </td>
            </tr>
        </table>
        <a href="#annotation-idx">top</a>

        <p><a name="annotation_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add an annotation</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/annotation/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>(study_id || study_uid && storage_namespace && phi_namespace)</i> &bull; The uuid of the study or the storage triplet<br>
                    <i>series_uid</i> &bull; The series uid<br>
                    <i>instance_uid</i> &bull; The instance uid<br>
                    <i>frame_number</i> &bull; The frame number<br>
                    <i>(json || stamp)</i> &bull; The JSON annotation data structure or the stamp flag<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The uuid<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    annotation_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study was not found.<br>
                    NOT_PERMITTED &bull; You are not permitted to add annotations to the study<br>
                    INVALID_JSON &bull; The field is not in valid JSON format. The <i>error_subtype</i> holds the name of the field<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#annotation-idx">top</a>

        <p><a name="annotation_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Edit an annotation</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/annotation/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; Id of the annotation<br>
                    <i>json</i> &bull; The JSON annotation data structure<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The uuid<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    annotation_edit and annotation ownership or annotation_edit_only_own reset
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study was not found.<br>
                    NOT_PERMITTED &bull; You are not permitted to add annotations to the study<br>
                    INVALID_JSON &bull; The field is not in valid JSON format. The <i>error_subtype</i> holds the name of the field<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#annotation-idx">top</a>

        <p><a name="annotation_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get the annotation</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/annotation/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; Id of the annotation<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; Id of the annotation<br>
                    <i>user_id</i> &bull; User who created the annotation<br>
                    <i>user_name</i> &bull; The user name<br>
                    <i>series_uid</i> &bull; The series uid<br>
                    <i>instance_uid</i> &bull; The instance uid<br>
                    <i>frame_number</i> &bull; The frame number<br>
                    <i>json</i> &bull; The JSON annotation data structure<br>
                    <i>stamp</i> &bull; The stamp flag<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    annotation_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The annotation  was not found.<br>
                    NOT_PERMITTED &bull; You are not permitted to view the annotation<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#annotation-idx">top</a>

        <p><a name="annotation_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete the annotation</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/annotation/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; Id of the annotation<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    annotation_edit and annotation ownership or annotation_edit_only_own reset
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The annotation  was not found.<br>
                    NOT_PERMITTED &bull; You are not permitted to delete the annotation<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#annotation-idx">top</a>

        <a name="keyimage"><h3>Key image commands</h3></a>

        <p><a name="keyimage_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>List the key images</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/keyimage/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>(study_id || study_uid && storage_namespace && phi_namespace)</i> &bull; The uuid of the study or the storage triplet<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>images</i> &bull; An array of the keyimages. Each object holds the same fields as the <a href="#keyimage_get">/keyimage/get</a> call<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    keyimage_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study was not found.<br>
                    NOT_PERMITTED &bull; You are not permitted to view the study or key images for the study<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    The list command will return all key images done on every version of the study. This will allow key images to be viewed across shares.
                </td>
            </tr>
        </table>
        <a href="#keyimage-idx">top</a>

        <p><a name="keyimage_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add a key image</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/keyimage/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>(study_id || study_uid && storage_namespace && phi_namespace)</i> &bull; The uuid of the study or the storage triplet<br>
                    <i>series_uid</i> &bull; The series uid<br>
                    <i>instance_uid</i> &bull; The instance uid<br>
                    <i>frame_number</i> &bull; The frame number<br>
                    <i>version</i> &bull; The frame version<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The uuid<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    keyimage_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study was not found.<br>
                    NOT_PERMITTED &bull; You are not permitted to mark key images for the study<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#keyimage-idx">top</a>


        <p><a name="keyimage_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get the key image</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/keyimage/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; Id of the keyimage<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; Id of the keyimage<br>
                    <i>user_id</i> &bull; User who created the keyimage<br>
                    <i>user_name</i> &bull; The user name<br>
                    <i>series_uid</i> &bull; The series uid<br>
                    <i>instance_uid</i> &bull; The instance uid<br>
                    <i>frame_number</i> &bull; The frame number<br>
                    <i>version</i> &bull; The frame version<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    keyimage_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The key image  was not found.<br>
                    NOT_PERMITTED &bull; You are not permitted to view the key image<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#keyimage-idx">top</a>

        <p><a name="keyimage_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete the key image</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/keyimage/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; Id of the key image<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    keyimage_edit and key image ownership
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The key image  was not found.<br>
                    NOT_PERMITTED &bull; You are not permitted to delete the key image<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#keyimage-idx">top</a>

        <a name="validate"><h3>Study validation commands</h3></a>

        <p><a name="validate_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>List the validation rules</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/validate/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; The account id<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>validates</i> &bull; An array of the validates. Each object holds the same fields as the <a href="#validate_get">/validate/get</a> call<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    validate_view or route_view or route_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_PERMITTED &bull; You are not permitted to view the validation rule<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#validate-idx">top</a>

        <p><a name="validate_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add a validation rule</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/validate/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; The account id<br>
                    <i>name</i> &bull; The validation rule name<br>
                    <i>conditions</i> &bull; The validation conditions<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The uuid<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    validate_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_PERMITTED &bull; You are not permitted to add validation rules<br>
                    NOT_FOUND &bull; The object was not found. The <i>error_subtype</i> holds the type of the object<br>
                    INVALID_CONDITION &bull; A condition is invalid. The <i>error_subtype</i> holds more detail<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li>The conditions are a JSON list of objects. Each object has the following fields
                        <ul>
                            <li> tag - the DICOM tag to validate in (XXXX,XXXX) format
                            <li> check - the check to perform, options are:
                            <ul>
                                <li> exists - does the tag exist for each image
                                <li> not_empty - does the tag have a value for each image
                                <li> match - does the tag match the regular expression for each image
                                <li> not_match - does the tag not match the regular expression for each image
                                <li> unique - does the tag have a unique value within the range
                                <li> identical - does the tag have an identical value within the range
                            </ul>
                            <li> regexp - the regular expression for the match and not_match checks
                            <li> range - range of the unique and identical checks, the available ranges are or either study or series
                        </ul>
                        <li> A validate can not have more than 10 regular expression conditions in it
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#validate-idx">top</a>

        <p><a name="validate_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Modify a validation rule</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/validate/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The validation id<br>
                    <i>name</i> &bull; The validation rule name<br>
                    <i>conditions</i> &bull; The validation conditions<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    validate_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The validation rule was not found<br>
                    NOT_PERMITTED &bull; You are not permitted to add validation rules<br>
                    INVALID_CONDITION &bull; A condition is invalid. The <i>error_subtype</i> holds more detail<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#validate-idx">top</a>

        <p><a name="validate_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a validation rule</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/validate/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; Id of the validate<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>name</i> &bull; Name of the rule<br>
                    <i>conditions</i> &bull; The validation conditions<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    validate_view or route_view or route_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The validate was not found.<br>
                    NOT_PERMITTED &bull; You are not permitted to view the validation rule<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#validate-idx">top</a>

        <p><a name="validate_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete the validation rule</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/validate/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; Id of the validation rule<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    validate_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The validation rule  was not found.<br>
                    NOT_PERMITTED &bull; You are not permitted to delete the validation rule<br>
                    IN_USE &bull; The validation rule is used in a routing rule<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#validate-idx">top</a>

        <a name="dicomdata"><h3>Study DICOM data commands</h3></a>

        <p><a name="dicomdata_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>List the DICOM data for studies </td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/dicomdata/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>(study_id || namespace_id)</i> &bull; uuid of the study or namespace to search<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>dicom_tags</i> &bull; A JSON list of the DICOM tags to return (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>dicomdatas</i> &bull; An array of the dicom data objects. Each object holds the same fields as the <a href="#dicomdata_get">/dicomdata/get</a> call<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    dicomdata_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_PERMITTED &bull; You are not permitted to view the DICOM data<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> To filter on DICOM tag values use the DICOM tag in the filter expression e.g. <code>filter.(0010,0020).equals=ABC</code>
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#dicomdata-idx">top</a>

        <p><a name="dicomdata_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get the DICOM data</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/dicomdata/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; Id of the DICOM data<br>
                    <i>dicom_tags</i> &bull; A JSON list of the DICOM tags to return (optional)<br>
                    <i>customfields</i> &bull; An array of the custom fields associated with this dicomdata. Each object has the following <a href="#customfields">fields</a> (This is only returned if the dicomdata has custom fields)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; Id of the DICOM data<br>
                    <i>study_id</i> &bull; The study id<br>
                    <i>study_uid</i> &bull; The study uid<br>
                    <i>series_uid</i> &bull; The series uid<br>
                    <i>instance_uid</i> &bull; The instance uid<br>
                    <i>dicom_tags</i> &bull; The DICOM tags and values<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    dicomdata_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The DICOM data was not found.<br>
                    NOT_PERMITTED &bull; You are not permitted to view the DICOM data<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#dicomdata-idx">top</a>

        <a name="radreport"><h3>Rad report commands</h3></a>

        <p><a name="radreport_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add a radreport</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/radreport/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>study_id</i> &bull; Id of the study to add the radreport to<br>
                    <i>type</i> &bull; The type of the radreport<br>
                    <i>fields</i> &bull; A JSON hash of the fields in the report (optional)<br>
                    <i>do_unlock</i> &bull; A flag indicating to unlock study radreport lock (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The uuid<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    radreport_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study was not found.<br>
                    NOT_PERMITTED &bull; You are not permitted to add a radreport to the study<br>
                    INVALID_JSON &bull; The field is not in valid JSON format. The <i>error_subtype</i> holds the name of the field<br>
                    LOCKED &bull; There is radreport-lock for the corresponding study by different SID.<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>If account.settings.<i>enable_radreport_lock_reading</i> is set, then it tries to radreport-lock in a study as in <a href="ipi.html#study_lock">/study/lock?type=RADREPORT</a>, updating it's <i>radreport_uuid</i>. If <i>do_unlock</i> is provided, then drops that radreport-lock after successful save.<br>
                Error=LOCKED provides <i>error_subtype</i>=RADREPORT_LOCKED, <i>error_data</i>={"locked_radreport_id":<b>radreport_uuid</b>,"locked_user_id":<b>user_uuid</b>}.
                </td>
                </td>
            </tr>
        </table>
        <a href="#radreport-idx">top</a>

        <p><a name="radreport_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Modify a radreport</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/radreport/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; Id of the radreport<br>
                    <i>fields</i> &bull; A JSON hash of the fields in the report (optional)<br>
                    <i>attachment</i> &bull; A JSON hash of the storage attachment information (optional)<br>
                    <i>do_unlock</i> &bull; A flag indicating to unlock study radreport lock (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    radreport_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study was not found.<br>
                    NOT_PERMITTED &bull; You are not permitted to add a radreport to the study<br>
                    INVALID_JSON &bull; The field is not in valid JSON format. The <i>error_subtype</i> holds the name of the field<br>
                    LOCKED &bull; There is radreport-lock for the corresponding study by different SID.<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>Look <a href="#radreport_add">/radreport/add</a> notes about <i>enable_radreport_lock_reading</i>.<br>
                </td>
            </tr>
        </table>
        <a href="#radreport-idx">top</a>

        <p><a name="radreport_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get the radreport</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/radreport/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; Id of the radreport<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; Id of the radreport<br>
                    <i>type</i> &bull; Type of radreport<br>
                    <i>fields</i> &bull; Fields in the radreport<br>
                    <i>attachment</i> &bull; The storage attachment information<br>
                    <i>user_id</i> &bull; User who created the radreport<br>
                    <i>study_id</i> &bull; Associated study<br>
                    <i>created</i> &bull; Date and time the radreport was created<br>
                    <i>updated</i> &bull; Date and time the radreport was updated<br>
                    --- The following field is only returned if the <i>enable_radreport_lock_reading</i> account setting is enabled AND this radreport is locked ---<br>
                    <i>locked_user_id</i> &bull; uuid of lock owner<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    radreport_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The radreport  was not found.<br>
                    NOT_PERMITTED &bull; You are not permitted to view the radreport<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#radreport-idx">top</a>

        <p><a name="radreport_audit"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Attach an audit action to a radreport</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/radreport/audit</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The id of the radreport<br>
                    <i>action</i> &bull; The audit action (SIGNED|MEDICAL_EDIT|ADMIN_EDIT|REPORT_GENERATED)<br>
                    <i>detail</i> &bull; Additional information<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    radreport_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The radreport can not be found<br>
                    INVALID_ACTION &bull; An invalid action was passed<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#radreport-idx">top</a>

        <p><a name="radreport_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete the radreport</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/radreport/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; Id of the radreport<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    radreport_edit plus you must have created the radreport
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The radreport  was not found.<br>
                    NOT_PERMITTED &bull; You are not permitted to delete the radreport<br>
                    LOCKED &bull; There is radreport-lock for the corresponding study by different USER.<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    If account.settings.<i>enable_radreport_lock_reading</i> is set and there is radreport-locked for the study at the moment by different USER, then errot=LOCKED, <i>error_subtype</i>=RADREPORT_LOCKED, <i>error_data</i>={"locked_radreport_id":<b>radreport_uuid</b>,"locked_user_id":<b>user_uuid</b>}.<br>
                </td>
            </tr>
        </table>
        <a href="#radreport-idx">top</a>

        <p><a name="radreport_description"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get the description of the radreport</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/radreport/description</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; Id of the radreport<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; Id of the radreport<br>
                    <i>description</i> &bull; One line description of the radreport<br>
                    <i>type</i> &bull; Type of radreport<br>
                    <i>can_edit</i> &bull; Can the user edit the radreport. See notes below.<br>
                    --- The following field is only returned if the enable_radreport_lock_reading account setting is enabled AND this radreport is locked ---<br>
                    <i>locked_user_id</i> &bull; uuid of lock owner<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    radreport_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The radreport  was not found.<br>
                    NOT_PERMITTED &bull; You are not permitted to view the radreport<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>Only if account.settings.<i>enable_radreport_lock_reading</i> is set. <i>can_edit</i> is set to 0 if this radreport is locked by another sid.
                </td>
            </tr>
        </table>
        <a href="#radreport-idx">top</a>

        <p><a name="radreport_lock"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Lock the radreport or prolongate the current lock</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/radreport/lock</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; Id of the radreport<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    radreport_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The radreport  was not found.<br>
                    NOT_PERMITTED &bull; You are not permitted to lock the radreport<br>
                    LOCKED &bull; This radreport is locked at the moment by another sid. <i>error_subtype</i>=RADREPORT_LOCKED. <i>error_data</i>={"locked_radreport_id":<b>radreport_uuid</b>,"locked_user_id":<b>user_uuid</b>}.<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>If account.settings.<i>enable_radreport_lock_reading</i> is NOT set, then always NOT_PERMITTED.<br>
                    The same user cant lock radreport with other sid.<br>
                    Lock expires in 1 hour. Each next call prolongates it.<br>
                    On successful lock (not prolongate) the RADREPORT_LOCKED event is sent to study channel.<br>
                </td>
            </tr>
        </table>
        <a href="#radreport-idx">top</a>

        <p><a name="radreport_unlock"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Unlock the radreport</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/radreport/unlock</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; Id of the radreport<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    radreport_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The radreport  was not found.<br>
                    NOT_PERMITTED &bull; You are not permitted to lock the radreport<br>
                    ALREADY &bull; This report is not locked<br>
                    LOCKED &bull; This radreport is locked at the moment by another user. <i>error_subtype</i>=RADREPORT_LOCKED. <i>error_data</i>={"locked_radreport_id":<b>radreport_uuid</b>,"locked_user_id":<b>user_uuid</b>}.<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>If account.settings.<i>enable_radreport_lock_reading</i> is NOT set, then always NOT_PERMITTED.<br>
                    If lock owner is the same user, then radreport CAN be unlocked even if sid differs.<br>
                    On successful unlock the RADREPORT_UNLOCKED event is sent to study channel.<br>
                </td>
            </tr>
        </table>
        <a href="#radreport-idx">top</a>

        <p><a name="radreport_user_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>List the radreports for a user</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/radreport/user/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>user_id</i> &bull; The user id<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>radreports</i> &bull; An array of the radreports. Each object holds the same fields as the <a href="#radreport_get">/radreport/get</a> call<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    This will only return radreports the calling user has radreport_view permissions for
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The user was not found.<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#radreport-idx">top</a>

        <p><a name="radreportmacro_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a list of the user radreport macros</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/radreportmacro/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; uuid of the account<br>
                    <i>modality</i> &bull; Limit to this modality (optional)<br>
                    <i>type</i> &bull; Limit to this type (optional)<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>macros</i> &bull; An array of the macros. Each object holds the same fields as the <a href="#radreportmacro_get">/radreportmacro/get</a> call<br>
                    <i>page</i> &bull; The pagination status hash<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    radreport_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_PERMITTED &bull; You are not permitted to perform this operation<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#radreport-idx">top</a>

        <p><a name="radreportmacro_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add a radreport macro</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/radreportmacro/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; uuid of the account<br>
                    <i>modality</i> &bull; Modality<br>
                    <i>type</i> &bull; Type of radreport<br>
                    <i>name</i> &bull; Name of the macro<br>
                    <i>body</i> &bull; JSON body of the macro<br>
                    <i>hotkey</i> &bull; Hotkey of the macro (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; Id of the macro<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    radreport_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_PERMITTED &bull; You are not permitted to perform this operation<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#radreport-idx">top</a>

        <p><a name="radreportmacro_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Edit a radreport macro</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/radreportmacro/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; uuid of the macro<br>
                    <i>modality</i> &bull; Modality (optional)<br>
                    <i>type</i> &bull; Type of radreport (optional)<br>
                    <i>name</i> &bull; Name of the macro (optional)<br>
                    <i>body</i> &bull; JSON body of the macro (optional)<br>
                    <i>hotkey</i> &bull; Hotkey of the macro (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; Id of the macro<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    radreport_edit plus ownership of the macro
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_PERMITTED &bull; You are not permitted to perform this operation<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#radreport-idx">top</a>

        <p><a name="radreportmacro_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a radreport macro</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/radreportmacro/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; uuid of the macro<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; Id of the macro<br>
                    <i>modality</i> &bull; Modality<br>
                    <i>type</i> &bull; Type of radreport<br>
                    <i>name</i> &bull; Name of the macro<br>
                    <i>body</i> &bull; JSON body of the macro<br>
                    <i>hotkey</i> &bull; Hotkey of the macro<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    radreport_view plus ownership of the macro
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_PERMITTED &bull; You are not permitted to perform this operation<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#radreport-idx">top</a>

        <p><a name="radreportmacro_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete a radreport macro</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/radreportmacro/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; uuid of the macro<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    radreport_edit plus ownership of the macro
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_PERMITTED &bull; You are not permitted to perform this operation<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#radreport-idx">top</a>

        <p><a name="radreport_pdf"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Returns the PDF report</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/radreport/pdf</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The radreport uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    Streams back the PDF report
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    radreport_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    [404] &bull; Not found<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#radreport-idx">top</a>

        <p><a name="radreport_fax"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Fax the radreport</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/radreport/fax</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The radreport uuid<br>
                    <i>number</i> &bull; The fax number to send the PDF report to<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    radreport_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The radreport can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                    INVALID_PHONE &bull; The fax number is invalid<br>
                    PDF_FAILED &bull; The PDF report failed to generate<br>
                    NO_ATTACHMENT &bull; The radreport does not have an attached report<br>
                    NOT_ENABLED &bull; The radreport mailing out is not enabled for the account<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#radreport-idx">top</a>

        <p><a name="radreport_email"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Email a radreport</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/radreport/email</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The radreport uuid<br>
                    <i>email</i> &bull; The email address(es) to send the radreport to<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    radreport_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The radreport can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                    INVALID_EMAIL &bull; An invalid email address was passed<br>
                    NO_ATTACHMENT &bull; The radreport does not have an attached report<br>
                    PDF_FAILED &bull; The PDF report failed to generate<br>
                    NOT_ENABLED &bull; The radreport mailing out is not enabled for the account<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> The email is sent using the study_radreport template with the radreport attached as a PDF
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#radreport-idx">top</a>

        <p><a name="radreport_template_list"></a></p>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a list of the account radreport templates</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/radreport/template/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; uuid of the account<br>
                    <i>type</i> &bull; Limit to this type (optional)<br>
                    <i>active</i> &bull; Limit to active templates (optional)<br>
                    <i>filter.*</i> &bull; <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> &bull; <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>templates</i> &bull; An array of the templates. Each object holds the same fields as the <a href="#radreport_template_get">/radreport/template/get</a> call<br>
                    <i>page</i> &bull; The pagination status hash<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    radreport_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_PERMITTED &bull; You are not permitted to perform this operation<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#radreport-idx">top</a>

        <p><a name="radreport_template_add"></a></p>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add a radreport template</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/radreport/template/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; uuid of the account<br>
                    <i>type</i> &bull; Type of radreport<br>
                    <i>name</i> &bull; Name of the template<br>
                    <i>body</i> &bull; Body of the template<br>
                    <i>preview</i> &bull; Preview of the template (optional)<br>
                    <i>options</i> &bull; JSON options of the template (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; Id of the template<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    sysadmin or support
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_SYSADMIN_OR_SUPPORT &bull; The user is not a sysadmin or support user<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#radreport-idx">top</a>

        <p><a name="radreport_template_set"></a></p>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Edit a radreport template</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/radreport/template/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; uuid of the template<br>
                    <i>type</i> &bull; Type of radreport (optional)<br>
                    <i>name</i> &bull; Name of the template (optional)<br>
                    <i>body</i> &bull; Body of the template (optional)<br>
                    <i>preview</i> &bull; Preview of the template (optional)<br>
                    <i>options</i> &bull; JSON options of the template (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; Id of the template<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    sysadmin or support
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_SYSADMIN_OR_SUPPORT &bull; You are not permitted to perform this operation<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#radreport-idx">top</a>

        <p><a name="radreport_template_get"></a></p>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a radreport template</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/radreport/template/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; uuid of the template<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; Id of the template<br>
                    <i>type</i> &bull; Type of radreport<br>
                    <i>name</i> &bull; Name of the template<br>
                    <i>body</i> &bull; Body of the template<br>
                    <i>preview</i> &bull; Preview of the template<br>
                    <i>options</i> &bull; JSON options of the template<br>
                    <i>active</i> &bull; Flag if the template is active<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    radreport_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The radreport template can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to perform this operation<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#radreport-idx">top</a>

        <p><a name="radreport_template_get_type"></a></p>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a radreport template by type</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/radreport/template/get/type</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; uuid of the account<br>
                    <i>type</i> &bull; Type of the template<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; Id of the template<br>
                    <i>type</i> &bull; Type of radreport<br>
                    <i>name</i> &bull; Name of the template<br>
                    <i>body</i> &bull; Body of the template<br>
                    <i>preview</i> &bull; Preview of the template<br>
                    <i>options</i> &bull; JSON options of the template<br>
                    <i>active</i> &bull; Flag if the template is active<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    radreport_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The radreport template can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to perform this operation<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#radreport-idx">top</a>

        <p><a name="radreport_template_delete"></a></p>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete a radreport template</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/radreport/template/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; uuid of the template<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    sysadmin or support
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_SYSADMIN_OR_SUPPORT &bull; The user is not a sysadmin or support user<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#radreport-idx">top</a>

        <p><a name="radreport_template_activate"></a></p>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Activate a radreport template</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/radreport/template/activate</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; uuid of the template<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; Id of the template<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    sysadmin or support
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The radreport template can not be found<br>
                    NOT_SYSADMIN_OR_SUPPORT &bull; The user is not a sysadmin or support user<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> Any active templates of the same type will be deactivated</li>
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#radreport-idx">top</a>

        <a name="customcode"><h3>Custom code commands</h3></a>

        <p><a name="customcode_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add the code</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/customcode/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; uuid of the account<br>
                    <i>name</i> &bull; The name of the code<br>
                    <i>type</i> &bull; Type of code (AI_CUSTOM_VALIDATION_CODE)<br>
                    <i>language</i> &bull; Language of code (PYTHON)<br>
                    <i>code</i> &bull; The code<br>
                    <i>settings</i> &bull; JSON hash of settings (optional)<br>
                    <i>zip</i> &bull; Base64 encoded ZIP file (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The code uuid<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    customcode_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_PERMITTED &bull; You are not permitted to add code<br>
                    INVALID_TYPE &bull; Invalid type<br>
                    INVALID_LANGUAGE &bull; Invalid language<br>
                    NOT_HASH &bull; The field is not a hash <br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#customcode-idx">top</a>

        <p><a name="customcode_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get the code</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/customcode/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The code uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The code uuid<br>
                    <i>name</i> &bull; code name<br>
                    <i>account_id</i> &bull; account uuid<br>
                    <i>account_name</i> &bull; account name<br>
                    <i>type</i> &bull; code type<br>
                    <i>language</i> &bull; code language<br>
                    <i>code</i> &bull; The code<br>
                    <i>settings</i> &bull; JSON hash of settings<br>
                    <i>is_deployed</i> &bull; Flag if the code is deployed<br>
                    <i>deployments</i> &bull; An array of the customcode deployments, ordered from most recent to earliest. Each object has the fields in the <a href="#customcode_deploy_get">/customcode/deploy/get</a> call.<br>
                    <i>has_zip</i> &bull; Flag if the code has an associated zip file<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    customcode_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The code can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view this code<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#customcode-idx">top</a>

        <p><a name="customcode_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Modify the code</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/customcode/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The code uuid<br>
                    <i>name</i> &bull; The name of the code (optional)<br>
                    <i>code</i> &bull; The code (optional)<br>
                    <i>settings</i> &bull; JSON hash of settings (optional)<br>
                    <i>zip</i> &bull; Base64 encoded ZIP file (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The code uuid<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    customcode_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_PERMITTED &bull; You are not permitted to edit the code<br>
                    NOT_HASH &bull; The field is not a hash <br>
                    IS_DEPLOYED &bull; The code is deployed and can not be edited<br>
                    ONE_ZIP_ONLY &bull; Only one code with an attached zip can be deployed to the namespace<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#customcode-idx">top</a>

        <p><a name="customcode_zip"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Returns the customcode zip file</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/customcode/zip</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The code uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    Streams back the zip file
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    [404] &bull; Not found<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#customcode-idx">top</a>

        <p><a name="customcode_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete the code</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/customcode/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The code uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    customcode_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_PERMITTED &bull; You are not permitted to delete the code<br>
                    IS_DEPLOYED &bull; The code is deployed and can not be deleted<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#customcode-idx">top</a>

        <p><a name="customcode_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a list of the code for the account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/customcode/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; uuid of the account<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>customcodes</i> &bull; An array of the customcode. Each object holds the same fields as the <a href="#customcode_get">/customcode/get</a> call<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    customcode_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view code in this account<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> This will also include customcodes from other accounts that are configured for customcode sharing
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#customcode-idx">top</a>

        <p><a name="customcode_deploy"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Deploy customcode for a namespace</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/customcode/deploy</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; uuid of the customcode<br>
                    <i>namespace_id</i> &bull; uuid of the namespace<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; Deployment uuid<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    customcode_deploy
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The namespace or customcode can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to deploy code in this namespace<br>
                    ALREADY &bull; The code is already deployed for this namespace<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#customcode-idx">top</a>

        <p><a name="customcode_undeploy"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Un-deploy customcode</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/customcode/undeploy</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>deployment_id</i> &bull; Deployment uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    customcode_deploy
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The deployment can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to undeploy code in this namespace<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#customcode-idx">top</a>

        <p><a name="customcode_deploy_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a customcode deployment</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/customcode/deploy/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; uuid of customcode deployment<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; uuid of the deployment<br>
                    <i>customcode_id</i> &bull; uuid of the customcode<br>
                    <i>customcode_name</i> &bull; name of the customcode<br>
                    <i>namespace_id</i> &bull; uuid of the namespace<br>
                    <i>namespace_name</i> &bull; name of the namespace<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    customcode_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The customcode deployment can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#customcode-idx">top</a>


        <p><a name="customcode_deploy_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>List customcode deployments</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/customcode/deploy/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>(namespace_id || customcode_id)</i> &bull; uuid of either the namespace or customcode to show the deployments for<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>deployments</i> &bull; An array of the objects. Each object in the array will have the fields available in <a href="#customcode_deploy_get">/customcode/deploy/get</a><br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    customcode_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The namespace or customcode can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#customcode-idx">top</a>

        <a name="case"><h3>Case commands</h3></a>

        Cases are automatically created by the second opinion workflow for a share code


        <p><a name="case_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a case</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/case/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The case uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The case uuid<br>
                    <i>name</i> &bull; case name<br>
                    <i>created</i> &bull; Date and time the case was created<br>
                    <i>paid</i> &bull; Flag if a payment being made against the case<br>
                    <i>share_code</i> &bull; Share code the case is associated with<br>
                    <i>user_name</i> &bull; Name of the user the case is for<br>
                    <i>user_email</i> &bull; Email of the user the case is for<br>
                    <i>studies</i> &bull; An array of the studies associated with this case. Each study has the fields from <a href="#study_get">/study/get</a><br>
                    <i>tags</i> &bull; An array of user tags associated with this object (This is only returned if the object has tags)<br>
                    <i>customfields</i> &bull; An array of the custom fields associated with this case. Each object has the following <a href="#customfields">fields</a> (This is only returned if the case has custom fields)<br>
                    <i>case_status</i> &bull; Status of the case<br>
                    <i>case_status_date</i> &bull; Date and time the case was set to the current status<br>
                    <i>case_status_tags</i> &bull; The available case status tags<br>
                    <i>submitted</i> &bull; Flag if the case was submitted<br>
                    <i>submitted_date</i> &bull; Date and time the case was submitted<br>
                    <i>returned_date</i> &bull; Date and time the case was returned<br>
                    <i>returned_reason</i> &bull; Reason the case was returned<br>
                    <i>completed</i> &bull; Flag if the case is completed<br>
                    <i>completed_date</i> &bull; Date and time the case was completed<br>
                    <i>closed</i> &bull; Flag if the case is closed<br>
                    <i>closed_date</i> &bull; Date and time the case was closed<br>
                    <b> The rest of the fields are not returned to the case owner </b><br>
                    <i>assigned_admin_id</i> &bull; Id of the admin user assigned to the case<br>
                    <i>assigned_admin_name</i> &bull; Name of the admin user assigned to the case<br>
                    <i>assigned_admin_date</i> &bull; Date and time the case was assigned to the admin user<br>
                    <i>assigned_medical_id</i> &bull; Id of the medical user assigned to the case<br>
                    <i>assigned_medical_name</i> &bull; Name of the medical user assigned to the case<br>
                    <i>assigned_medical_date</i> &bull; Date and time the case was assigned to a medical user<br>
                    <i>locked_user_id</i> &bull; Id of the user who has locked the case<br>
                    <i>locked_user_name</i> &bull; Name of the user who has locked the case<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    case_view or the case owner, or the assigned medical user if case_view and case_view_only_own are enabled
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The case can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view this case<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> If the requestor is the PHR user the case is for, only the share code customfields are returned
                        <li> If the requestor is the PHR user the case is for the studies are the studies in the PHR namespace
                        <li> If the requestor is an account user the studies are the studies in the account namespace
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#case-idx">top</a>

        <p><a name="case_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Edit a case</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/case/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The case uuid<br>
                    <i>name</i> &bull; case name (optional)<br>
                    <i>submitted</i> &bull; Flag if the case is submitted (optional)<br>
                    <i>customfield-{CUSTOMFIELD_UUID}</i> &bull; Custom field(s) (optional)<br>
                    <div class="comment">-- The rest of the fields can not be set by the case owner --</div>
                    <i>completed</i> &bull; Flag if the case is completed (optional)<br>
                    <i>closed</i> &bull; Flag if the case is closed (optional)<br>
                    <i>case_status</i> &bull; The case status (optional)<br>
                    <i>assigned_admin_id</i> &bull; Id of the admin user assigned to the case (optional)<br>
                    <i>assigned_medical_id</i> &bull; Id of the medical user assigned to the case (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    case_edit or the case owner, or the assigned medical user if case_edit and case_edit_only_own are enabled
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The case or assigned user can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to edit the case<br>
                    NOT_IN_ACCOUNT &bull; The assigned user is not in the account<br>
                    INVALID_CUSTOMFIELD &bull; Invalid custom field(s) name or value were passed. The <i>error_subtype</i> holds an array of the error details<br>
                    INVALID_CASE_STATUS &bull; Invalid case status<br>
                    LOCKED &bull; The case is locked by another user<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> To clear out an assigned user field send a zero UUID i.e. <code>00000000-0000-0000-0000-000000000000</code></li>
                        <li> If the case is being assigned to a medical or admin user the corresponding user will be emailed a notification. User's <i>event_case_assignment</i> flag must be set for notification to happen.</li>
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#case-idx">top</a>

        <p><a name="case_return"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Return a case to the owner</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/case/return</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The case uuid<br>
                    <i>reason</i> &bull; The reason the case was returned<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    case_edit, or the assigned medical user if case_edit and case_edit_only_own are enabled
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The case can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to return the case<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    A case can only be returned if it is submitted and not closed or completed
                </td>
            </tr>
        </table>
        <a href="#case-idx">top</a>


        <p><a name="case_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete a case</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/case/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The case uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    case_delete
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The case can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to delete the case<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#case-idx">top</a>

        <p><a name="case_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a list of the cases for the current user or the account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/case/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; uuid of the account (optional)<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>cases</i> &bull; An array of the cases. Each object holds the same fields as the <a href="#case_get">/case/get</a> call<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    case_view or case ownership, or the assigned medical user if case_view and case_view_only_own are enabled
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view cases in this account<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#case-idx">top</a>

        <p><a name="case_attach"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Attach or detach a study to a case</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/case/attach</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; Case uuid<br>
                    <i>study_id</i> &bull; Study uuid<br>
                    <i>detach</i> &bull; Flag to detach the study from the case (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    Only the assigned admin or medical user can do this
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The case or study can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    The attached study will be shared into the users PHR account
                </td>
            </tr>
        </table>
        <a href="#case-idx">top</a>

        <a name="patient"><h3>Patient commands</h3></a>

        <p><a name="patient_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add a patient</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/patient/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; uuid of the account to add them to<br>
                    <i>study_id</i> &bull; Id of the study to create a patient from (optional)<br>
                    <i>(name || first && last)</i> &bull; Patient name as either full name or first and last (optional if study_id is used)<br>
                    <i>mrn</i> &bull; MRN (optional if study_id is used)<br>
                    <i>sex</i> &bull; Gender (optional)<br>
                    <i>birth_date</i> &bull; Birth date (optional)<br>
                    <i>email</i> &bull; Email address (optional)<br>
                    <i>mobile_phone</i> &bull; Mobile phone number (optional)<br>
                    <i>alt_email</i> &bull; Alternate email address (optional)<br>
                    <i>alt_mobile_phone</i> &bull; Alternate mobile phone number (optional)<br>
                    <i>customfield-{CUSTOMFIELD_UUID}</i> &bull; Custom field(s) (optional)<br>
                    <i>event_share</i> &bull; Notify the patient if a new study is available on the patient portal (optional)<br>
                    <i>event_new_report</i> &bull; Notify the patient if a report is attached on the patient portal (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The uuid<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    patient_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account or study was not found. The <i>error_subtype</i> holds the type of field not found<br>
                    NOT_PERMITTED &bull; You are not permitted to add a patient to the account<br>
                    INVALID_PHONE &bull; The phone number is invalid<br>
                    INVALID_EMAIL &bull; The email is invalid<br>
                    ALREADY_EXISTS &bull; The patient is already in the account<br>
                    ALREADY_USED &bull; The email or phone number is already used by another patient. The <i>error_subtype</i> holds the field that is already used<br>
                    INVALID_CUSTOMFIELD &bull; Invalid custom field(s) name or value were passed. The <i>error_subtype</i> holds an array of the error details<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> * If a study is used the base fields values are taken from the study and any explicit values sent in the call will override the study fields
                        <li> * event_new_report is on by default. It will be set to 1 if you omit it.
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#patient-idx">top</a>

        <p><a name="patient_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a patient</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/patient/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The patient uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The patient uuid<br>
                    <i>name</i> &bull; Patient name<br>
                    <i>first</i> &bull; Patient first name<br>
                    <i>last</i> &bull; Patient last name<br>
                    <i>mrn</i> &bull; MRN<br>
                    <i>sex</i> &bull; Gender<br>
                    <i>birth_date</i> &bull; Birth date<br>
                    <i>email</i> &bull; Email address<br>
                    <i>mobile_phone</i> &bull; Mobile phone number<br>
                    <i>alt_email</i> &bull; Alternate email address<br>
                    <i>alt_mobile_phone</i> &bull; Alternate mobile phone number<br>
                    <i>event_share</i> &bull; Notify the patient if a new study is available on the patient portal<br>
                    <i>event_new_report</i> &bull; Notify the patient if a report is attached on the patient portal<br>
                    <i>tags</i> &bull; An array of user tags associated with this object (This is only returned if the object has tags)<br>
                    <i>customfields</i> &bull; An array of the custom fields associated with this patient. Each object has the following <a href="#customfields">fields</a> (This is only returned if the group has custom fields)<br>
                    <i>studies</i> &bull; An array of study ids linked with this patient (having the same mrn), which this user has access to.<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    patient_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The patient can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view this patient<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#patient-idx">top</a>

        <p><a name="patient_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Edit a patient</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/patient/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The patient uuid<br>
                    <i>(name || first && last)</i> &bull; Patient name as either full name or first and last<br>
                    <i>mrn</i> &bull; MRN<br>
                    <i>sex</i> &bull; Gender<br>
                    <i>birth_date</i> &bull; Birth date<br>
                    <i>email</i> &bull; Email address (optional)<br>
                    <i>mobile_phone</i> &bull; Mobile phone number (optional)<br>
                    <i>alt_email</i> &bull; Alternate email address (optional)<br>
                    <i>alt_mobile_phone</i> &bull; Alternate mobile phone number (optional)<br>
                    <i>event_share</i> &bull; Notify the patient if a new study is available on the patient portal (optional)<br>
                    <i>event_new_report</i> &bull; Notify the patient if a report is attached on the patient portal (optional)<br>
                    <i>customfield-{CUSTOMFIELD_UUID}</i> &bull; Custom field(s) (optional)<br>
                    <i>settings</i> &bull; A hash of the patient settings, see Notes. (optional)<br>
                    <i>setting_{SETTING_NAME}</i> &bull; Set an individual setting. This is an alternative to the settings hash for easier use in the API tester (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    patient_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The patient can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to edit the patient<br>
                    INVALID_PHONE &bull; The phone number is invalid<br>
                    INVALID_EMAIL &bull; The email is invalid<br>
                    ALREADY_EXISTS &bull; The MRN is in use by another patient<br>
                    ALREADY_USED &bull; The email or phone number is already used by another patient. The <i>error_subtype</i> holds the field that is already used<br>
                    INVALID_CUSTOMFIELD &bull; Invalid custom field(s) name or value were passed. The <i>error_subtype</i> holds an array of the error details<br>
                    NO_PATIENT_OVERRIDE &bull; The setting does not allow a patient override<br>
                    INVALID_SETTING &bull; An invalid setting was passed. The <i>error_subtype</i> holds the name of the invalid setting<br>
                    INVALID_SETTING_VALUE &bull; An invalid setting value was passed. The <i>error_subtype</i> holds the name of the setting with the invalid value<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>Current allowed settings are <i>patient_portal_event_new_report_notify_type</i> and <i>patient_portal_event_share_notify_type</i>
                </td>
            </tr>
        </table>
        <a href="#patient-idx">top</a>

        <p><a name="patient_merge"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Merge patients with optionally setting some of patient fields</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/patient/merge</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The destination patient uuid<br>
                    <i>src</i> &bull; The JSON array of patient uuids to merge into destionation<br>
                    <i>do_update_patient_studies</i> &bull; Update patient studies' sex an phone if those are modified (optional)<br>
                    <i>do_delete</i> &bull; Delete src patients after merge (optional)<br>
                    <i>sex</i> &bull; Gender (optional)<br>
                    <i>email</i> &bull; Email address (optional)<br>
                    <i>mobile_phone</i> &bull; Mobile phone number (optional)<br>
                    <i>alt_email</i> &bull; Alternate email address (optional)<br>
                    <i>alt_mobile_phone</i> &bull; Alternate mobile phone number (optional)<br>
                    <i>event_share</i> &bull; Notify the patient if a new study is available on the patient portal (optional)<br>
                    <i>event_new_report</i> &bull; Notify the patient if a report is attached on the patient portal (optional)<br>
                    <i>customfield-{CUSTOMFIELD_UUID}</i> &bull; Custom field(s) (optional)<br>
                    <i>settings</i> &bull; A hash of the patient settings, see Notes. (optional)<br>
                    <i>setting_{SETTING_NAME}</i> &bull; Set an individual setting. This is an alternative to the settings hash for easier use in the API tester (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    patient_merge
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The patient can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to merge the patients<br>
                    PATIENT_NAME_DOB_MISMATCH &bull; Patients should contain the same <i>name</i> and <i>date of birth</i><br>
                    MULTIPLE_ACCOUNTS &bull; Patients from different accounts provided<br>
                    INVALID_PHONE &bull; The phone number is invalid<br>
                    INVALID_EMAIL &bull; The email is invalid<br>
                    ALREADY_USED &bull; The email or phone number is already used by another patient. The <i>error_subtype</i> holds the field that is already used<br>
                    INVALID_CUSTOMFIELD &bull; Invalid custom field(s) name or value were passed. The <i>error_subtype</i> holds an array of the error details<br>
                    NO_PATIENT_OVERRIDE &bull; The setting does not allow a patient override<br>
                    INVALID_SETTING &bull; An invalid setting was passed. The <i>error_subtype</i> holds the name of the invalid setting<br>
                    INVALID_SETTING_VALUE &bull; An invalid setting value was passed. The <i>error_subtype</i> holds the name of the setting with the invalid value<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>If <i>account.settings.auto_update_patient_studies</i> is set, then <i>do_update_patient_studies</i> is set.
                </td>
            </tr>
        </table>
        <a href="#patient-idx">top</a>

        <p><a name="patient_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete a patient</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/patient/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The patient uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    patient_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The patient can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to delete the patient<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#patient-idx">top</a>

        <p><a name="patient_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a list of the patients in the account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/patient/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; uuid of the account<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>patients</i> &bull; An array of the patients. Each object holds the same fields as the <a href="#patient_get">/patient/get</a> call<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    patient_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view patients in this account<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    The default sort is by recent activity.
                </td>
            </tr>
        </table>
        <a href="#patient-idx">top</a>

        <p><a name="patient_study_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a list of the studies for the patient</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/patient/study/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The patient id<br>
                    <i>viewable_only</i> &bull; Flag if they only want the studies the user can view<br>

                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>studies</i> &bull; An array of the studies. Each object holds the same fields as the <a href="#study_get">/study/get</a> call<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    patient_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The patient can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view this patient<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#patient-idx">top</a>

        <p><a name="patient_portal_find"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Find a patient for the portal</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/patient/portal/find</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>first</i> &bull; The first name<br>
                    <i>last</i> &bull; The last name<br>
                    <i>birth_date</i> &bull; Date of birth<br>
                    <i>mrn</i> &bull; MRN (required if the require_mrn_for_patient_portal account setting is on)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>patient_id</i> &bull; The patient id<br>
                    <i>study_count</i> &bull; The number of studies for the patient<br>
                    <i>email</i> &bull; The obscured version of the patient email<br>
                    <i>mobile_phone</i> &bull; The obscured version of the patient phone<br>
                    <i>alt_email</i> &bull; The obscured version of the patient email<br>
                    <i>alt_mobile_phone</i> &bull; The obscured version of the patient phone<br>
                    <i>dup_email</i> &bull; Flag if another patient has the same email<br>
                    <i>dup_mobile_phone</i> &bull; Flag if another patient has the same mobile_phone<br>
                    <i>other_patients</i> &bull; An array of the other matching patients. Each object holds the same fields as documented above. This field is only returned if there are other matching patients.<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    The enable_patient_portal flag needs to be turned on for the account and the call needs to come for a vanity for the account
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The patient can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to perform this search <br>
                    INVALID_DATE &bull; An invalid date was passed<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> If multiple patients match the patients are sorted by study_count descending
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#patient-idx">top</a>

        <p><a name="patient_portal_pin"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Send a PIN to the patient</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/patient/portal/pin</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>patient_id</i> &bull; The patient id<br>
                    <i>email</i> &bull; Flag if they want the PIN sent via email<br>
                    <i>mobile_phone</i> &bull; Flag if they want the PIN sent via SMS<br>
                    <i>alt_email</i> &bull; Flag if they want the PIN sent via the alt_email<br>
                    <i>alt_mobile_phone</i> &bull; Flag if they want the PIN sent via SMS to the alt_mobile_phone<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    The enable_patient_portal flag needs to be turned on for the account and the call needs to come for a vanity for the account
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The patient can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#patient-idx">top</a>

        <p><a name="patient_portal_login"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Login to the patient portal</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/patient/portal/login</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>patient_id</i> &bull; The patient id<br>
                    <i>pin</i> &bull; The PIN<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>sid</i> &bull; Session id<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    The enable_patient_portal flag needs to be turned on for the account and the call needs to come for a vanity for the account
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The patient can not be found<br>
                    INVALID_PIN &bull; The PIN is invalid or expired<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                    LOCKOUT &bull; Too many failed attempts<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#patient-idx">top</a>

        <p><a name="patient_portal_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>List user's accounts with patient portal enabled</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/patient/portal/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>portals</i> &bull; An array of the accounts with patient portal enabled.  Each object holds the following fields<br>
                    * <i>uuid</i> &bull; The account UUID<br>
                    * <i>name</i> &bull; Name of the account<br>
                    * <i>vanity</i> &bull; Vanity host name(s) for the account<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    Only patient portals with the expose_patient_portal setting turned on are returned.
                </td>
            </tr>
        </table>
        <a href="#patient-idx">top</a>

        <a name="order"><h3>Order commands</h3></a>

        <p><a name="order_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add a order</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/order/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; uuid of the account to add them to<br>
                    <i>patientid</i> &bull; Patient MRN<br>
                    <i>patient_name</i> &bull; Patient name<br>
                    <i>accession_number</i> &bull; Accession number<br>
                    <i>patient_sex</i> &bull; Gender<br>
                    <i>patient_birth_date</i> &bull; DOB<br>
                    <i>referring_physician</i> &bull; Referring physician<br>
                    <i>sending_facility</i> &bull; Sending facility<br>
                    <i>customfield-{CUSTOMFIELD_UUID}</i> &bull; Custom field(s) (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The uuid<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    order_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account was not found. The <i>error_subtype</i> holds the type of field not found<br>
                    NOT_PERMITTED &bull; You are not permitted to add a order to the account<br>
                    INVALID_CUSTOMFIELD &bull; Invalid custom field(s) name or value were passed. The <i>error_subtype</i> holds an array of the error details<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#order-idx">top</a>

        <p><a name="order_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get an order</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/order/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The order uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The order uuid<br>
                    <i>patientid</i> &bull; Patient MRN<br>
                    <i>patient_name</i> &bull; Patient name<br>
                    <i>accession_number</i> &bull; Accession number<br>
                    <i>patient_sex</i> &bull; Gender<br>
                    <i>patient_birth_date</i> &bull; DOB<br>
                    <i>referring_physician</i> &bull; Referring physician<br>
                    <i>sending_facility</i> &bull; Sending facility<br>
                    <i>tags</i> &bull; An array of user tags associated with this object (This is only returned if the object has tags)<br>
                    <i>customfields</i> &bull; An array of the custom fields associated with this order. Each object has the following <a href="#customfields">fields</a> (This is only returned if the order has custom fields)<br>
                    <i>sps</i> &bull; An array of the SPS records associated with this order. Each record has the following fields<br>
                    * <i>uuid</i> &bull; Id of the SPS<br>
                    * <i>modality</i> &bull; Modality<br>
                    * <i>scheduled_procedure_step_id</i> &bull; Step ID<br>
                    * <i>requested_procedure_id</i> &bull; Procedure ID<br>
                    * <i>requested_procedure_description</i> &bull; Procedure description<br>
                    * <i>scheduled_station_aetitle</i> &bull; Station AE title<br>
                    * <i>scheduled_procedure_step_start_date</i> &bull; Start date<br>
                    * <i>scheduled_procedure_step_start_time</i> &bull; Start time<br>
                    * <i>scheduled_procedure_step_description</i> &bull; Step description<br>
                    * <i>mpps_status</i> &bull; The modality performed procedure step (mpps) status<br>
                    * <i>mpps_uid</i> &bull; The UID for the mpps<br>
                    --- The following field is only returned if the enable_orders_in_worklist account setting is enabled ---<br>
                    <i>studies</i> &bull; An array of study ids linked with this order (having the same accession_number).<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    order_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The order can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view this order<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#order-idx">top</a>

        <p><a name="order_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Edit a order</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/order/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The order uuid<br>
                    <i>patientid</i> &bull; Patient MRN<br>
                    <i>patient_name</i> &bull; Patient name<br>
                    <i>accession_number</i> &bull; Accession number<br>
                    <i>patient_sex</i> &bull; Gender<br>
                    <i>patient_birth_date</i> &bull; DOB<br>
                    <i>referring_physician</i> &bull; Referring physician<br>
                    <i>sending_facility</i> &bull; Sending facility<br>
                    <i>customfield-{CUSTOMFIELD_UUID}</i> &bull; Custom field(s) (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    order_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The order can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to edit the order<br>
                    INVALID_CUSTOMFIELD &bull; Invalid custom field(s) name or value were passed. The <i>error_subtype</i> holds an array of the error details<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#order-idx">top</a>

        <p><a name="order_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete a order</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/order/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The order uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    order_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The order can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to delete the order<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#order-idx">top</a>

        <p><a name="order_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a list of the orders in the account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/order/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; uuid of the account<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>orders</i> &bull; An array of the orders. Each object holds the same fields as the <a href="#order_get">/order/get</a> call<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    order_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view orders in this account<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li>There is additional filter field 'study_count'
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#order-idx">top</a>

        <p><a name="order_sps_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add a scheduled procedure step to an order</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/order/sps/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>order_id</i> &bull; uuid of the order<br>
                    <i>modality</i> &bull; Modality<br>
                    <i>scheduled_procedure_step_id</i> &bull; Step ID<br>
                    <i>requested_procedure_id</i> &bull; Procedure ID<br>
                    <i>requested_procedure_description</i> &bull; Procedure description<br>
                    <i>scheduled_station_aetitle</i> &bull; Station AE title<br>
                    <i>scheduled_procedure_step_start_date</i> &bull; Start date<br>
                    <i>scheduled_procedure_step_start_time</i> &bull; Start time<br>
                    <i>scheduled_procedure_step_description</i> &bull; Step description<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; UUID of the SPS<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    order_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The order can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to edit orders in this account<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#order-idx">top</a>

        <p><a name="order_sps_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Edit a scheduled procedure step</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/order/sps/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; UUID of the SPS<br>
                    <i>modality</i> &bull; Modality (optional)<br>
                    <i>scheduled_procedure_step_id</i> &bull; Step ID (optional)<br>
                    <i>requested_procedure_id</i> &bull; Procedure ID (optional)<br>
                    <i>requested_procedure_description</i> &bull; Procedure description (optional)<br>
                    <i>scheduled_station_aetitle</i> &bull; Station AE title (optional)<br>
                    <i>scheduled_procedure_step_start_date</i> &bull; Start date (optional)<br>
                    <i>scheduled_procedure_step_start_time</i> &bull; Start time (optional)<br>
                    <i>scheduled_procedure_step_description</i> &bull; Step description (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    order_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The SPS can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to edit orders in this account<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#order-idx">top</a>

        <p><a name="order_sps_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete a scheduled procedure step</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/order/sps/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; UUID of the SPS<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    order_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The SPS can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to edit orders in this account<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#order-idx">top</a>

        <p><a name="order_sps_status"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Set the mpps status of a SPS</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/order/sps/status</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>uuid</i> &bull; The node id<br>
                    <i>serial_no</i> &bull; The serial number of the node<br>
                    <i>mpps_uid</i> &bull; The mpps UUID of the SPS<br>
                    <i>mpps_status</i> &bull; The mpps status to set (PENDING|IN_PROGRESS|DISCONTINUED|COMPLETED)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The SPS can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to set the status<br>
                    INVALID_STATUS &bull; An invalid status was passed<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#order-idx">top</a>

        <p><a name="order_sps_find"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Find SPS orders for MWL processing</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/order/sps/find</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>(sid || node_id && serial_no)</i> &bull; Either the sid or the node uuid and serial number<br>
                    <i>account_id</i> &bull; The account uuid if sid authentication is used<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>sps</i> &bull; An array of the matching sps record. Each record has the following fields<br>
                    * <i>patientid</i> &bull; Patient MRN<br>
                    * <i>patient_name</i> &bull; Patient name<br>
                    * <i>accession_number</i> &bull; Accession number<br>
                    * <i>patient_sex</i> &bull; Gender<br>
                    * <i>patient_birth_date</i> &bull; DOB<br>
                    * <i>referring_physician</i> &bull; Referring physician<br>
                    * <i>modality</i> &bull; Modality<br>
                    * <i>study_uid</i> &bull; Study UID<br>
                    * <i>scheduled_procedure_step_id</i> &bull; Step ID<br>
                    * <i>requested_procedure_id</i> &bull; Procedure ID<br>
                    * <i>requested_procedure_description</i> &bull; Procedure description<br>
                    * <i>scheduled_station_aetitle</i> &bull; Station AE title<br>
                    * <i>scheduled_procedure_step_start_date</i> &bull; Start date<br>
                    * <i>scheduled_procedure_step_start_time</i> &bull; Start time<br>
                    * <i>scheduled_procedure_step_description</i> &bull; Step description<br>
                    * <i>mpps_status</i> &bull; The modality performed procedure step (mpps) status<br>
                    * <i>mpps_uid</i> &bull; The UID for the mpps<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The node can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view orders in this account<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    order_view if sid authentication is used
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> Filter fields must be prefixed with "ord" for order fields and "order_sps" for sps fields e.g. filter.ord.accession_number.like, filter.order_sps.modality.equals
                        <li> SPS orders with a mpps_status of COMPLETED or DISCONTINUED are excluded from this search
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#order-idx">top</a>

        <a name="hl7"><h3>HL7 commands</h3></a>

        <p><a name="hl7_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a list of HL7 messages in an account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/hl7/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; uuid of the account<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>messages</i> &bull; An array of the HL7 messages. Each message holds the following fields:<br>
                    * <i>uuid</i> &bull; uuid of the message<br>
                    * <i>created</i> &bull; Created datetime stamp of the message<br>
                    * <i>type</i> &bull; Message type<br>
                    * <i>accession_numbers</i> &bull; Array of the message accession numbers<br>
                    * <i>patientid</i> &bull; Patient MRN<br>
                    * <i>patient_name</i> &bull; Patient name<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    hl7_message_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account_id can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>To filter by accession number use parameter like <code>filter.accession_number_h->'917364'.equals=1</code>.
                </td>
            </tr>
        </table>
        <a href="#hl7-idx">top</a>

        <p><a name="hl7_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add a HL7 message to the system</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/hl7/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>uuid</i> &bull; The node id<br>
                    <i>serial_no</i> &bull; The serial number of the node<br>
                    <i>message</i> &bull; The HL7 message<br>
                    <i>accession_number</i> &bull; Use this accession number instead of the accession number in the HL7 message (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>ack</i> &bull; The HL7 acknowledgement<br>
                    <i>uuid</i> &bull; UUID of the message<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The node can not be found<br>
                    INVALID_MESSAGE &bull; The message could not parsed as a HL7 message<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> If the accession number value is <code>__DG_LOAD_FROM_MRN__</code> and the message has an MRN the accession numbers will be populated with the accession numbers of matching studies
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#hl7-idx">top</a>

        <p><a name="hl7_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a HL7 message</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/hl7/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>(sid || node_id && serial_no)</i> &bull; Either the sid or the node uuid and serial number<br>
                    <i>uuid</i> &bull; The hl7 uuid<br>
                    <i>(study_id || study_uid && storage_namespace && phi_namespace)</i> &bull; The study uuid or the storage triplet (optional)<br>
                    <i>raw</i> &bull; Flag to return the raw HL7 message as well<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The hl7 uuid<br>
                    <i>created</i> &bull; The date and time the report was created.<br>
                    <i>segments</i> &bull; A JSON list of lists of the segments in the message<br>
                    <i>hl7_template</i> &bull; The hl7_template to render the message with (optional)<br>
                    <i>raw</i> &bull; The hl7 message (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The hl7 can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to access this hl7<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#hl7-idx">top</a>

        <p><a name="hl7_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete a HL7 message</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/hl7/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The hl7 uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    hl7_message_delete or study_report_delete permission for the associated study
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The hl7 can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to delete this hl7<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#hl7-idx">top</a>

        <p><a name="hl7_study_report"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Return the latest HL7 report for a study</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/hl7/study/report</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>study_id</i> &bull; The study uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>text</i> &bull; Plain text version of the report<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view this<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#hl7-idx">top</a>

        <p><a name="hl7_extract_report"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Extract the report from the HL7 and attach it to the studies</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/hl7/extract/report</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The HL7 uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The HL7 can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to access this HL7 message<br>
                    NOT_CONFIGURED &bull; The node setting report_from_hl7 is not configured<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#hl7-idx">top</a>


        <p><a name="hl7_template_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>List the HL7 templates for the account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/hl7/template/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; The account uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>templates</i> &bull; A array of the template objects. Each object contains the fields in <a href="#hl7_template_get">/hl7/template/get</a><br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    hl7_template_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view this list<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#hl7-idx">top</a>

        <p><a name="hl7_template_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add a HL7 template to the account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/hl7/template/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; The account uuid<br>
                    <i>name</i> &bull; Name of the template<br>
                    <i>body</i> &bull; The HL7 message with replacement expressions<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; Id of the template<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    hl7_template_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                    INVALID_HL7 &bull; The body is not a valid HL7 message<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> The body of the template should be an HL7 message with Text::Template expressions for the field data that will be replaced when the template is evaluated
                        <li> A sample Text::Template expression would be <code>{$patient_name}</code> which would be replaced by the value of the patient_name field in the study
                        <li> Customfields can get accessed from the template as follows {$customfield_h{'UUID_OF_CUSTOM_FIELD'}}
                        <li> The __COUNTER-XXX__ and __LCOUNTER-XXX__ values as documented in /namespace/anonymize is supported in the body of the template. This does not need to be in a Text::Template expression and if it is it should be quoted as a literal string.
                        <li> The __REDIRECT_LINK-UUID__ value will be replaced by a /link/redirect link that is a duplicate of the link with the UUID. This must not be in a Text::Template expression.
                        <li> The __DIRECT_LINK-UUID__ value will be replaced by a link with the HTML user UI that is a duplicate of the link with the UUID. This must not be in a Text::Template expression.
                        <li> The duplicate link is updated with the current study data. If the link used a filter the filter values will be parsed as a Text::Template expressions for the current study.
                        <li> If a study has an associated radreport the fields in the radreport can be included via the radreport_fields hash i.e. <code>{$radreport_fields{'text-input-2'}}</code>.
                        <li> If a study has an associated radreport the specific lines in the radreport fields can be extracted via the __RADREPORT_LINE-N-FIELDNAME__ macro. N is the line number (one based) and FIELDNAME is the radreport field name i.e. <code>__RADREPORT_LINE-3-text-input-2__</code>. This must not be in a Text::Template expression.
                        <li> If a study has an attachment the corresponding PDF can be included via the latest_attachment_pdf variable i.e. <code>{$latest_attachment_pdf}</code>. The value is base64 encoded.
                        <li> If a study has an associated HL7 message specified in /study/push/hl7 the full HL7 message can be included e.g. <code>{$hl7_message}</code>
                        <li> If a study has an associated HL7 message specified in /study/push/hl7 the HL7 segments can be included from the hl7_segments array, first segment is index 0, second segment is index 1 etc. e.g. <code>{$hl7_segments[2]}</code>
                        <li> If a study has an associated HL7 message specified in /study/push/hl7 the HL7 fields can be included from the hl7_fields hash using the notation specified in <a href="#hl7_transform_add">/hl7/transform/add</a> e.g. <code>{$hl7_fields{'PID_2'}}</code>
                        <li> If a study has image data loaded via the /study/dicomdata/load call the __EPIC_LUMENS__ value will be replaced by the data needed to view the images in Lumens and the __EPIC_UUID__ value will be replaced by a UUID for each image. If the Dicomdata object has the named customfield <code>lumens_link_uuid</code> the send of the image will be tracked in this customfield and the image will only be sent once.
                        <li> The helper variable <code>{$current_timestamp}</code> is timestamp like <code>2022-06-21 12:40:19</code> that could be used in functions below like <code>{datetime_to_dicom(translate_time_zone($current_timestamp, 'GMT'))}</code>
                        <li> The following helper functions are supported in the teplate:
                            <ol>
                                <li> translate_time_zone($timestamp, $timezone) - translate the timestamp with a time zone (e.g. <code>2022-03-25 17:40:12.419715+04:30</code>) to a time zone (e.g. <code>MST</code>). Returns the corresponding timestamp in the time zone without fractional seconds and the offset part(e.g. <code>2022-03-25 06:10:12</code>)
                                <li> datetime_to_dicom($timestamp) - format the timestamp as a DICOM Date Time without fractional seconds and an optional suffix for time zone offset. The timestamp should not contain fractional seconds and a time zone offset (e.g. <code>2022-03-25 06:10:12</code>).
                            </ol>
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#hl7-idx">top</a>

        <p><a name="hl7_template_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Modify a HL7 template</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/hl7/template/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The template id<br>
                    <i>name</i> &bull; Name of the template<br>
                    <i>body</i> &bull; The HL7 message with replacement expressions<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    hl7_template_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The template can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                    INVALID_HL7 &bull; The body is not a valid HL7 message<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#hl7-idx">top</a>

        <p><a name="hl7_template_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a HL7 template</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/hl7/template/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The template id<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The template id<br>
                    <i>name</i> &bull; Name of the template<br>
                    <i>type</i> &bull; Type of the HL7 message<br>
                    <i>body</i> &bull; The HL7 message with replacement expressions<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    hl7_template_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The template can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#hl7-idx">top</a>

        <p><a name="hl7_template_render"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Render a HL7 template for a study</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/hl7/template/render</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The template id<br>
                    <i>study_id</i> &bull; The study id<br>
                    <i>hl7_id</i> &bull; Optional hl7 message<br>
                    <i>text</i> &bull; Flag if you want the text returned rather than the JSON<br>
                    <i>hex</i> &bull; Flag if you want a hexdump of the text returned rather than the JSON<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>message</i> &bull; The HL7 message<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    hl7_template_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The template or study can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#hl7-idx">top</a>

        <p><a name="hl7_template_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete a HL7 template</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/hl7/template/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The template id<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    hl7_template_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The template can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#hl7-idx">top</a>

        <p><a name="hl7_transform_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>List the HL7 transforms for the account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/hl7/transform/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; The account uuid<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>transforms</i> &bull; A array of the transform objects. Each object contains the fields in <a href="#hl7_transform_get">/hl7/transform/get</a><br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    hl7_transform_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view this list<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#hl7-idx">top</a>

        <p><a name="hl7_transform_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add a HL7 transform to the account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/hl7/transform/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; The account uuid<br>
                    <i>name</i> &bull; Name of the transform<br>
                    <i>order_by</i> &bull; A numeric ordering value. Transformations are run in this order from lowest to highest<br>
                    <i>conditions</i> &bull; A JSON array of the transform conditions<br>
                    <i>replacements</i> &bull; A JSON array of the transform replacements<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; Id of the transform<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    hl7_transform_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                    DUPLICATE_ORDER_BY &bull; The order_by value is used by another transform<br>
                    NOT_LIST &bull; The field is not a JSON array. The <i>error_subtype</i> holds the name of the field<br>
                    INVALID_CONDITION &bull; An invalid condition was passed. The <i>error_subtype</i> holds the details on why it is invalid<br>
                    INVALID_REPLACEMENT &bull; An invalid replacement was passed. The <i>error_subtype</i> holds the details on why it is invalid<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> The HL7 fields in the conditions and replacements are specified as SEGMENT_FIELD or SEGMENT_FIELD_COMPONENT where field and component are the numeric positions (one based) within the SEGMENT and SEGMENT is the name with an optional positional qualifier. e.g. <code>PID_1</code> for the first field in the PID segment or <code>OBX-3_7_4</code> for the 4th component in the 7th field in the third OBX segment
                        <li> A condition is  a JSON hash keyed by the HL7 field specifier with the value a regexp to match against the field value. All conditions must match for the replacements to be performed. An example is <nobr><code>[{"PID_1":"/^jane/"},{"OBX-3_5_2":"/doe/"}]</code></nobr> which means that PID field 1 must start with jane and OBX segment 3 field 5 component 2 must contain doe for the HL7 message to match the condition.
                        <li> A replacement is a JSON hash keyed by the HL7 field specifier with the value a Text::Template expression. All the HL7 fields are available for use in the template as variables. An example is <nobr><code>[{"PID_1":"XXX-{$OBX-3_7_4}"}]</code></nobr> which means replace the value in PID field 1 with XXX- plus the value of OBX segment 3 field 7 component 4.
                        <li> The <code>__UUID__</code> value in the Text::Template expression will be replaced with a UUID
                        <li> The <code>__COUNTER-XXX__</code> and <code>__LCOUNTER-XXX__</code> value as documented in /namespace/anonymize is supported in the Text::Template expression
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#hl7-idx">top</a>

        <p><a name="hl7_transform_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Modify a HL7 transform</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/hl7/transform/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The transform id<br>
                    <i>name</i> &bull; Name of the transform<br>
                    <i>order_by</i> &bull; A numeric ordering value. Transformations are run in this order from lowest to highest<br>
                    <i>conditions</i> &bull; A JSON array of the transform conditions<br>
                    <i>replacements</i> &bull; A JSON array of the transform replacements<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    hl7_transform_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                    DUPLICATE_ORDER_BY &bull; The order_by value is used by another transform<br>
                    NOT_LIST &bull; The field is not a JSON array. The <i>error_subtype</i> holds the name of the field<br>
                    INVALID_CONDITION &bull; An invalid condition was passed. The <i>error_subtype</i> holds the details on why it is invalid<br>
                    INVALID_REPLACEMENT &bull; An invalid replacement was passed. The <i>error_subtype</i> holds the details on why it is invalid<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#hl7-idx">top</a>

        <p><a name="hl7_transform_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a HL7 transform</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/hl7/transform/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The transform id<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The transform id<br>
                    <i>name</i> &bull; Name of the transform<br>
                    <i>order_by</i> &bull; A numeric ordering value. Transformations are run in this order from lowest to highest<br>
                    <i>conditions</i> &bull; A JSON array of the transform conditions<br>
                    <i>replacements</i> &bull; A JSON array of the transform replacements<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    hl7_transform_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The transform can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#hl7-idx">top</a>

        <p><a name="hl7_transform_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete a HL7 transform</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/hl7/transform/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The transform id<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    hl7_transform_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The transform can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#hl7-idx">top</a>

        <p><a name="hl7_transform_test"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Test HL7 transformation</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/hl7/transform/test</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>hl7</i> &bull; HL7 message to run the transformations on
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>hl7</i> &bull; The transformed HL7 message<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    hl7_transform_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#hl7-idx">top</a>

        <p><a name="hl7_parse_fields"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Parse a HL7 message and show the field and values</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/hl7/parse/fields</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>message</i> &bull; HL7 message to parse<br>
                    <i>fields</i> &bull; Comma delimited list of the field to return. Use the notation specified in <a href="#hl7_transform_add">/hl7/transform/add</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>fields</i> &bull; A JSON array of the fields and values<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    INVALID_MESSAGE &bull; The message could not parsed as a HL7 message<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#hl7-idx">top</a>

        <a name="setting"><h3>Setting commands</h3></a>

        <p><a name="setting_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Set a setting value for the user</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/setting/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>key</i> &bull; The key to store the value under. If the key name begins with <i>temp_</i> it is only available for the session.<br>
                    <i>value</i> &bull; The value to store <br>
                    <i>user_id</i> &bull; A sysadmin user can set the value for a specific user (optional) <br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> Use the value <code>__DELETE__</code> to delete a setting
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#setting-idx">top</a>

        <p><a name="setting_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a setting value for the user</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/setting/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>key</i> &bull; The key to get<br>
                    <i>user_id</i> &bull; A sysadmin user can get the value for a specific user (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>value</i> &bull; The setting value<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#setting-idx">top</a>

        <p><a name="setting_get_all"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get all the settings for a user</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/setting/get/all</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>settings</i> &bull; The hash of all non-temporary user settings<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#setting-idx">top</a>

        <a name="node"><h3>Node commands</h3></a>
        Harvester commands

        <p><a name="node_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>List the nodes for an account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/node/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; uuid of the account (optional)<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>nodes</i> &bull; An array of the nodes.  Each object holds the following same fields as the <a href="#node_get">/node/get</a> call<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    node_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view this list<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#node-idx">top</a>

        <p><a name="node_public"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>List public nodes</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/node/public</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; The account the user is in<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>nodes</i> &bull; An array of the nodes. Each object will have the following fields<br>
                    * <i>uuid</i> &bull; Node id<br>
                    * <i>facility_name</i> &bull; Name of the facility it is installed at<br>
                    * <i>facility_zip</i> &bull; Zip code of the facility it is installed at<br>
                    * <i>facility_contact</i> &bull; Name of the facility contact<br>
                    * <i>facility_contact_title</i> &bull; Title of the facility contact<br>
                    * <i>facility_email</i> &bull; Email of the facility contact<br>
                    * <i>facility_notes</i> &bull; Notes about the facility<br>
                    * <i>connect_status</i> &bull; A status indicating a connection request state<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    node_connect
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The node or account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                    INVALID_FILTER &bull; Invalid filter field<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> You can only filter on the facility_* fields
                        <li> Possible values for connect_status:
                            <ul>
                                <li>NONE - No connection requested
                                <li>PENDING - There are some connection requests
                                <li>CONNECTED - The node is connected
                                <li>REJECTED - The node connection was rejected
                            </ul>
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#node-idx">top</a>

        <p><a name="node_connect"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Request a connection to a public node</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/node/connect</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The node id<br>
                    <i>account_id</i> &bull; The account the user is in<br>
                    <i>message</i> &bull; Message (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    node_connect
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The node or account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                    ALREADY_CONNECTED &bull; The node is already connected to the account<br>
                    ALREADY_PENDING &bull; The node is pending connection already<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    An email requesting the connection will sent to Ambra, the node operator and the user. The email is generated from the node_connect template for the account the node is located in.
                </td>
            </tr>
        </table>
        <a href="#node-idx">top</a>

        <p><a name="node_approve"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Approve a public node connection</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/node/approve</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The node id<br>
                    <i>account_id</i> &bull; The account which requested the connection<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    node_approve_connect
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The node, node connection request or account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                    ALREADY_CONNECTED &bull; The node is already connected to the account<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#node-idx">top</a>

        <p><a name="node_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add a node</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/node/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>name</i> &bull; Description of the node<br>
                    <i>uuid</i> &bull; uuid of the node (optional, you can use this to explicitly set the UUID)<br>
                    <i>(account_id || location_id || group_id)</i> &bull; uuid of the account, location or group to link this node to<br>
                    <i>type</i> &bull; Type of node (STORAGE|HARVESTER|ACCELERATOR|CLEARINGHOUSE|VIRTUAL|UTILITY|XDS)<br>
                    <i>os_type</i> &bull; Node OS type, used with HARVESTER node type only (WINDOWS|MACOS) (optional)<br>
                    <i>accelerator_id</i> &bull; uuid of the accelerator if this is an accelerator node<br>
                    <i>facility_name</i> &bull; Name of the facility it is installed at (optional)<br>
                    <i>facility_zip</i> &bull; Zip code of the facility it is installed at (optional)<br>
                    <i>facility_contact</i> &bull; Name of the facility contact (optional)<br>
                    <i>facility_contact_title</i> &bull; Title of the facility contact (optional)<br>
                    <i>facility_email</i> &bull; Email of the facility contact (optional)<br>
                    <i>facility_notes</i> &bull; Notes about the facility (optional)<br>
                    <i>category</i> &bull; Node category (ACTIVE|INACTIVE|MIGRATION|TEST|DUPLICATE|INTEGRATED|ACCELERATOR) (optional)<br>
                    <i>is_public</i> &bull; Flag if the node is public (optional)<br>
                    <i>ctc_bucket</i> &bull; Name of the S3 bucket to use for a cloud to cloud gateway (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The node uuid<br>
                    <i>serial_no</i> &bull; The node serial number<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    node_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    ACCOUNT_NOT_FOUND &bull; The account was not found<br>
                    NOT_PERMITTED &bull; You are not permitted to add a node to this account<br>
                    INVALID_UUID &bull; Invalid uuid format or this uuid is already in use<br>
                    INVALID_TYPE &bull; Invalid type of node<br>
                    INVALID_OS_TYPE &bull; Invalid OS type of node<br>
                    INVALID_LINKAGE &bull; The linkage is invalid<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> You need to be a sysadmin to add a storage or clearinghouse node
                        <li> The ctc_bucket feature will copy encrypted information on the customfields and link to a S3 bucket. On ingestion into another node with the same ctc_bucket name the customfield values will be applied to the study and link recreated.
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#node-idx">top</a>

        <p><a name="node_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Edit a node</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/node/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>(sid || serial_no)</i> &bull; The session id or serial number of the node<br>
                    <i>uuid</i> &bull; The node id<br>
                    <i>name</i> &bull; Description of the node (optional)<br>
                    <i>configuration</i> &bull; The configuration as a JSON hash of key values pairs (optional)<br>
                    <i>reload_configuration</i> &bull; If this flag is set the node will be instructed to reload it's configuration on the next ping (optional)<br>
                    <i>monitor_study_create</i> &bull; Check if the node is sending studies normally (optional)<br>
                    <i>monitor_study_create_threshold</i> &bull; Threshold in minutes for triggering the monitor_study_create notification (optional)<br>
                    <i>monitor_node_ping</i> &bull; Check if the node is pinging (optional)<br>
                    <i>monitor_node_slow_push</i> &bull; Check if the node is pushing slowly (optional)<br>
                    <i>monitor_node_slow_push_threshold</i> &bull; Threshold in minutes for triggering the monitor_node_slow_push notification (optional)<br>
                    <i>monitor_node_last_send</i> &bull; Check if the node has sent a study recently (optional)<br>
                    <i>monitor_node_last_send_threshold</i> &bull; Threshold in minutes for triggering the monitor_node_last_send notification (optional)<br>
                    <i>monitor_email</i> &bull; Email address(es) to send monitor failure notices (optional)<br>
                    <i>warning_email</i> &bull; Email address(es) to send warning notices (optional)<br>
                    <i>storage_namespace</i> &bull; Namespace uuid to attach the node to. This requires a sysadmin sid and must be within the same account (optional)<br>
                    <i>settings</i> &bull; A hash of the <a href="#account-settings">account settings</a> that the node can override (optional)<br>
                    <i>setting_{SETTING_NAME}</i> &bull; Set an individual setting. This is an alternative to the settings hash for easier use in the API tester (optional)<br>
                    <i>facility_name</i> &bull; Name of the facility it is installed at (optional)<br>
                    <i>facility_zip</i> &bull; Zip code of the facility it is installed at (optional)<br>
                    <i>facility_contact</i> &bull; Name of the facility contact (optional)<br>
                    <i>facility_contact_title</i> &bull; Title of the facility contact (optional)<br>
                    <i>facility_email</i> &bull; Email of the facility contact (optional)<br>
                    <i>facility_notes</i> &bull; Notes about the facility (optional)<br>
                    <i>category</i> &bull; Node category (ACTIVE|INACTIVE|MIGRATION|TEST|DUPLICATE|INTEGRATED) (optional)<br>
                    <i>is_public</i> &bull; Flag if the node is public (optional)<br>
                    <i>ctc_bucket</i> &bull; Name of the S3 bucket to use for a cloud to cloud gateway (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    node_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The node can not be found<br>
                    INVALID_JSON &bull; The field is not in valid JSON format. The <i>error_subtype</i> holds the name of the field<br>
                    NOT_PERMITTED &bull; You are not permitted to edit this node<br>
                    INVALID_CONFIGURATION &bull; An invalid combination of configuration options was set. The <i>error_subtype</i> will hold more detail<br>
                    NO_NODE_OVERRIDE &bull; The setting does not allow a node override<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li>The configuration hash does not need to be complete. It can include only the items you want to update or the entire set.
                        <li> Use the value <code>__DELETE__</code> to delete a setting, it will then revert to the account value of the setting
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#node-idx">top</a>

        <p><a name="node_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a node</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/node/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>uuid</i> &bull; The node id<br>
                    <i>(sid || serial_no)</i> &bull; The session id or serial number of the node<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>name</i> &bull; Description of the node<br>
                    <i>uuid</i> &bull; uuid of the node<br>
                    <i>type</i> &bull; The type of the node<br>
                    <i>os_type</i> &bull; Node OS type<br>
                    <i>serial_no</i> &bull; The serial number of the node<br>
                    <i>storage_namespace</i> &bull; The storage namespace the node should harvest to<br>
                    <i>storage_namespace_name</i> &bull; The name of the storage namespace the node should harvest to<br>
                    <i>configuration</i> &bull; The configuration as JSON hash of key values pairs<br>
                    <i>monitor_study_create</i> &bull; Check if the node is sending studies normally<br>
                    <i>monitor_study_create_threshold</i> &bull; Threshold in minutes for triggering the monitor_study_create notification<br>
                    <i>monitor_node_ping</i> &bull; Check if the node is pinging<br>
                    <i>monitor_node_slow_push</i> &bull; Check if the node is pushing slowly<br>
                    <i>monitor_node_slow_push_threshold</i> &bull; Threshold in minutes for triggering the monitor_node_slow_push notification<br>
                    <i>monitor_node_last_send</i> &bull; Check if the node has sent a study recently<br>
                    <i>monitor_node_last_send_threshold</i> &bull; Threshold in minutes for triggering the monitor_node_last_send notification<br>
                    <i>monitor_email</i> &bull; Email address(es) to send monitor failure notices<br>
                    <i>warning_email</i> &bull; Email address(es) to send warning notices<br>
                    <i>accelerator_id</i> &bull; uuid of the accelerator if this is an accelerator node<br>
                    <i>account_id</i> &bull; The associated account id<br>
                    <i>settings</i> &bull; A hash of the  <a href="#account-settings">account settings</a> that the node has overridden<br>
                    <i>has_access</i> &bull; Flag if the user has node_view or node_edit permissions on this node<br>
                    <i>facility_name</i> &bull; Name of the facility it is installed at<br>
                    <i>facility_zip</i> &bull; Zip code of the facility it is installed at<br>
                    <i>facility_contact</i> &bull; Name of the facility contact<br>
                    <i>facility_contact_title</i> &bull; Title of the facility contact<br>
                    <i>facility_email</i> &bull; Email of the facility contact<br>
                    <i>facility_notes</i> &bull; Notes about the facility<br>
                    <i>category</i> &bull; Node category (ACTIVE|INACTIVE|MIGRATION|TEST|DUPLICATE|INTEGRATED)<br>
                    <i>is_public</i> &bull; Flag if the node is public<br>
                    <i>ctc_bucket</i> &bull; Name of the S3 bucket to use for a cloud to cloud gateway (optional)<br>
                    <i>last_ping</i> &bull; Number of seconds since the nodes last ping. -1 if the node has never pinged<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The node can not be found<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#node-idx">top</a>

        <p><a name="node_ping"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Ping node</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/node/ping</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>uuid</i> &bull; The node id<br>
                    <i>serial_no</i> &bull; The serial number of the node<br>
                    <i>ack</i> &bull; Flag if the gateway wants to use the acknowledge workflow<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>reload_configuration</i> &bull; An optional flag field, if set the node should reload it's configuration.<br>
                    <i>ack</i> &bull; Flag if an acknowledgement is needed (optional)<br>
                    <i>studies</i> &bull; An array of the studies each object in the array will have the following fields<br>
                    * <i>uuid</i> &bull; Id of the push job<br>
                    * <i>study_uid</i> &bull; The study uid<br>
                    * <i>storage_namespace</i> &bull; The storage namespace<br>
                    * <i>phi_namespace</i> &bull; The phi namespace<br>
                    * <i>engine_fqdn</i> &bull; The FQDN of the storage engine for the study<br>
                    * <i>modality</i> &bull; The study modality<br>
                    * <i>size</i> &bull; The study size<br>
                    * <i>image_count</i> &bull; The study image_count<br>
                    * <i>accession_number</i> &bull; The study accession number<br>
                    * <i>patientid</i> &bull; The study MRN<br>
                    * <i>destination_id</i> &bull; Id of the destination (if the destination is DICOM)<br>
                    * <i>aetitle</i> &bull; The ae title to send to (if the destination is DICOM)<br>
                    * <i>address</i> &bull; The destination address (if the destination is DICOM)<br>
                    * <i>port</i> &bull; The destination port (if the destination is DICOM)<br>
                    * <i>created_at</i> &bull; Timestamp when the push job was created (if the destination is DICOM)<br>
                    * <i>created_by_name</i> &bull; Name of the user who created the push job (if the destination is DICOM)<br>
                    * <i>path</i> &bull; The destination path (if the destination is FOLDER)<br>
                    * <i>bundle</i> &bull; The bundle type (if the destination is FOLDER)<br>
                    * <i>detail</i> &bull; Any additional detail from the <a href="#study_cmove">/study/cmove</a> or "use_cache" if local routing is required or "is_auto" if this was created by routing rules<br>
                    <i>fetch</i> &bull; An array of the studies to fetch each object in the array will have the following fields<br>
                    * <i>uuid</i> &bull; Id of the fetch job<br>
                    * <i>accession_number</i> &bull; The accession number to query on<br>
                    * <i>destination_id</i> &bull; Id of the destination<br>
                    * <i>aetitle</i> &bull; The ae title to query to<br>
                    * <i>address</i> &bull; The query address<br>
                    * <i>port</i> &bull; The query port<br>
                    * <i>study_uid</i> &bull; Study uid to query for<br>
                    * <i>patientid</i> &bull; Patient id to query for<br>
                    * <i>destination_ae_title</i> &bull; Value of the field in the thin study (optional)<br>
                    * <i>source</i> &bull; Source of the fetch either 'H' for an HL7 triggered fetch or 'O' for other<br>
                    * <i>anonymize</i> &bull; A JSON hash of <a href="#namespace_anonymize">anonymization rules</a> to apply to retrieved studies (optional)<br>
                    <i>hl7</i> &bull; An array of HL7 messages to deliver each object in the array will have the following fields<br>
                    * <i>uuid</i> &bull; Id of the job<br>
                    * <i>destination_id</i> &bull; Id of the destination<br>
                    * <i>message</i> &bull; The HL7 message to deliver<br>
                    * <i>address</i> &bull; The HL7 destination address<br>
                    * <i>port</i> &bull; The HL7 destination port<br>
                    <i>search_results</i> &bull; An array of the results from the /destination/search jobs run by the gateway. Each object in the array will have the following fields<br>
                    * <i>uuid</i> &bull; Id of the search results<br>
                    * <i>destination_id</i> &bull; Id of the destination that was searched<br>
                    * <i>payload</i> &bull; Payload from the search<br>
                    * <i>search_id</i> &bull; UUID of the original search<br>
                    <i>search</i> &bull; An array of the search jobs to run. Each object in the array will have the following fields<br>
                    * <i>uuid</i> &bull; Id of the search job<br>
                    * <i>destination_id</i> &bull; Id of the destination<br>
                    * <i>aetitle</i> &bull; The ae title to query to<br>
                    * <i>address</i> &bull; The query address<br>
                    * <i>port</i> &bull; The query port<br>
                    * <i>mwl_search</i> &bull; Flag to indicate if this is a modality worklist search<br>
                    * <i>node_search</i> &bull; Flag to indicate if this is a search from another node<br>
                    * <i>create_thin</i> &bull; Value entered in the /destination/search<br>
                    * <i>create_study</i> &bull; Value entered in the /destination/search<br>
                    * The rest of the fields are the optional search parameters in either the <a href="#destination_search">/destination/search</a> or the <a href="#destination_search_mwl">/destination/search/mwl</a> call<br>
                    <i>webhook</i> &bull; An array of the webhooks to run. Each object in the array will have the following fields<br>
                    * <i>uuid</i> &bull; Id of the webhook job<br>
                    * <i>method</i> &bull; The HTTP method to use<br>
                    * <i>url</i> &bull; The URL to call<br>
                    * <i>parameters</i> &bull; A JSON hash of the call parameters<br>
                    * <i>auth</i> &bull; The webhook auth setting<br>
                    <i>burn</i> &bull; An array of the CD burn jobs to run. Each object in the array will have the following fields<br>
                    * <i>uuid</i> &bull; Id of the burn job<br>
                    * <i>name</i> &bull; Name of the destination<br>
                    * <i>template</i> &bull; The template for the job<br>
                    * <i>priority</i> &bull; Priority of the job<br>
                    * <i>studies</i> &bull; An array of the studies to burn. Each object in the array will have the following fields<br>
                    ** <i>study_uid</i> &bull; The study uid<br>
                    ** <i>modality</i> &bull; The study modality<br>
                    ** <i>size</i> &bull; The study size<br>
                    ** <i>image_count</i> &bull; The study image_count<br>
                    ** <i>study_description</i> &bull; The study description<br>
                    ** <i>study_date</i> &bull; The study date<br>
                    ** <i>storage_namespace</i> &bull; The storage namespace<br>
                    ** <i>phi_namespace</i> &bull; The phi namespace<br>
                    ** <i>engine_fqdn</i> &bull; The FQDN of the storage engine for the study<br>
                    ** <i>labels</i> &bull; A JSON array of the <a href="#cd_burn_info">labels</a><br>
                    <i>log</i> &bull; An array of the log search jobs to run. Each object in the array will have the following fields<br>
                    * <i>start</i> &bull; The start date and time for the log range<br>
                    * <i>end</i> &bull; The end date and time for the log range<br>
                    * <i>type</i> &bull; The log type to process (log|dicom|queue|system)<br>
                    <i>xml</i> &bull; An array of the XML jobs to process
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The node can not be found<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li>The uuid and serial_no can also be passed using basic auth as the username/password combination
                        <li>The maximum number of studies, fetches or hl7 messages returned in a single ping is controlled by the max_records_per_ping node configuration value. The default is 100.
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#node-idx">top</a>

        <p><a name="node_ping_ack"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Acknowledge the last ping</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/node/ping/ack</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>uuid</i> &bull; The node id<br>
                    <i>serial_no</i> &bull; The serial number of the node<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The node can not be found<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#node-idx">top</a>

        <p><a name="node_deliver"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Update the status of a job picked up /node/ping</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/node/deliver</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>uuid</i> &bull; The node id<br>
                    <i>serial_no</i> &bull; The serial number of the node<br>
                    <i>job_id</i> &bull; The uuid of the push job, not used for local pushes (optional)<br>
                    <i>status</i> &bull; Status code of the job (S|F|P|B|U) - Success, failure, partial transfer, blocked or uncached<br>
                    <i>status_reason</i> &bull; Detail on the status change (optional)<br>
                    <i>ack</i> &bull; The HL7 ACK if this was an HL7 job (optional)<br>
                    <i>email_reason</i> &bull; Email the user this reason for the status change (optional)<br>
                    <i>is_local</i> &bull; The flag used to indicate the local push (optional)<br>
                    <i>study_uid</i> &bull; The study uid of the local push, required for local pushes only (optional)<br>
                    <i>destination_id</i> &bull; The uuid of the destination, required for local pushes (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The node or job can not be found<br>
                    INVALID_STATUS &bull; Invalid status code<br>
                    CONFLICTING_STATUS &bull; This status conflicts with a prior status update<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> The uuid and serial_no can also be passed using basic auth as the username/password combination
                        <li> The email_reason is not sent if the status was not changed
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#node-idx">top</a>

        <p><a name="node_retrieve"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Update the status of a fetch job picked up /node/ping</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/node/retrieve</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>uuid</i> &bull; The node id<br>
                    <i>serial_no</i> &bull; The serial number of the node<br>
                    <i>job_id</i> &bull; The uuid of the fetch job<br>
                    <i>status</i> &bull; Status code of the job (S|F|P) - Success, failure, partial transfer
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The node or job can not be found<br>
                    INVALID_STATUS &bull; Invalid status code<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    The uuid and serial_no can also be passed using basic auth as the username/password combination
                </td>
            </tr>
        </table>
        <a href="#node-idx">top</a>

        <p><a name="node_webhook"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Set the status of webhook picked up /node/ping</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/node/webhook</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>uuid</i> &bull; The node id<br>
                    <i>serial_no</i> &bull; The serial number of the node<br>
                    <i>webhook_id</i> &bull; The uuid of the webhook job<br>
                    <i>status</i> &bull; Status code of the job (S|F) - Success, failure<br>
                    <i>error_message</i> &bull; Detailed error message (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The node or webhook can not be found<br>
                    INVALID_STATUS &bull; Invalid status code<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    The uuid and serial_no can also be passed using basic auth as the username/password combination
                </td>
            </tr>
        </table>
        <a href="#node-idx">top</a>


        <p><a name="node_configuration"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get the node configuration</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/node/configuration</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>uuid</i> &bull; The node id<br>
                    <i>serial_no</i> &bull; The serial number of the node<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>storage_namespace</i> &bull; The storage namespace the node should harvest to<br>
                    <i>configuration</i> &bull; The configuration as JSON hash of key values pairs<br>
                    <i>destinations</i> &bull; An array of the destinations for the node.  Each object holds the following same fields as the <a href="#destination_get">/destination/get</a> call<br>
                    <i>account_settings</i> &bull; A hash of the relevant account settings. (study_search_modifiers)<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The node can not be found<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <p>
                    The uuid and serial_no can also be passed using basic auth as the username/password combination
                    </p>
                    <p>
                    The <i>ingress_filter</i> element contains a json string which includes the group/element, the type of comparison and the value to test against. A sample document is as follows: <code>{'filters':[{'groupElement': '0028,0004','evaluation' : '!=','value' : 'MONOCHROME1'}]}</code>. This says that for the element 0028,0004 the value can not equal <i>MONOCHROME1</I>
                    </p>
                </td>
            </tr>
        </table>
        <a href="#node-idx">top</a>

        <p><a name="node_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete a node</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/node/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The node id<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    node_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The node can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to delete this node<br>
                    HAS_DESTINATIONS &bull; The node has associated destinations<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#node-idx">top</a>

        <p><a name="node_study_queued"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>A study was queued for pushing to storage</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/node/study/queued</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>uuid</i> &bull; The node id<br>
                    <i>serial_no</i> &bull; The serial number of the node<br>
                    <i>study_uid</i> &bull; The study uid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The node can not be found<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    A node should notify services when it receives a study that needs to be pushed to the cloud. This call is needed for the monitor_study_create check to work.
                </td>
            </tr>
        </table>
        <a href="#node-idx">top</a>

        <p><a name="node_study_anonymized"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>A study was anonymized by the gateway</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/node/study/anonymized</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>uuid</i> &bull; The node id<br>
                    <i>serial_no</i> &bull; The serial number of the node<br>
                    <i>old_study_uid</i> &bull; The old study uid<br>
                    <i>new_study_uid</i> &bull; The new study uid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The node can not be found<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    A node should notify services when a study_uid is anonymized prior to uploading the study to the storage. This call is needed to adjust actions scheduled on the study (shares, edits, etc).
                </td>
            </tr>
        </table>
        <a href="#node-idx">top</a>

        <p><a name="node_found"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Return the results of a search</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/node/found</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>uuid</i> &bull; The node id<br>
                    <i>serial_no</i> &bull; The serial number of the node<br>
                    <i>search_id</i> &bull; The id of the search request<br>
                    <i>status</i> &bull; Status code of the job, S by default (S|F) - Success, failure (optional)<br>
                    <i>studies</i> &bull; A JSON array of the studies found. Each object has the following fields (optional)<br>
                    * <i>study_uid</i> &bull; The study_uid<br>
                    * <i>study_date</i> &bull; The study date<br>
                    * <i>accession_number</i> &bull; The accession number<br>
                    * <i>referring_physician</i> &bull; The referring physician<br>
                    * <i>patient_name</i> &bull; Patient name<br>
                    * <i>patientid</i> &bull; Patient ID<br>
                    * <i>patient_sex</i> &bull; Gender <br>
                    * <i>patient_birth_date</i> &bull; Birth date<br>
                    * <i>study_description</i> &bull; Study description<br>
                    * <i>modality</i> &bull; Modality<br>
                    * <i>result_fields</i> &bull; A JSON structure with the answers for the requested result_fields in /destination/search (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The node or search can not be found<br>
                    INVALID_JSON &bull; The field is not in valid JSON format. The <i>error_subtype</i> holds the name of the field<br>
                    ALREADY_DONE &bull; The search has already had results returned against it<br>
                    INVALID_STATUS &bull; An invalid status was passed<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#node-idx">top</a>

        <p><a name="node_found_mwl"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Return the results of a modality worklist search</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/node/found/mwl</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>uuid</i> &bull; The node id<br>
                    <i>serial_no</i> &bull; The serial number of the node<br>
                    <i>search_id</i> &bull; The id of the search request<br>
                    <i>status</i> &bull; Status code of the job, S by default (S|F) - Success, failure (optional)<br>
                    <i>orders</i> &bull; A JSON array of the orders found. Each object has the following fields (optional)<br>
                    * <i>patient_name</i> &bull; Patient name<br>
                    * <i>patientid</i> &bull; Patient id <br>
                    * <i>accession_number</i> &bull; Accession number <br>
                    * <i>patient_sex</i> &bull; Gender <br>
                    * <i>patient_birth_date</i> &bull; Birth date<br>
                    * <i>order_number</i> &bull; Order number <br>
                    * <i>order_date</i> &bull; Order date <br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The node or search can not be found<br>
                    INVALID_JSON &bull; The field is not in valid JSON format. The <i>error_subtype</i> holds the name of the field<br>
                    ALREADY_DONE &bull; The search has already had results returned against it<br>
                    INVALID_STATUS &bull; An invalid status was passed<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#node-idx">top</a>

        <p><a name="node_event"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Notify for a node event</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/node/event</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>uuid</i> &bull; The node id<br>
                    <i>serial_no</i> &bull; The serial number of the node<br>
                    <i>event</i> &bull; The event (c_echo_error)<br>
                    <i>destination_id</i> &bull; The id of the destination if the event is associated with a destination<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The node or destination can not be found<br>
                    INVALID_EVENT &bull; Invalid event<br>
                    SCHEDULE_IS_OFF &bull; The event is outside of its scheduled time<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#node-idx">top</a>

        <p><a name="node_log"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Request logs from the node be attached to a study</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/node/log</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The node id<br>
                    <i>start</i> &bull; Start time stamp in YYYY-MM-DD HH:MM:SS format<br>
                    <i>end</i> &bull; End time stamp in YYYY-MM-DD HH:MM:SS format<br>
                    <i>type</i> &bull; Type of log (log|dicom|queue|system) defaults to log if not passed<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    node_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The node can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to perform this action<br>
                    INVALID_DATE_TIME &bull; The timestamp is invalid<br>
                    INVALID_RANGE &bull; An invalid time range was specified<br>
                    TRY_LATER &bull; The log search queue is full<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> A maximum of three log jobs can be queued up for the node
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#node-idx">top</a>

        <p><a name="node_xml"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Send XML to or from a node</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/node/xml</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>(sid || serial_no)</i> &bull; The session id or serial number of the node<br>
                    <i>uuid</i> &bull; The node id<br>
                    <i>xml</i> &bull; XML message<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The node can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to perform this action<br>
                    INVALID_XML &bull; The XML does not parse<br>
                    FULL &bull; The XML queue is full<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#node-idx">top</a>


        <p><a name="node_metric"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Record a metric for a job on the node</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/node/metric</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>uuid</i> &bull; The node id<br>
                    <i>serial_no</i> &bull; The serial number of the node<br>
                    <i>job_id</i> &bull; The uuid of the push job<br>
                    <i>metric</i> &bull; The metric to record<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The node or job can not be found<br>
                    INVALID_METRIC &bull; The metric is invalid for this job type<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    The following metrics are supported
                    <ul>
                        <li> CD Burn jobs
                            <ul>
                                <li>job_queued
                                <li>download_start
                                <li>download_end
                                <li>unzip_start
                                <li>unzip_end
                                <li>burn_start
                                <li>burn_end
                            </ul>
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#node-idx">top</a>

        <p><a name="node_performance_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Set performance counters for the node</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/node/performance/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>uuid</i> &bull; The node id<br>
                    <i>serial_no</i> &bull; The serial number of the node<br>
                    <i>data</i> &bull; A JSON data structure with performance data<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The node can not be found<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#node-idx">top</a>

        <p><a name="node_performance_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get performance counters for the node</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/node/performance/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>(sid || serial_no)</i> &bull; The session id or serial number of the node<br>
                    <i>uuid</i> &bull; The node id<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>data</i> &bull; The node's performance data<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The node can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view this node<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#node-idx">top</a>

        <p><a name="node_progress_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add a progress record for the node</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/node/progress/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>uuid</i> &bull; The node id<br>
                    <i>serial_no</i> &bull; The serial number of the node<br>
                    <i>queue</i> &bull; The queue<br>
                    <i>state</i> &bull; The status<br>
                    <i>destination_id</i> &bull; The destination uuid (optional)<br>
                    <i>study_uid</i> &bull; Study uid (optional)<br>
                    <i>patientid</i> &bull; DICOM tag (0010,0020) (optional)<br>
                    <i>accession_number</i> &bull; DICOM tag (0008,0050) (optional)<br>
                    <i>detail</i> &bull; JSON detail (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The record uuid<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The node or destination can not be found<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#node-idx">top</a>

        <p><a name="node_progress_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>List the progress records for the node or destination</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/node/progress/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>(node_id || destination_id)</i> &bull; The node or destination id<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>last_ping</i> &bull; Number of seconds since the nodes last ping. -1 if the node has never pinged<br>
                    <i>progresses</i> &bull; An array of the progress records.  Each object holds the following same fields as the <a href="#node_progress_get">/node/progress/get</a> call<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    node_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The node can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> The list is sorted by creation order from most recent to oldest
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#node-idx">top</a>

        <p><a name="node_progress_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a node progress record</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/node/progress/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The node progress uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>destination_id</i> &bull; The destination uuid<br>
                    <i>destination_name</i> &bull; The destination name<br>
                    <i>queue</i> &bull; The queue<br>
                    <i>state</i> &bull; The status<br>
                    <i>study_uid</i> &bull; Study uid<br>
                    <i>patientid</i> &bull; DICOM tag (0010,0020) (optional)<br>
                    <i>accession_number</i> &bull; DICOM tag (0008,0050) (optional)<br>
                    <i>detail</i> &bull; JSON detail<br>
                    <i>created</i> &bull; Timestamp<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    node_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The record can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#node-idx">top</a>

        <a name="destination"><h3>Destination commands</h3></a>
        Dicom destinations

        <p><a name="destination_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>List the destinations for the account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/destination/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>(sid || node_id && serial_no)</i> &bull; Either the sid or the node uuid and serial number<br>
                    <i>account_id</i> &bull; uuid of the account<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>destinations</i> &bull; An array of the destinations.  Each object holds the following same fields as the <a href="#destination_get">/destination/get</a> call<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    destination_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view this list<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#destination-idx">top</a>

        <p><a name="destination_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add a destination to the account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/destination/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; uuid of the account<br>
                    <i>node_id</i> &bull; uuid of the node that handles the destination<br>
                    <i>name</i> &bull; Name of the destination<br>
                    <i>type</i> &bull; Type of the destination either DICOM, FOLDER, ACCELERATOR,VIRTUAL, BURNER, XDS, LINKED, DISTRIBUTING or UPLOADER. Defaults to DICOM (optional)<br>
                    <i>linked_destination</i> &bull; uuid of the destination for LINKED destinations<br>
                    <i>linked_qr_to_referred_account</i> &bull; A flag to create resultant studies in the linked destination's account (not the account of LINKED destination where the search was initiated). Meaningful for LINKED destinations only (opional)<br>
                    <i>linked_qr_activity_in_referred_account</i> &bull; A flag to create DESTINATION_SEARCH activities in the linked destination's account. Meaningful for LINKED destinations only (opional)<br>
                    <i>distributed_destinations</i> &bull; A JSON array of destination ids. This list will be used to process requests in round robin manner. Meaningful for DISTRIBUTING destination type only (opional)<br>
                    <i>path</i> &bull; Path of the folder for a FOLDER type of destination (required if FOLDER type)<br>
                    <i>aetitle</i> &bull; Aetitle of the destination (required if DICOM type)<br>
                    <i>address</i> &bull; Address of the destination (required if DICOM type)<br>
                    <i>port</i> &bull; Port of the destination (required if DICOM type)<br>
                    <i>can_query_retrieve</i> &bull; Can this destination support query retrieve from HL7 messages (optional)<br>
                    <i>can_retrieve_thin</i> &bull; Can this destination support retrieving thin studies (optional)<br>
                    <i>can_search</i> &bull; Can this destination support searching (optional)<br>
                    <i>can_search_mwl</i> &bull; Can this destination support searching a modality work list (optional)<br>
                    <i>can_push_hl7</i> &bull; Can this destination support pushong Hl7 messages (optional)<br>
                    <i>sqlch_psh_if_img_unchg</i> &bull; Squelch pushes to the destination if the image count has not changed and the push is by a routing rule (optional)<br>
                    <i>sqlch_psh_if_route_hl7</i> &bull; Squelch pushes to the destination if the push was generated by HL7 triggered routing (optional)<br>
                    <i>hl7_address</i> &bull; Address of an attached HL7 destination (optional except for VIRTUAL destinations)<br>
                    <i>hl7_port</i> &bull; Port of an attached HL7 destination (optional except for VIRTUAL destinations)<br>
                    <i>c_echo_interval</i> &bull; Interval in seconds to C echo the destination (optional)<br>
                    <i>c_echo_schedule</i> &bull; C echo <a href="#schedule">schedule</a> (optional)<br>
                    <i>fire_webhooks</i> &bull; Fire webhooks for events associated with this destination (optional)<br>
                    <i>default_query_retrieve_level</i> &bull; Default query retrieve level this can be either (study|series|image) and defaults to study if not specified (optional)<br>
                    <i>push_related_studies</i> &bull; Push all the related studies (same MRN/patientid) in the namespace when a study is pushed (optional)<br>
                    <i>gateway_settings</i> &bull; Gateway settings (optional)<br>
                    <i>cd_burn_info</i> &bull; A JSON hash with the <a href="#cd_burn_info">CD burning information</a> (optional)<br>
                    <i>cd_burn_name</i> &bull; Name for the CD burner software (optional)<br>
                    <i>cd_burn_priority</i> &bull; Integer value for the burner priority (optional)<br>
                    <i>sort_order</i> &bull; Integer value for sorting (optional)<br>
                    <i>hl7_fetch_filter</i> &bull; A transform condition expression (see /transform/add for format) to match against the HL7 message. Only fire a query retrieve if the message matches the condition (optional)<br>
                    <i>manual_push_roles</i> &bull; A comma separated list of role uuids, a user is required to have one of them to manually push to this destination (optional)<br>
                    <i>ui_json</i> &bull; JSON for UI settings (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; uuid of the destination<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    destination_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account can not be found<br>
                    INVALID_NODE_TYPE &bull; The node is not a harvester<br>
                    NODE_NOT_FOUND &bull; The node can not be found<br>
                    INVALID_VALUE &bull; An invalid value was passed. The <i>error_subtype</i> holds the value<br>
                    DUP_AETITLE &bull; Duplicate aetitle. All destinations for the same node must have a unique aetitle<br>
                    NOT_PERMITTED &bull; You are not permitted to add a destination to this account<br>
                    INVALID_FLAG &bull; An invalid flag was passed. The <i>error_subtype</i> holds the name of the invalid flag<br>
                    INVALID_INTEGER &bull; An invalid integer was passed. The <i>error_subtype</i> holds the name of the invalid integer<br>
                    INVALID_SCHEDULE &bull; The schedule is invalid. The <i>error_subtype</i> holds the error detail<br>
                    INVALID_TYPE &bull; An invalid type was passed<br>
                    INVALID_GATEWAY_TYPE &bull; The type is wrong for the gateway it is getting attached to<br>
                    INVALID_CD_BURN_INFO &bull; Invalid cd_burn_info. The <i>error_subtype</i> holds more detail<br>
                    INVALID_NODE_TYPE &bull; The node type is invalid for this type of destination<br>
                    INVALID_DISTRIBUTED_DESTINATION &bull; distributed_destinations configuration is invalid<br>
                    NOT_SYSADMIN &bull; The user is not a sysadmin user<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li>A VIRTUAL destination will send HL7 messages directly to the destinations hl7 address and port. It does not currently support study operations.
                        <li>A LINKED destination allows access to destinations in other namespaces or accounts. It can only be created by a sysadmin and must be attached to a VIRTUAL node. If a /destination/search is run against the LINKED destination the search will be sent to the linked_destination and up to 20 studies will be retrieved and copied back into the LINKED destination namespace.
                        <li>A DISTRIBUTING destination allows request distribution among a configured list of destinations. Use <i>distributed_destinations</i> paremeter to define a list of destinations. The only distribution strategy is "round robin" currently.
                        <li> <a name="cd_burn_info">CD burning information</a>. A JSON hash with the following field(s)
                        <ul>
                            <li> labels_single: A JSON list of template fields for a single study burn. The fields can contain Text::Template expressions like <code>{$patient_name}</code> which will be evaluated with the study data
                            <li> labels_multi: A JSON list of template fields for a multiple study burn. The fields can contain Text::Template expressions like <code>{$patient_name}</code> which will be evaluated with the study data
                        </ul>
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#destination-idx">top</a>

        <p><a name="destination_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Edit a destination</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/destination/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; uuid of the destination<br>
                    <i>name</i> &bull; Name of the destination (optional)<br>
                    <i>path</i> &bull; Path of the folder (optional)<br>
                    <i>aetitle</i> &bull; Aetitle of the destination (optional)<br>
                    <i>address</i> &bull; Address of the destination (optional)<br>
                    <i>port</i> &bull; Port of the destination (optional)<br>
                    <i>node_id</i> &bull; uuid of the node that handles the destination (optional)<br>
                    <i>can_query_retrieve</i> &bull; Can this destination support query retrieve from HL7 messages (optional)<br>
                    <i>can_retrieve_thin</i> &bull; Can this destination support retrieving thin studies (optional)<br>
                    <i>can_search</i> &bull; Can this destination support searching (optional)<br>
                    <i>can_search_mwl</i> &bull; Can this destination support searching a modality work list (optional)<br>
                    <i>can_push_hl7</i> &bull; Can this destination support pushong Hl7 messages (optional)<br>
                    <i>sqlch_psh_if_img_unchg</i> &bull; Squelch pushes to the destination if the image count has not changed and the push is by a routing rule (optional)<br>
                    <i>sqlch_psh_if_route_hl7</i> &bull; Squelch pushes to the destination if the push was generated by HL7 triggered routing (optional)<br>
                    <i>hl7_address</i> &bull; Address of an attached HL7 destination (optional)<br>
                    <i>hl7_port</i> &bull; Port of an attached HL7 destination (optional)<br>
                    <i>c_echo_interval</i> &bull; Interval in seconds to C echo the destination (optional)<br>
                    <i>c_echo_schedule</i> &bull; C echo <a href="#schedule">schedule</a> (optional)<br>
                    <i>fire_webhooks</i> &bull; Fire webhooks for events associated with this destination (optional)<br>
                    <i>default_query_retrieve_level</i> &bull; Default query retrieve level this can be either (study|series|image) and defaults to study if not specified (optional)<br>
                    <i>push_related_studies</i> &bull; Push all the related studies (same MRN/patientid) in the namespace when a study is pushed (optional)<br>
                    <i>gateway_settings</i> &bull; Gateway settings (optional)<br>
                    <i>cd_burn_info</i> &bull; A JSON hash with the <a href="#cd_burn_info">CD burning information</a> (optional)<br>
                    <i>cd_burn_name</i> &bull; Name for the CD burner software (optional)<br>
                    <i>cd_burn_priority</i> &bull; Integer value for the burner priority (optional)<br>
                    <i>sort_order</i> &bull; Integer value for sorting (optional)<br>
                    <i>hl7_fetch_filter</i> &bull; A transform condition expression (see /transform/add for format) to match against the HL7 message. Only fire a query retrieve if the message matches the condition (optional)<br>
                    <i>manual_push_roles</i> &bull; A comma separated list of role uuids, a user is required to have one of them to manually push to this destination (optional)<br>
                    <i>linked_qr_to_referred_account</i> &bull; A flag to create resultant studies in the linked destination's account (not the account of LINKED destination where the search was initiated). Meaningful for LINKED destinations only (opional)<br>
                    <i>linked_qr_activity_in_referred_account</i> &bull; A flag to create DESTINATION_SEARCH activities in the linked destination's account. Meaningful for LINKED destinations only (opional)<br>
                    <i>distributed_destinations</i> &bull; A JSON array of destination ids. This list will be used to process requests in round robin manner. Meaningful for DISTRIBUTING destination type only (opional)<br>
                    <i>ui_json</i> &bull; JSON for UI settings (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    destination_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The destination can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to edit the destination<br>
                    NODE_NOT_FOUND &bull; The node can not be found<br>
                    INVALID_NODE_TYPE &bull; The node is not a harvester<br>
                    INVALID_VALUE &bull; An invalid value was passed. The <i>error_subtype</i> holds the value<br>
                    DUP_AETITLE &bull; Duplicate aetitle. All destinations for the same node must have a unique aetitle<br>
                    INVALID_FLAG &bull; An invalid flag was passed. The <i>error_subtype</i> holds the name of the invalid flag<br>
                    INVALID_INTEGER &bull; An invalid integer was passed. The <i>error_subtype</i> holds the name of the invalid integer<br>
                    INVALID_SCHEDULE &bull; The schedule is invalid. The <i>error_subtype</i> holds the error detail<br>
                    INVALID_CD_BURN_INFO &bull; Invalid cd_burn_info. The <i>error_subtype</i> holds more detail<br>
                    INVALID_DISTRIBUTED_DESTINATION &bull; distributed_destinations configuration is invalid<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#destination-idx">top</a>

        <p><a name="destination_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a destination</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/destination/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; uuid of the destination<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; uuid of the destination<br>
                    <i>name</i> &bull; Name of the destination<br>
                    <i>type</i> &bull; Type of the destination<br>
                    <i>path</i> &bull; Path of the folder<br>
                    <i>aetitle</i> &bull; Aetitle of the destination<br>
                    <i>address</i> &bull; Address of the destination<br>
                    <i>port</i> &bull; Port of the destination<br>
                    <i>node_id</i> &bull; id of the handle that handles the destination<br>
                    <i>can_query_retrieve</i> &bull; Can this destination support query retrieve from HL7 messages<br>
                    <i>can_retrieve_thin</i> &bull; Can this destination support retrieving thin studies<br>
                    <i>can_search</i> &bull; Can this destination support searching<br>
                    <i>can_search_mwl</i> &bull; Can this destination support searching a modality work list<br>
                    <i>can_push_hl7</i> &bull; Can this destination support pushong Hl7 messages<br>
                    <i>sqlch_psh_if_img_unchg</i> &bull; Squelch pushes to the destination if the image count has not changed and the push is by a routing rule<br>
                    <i>sqlch_psh_if_route_hl7</i> &bull; Squelch pushes to the destination if the push was generated by HL7 triggered routing<br>
                    <i>hl7_address</i> &bull; Address of an attached HL7 destination<br>
                    <i>hl7_port</i> &bull; Port of an attached HL7 destination<br>
                    <i>c_echo_interval</i> &bull; Interval in seconds to C echo the destination<br>
                    <i>c_echo_schedule</i> &bull; C echo <a href="#schedule">schedule</a><br>
                    <i>fire_webhooks</i> &bull; Fire webhooks for events associated with this destination<br>
                    <i>default_query_retrieve_level</i> &bull; Default query retrieve level<br>
                    <i>push_related_studies</i> &bull; Push all the related studies (same MRN/patientid) in the namespace when a study is pushed<br>
                    <i>gateway_settings</i> &bull; Gateway settings<br>
                    <i>cd_burn_info</i> &bull; A JSON hash with the <a href="#cd_burn_info">CD burning information</a><br>
                    <i>cd_burn_name</i> &bull; Name for the CD burner software<br>
                    <i>cd_burn_priority</i> &bull; Integer value for the burner priority<br>
                    <i>sort_order</i> &bull; Integer value for sorting<br>
                    <i>hl7_fetch_filter</i> &bull; A transform condition expression (see /transform/add for format) to match against the HL7 message. Only fire a query retrieve if the message matches the condition
                    <i>linked_destination</i> &bull; uuid of the linked destination if this is a LINKED type destination<br>
                    <i>manual_push_roles</i> &bull; A comma separated list of role uuids, a user is required to have one of them to manually push to this destination<br>
                    <i>linked_qr_to_referred_account</i> &bull; A flag to create resultant studies in the linked destination's account (not the account of LINKED destination where the search was initiated). Meaningful for LINKED destinations only<br>
                    <i>linked_qr_activity_in_referred_account</i> &bull; A flag to create DESTINATION_SEARCH activities in the linked destination's account. Meaningful for LINKED destinations only<br>
                    <i>distributed_destinations</i> &bull; A JSON array of destination ids. This list is used to process requests in round robin manner<br>
                    <i>ui_json</i> &bull; JSON for UI settings<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    destination_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The destination can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view the destination<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#destination-idx">top</a>

        <p><a name="destination_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete a destination</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/destination/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; uuid of the destination<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    destination_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The destination can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to delete the destination<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#destination-idx">top</a>

        <p><a name="destination_search"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Search a destination</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/destination/search</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>(sid || node_id && serial_no)</i> &bull; Either the sid or the node uuid and serial number<br>
                    <i>uuid</i> &bull; uuid of the destination<br>
                    <i>study_request_id</i> &bull; uuid of a study request (optional)<br>
                    <i>copy_to</i> &bull; uuid of a namespace to copy the retrieved or create_thin studies into (optional)<br>
                    <i>push_to</i> &bull; uuid of a destination to push the retrieved studies to (optional)<br>
                    <i>create_thin</i> &bull; The maximum number of thin studies to create from this search instead of creating an activity for the search results (optional)<br>
                    <i>create_study</i> &bull; The maximum number of studies to retrieve from this search instead of creating an activity for the search results (optional)<br>
                    <i>refetch_study</i> &bull; Flag to refetch the search results when studies have been fetched already (optional)<br>
                    <i>share_email</i> &bull; Email to share retrieved studies with on subsequent <a href="#destination_retrieve">/destination/retrieve</a> (optional)<br>
                    <i>bundle_id</i> &bull; An integral number Used internally to track searches initiated from a single bundle (optional)<br>
                    <i>customfield-{CUSTOMFIELD_UUID}</i> &bull; Custom field(s) will be set for the resultant studies after <a href="#destination_retrieve">/destination/retrieve</a> call (optional)<br>
                    <i>customfield-'{CUSTOMFIELD_NAME}'</i> &bull; Custom field(s) to be set for the resultant studies. (optional)<br>
                    <i>anonymize</i> &bull; A JSON hash of <a href="#namespace_anonymize">anonymization rules</a> to apply to retrieved studies (optional)<br>
                    <i>anonymize_{STUDY_FIELD}</i> &bull; The anonymization rules breakdown. This overrides the anonymize parameter if passed (optional)<br>
                    <i>tracking_number</i> &bull; A UUID tracking number that can be used to pull a report against this search (optional)<br>
                    <div class="comment">-- The rest of the fields are used for the search --</div>
                    <i>study_uid</i> &bull; Study uid to find (optional)<br>
                    <i>patient_name</i> &bull; Patient name to find (optional)<br>
                    <i>patientid</i> &bull; Patient id to find (optional)<br>
                    <i>accession_number</i> &bull; Accession number to find (optional)<br>
                    <i>referring_physician</i> &bull; Referring physician to find (optional)<br>
                    <i>modality</i> &bull; Modality (optional)<br>
                    <i>start_datetime</i> &bull; DICOM start date time stamp to bound the search (optional)<br>
                    <i>end_datetime</i> &bull; DICOM end date time stamp to bound the search (optional)<br>
                    <i>patient_sex</i> &bull; Gender to find (optional)<br>
                    <i>patient_birth_date</i> &bull; Birth date to find (optional)<br>
                    <i>query_fields</i> &bull; A JSON hash of additional query fields (optional)<br>
                    <i>result_fields</i> &bull; A JSON array of DICOM tags that the destination should return (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; UUID of the search<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    destination_search
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The destination, namespace or study request can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to search the destination<br>
                    NOT_SUPPORTED &bull; The destination does not support searching a destination<br>
                    INVALID_FIELD_NAME &bull; The field cannot be used in anonymization rules. The <i>error_subtype</i> holds the invalid field name.<br>
                    INVALID_REGEXP &bull; Invalid anonymization rule regular expression. The <i>error_subtype</i> holds the invalid regexp.<br>
                    INSUFFICIENT_CRITERIA &bull; Not enough search fields are populated<br>
                    CAN_NOT_TRACK &bull; Tracking only works with the create_study option<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> start_datetime and end_datetime support underscore token substitutions. Tokens available: __TODAY__, __YESTERDAY__, __N_DAYS_AGO__. Both take users' time zone into account.
                        <li> study_request_id parameter is used to trigger study request worflow search, all other optional parameters are ignored in this case. The search is executed using study request criteria. Results are available through <a href="#study_request_get">/study/request/get</a> call
                        <li> for the <i>customfield-'{CUSTOMFIELD_NAME}'</i> parameters a fields name should be quoted with a single quote character. All single quotes and backslashes inside the name should be escaped with a backslash character.
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#destination-idx">top</a>

        <p><a name="destination_search_report"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Generate a report against the tracking number of the search(s)</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/destination/search/report</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>tracking_number</i> &bull; The tracking number to report on<br>
                    <i>email</i> &bull; Optional email address to send the report to<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>report_id</i> &bull; The report id<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    destination_search
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The namespace was not found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#destination-idx">top</a>

        <p><a name="destination_retrieve"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Retrieve a study from a destination</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/destination/retrieve</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <div class="comment">-- The following fields are used for the activity retrieve workflow --</div>
                    <i>activity_id</i> &bull; uuid of the DESTINATION_SEARCH activity to retrieve from<br>
                    <i>customfield-{CUSTOMFIELD_UUID}</i> &bull; Custom field(s) will be set for the study retrieved (optional)<br>
                    <div class="comment">-- The following fields are used for the study request workflow --</div>
                    <i>study_request_found_id</i> &bull; UUID of a study request search results to retrieve and send as study request response<br>
                    <i>send_method</i> &bull; The method to send a study as a study request response (share|duplicate)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    destination_search
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The activity can not be found<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> The customfields provided through the call parameters will override (per customfield) the customfields passed to the prior <a href="#destination_search">/destination/search</a> call
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#destination-idx">top</a>

        <p><a name="destination_search_mwl"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Run a modality worklist  search on a destination</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/destination/search/mwl</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; uuid of the destination<br>
                    <i>study_id</i> &bull; The id of the study we are searching for orders for<br>
                    <div class="comment">-- The rest of the fields are used for the search --</div>
                    <i>patient_name</i> &bull; Patient name to find (optional)<br>
                    <i>patientid</i> &bull; Patient id to find (optional)<br>
                    <i>accession_number</i> &bull; Accession number to find (optional)<br>
                    <i>patient_sex</i> &bull; Gender to find (optional)<br>
                    <i>patient_birth_date</i> &bull; Birth date to find (optional)<br>
                    <i>order_number</i> &bull; Order number to find (optional)<br>
                    <i>order_date</i> &bull; Order date to find (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    destination_search
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The destination or study can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to search the destination<br>
                    NOT_SUPPORTED &bull; The destination does not support searching a destination<br>
                    INSUFFICIENT_CRITERIA &bull; Not enough search fields are populated<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#destination-idx">top</a>

        <a name="route"><h3>Route commands</h3></a>
        Routing rules

        <p><a name="route_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>List the routing rules for the account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/route/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; uuid of the account<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>routes</i> &bull; An array of the routing rules.  Each object holds the following same fields as the <a href="#route_get">/route/get</a> call<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    route_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view this list<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#route-idx">top</a>

        <p><a name="route_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add a routing rule</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/route/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>name</i> &bull; Name of the route<br>
                    <i>(account_id || group_id || location_id || namespace_id)</i> &bull; uuid of the account, group or location or namespace the route is linked with<br>
                    <i>conditions</i> &bull; Route conditions in JSON format<br>
                    <i>actions</i> &bull; Route actions in JSON format<br>
                    <i>options</i> &bull; Route options in JSON format (optional)<br>
                    <i>schedule</i> &bull; Route <a href="#schedule">schedule</a> in JSON format (optional)<br>
                    <i>on_share</i> &bull; Apply the rule to studies shared into the namespace<br>
                    <i>on_harvest</i> &bull; Apply the rule to studies harvested into the namespace<br>
                    <i>on_upload</i> &bull; Apply the rule to studies uploaded into the namespace - flag (optional)<br>
                    <i>on_manual_route</i> &bull; Apply this rule for a manually routed study - flag (optional)<br>
                    <i>on_thin</i> &bull; Apply this rule to thin studies when they are created - flag (optional)<br>
                    <i>no_re_run</i> &bull; Do not run this rule on a re-notification from storage - flag (optional)<br>
                    <i>only_re_run</i> &bull; Only run this rule on a re-notification from storage - flag (optional)<br>
                    <i>suspended</i> &bull; This rule is suspended and not applied - flag (optional)<br>
                    <i>delay</i> &bull; Number of minutes to delay running this rule for after it is triggered (optional)<br>
                    <i>delay_seconds</i> &bull; Number of seconds to delay running this rule for after it is triggered (optional)<br>
                    <i>delay_till_schedule</i> &bull; Delay running this rule after it is triggered until the next scheduled time - flag (optional)<br>
                    <i>other_namespaces</i> &bull; A comma separated list of the uuid of other namespaces to apply this rule to (optional)<br>
                    <i>manual_roles</i> &bull; A comma separated list of the uuid of roles that can run the rule manually (optional)<br>
                    <i>delay_from_study_field</i> &bull; Delay running this rule, start counting from this study's datetime field (optional)<br>
                    <i>delay_from_study_seconds</i> &bull; Number of seconds to delay running this rule for after a timepoint defined by <i>delay_from_study_field</i> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The route uuid<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    route_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    INVALID_JSON &bull; The field is not in valid JSON format. The <i>error_subtype</i> holds the name of the field<br>
                    INVALID_FLAG &bull; An invalid flag was passed. The <i>error_subtype</i> holds the name of the invalid flag<br>
                    ACCOUNT_NOT_FOUND &bull; The account was not found<br>
                    NOT_PERMITTED &bull; You are not permitted to add a route to that account<br>
                    INVALID_LINKAGE &bull; The linkage is invalid<br>
                    INVALID_CONDITION &bull; A condition is invalid. The <i>error_subtype</i> holds the condition<br>
                    INVALID_ACTION &bull; An action is invalid. The <i>error_subtype</i> holds the error detail<br>
                    INVALID_OPTION &bull; An option is invalid. The <i>error_subtype</i> holds the error detail<br>
                    INVALID_SCHEDULE &bull; The schedule is invalid. The <i>error_subtype</i> holds the error detail<br>
                    INVALID_OTHER_NAMESPACES &bull; The other_namespaces is invalid. The <i>error_subtype</i> holds the error detail<br>
                    INVALID_MANUAL_ROLES &bull; The manual_roles is invalid. The <i>error_subtype</i> holds the error detail<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li>JSON format
                        <ul>
                            <li>Conditions - A list of objects. Each object has the following fields
                            <ul>
                                <li> lv - left value to compare. The available left values are
                                <ul>
                                    <li> modality
                                    <li> referring_physician
                                    <li> source_ae_title
                                    <li> destination_ae_title
                                    <li> patientid
                                    <li> study_date
                                    <li> study_description
                                    <li> study_status
                                    <li> patient_age
                                    <li> patient_birth_date
                                    <li> accession_number
                                    <li> created
                                    <li> customfield-CUSTOMFIELD_UUID
                                    <li> HL7 field to match in the format hl7_SEGMENT_FIELD e.g. hl7_PID_3 or in the format hl7_SEGMENT_FIELD_COMPONENT e.g. hl7_OBR_5_2
                                    <li> validate-VALIDATE_UUID - The lv will be the score value for the study as per <a href="#study_validate">/study/validate</a>
                                </ul>
                                <li> lv_transform - Perform a transformation to the left value before comparing. The available transformations are <i>years_old</i>, <i>days_old</i>, <i>hours_old</i>, <i>minutes_old</i> - how many years, days, hours or minutes between the lv and now, respectively.
                                <li> op - operator value. The available operators are
                                <ul>
                                    <li> equals
                                    <li> in
                                    <li> contains
                                    <li> not_equals
                                    <li> not_contains
                                    <li> begins_with
                                    <li> not_begins_with
                                    <li> greater_than
                                    <li> greater_than_or_equals
                                    <li> less_than
                                    <li> less_than_or_equals
                                </ul>
                                <li> rv - right value to compare. The available options are
                                <ul>
                                    <li> A free form textual entry
                                    <li> A JSON array with free form textual entries - only when op is <i>in</i>
                                    <li> PHYSICIAN_ALIAS - This means the lv will be compared with the account_aliases for the users in the account. equals is the only valid operator.<br>
                                         If the account_alias is in the form of a regex i.e. /test.*\d/ a case insensitive regular expression comparison will be run. The regex can not have any modifier flags.
                                    <li> HL7 field to match in the format hl7_SEGMENT_FIELD e.g. hl7_PID_3 or in the format hl7_SEGMENT_FIELD_COMPONENT e.g. hl7_OBR_5_2
                                </ul>

                            </ul>
                            <li>Actions - A list of action objects. The following fields are supported
                            <ul>
                                <li> destination - Push to a destination. The field value is the uuid of the destination. This is not a valid action for on_thin routing rules.
                                <li> first_working_destination - A JSON list of destinations to try push to. If the gateway for the destination is not pinging then try the next destination. This is not a valid action for on_thin routing rules.
                                <li> destination_hl7_orm - Send an HL7 ORM message to the destination. The field value is the uuid of the destination.
                                <li> share_code - Share with a share code
                                <li> namespace - Share with a namespace. The field value is either uuid of the namespace or if the right value on the conditions is PHYSICIAN_ALIAS then the following additional options are supported.
                                <ul>
                                    <li> PERSONAL - The study is shared into the matched user's namespace.
                                    <li> GROUP - The study is shared into all the account groups the matched user is a member of
                                    <li> LOCATION - The study is shared into all the account locations the matched user is a member of
                                </ul>
                                <li> webhook - Run a webhook on the study. The field value is the uuid of the webhook
                                <li> share_email - Share to an email address the field value is either an email address or the special token USER_ENTRY. The USER_ENTRY token only works for on_manual_route types of rules and requires that a email address be provided to the /study/manual/route call.
                            </ul>
                            <li>Options - A hash of route options. The following fields are supported
                            <ul>
                                <li> bypass_approval - Flag to bypass any approval the share into a namespace action might have
                                <li> round_robin - If set to either namespace or destination the action will only be run on one of the actions in a round robin manner. Other actions will be processed as normal.
                                <li> first_working_ping - The number of seconds since the last gateway ping to use for the first_working_destination action. Default value is 15 seconds.
                                <li> hl7_report_physician_alias_regexp - A capturing regular expression (i.e. /To: (.*)$/) to capture text from the associated hl7 report. The text will be appended to the PHYSICIAN_ALIAS value for matching. The visibility of this field in the UI is controlled by the show_hl7_report_physician_alias_regexp flag in <a href="#account-settings">account settings</a>.
                            </ul>
                        </ul>
                        <li> If a rule doesn't have any conditions it is an open rule and will match all studies in the namespace
                        <li> If a route has a schedule it will only be applied during the scheduled times unless the delay_till_schedule flag is set, it that case the triggered route will be delayed until the next scheduled time.
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#route-idx">top</a>

        <p><a name="route_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Save a routing rule</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/route/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The route uuid<br>
                    <i>name</i> &bull; Name of the route (optional)<br>
                    <i>conditions</i> &bull; Route conditions in JSON format (optional)<br>
                    <i>actions</i> &bull; Route actions in JSON format (optional)<br>
                    <i>options</i> &bull; Route options in JSON format (optional)<br>
                    <i>schedule</i> &bull; Route <a href="#schedule">schedule</a> in JSON format (optional)<br>
                    <i>on_share</i> &bull; Apply the rule to studies shared into the namespace (optional)<br>
                    <i>on_harvest</i> &bull; Apply the rule to studies harvested into the namespace (optional)<br>
                    <i>on_upload</i> &bull; Apply the rule to studies uploaded into the namespace - flag (optional)<br>
                    <i>on_manual_route</i> &bull; Apply this rule for a manually routed study- flag (optional)<br>
                    <i>on_thin</i> &bull; Apply this rule to thin studies when they are created - flag (optional)<br>
                    <i>no_re_run</i> &bull; Do not run this rule on a re-notification from storage - flag (optional)<br>
                    <i>only_re_run</i> &bull; Only run this rule on a re-notification from storage - flag (optional)<br>
                    <i>suspended</i> &bull; This rule is suspended and not applied - flag (optional)<br>
                    <i>delay</i> &bull; Number of minutes to delay running this rule for after it is triggered (optional)<br>
                    <i>delay_seconds</i> &bull; Number of seconds to delay running this rule for after it is triggered (optional)<br>
                    <i>delay_till_schedule</i> &bull; Delay running this rule after it is triggered until the next scheduled time - flag (optional)<br>
                    <i>other_namespaces</i> &bull; A comma separated list of the uuid of other namespaces to apply this rule to (optional)<br>
                    <i>manual_roles</i> &bull; A comma separated list of the uuid of roles that can run the rule manually (optional)<br>
                    <i>delay_from_study_field</i> &bull; Delay running this rule, start counting from this study's datetime field (optional)<br>
                    <i>delay_from_study_seconds</i> &bull; Number of seconds to delay running this rule for after a timepoint defined by <i>delay_from_study_field</i> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    route_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The route can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to edit the route<br>
                    INVALID_FLAG &bull; An invalid flag was passed. The <i>error_subtype</i> holds the name of the invalid flag<br>
                    INVALID_JSON &bull; The field is not in valid JSON format. The <i>error_subtype</i> holds the name of the field<br>
                    INVALID_CONDITION &bull; A condition is invalid. The <i>error_subtype</i> holds the condition<br>
                    INVALID_ACTION &bull; An action is invalid. The <i>error_subtype</i> holds the error detail<br>
                    INVALID_OPTION &bull; An option is invalid. The <i>error_subtype</i> holds the error detail<br>
                    INVALID_SCHEDULE &bull; The schedule is invalid. The <i>error_subtype</i> holds the error detail<br>
                    INVALID_OTHER_NAMESPACES &bull; The other_namespaces is invalid. The <i>error_subtype</i> holds the error detail<br>
                    INVALID_MANUAL_ROLES &bull; The manual_roles is invalid. The <i>error_subtype</i> holds the error detail<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    See the <a href="#route_add">/route/add</a> command notes for the format of the conditions and actions fields
                </td>
            </tr>
        </table>
        <a href="#route-idx">top</a>

        <p><a name="route_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a routing rule</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/route/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The route uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>name</i> &bull; Name of the route<br>
                    <i>namespace_id</i> &bull; uuid of the namespaces the route is associated with<br>
                    <i>namespace_name</i> &bull; Name of the namespaces the route is associated with<br>
                    <i>conditions</i> &bull; Route conditions as a JSON structure<br>
                    <i>actions</i> &bull; Route actions as a JSON structure<br>
                    <i>options</i> &bull; Route actions as a JSON structure<br>
                    <i>schedule</i> &bull; Route <a href="#schedule">schedule</a> in JSON format<br>
                    <i>on_share</i> &bull; Apply the rule to studies shared into the namespace - flag<br>
                    <i>on_harvest</i> &bull; Apply the rule to studies harvested into the namespace - flag<br>
                    <i>on_upload</i> &bull; Apply the rule to studies uploaded into the namespace - flag<br>
                    <i>on_manual_route</i> &bull; Apply this rule for a manually routed study- flag<br>
                    <i>on_thin</i> &bull; Apply this rule to thin studies when they are created - flag<br>
                    <i>no_re_run</i> &bull; Do not run this rule on a re-notification from storage - flag<br>
                    <i>only_re_run</i> &bull; Only run this rule on a re-notification from storage - flag<br>
                    <i>suspended</i> &bull; This rule is suspended and not applied - flag<br>
                    <i>delay</i> &bull; Number of minutes to delay running this rule for after it is triggered<br>
                    <i>delay_seconds</i> &bull; Number of seconds to delay running this rule for after it is triggered<br>
                    <i>delay_till_schedule</i> &bull; Delay running this rule after it is triggered until the next scheduled time - flag<br>
                    <i>capture_email</i> &bull; Does an email need to be captured to run this rule - flag<br>
                    <i>other_namespaces</i> &bull; A comma separated list of the uuid of other namespaces to apply this rule to<br>
                    <i>manual_roles</i> &bull; A comma separated list of the uuid of roles that can run the rule manually<br>
                    <i>delay_from_study_field</i> &bull; Delay running this rule, start counting from this study's datetime field <br>
                    <i>delay_from_study_seconds</i> &bull; Number of seconds to delay running this rule for after a timepoint defined by <i>delay_from_study_field</i><br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    route_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The route can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view the route<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#route-idx">top</a>

        <p><a name="route_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete a routing rule</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/route/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The route uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    route_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The route can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to delete the route<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#route-idx">top</a>

        <p><a name="route_physician_alias_match"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Test the matching on PHYSICIAN_ALIAS</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/route/physician/alias/match</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; The account to test in<br>
                    <i>lv</i> &bull; The tag text to match against the PHYSICIAN_ALIAS rule.<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>users</i> &bull; An array of the users that matched the tag. Each object holds the fields from the <a href="#account_user_get">/account/user/get</a> call excluding the locations and groups fields<br>

                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    route_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#route-idx">top</a>

        <a name="account"><h3>Account (organization) commands</h3></a>

        <p><a name="account_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>List the accounts the user belongs to</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/account/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                    <i>permissions</i> &bull; Flag to return the users role and permissions in the accounts (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>accounts</i> &bull; An array of the accounts.  Each object holds the following same fields as the <a href="#account_get">/account/get</a> call<br>
                    --- The following field fields are append to the account objects if the permissions flag is specified ---<br>
                    * <i>permissions</i> &bull; The users permissions in the account<br>
                    * <i>role_id</i> &bull; uuid of the users account role <br>
                    * <i>role_name</i> &bull; Name of the users account role <br>
                    * <i>default_role_id</i> &bull; uuid of the default account role <br>
                    * <i>default_role_name</i> &bull; Name of the default account role <br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#account-idx">top</a>

        <p><a name="account_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Save an account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/account/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The account uuid<br>
                    <i>name</i> &bull; Name of the account (optional)<br>
                    <i>vanity</i> &bull; Vanity host name for the account. Multiple host names can be specified in a comma separate list (optional)<br>
                    <i>password_expire</i> &bull; Number of days before account passwords expire. No expiration if zero. (optional) <br>
                    <i>session_expire</i> &bull; Number of minutes before an idle session expires. (optional) <br>
                    <i>must_approve</i> &bull; Flag if shared studies must be approved for the account namespace (optional)<br>
                    <i>must_approve_upload</i> &bull; Flag if uploaded studies must be approved (optional)<br>
                    <i>must_approve_harvest</i> &bull; Flag if harvested studies must be approved (optional)<br>
                    <i>must_approve_move</i> &bull; Flag if moved studies must be approved (optional)<br>
                    <i>no_share</i> &bull; Flag if studies can not be shared with this account (optional). Studies can still be shared with locations, groups and users in the account.<br>
                    <i>can_request</i> &bull; Flag if user can request to join the account (optional)<br>
                    <i>share_code</i> &bull; The share code of the account (optional)<br>
                    <i>share_description</i> &bull; The share description of the account (optional)<br>
                    <i>share_settings</i> &bull; <a href="#share-settings">Share settings</a> JSON structure of the share display settings (optional)<br>
                    <i>share_via_gateway</i> &bull; Flag if a gateway share is allowed (optional)<br>
                    <i>hl7_template</i> &bull; The HL7 reporting template for the account (optional)<br>
                    <i>search_threshold</i> &bull; The number of studies record in the namespace to switch the UI from list to search mode (optional)<br>
                    <i>settings</i> &bull; A hash of the <a href="#account-settings">account settings</a> (optional)<br>
                    <i>setting_{SETTING_NAME}</i> &bull; Set an individual setting. This is an alternative to the settings hash for easier use in the API tester (optional)<br>
                    <i>css</i> &bull; Custom CSS for the account (optional)<br>
                    <i>vendor</i> &bull; Vendor name (optional)<br>
                    <i>role_id</i> &bull; Id for the default role for the account (optional)<br>
                    <i>customfield-{CUSTOMFIELD_UUID}</i> &bull; Custom field(s) (optional)<br>
                    <i>site_management_account_id</i> &bull; The corresponding site management account (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    account_edit, sysadmin or support is required to set <i>site_management_account_id</i>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The object was not found. The <i>error_subtype</i> holds the name of field that triggered the error<br>
                    NOT_PERMITTED &bull; You are not permitted to modify this record<br>
                    DUPLICATE_NAME &bull; The account name is already taken<br>
                    DUPLICATE_VANITY &bull; The vanity host name is already taken. The <i>error_subtype</i> holds the taken hostname<br>
                    INVALID_VANITY &bull; The vanity host name is invalid. The <i>error_subtype</i> holds the invalid hostname<br>
                    INVALID_FLAG &bull; An invalid flag was passed. The <i>error_subtype</i> holds the name of the invalid flag<br>
                    DUP_SHARE_CODE &bull; The share code is already used<br>
                    INVALID_CUSTOMFIELD &bull; Invalid custom field(s) name or value were passed. The <i>error_subtype</i> holds an array of the error details<br>
                    INVALID_INTEGER &bull; An invalid integer was passed. The <i>error_subtype</i> holds the name of the invalid integer<br>
                    INVALID_JSON &bull; The field is not in valid JSON format. The <i>error_subtype</i> holds the name of the field<br>
                    ROLE_NAMESPACE_MISMATCH (INCOMPATIBLE_ROLE) &bull; The role cannot be used for the account, data contains role_id and namespace_id<br>
                    NOT_SITE_MANAGEMENT_ACCOUNT &bull; The account passed in <i>site_management_account_id</i> does not have the <i>enable_site_management</i> setting enabled<br>
                    NOT_SYSADMIN_OR_SUPPORT &bull; The user is not a sysadmin or support user<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> You do not need to pass in all the settings, you can modify a subset of the settings if desired.
                        <li> If session_expire is set to zero the user picks up the system default which is 3 hours. Any setting above 3 hours is ignored.
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#account-idx">top</a>

        <p><a name="account_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get an account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/account/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The account uuid<br>
                    <i>permissions</i> &bull; Flag to return the users role and permissions in the accounts (optional)<br>
                    <i>brand_settings</i> &bull; A comma delimited list of the settings from /brand/get for this vanity to return (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; Account uuid<br>
                    <i>name</i> &bull; Name of the account<br>
                    <i>vanity</i> &bull; Vanity host name(s) for the account<br>
                    <i>password_expire</i> &bull; Number of days before account passwords expire. <br>
                    <i>session_expire</i> &bull; Number of minutes before an idle session expires. <br>
                    <i>namespace_id</i> &bull; Namespace of the account<br>
                    <i>must_approve</i> &bull; Flag if shared studies must be approved<br>
                    <i>must_approve_upload</i> &bull; Flag if uploaded studies must be approved<br>
                    <i>must_approve_harvest</i> &bull; Flag if harvested studies must be approved<br>
                    <i>must_approve_move</i> &bull; Flag if moved studies must be approved<br>
                    <i>no_share</i> &bull; Flag to stop sharing into this namespace<br>
                    <i>can_request</i> &bull; Flag if user can request to join the account<br>
                    <i>share_code</i> &bull; The share code of the account<br>
                    <i>share_description</i> &bull; The share description of the account<br>
                    <i>share_settings</i> &bull; <a href="#share-settings">Share settings</a> JSON structure of the share display settings<br>
                    <i>share_via_gateway</i> &bull; Flag if a gateway share is allowed<br>
                    <i>hl7_template</i> &bull; The HL7 reporting template for the account<br>
                    <i>search_threshold</i> &bull; The number of studies record in the namespace to switch the UI from list to search mode<br>
                    <i>css</i> &bull; The account CSS settings<br>
                    <i>vendor</i> &bull; Vendor name<br>
                    <i>role_id</i> &bull; Id of the default role for the account<br>
                    <i>role_name</i> &bull; Name of the default role for the account<br>
                    <i>settings</i> &bull; A hash of the <a href="#account-settings">account settings</a> and brand settings (returned as <i>brand_(SETTING NAME)</i><br>
                    <i>connected</i> &bull; Flag if they are connected to a payment processor</a><br>
                    <i>tags</i> &bull; An array of user tags associated with this object (This is only returned if the object has tags)<br>
                    <i>customfields</i> &bull; An array of the custom fields associated with this account. Each object has the following <a href="#customfields">fields</a> (This is only returned if the group has custom fields)<br>
                    <i>site_management_account_id</i> &bull; The corresponding site management account<br>
                    --- The following field fields are returned if the permissions flag is specified ---<br>
                    * <i>permissions</i> &bull; The users permissions in the account<br>
                    * <i>role_id</i> &bull; uuid of the users account role <br>
                    * <i>role_name</i> &bull; Name of the users account role <br>
                    * <i>default_role_id</i> &bull; uuid of the default account role <br>
                    * <i>default_role_name</i> &bull; Name of the default account role <br>
                    * <i>has_activity_permission</i> &bull; Flag if the user has activity permissions within the account<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account can not be found<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#account-idx">top</a>

        <p><a name="account_user_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add a user to an account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/account/user/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The account uuid<br>
                    <i>(email || user_id)</i> &bull; The email address or uuid of the user to add<br>
                    <i>role_id</i> &bull; uuid of the users role in the account (optional).<br>
                    <i>account_email</i> &bull; Users account_email. Only set this if it is different than the users login email (optional).<br>
                    <i>account_alias</i> &bull; Users alias in the account. (optional).<br>
                    <i>account_login</i> &bull; Users login name in the account. (optional).<br>
                    <i>account_password</i> &bull; Password for the account_password. (optional).<br>
                    <i>password_reset</i> &bull; Flag if the password needs to be reset. (optional).<br>
                    <i>global</i> &bull; Flag if this is a global user (optional).<br>
                    <i>global_role_id</i> &bull; uuid of a role to be used in groups and locations when the global user is added to them, this role overrides groups'/locations' default roles (optional).<br>
                    <i>epic_user</i> &bull; Epic user used to map Epic users into Ambra's ones to track activity. (optional).<br>
                    <i>session_expire</i> &bull; Number of minutes before an idle session expires. (optional)<br>
                    <i>max_sessions</i> &bull; Over-ride value for the max number of simultaneous sessions the user can have. (optional).<br>
                    <i>set_default_organization</i> &bull; A flag to set this account as a default one for the user using <i>user_default_organization</i> Setting. (optional)<br>
                    <i>sso_only</i> &bull; Flag if the user can only login via SSO. (optional).<br>
                    <i>event_share</i> &bull; Notify the user on a share into the account namespace (optional)<br>
                    <i>event_approve</i> &bull; Notify the user on a approval needed into the account namespace (optional)<br>
                    <i>event_upload</i> &bull; Notify the user on an upload into the account namespace (optional)<br>
                    <i>event_upload_fail</i> &bull; Notify the user on a failed upload into the account namespace (optional)<br>
                    <i>event_harvest</i> &bull; Notify the user on a harvest into the account namespace (optional)<br>
                    <i>event_join</i> &bull; Notify the user on a join request for the account (optional)<br>
                    <i>event_purge</i> &bull; Notify the user the results of a purge job for the account (optional)<br>
                    <i>event_new_report</i> &bull; Notify the user when a report is attached in the account namespace (optional)<br>
                    <i>event_report_remove</i> &bull; Notify the user when a report is removed in the account namespace (optional)<br>
                    <i>event_study_comment</i> &bull; Notify the user when a comment is attached to a study in the namespace (optional)<br>
                    <i>event_status_change</i> &bull; Notify the user when the status of a study is changed (optional)<br>
                    <i>event_message</i> &bull; Notify the user when a message is sent to the account namespace (optional)<br>
                    <i>event_node</i> &bull; Notify the user when an account node sends an event (optional)<br>
                    <i>event_link</i> &bull; Notify the user when an anonymous link is hit in the namespace (optional)<br>
                    <i>event_link_mine</i> &bull; Notify the user when an anonymous link created by the user is hit in the namespace (optional)<br>
                    <i>event_thin_study_success</i> &bull; Notify the user when a thin study retrieval they initiated succeeds (optional)<br>
                    <i>event_thin_study_fail</i> &bull; Notify the user when a thin study retrieval they initiated fails (optional) <br>
                    <i>event_case_assignment</i> &bull; Notify the user when they are assigned a case as a medical or admin user (optional)<br>
                    <i>event_incoming_study_request</i> &bull; Notify the user when they get an incoming study request (optional)<br>
                    <i>event_query_add</i> &bull; Notify the user when a new query is issued (optional)<br>
                    <i>event_query_edit</i> &bull; Notify the user when a query is edited (optional)<br>
                    <i>event_query_new_recipient</i> &bull; Notify the user when they are added to a query as a new recipient (optional)<br>
                    <i>event_query_reply</i> &bull; Notify the user when they leave a new reply in a query (optional)<br>
                    <i>event_site_qualified</i> &bull; Notify the user when a trial site is qualified for the clinical trial account (optional)<br>
                    <i>settings</i> &bull; A hash of the <a href="#account-settings">account settings</a> that the user can override (optional)<br>
                    <i>setting_{SETTING_NAME}</i> &bull; Set an individual setting. This is an alternative to the settings hash for easier use in the API tester (optional)<br>
                    <i>customfield-{CUSTOMFIELD_UUID}</i> &bull; Custom field(s) (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; uuid of the user<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    account_user_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to add this user to the account<br>
                    USER_NOT_FOUND &bull; The user can not be found<br>
                    ALREADY_EXISTS &bull; The user is already a member of the account<br>
                    INVALID_FLAG &bull; An invalid flag was passed. The <i>error_subtype</i> holds the name of the invalid flag<br>
                    DUPLICATE_NAME &bull; The account_login is already in use<br>
                    BAD_PASSWORD &bull; Password needs to be at least 8 characters long, contain at least two numbers, contain at least two characters and can't be one of your last three passwords<br>
                    INVALID_CUSTOMFIELD &bull; Invalid custom field(s) name or value were passed. The <i>error_subtype</i> holds an array of the error details<br>
                    ROLE_NAMESPACE_MISMATCH (INCOMPATIBLE_ROLE) &bull; The role cannot be used for the account, data contains role_id and namespace_id<br>
                    ROLE_NAMESPACE_MISMATCH (GLOBAL_USER_WITH_RESTRICTED_ROLE) &bull; They are adding a global user with a role restricted to group/location and there is a group/location in the account, data contains role_id, namespace_id and user_id<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> A global user is automatically added to every current and future group and location in the account with the default role specified at the group and location levels (if there is no default role set for group/location the default account role is used) and event flags they have at the account level.
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#account-idx">top</a>

        <p><a name="account_user_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Edit the users account information</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/account/user/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The account uuid<br>
                    <i>user_id</i> &bull; The users uuid<br>
                    <i>role_id</i> &bull; uuid of the users role in the account (optional).<br>
                    <i>account_email</i> &bull; Users account_email. Only set this if it is different than the users login email (optional).<br>
                    <i>account_alias</i> &bull; Users alias in the account. (optional).<br>
                    <i>account_login</i> &bull; Users login name in the account. (optional).<br>
                    <i>account_password</i> &bull; Password for the account_password. (optional).<br>
                    <i>password_reset</i> &bull; Flag if the password needs to be reset. (optional).<br>
                    <i>global</i> &bull; Flag if this is a global user. (optional).<br>
                    <i>global_role_id</i> &bull; uuid of a role to be used in groups and locations when the global user is added to them, this role overrides groups'/locations' default roles (optional).<br>
                    <i>epic_user</i> &bull; Epic user used to map Epic users into Ambra's ones to track activity (optional).<br>
                    <i>session_expire</i> &bull; Number of minutes before an idle session expires. (optional)<br>
                    <i>max_sessions</i> &bull; Over-ride value for the max number of simultaneous sessions the user can have. (optional).<br>
                    <i>sso_only</i> &bull; Flag if the user can only login via SSO. (optional).<br>
                    <i>event_share</i> &bull; Notify the user on a share into the account namespace (optional)<br>
                    <i>event_approve</i> &bull; Notify the user on a approval needed into the account namespace (optional)<br>
                    <i>event_upload</i> &bull; Notify the user on an upload into the account namespace (optional)<br>
                    <i>event_upload_fail</i> &bull; Notify the user on a failed upload into the account namespace (optional)<br>
                    <i>event_harvest</i> &bull; Notify the user on a harvest into the account namespace (optional)<br>
                    <i>event_join</i> &bull; Notify the user on a join request for the account (optional)<br>
                    <i>event_purge</i> &bull; Notify the user the results of a purge job for the account (optional)<br>
                    <i>event_new_report</i> &bull; Notify the user when a report is attached in the account namespace (optional)<br>
                    <i>event_report_remove</i> &bull; Notify the user when a report is removed in the account namespace (optional)<br>
                    <i>event_study_comment</i> &bull; Notify the user when a comment is attached to a study in the namespace (optional)<br>
                    <i>event_status_change</i> &bull; Notify the user when the status of a study is changed (optional)<br>
                    <i>event_message</i> &bull; Notify the user when a message is sent to the account namespace (optional)<br>
                    <i>event_node</i> &bull; Notify the user when an account node sends an event (optional)<br>
                    <i>event_link</i> &bull; Notify the user when an anonymous link is hit in the namespace (optional)<br>
                    <i>event_link_mine</i> &bull; Notify the user when an anonymous link created by the user is hit in the namespace (optional)<br>
                    <i>event_thin_study_success</i> &bull; Notify the user when a thin study retrieval they initiated succeeds (optional)<br>
                    <i>event_thin_study_fail</i> &bull; Notify the user when a thin study retrieval they initiated fails (optional) <br>
                    <i>event_case_assignment</i> &bull; Notify the user when they are assigned a case as a medical or admin user (optional)<br>
                    <i>event_incoming_study_request</i> &bull; Notify the user when they get an incoming study request (optional)<br>
                    <i>event_query_add</i> &bull; Notify the user when a new query is issued (optional)<br>
                    <i>event_query_edit</i> &bull; Notify the user when a query is edited (optional)<br>
                    <i>event_query_new_recipient</i> &bull; Notify the user when they are added to a query as a new recipient (optional)<br>
                    <i>event_query_reply</i> &bull; Notify the user when they leave a new reply in a query (optional)<br>
                    <i>event_site_qualified</i> &bull; Notify the user when a trial site is qualified for the clinical trial account (optional)<br>
                    <i>customfield-{CUSTOMFIELD_UUID}</i> &bull; Custom field(s) (optional)<br>
                    <i>settings</i> &bull; A hash of the <a href="#account-settings">account settings</a> that the user can override (optional)<br>
                    <i>setting_{SETTING_NAME}</i> &bull; Set an individual setting. This is an alternative to the settings hash for easier use in the API tester (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    account_user_edit or the user can set the event flags and custom fields for themselves
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to edit this user<br>
                    USER_NOT_FOUND &bull; The user can not be found or is not a member of this account<br>
                    ROLE_NOT_FOUND &bull; The role was not found or is not an account role<br>
                    INVALID_FLAG &bull; An invalid flag was passed. The <i>error_subtype</i> holds the name of the invalid flag<br>
                    DUPLICATE_NAME &bull; The account_login is already in use<br>
                    BAD_PASSWORD &bull; Password needs to be at least 8 characters long, contain at least two numbers, contain at least two characters and can't be one of your last three passwords<br>
                    INVALID_CUSTOMFIELD &bull; Invalid custom field(s) name or value were passed. The <i>error_subtype</i> holds an array of the error details<br>
                    CAN_NOT_PROMOTE &bull; A user can not switch themselves to an admin role if they are currently not in an admin role<br>
                    NO_USER_OVERRIDE &bull; The setting does not allow a user override<br>
                    ROLE_NAMESPACE_MISMATCH (INCOMPATIBLE_ROLE) &bull; The role cannot be used for the account, data contains role_id and namespace_id<br>
                    ROLE_NAMESPACE_MISMATCH (GLOBAL_USER_WITH_RESTRICTED_ROLE) &bull; They are making the user global with a role restricted to group/location and there is a group/location in the account, data contains role_id, namespace_id and user_id.<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> The same account_email can be used for multiple users in an account. It does not have to be unique.
                        <li> Use the value <code>__DELETE__</code> to delete a setting, it will then revert to the account value of the setting
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#account-idx">top</a>

        <p><a name="account_user_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get the users account information</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/account/user/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The account uuid<br>
                    <i>user_id</i> &bull; The users uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>user_id</i> &bull; The user id<br>
                    <i>user_name</i> &bull; The user name<br>
                    <i>user_email</i> &bull; The users email address<br>
                    <i>role_id</i> &bull; uuid of the users account role <br>
                    <i>role_name</i> &bull; Name of the users account role <br>
                    <i>disabled</i> &bull; Is the user disabled<br>
                    <i>account_email</i> &bull; Email address for account usage<br>
                    <i>account_alias</i> &bull; Users account alias<br>
                    <i>account_login</i> &bull; Users login name in the account<br>
                    <i>password_reset</i> &bull; Flag if the password needs to be reset<br>
                    <i>user_account_id</i> &bull; Id linking user and account for external integrations<br>
                    <i>global</i> &bull; Flag if this is a global user.<br>
                    <i>global_role_id</i> &bull; uuid of a role to be used in groups and locations when the global user is added to them, this role overrides groups'/locations' default roles.<br>
                    <i>epic_user</i> &bull; Epic user used to map Epic users into Ambra's ones to track activity.<br>
                    <i>session_expire</i> &bull; Number of minutes before an idle session expires<br>
                    <i>last_login</i> &bull; The users last login date and time<br>
                    <i>max_sessions</i> &bull; Over-ride value for the max number of simultaneous sessions the user can have<br>
                    <i>sso_only</i> &bull; Flag if the user can only login via SSO<br>
                    <i>event_share</i> &bull; Notify the user on a share into the account namespace <br>
                    <i>event_approve</i> &bull; Notify the user on a approval needed into the account namespace <br>
                    <i>event_upload</i> &bull; Notify the user on an upload into the account namespace <br>
                    <i>event_upload_fail</i> &bull; Notify the user on a failed upload into the account namespace<br>
                    <i>event_harvest</i> &bull; Notify the user on a harvest into the account namespace <br>
                    <i>event_join</i> &bull; Notify the user on a join request for the account<br>
                    <i>event_purge</i> &bull; Notify the user the results of a purge job for the account<br>
                    <i>event_new_report</i> &bull; Notify the user when a report is attached in the account namespace<br>
                    <i>event_report_remove</i> &bull; Notify the user when a report is removed in the account namespace<br>
                    <i>event_study_comment</i> &bull; Notify the user when a comment is attached to a study in the namespace<br>
                    <i>event_status_change</i> &bull; Notify the user when the status of a study is changed<br>
                    <i>event_message</i> &bull; Notify the user when a message is sent to the account namespace<br>
                    <i>event_node</i> &bull; Notify the user when an account node sends an event<br>
                    <i>event_link</i> &bull; Notify the user when an anonymous link is hit in the namespace<br>
                    <i>event_link_mine</i> &bull; Notify the user when an anonymous link created by the user is hit in the namespace<br>
                    <i>event_thin_study_success</i> &bull; Notify the user when a thin study retrieval they initiated succeeds (optional)<br>
                    <i>event_thin_study_fail</i> &bull; Notify the user when a thin study retrieval they initiated fails (optional) <br>
                    <i>event_case_assignment</i> &bull; Notify the user when they are assigned a case as a medical or admin user (optional)<br>
                    <i>event_incoming_study_request</i> &bull; Notify the user when they get an incoming study request<br>
                    <i>event_query_add</i> &bull; Notify the user when a new query is issued (optional)<br>
                    <i>event_query_edit</i> &bull; Notify the user when a query is edited (optional)<br>
                    <i>event_query_new_recipient</i> &bull; Notify the user when they are added to a query as a new recipient (optional)<br>
                    <i>event_query_reply</i> &bull; Notify the user when they leave a new reply in a query (optional)<br>
                    <i>event_site_qualified</i> &bull; Notify the user when a trial site is qualified for the clinical trial account (optional)<br>
                    <i>groups</i> &bull; An array of the accounts groups the user is a member of<br>
                    <i>locations</i> &bull; An array of the accounts locations the user is a member of. Both of these contain the following fields.<br>
                    * <i>uuid</i> &bull; uuid of the group/location<br>
                    * <i>name</i> &bull; name of the group/location<br>
                    * <i>role_id</i> &bull; uuid of the role in the group/location<br>
                    * <i>role_name</i> &bull; name of the role in the group/location<br>
                    <i>tags</i> &bull; An array of user tags associated with this object (This is only returned if the object has tags)<br>
                    <i>customfields</i> &bull; An array of the custom fields associated with this user. Each object has the following <a href="#customfields">fields</a> (This is only returned if the user has custom fields)<br>
                    <i>settings</i> &bull; A hash of the  <a href="#account-settings">account settings</a> that the user has overridden<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    account_user_view or the user can get the information for themselves
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account can not be found<br>
                    USER_NOT_FOUND &bull; The user can not be found or is not a member of this account<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#account-idx">top</a>

        <p><a name="account_user_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete a user from the account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/account/user/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The account uuid<br>
                    <i>user_id</i> &bull; The user uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    account_user_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to delete this user<br>
                    USER_NOT_FOUND &bull; The user can not be found or is not a member of this account<br>
                    IN_USE &bull; The user is a sid user for an account webhook<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    The user will also be deleted from all groups and locations in the account
                </td>
            </tr>
        </table>
        <a href="#account-idx">top</a>

        <p><a name="account_user_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>List the users in an account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/account/user/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The account uuid<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    account_user_view or case_edit
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>users</i> &bull; An array of the users.  Each object holds the fields from the <a href="#account_user_get">/account/user/get</a> call excluding the locations and groups fields<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to list the users in this account<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#account-idx">top</a>

        <p><a name="account_user_report_login"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Build a user login report</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/account/user/report/login</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The account uuid<br>
                    <i>user_id</i> &bull; Limit to this user_id (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    account_user_view
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>report_id</i> &bull; The report id<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to list the users in this account<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    This call will kick off the building of the report. Poll for the report status with /report/status command and download it with the /report/zip command.
                </td>
            </tr>
        </table>
        <a href="#account-idx">top</a>

        <p><a name="account_can_share"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Set a rule on who can share with whom</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/account/can/share</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; The account id<br>
                    <i>by_type</i> &bull; The type of object that can share. (user|account|group|location)<br>
                    <i>by_id</i> &bull; The uuid of the object that can share<br>
                    <i>with_type</i> &bull; The type of object that they can share with (user|account|group|location)<br>
                    <i>with_id</i> &bull; The uuid of the object that they can share with<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    account_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to perform this action<br>
                    BY_NOT_FOUND &bull; The "by" object can not be found<br>
                    WITH_NOT_FOUND &bull; The "with" object can not be found<br>
                    INVALID_TYPE &bull; The type of object is invalidate. The <i>error_subtype</i> holds the type that is invalid<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#account-idx">top</a>

        <p><a name="account_can_share_stop"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Stop a account share rule</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/account/can/share/stop</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; The account id<br>
                    <i>by_type</i> &bull; The type of object that can share. (user|account|group|location)<br>
                    <i>by_id</i> &bull; The uuid of the object that can share<br>
                    <i>with_type</i> &bull; The type of object that they can share with (user|account|group|location)<br>
                    <i>with_id</i> &bull; The uuid of the object that they can share with<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    account_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to perform this action<br>
                    BY_NOT_FOUND &bull; The "by" object can not be found<br>
                    WITH_NOT_FOUND &bull; The "with" object can not be found<br>
                    INVALID_TYPE &bull; The type of object is invalidate. The <i>error_subtype</i> holds the type that is invalid<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#account-idx">top</a>

        <p><a name="account_can_share_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a list of the account share rules</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/account/can/share/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; The account id<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>rules</i> &bull; An array of the account share rules. Each rule holds the following fields.<br>
                    * <i>by_type</i> &bull; The type of object that can share. (user|account|group|location)<br>
                    * <i>by_id</i> &bull; The uuid of the object that can share<br>
                    * <i>by_name</i> &bull; The name of the object that can share<br>
                    * <i>with_type</i> &bull; The type of object that they can share with (user|account|group|location)<br>
                    * <i>with_id</i> &bull; The uuid of the object that they can share with<br>
                    * <i>with_name</i> &bull; The name of the object that they can share with<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    account_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to perform this action<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#account-idx">top</a>

        <p><a name="account_css"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get any customized css for the account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/account/css</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>(account_id || vanity)</i> &bull; The account_id or vanity name to get the css for (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    A CSS file
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#account-idx">top</a>

        <p><a name="account_settings"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get the settings for an account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/account/settings</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if not passed then only un-authenticated settings are returned)<br>
                    <i>(account_id || vanity)</i> &bull; The account_id or vanity name to get the settings for<br>
                    <i>settings</i> &bull; A comma delimited list of the settings to return (optional)<br>
                    <i>brand_settings</i> &bull; A comma delimited list of the settings from /brand/get for this vanity to return (optional)<br>
                    <i>namespace_id</i> &bull; Apply overrides for the namespace (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>settings</i> &bull; A hash of the <a href="#account-settings">account settings</a>, brand settings (returned as <i>brand_(SETTING NAME)</i>, and vanity registration customfields if defined<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The account or namespace can not be found<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#account-idx">top</a>

        <p><a name="account_settings_validate"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Validate settings for an account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/account/settings/validate</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The account uuid<br>
                    <i>settings</i> &bull; A hash of the <a href="#account-settings">account settings</a> with values to validate (optional)<br>
                    <i>setting_{SETTING_NAME}</i> &bull; Validate an individual setting. This is an alternative to the settings hash (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The account or namespace can not be found<br>
                    INVALID_SETTING &bull; An invalid setting was passed. The <i>error_subtype</i> holds the name of the invalid setting<br>
                    INVALID_SETTING_VALUE &bull; An invalid setting value was passed. The <i>error_subtype</i> holds the name of the setting with the invalid value<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> You do not need to pass in all the settings, you can validate a subset of the settings if desired.
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#account-idx">top</a>


        <p><a name="account_connect"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Connect the account to the payment processor</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/account/connect</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id <br>
                    <i>uuid</i> &bull; The account_id<br>
                    <i>code</i> &bull; The OAuth code<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    account_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                    TOKEN_FAILED &bull; The OAuth code did not return a valid token from the processor<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#account-idx">top</a>

        <p><a name="account_md5_counter"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Return a counter value for the passed MD5 value</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/account/md5/counter</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>(sid || node_id && serial_no)</i> &bull; Either a sid or the node id and serial number<br>
                    <i>uuid</i> &bull; UUID of the account (only needed for sid authentication)<br>
                    <i>md5</i> &bull; The MD5 value<br>
                </td>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>counter</i> &bull; The numeric counter value<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The account can not be found or the user is not a part of it<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    If the MD5 does not exist for the account a new counter value will be created. If it does exist the old counter value will be returned.
                </td>
            </tr>
        </table>
        <a href="#account-idx">top</a>

        <p><a name="account_list_requestable"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>List the accounts that are allowed to be requested for a study</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/account/list/requestable</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>namespace_id</i> &bull; Id of the namespace to receive requested studies into<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>accounts</i> &bull; An array of the accounts.  Each object holds the following fields: uuid, name<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    study_request_edit<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The namespace can not be found<br>
                    NOT_PERMITTED &bull; You are not allowed to list requestable accounts<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li><i>study_request_accounts</i> account setting should be set for this endpoint to function
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#account-idx">top</a>

        <p><a name="account_radreport_email_authorize"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Authorize the system to send out radreports</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/account/radreport/email/authorize</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The account id<br>
                    <i>captcha_response</i> &bull; A solved captcha<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    The requesting user should be a sysadmin of the account<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The account can not be found<br>
                    NOT_PERMITTED &bull; You are not the account's sysadmin<br>
                    NOT_ENABLED &bull; The feature of sending radreports out is not enabled for the account<br>
                    CAPTCHA_FAILED &bull; The captcha is not solved<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#account-idx">top</a>


        <a name="location"><h3>Location commands</h3></a>

        <p><a name="location_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>List the locations for an account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/location/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; uuid of the account<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>locations</i> &bull; An array of the locations.  Each object holds the following same fields as the <a href="#location_get">/location/get</a> call<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    location_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view this list<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#location-idx">top</a>

        <p><a name="location_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add a location</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/location/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>name</i> &bull; Name of the location<br>
                    <i>account_id</i> &bull; uuid of the account<br>
                    <i>must_approve</i> &bull; Flag if shared studies must be approved for the location (optional)<br>
                    <i>must_approve_upload</i> &bull; Flag if uploaded studies must be approved (optional)<br>
                    <i>must_approve_harvest</i> &bull; Flag if harvested studies must be approved (optional)<br>
                    <i>must_approve_move</i> &bull; Flag if moved studies must be approved (optional)<br>
                    <i>no_share</i> &bull; Flag if studies can not be shared with this location (optional). Studies can still be shared with users in the location.<br>
                    <i>share_code</i> &bull; The share code of the location (optional)<br>
                    <i>share_description</i> &bull; The share description of the location (optional)<br>
                    <i>share_settings</i> &bull; <a href="#share-settings">Share settings</a> JSON structure of the share display settings (optional)<br>
                    <i>share_via_gateway</i> &bull; Flag if a gateway share is allowed (optional)<br>
                    <i>hl7_template</i> &bull; The HL7 reporting template for the location (optional)<br>
                    <i>search_threshold</i> &bull; The number of studies record in the namespace to switch the UI from list to search mode (optional)<br>
                    <i>role_id</i> &bull; Id for the default role for the location (optional)<br>
                    <i>customfield-{CUSTOMFIELD_UUID}</i> &bull; Custom field(s) (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The uuid<br>
                    <i>namespace_id</i> &bull; The association namespace uuid<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    location_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    ACCOUNT_NOT_FOUND &bull; The account was not found<br>
                    NOT_FOUND &bull; The object was not found. The <i>error_subtype</i> holds the name of field that triggered the error<br>
                    NOT_PERMITTED &bull; You are not permitted to add a location to the account<br>
                    INVALID_FLAG &bull; An invalid flag was passed. The <i>error_subtype</i> holds the name of the invalid flag<br>
                    DUP_SHARE_CODE &bull; The share code is already used<br>
                    DUP_NAMESPACE_NAME &bull; namespace_names_globally_unique is enabled and there is another namespace with the same name<br>
                    INVALID_CUSTOMFIELD &bull; Invalid custom field(s) name or value were passed. The <i>error_subtype</i> holds an array of the error details<br>
                    INVALID_JSON &bull; The field is not in valid JSON format. The <i>error_subtype</i> holds the name of the field<br>
                    ROLE_NAMESPACE_MISMATCH (INCOMPATIBLE_ROLE) &bull; The role cannot be used for a location, data contains role_id and namespace_id<br>
                    ROLE_NAMESPACE_MISMATCH (GLOBAL_USER_WITH_RESTRICTED_ROLE) &bull; You are adding the location to the account with a global user with restricted role, data contains role_id and user_id<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#location-idx">top</a>

        <p><a name="location_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Save a location</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/location/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The location uuid<br>
                    <i>name</i> &bull; Name of the location (optional)<br>
                    <i>must_approve</i> &bull; Flag if shared studies must be approved for the location (optional)<br>
                    <i>must_approve_upload</i> &bull; Flag if uploaded studies must be approved (optional)<br>
                    <i>must_approve_harvest</i> &bull; Flag if harvested studies must be approved (optional)<br>
                    <i>must_approve_move</i> &bull; Flag if moved studies must be approved (optional)<br>
                    <i>no_share</i> &bull; Flag if studies can not be shared with this location (optional). Studies can still be shared with users in the location.<br>
                    <i>share_code</i> &bull; The share code of the location (optional)<br>
                    <i>share_description</i> &bull; The share description of the location (optional)<br>
                    <i>share_settings</i> &bull; <a href="#share-settings">Share settings</a> JSON structure of the share display settings (optional)<br>
                    <i>share_via_gateway</i> &bull; Flag if a gateway share is allowed (optional)<br>
                    <i>hl7_template</i> &bull; The HL7 reporting template for the location (optional)<br>
                    <i>search_threshold</i> &bull; The number of studies record in the namespace to switch the UI from list to search mode (optional)<br>
                    <i>role_id</i> &bull; Id for the default role for the location (optional)<br>
                    <i>customfield-{CUSTOMFIELD_UUID}</i> &bull; Custom field(s) (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    location_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The object was not found. The <i>error_subtype</i> holds the name of field that triggered the error<br>
                    NOT_PERMITTED &bull; You are not permitted to edit the location<br>
                    INVALID_FLAG &bull; An invalid flag was passed. The <i>error_subtype</i> holds the name of the invalid flag<br>
                    DUP_SHARE_CODE &bull; The share code is already used<br>
                    DUP_NAMESPACE_NAME &bull; namespace_names_globally_unique is enabled and there is another namespace with the same name<br>
                    INVALID_CUSTOMFIELD &bull; Invalid custom field(s) name or value were passed. The <i>error_subtype</i> holds an array of the error details<br>
                    INVALID_JSON &bull; The field is not in valid JSON format. The <i>error_subtype</i> holds the name of the field<br>
                    ROLE_NAMESPACE_MISMATCH (INCOMPATIBLE_ROLE) &bull; The role cannot be used for locations, data contains role_id and namespace_id<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#location-idx">top</a>

        <p><a name="location_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a location</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/location/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The location uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The location uuid<br>
                    <i>name</i> &bull; Name of the location<br>
                    <i>namespace_id</i> &bull; namespace of the location<br>
                    <i>must_approve</i> &bull; Flag if shared studies must be approved<br>
                    <i>must_approve_upload</i> &bull; Flag if uploaded studies must be approved<br>
                    <i>must_approve_harvest</i> &bull; Flag if harvested studies must be approved<br>
                    <i>must_approve_move</i> &bull; Flag if moved studies must be approved<br>
                    <i>no_share</i> &bull; Flag to stop sharing into this namespace<br>
                    <i>share_code</i> &bull; The share code of the location<br>
                    <i>share_description</i> &bull; The share description of the location<br>
                    <i>share_settings</i> &bull; <a href="#share-settings">Share settings</a> JSON structure of the share display settings<br>
                    <i>share_via_gateway</i> &bull; Flag if a gateway share is allowed (optional)<br>
                    <i>hl7_template</i> &bull; The HL7 reporting template for the location<br>
                    <i>search_threshold</i> &bull; The number of studies record in the namespace to switch the UI from list to search mode (optional)<br>
                    <i>tags</i> &bull; An array of user tags associated with this object (This is only returned if the object has tags)<br>
                    <i>role_id</i> &bull; Id of the default role for the location<br>
                    <i>role_name</i> &bull; Name of the default role for the location<br>
                    <i>customfields</i> &bull; An array of the custom fields associated with this location. Each object has the following <a href="#customfields">fields</a> (This is only returned if the group has custom fields)<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    location_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The location can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view this location<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#location-idx">top</a>

        <p><a name="location_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete a location</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/location/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The location uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    location_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The location can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to delete the location<br>
                    NOT_EMPTY &bull; The location still has studies in it<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#location-idx">top</a>

        <p><a name="location_user_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add or update a user to a location</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/location/user/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The location id<br>
                    <i>user_id</i> &bull; Id of the user<br>
                    <i>role_id</i> &bull; Id of the users role within the location (optional). If not passed the default location role will be assigned<br>
                    <i>event_share</i> &bull; Notify the user on a share into the location namespace (optional)<br>
                    <i>event_approve</i> &bull; Notify the user on a approval needed into the location namespace (optional)<br>
                    <i>event_upload</i> &bull; Notify the user on an upload into the location namespace (optional)<br>
                    <i>event_upload_fail</i> &bull; Notify the user on a failed upload into the location namespace<br>
                    <i>event_harvest</i> &bull; Notify the user on a harvest into the location namespace (optional)<br>
                    <i>event_new_report</i> &bull; Notify the user when a report is attached in the location namespace (optional)<br>
                    <i>event_report_remove</i> &bull; Notify the user when a report is removed in the location namespace (optional)<br>
                    <i>event_study_comment</i> &bull; Notify the user when a comment is attached to a study in the namespace (optional)<br>
                    <i>event_status_change</i> &bull; Notify the user when the status of a study is changed (optional)<br>
                    <i>event_message</i> &bull; Notify the user when a message is sent to the location namespace (optional)<br>
                    <i>event_node</i> &bull; Notify the user when a location  node sends an event (optional)<br>
                    <i>event_link</i> &bull; Notify the user when an anonymous link is hit in the namespace (optional)<br>
                    <i>event_link_mine</i> &bull; Notify the user when an anonymous link created by the user is hit in the namespace (optional)<br>
                    <i>event_thin_study_success</i> &bull; Notify the user when a thin study retrieval they initiated succeeds (optional)<br>
                    <i>event_thin_study_fail</i> &bull; Notify the user when a thin study retrieval they initiated fails (optional) <br>
                    <i>event_case_assignment</i> &bull; Notify the user when they are assigned a case as a medical or admin user (optional)<br>
                    <i>event_incoming_study_request</i> &bull; Notify the user when they get an incoming study request (optional)<br>
                    <i>event_query_add</i> &bull; Notify the user when a new query is issued (optional)<br>
                    <i>event_query_edit</i> &bull; Notify the user when a query is edited (optional)<br>
                    <i>event_query_new_recipient</i> &bull; Notify the user when they are added to a query as a new recipient (optional)<br>
                    <i>event_query_reply</i> &bull; Notify the user when they leave a new reply in a query (optional)<br>
                    <i>event_site_qualified</i> &bull; Notify the user when a trial site is qualified for the clinical trial account (optional)<br>
                    <i>no_physician_alias_share</i> &bull; Flag to exclude this location from a physician alias share (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    location_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The location can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to edit the location<br>
                    ROLE_NAMESPACE_MISMATCH (INCOMPATIBLE_ROLE) &bull; The role cannot be used for locations, data contains role_id and namespace_id<br>
                    USER_NOT_FOUND &bull; The user was not found or is not in the account<br>
                    ROLE_NOT_FOUND &bull; The role was not found or is not in the account<br>
                    INVALID_FLAG &bull; An invalid flag was passed. The <i>error_subtype</i> holds the name of the invalid flag<br>
                    CAN_NOT_PROMOTE &bull; A user can not switch themselves to an admin role if they are currently not in an admin role<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#location-idx">top</a>

        <p><a name="location_user_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Remove a user from a location</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/location/user/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The location id<br>
                    <i>user_id</i> &bull; The user id<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    location_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The location can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to edit the location<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#location-idx">top</a>

        <p><a name="location_user_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>List the users in a location</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/location/user/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The location id<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>users</i> &bull; An array of the users.  Each object holds the following fields<br>
                    * <i>user_id</i> &bull; The user id<br>
                    * <i>user_name</i> &bull; The user name<br>
                    * <i>role_id</i> &bull; The users role id<br>
                    * <i>role_name</i> &bull; The users role name<br>
                    * <i>event_share</i> &bull; Notify the user on a share into the location namespace <br>
                    * <i>event_approve</i> &bull; Notify the user on a approval needed into the location namespace <br>
                    * <i>event_upload</i> &bull; Notify the user on an upload into the location namespace <br>
                    * <i>event_upload_fail</i> &bull; Notify the user on a failed upload into the location namespace<br>
                    * <i>event_harvest</i> &bull; Notify the user on a harvest into the location namespace <br>
                    * <i>event_new_report</i> &bull; Notify the user when a report is attached in the location namespace<br>
                    * <i>event_report_remove</i> &bull; Notify the user when a report is removed in the location namespace<br>
                    * <i>event_study_comment</i> &bull; Notify the user when a comment is attached to a study in the namespace<br>
                    * <i>event_status_change</i> &bull; Notify the user when the status of a study is changed<br>
                    * <i>event_message</i> &bull; Notify the user when a message is sent to the location namespace<br>
                    * <i>event_node</i> &bull; Notify the user when a location  node sends an event<br>
                    * <i>event_link</i> &bull; Notify the user when an anonymous link is hit in the namespace<br>
                    * <i>event_link_mine</i> &bull; Notify the user when an anonymous link created by the user is hit in the namespace<br>
                    * <i>event_thin_study_success</i> &bull; Notify the user when a thin study retrieval they initiated succeeds<br>
                    * <i>event_thin_study_fail</i> &bull; Notify the user when a thin study retrieval they initiated fails<br>
                    * <i>event_case_assignment</i> &bull; Notify the user when they are assigned a case as a medical or admin user<br>
                    * <i>event_incoming_study_request</i> &bull; Notify the user when they get an incoming study request<br>
                    * <i>event_query_add</i> &bull; Notify the user when a new query is issued<br>
                    * <i>event_query_edit</i> &bull; Notify the user when a query is edited<br>
                    * <i>event_query_new_recipient</i> &bull; Notify the user when they are added to a query as a new recipient<br>
                    * <i>event_query_reply</i> &bull; Notify the user when they leave a new reply in a query<br>
                    * <i>event_site_qualified</i> &bull; Notify the user when a trial site is qualified for the clinical trial account<br>
                    * <i>no_physician_alias_share</i> &bull; Flag to exclude this location from a physician alias share<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    location_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The location can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted list the users at the location<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#location-idx">top</a>

        <a name="group"><h3>Group commands</h3></a>

        <p><a name="group_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>List the groups for an account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/group/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; uuid of the account<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>groups</i> &bull; An array of the groups.  Each object holds the following same fields as the <a href="#group_get">/group/get</a> call<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    group_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view this list<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#group-idx">top</a>

        <p><a name="group_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add a group</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/group/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>name</i> &bull; Name of the group<br>
                    <i>account_id</i> &bull; uuid of the account<br>
                    <i>must_approve</i> &bull; Flag if shared studies must be approved for the group (optional)<br>
                    <i>must_approve_upload</i> &bull; Flag if uploaded studies must be approved (optional)<br>
                    <i>must_approve_harvest</i> &bull; Flag if harvested studies must be approved (optional)<br>
                    <i>must_approve_move</i> &bull; Flag if moved studies must be approved (optional)<br>
                    <i>no_share</i> &bull; Flag if studies can not be shared with this group (optional). Studies can still be shared with users in the group.<br>
                    <i>share_code</i> &bull; The share code of the group (optional)<br>
                    <i>share_description</i> &bull; The share description of the group (optional)<br>
                    <i>share_settings</i> &bull; <a href="#share-settings">Share settings</a> JSON structure of the share display settings (optional)<br>
                    <i>share_via_gateway</i> &bull; Flag if a gateway share is allowed (optional)<br>
                    <i>hl7_template</i> &bull; The HL7 reporting template for the group (optional)<br>
                    <i>search_threshold</i> &bull; The number of studies record in the namespace to switch the UI from list to search mode (optional)<br>
                    <i>role_id</i> &bull; Id for the default role for the group (optional)<br>
                    <i>customfield-{CUSTOMFIELD_UUID}</i> &bull; Custom field(s) (optional)<br>
                    <i>site_id</i> &bull; The associated site id. Required in case require_site_id_for_groups account setting is set (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The uuid<br>
                    <i>namespace_id</i> &bull; The association namespace uuid<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                   group_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    ACCOUNT_NOT_FOUND &bull; The account was not found<br>
                    NOT_FOUND &bull; The object was not found. The <i>error_subtype</i> holds the name of field that triggered the error<br>
                    NOT_PERMITTED &bull; You are not permitted to add a group to that account<br>
                    INVALID_FLAG &bull; An invalid flag was passed. The <i>error_subtype</i> holds the name of the invalid flag<br>
                    DUP_SHARE_CODE &bull; The share code is already used<br>
                    DUP_NAMESPACE_NAME &bull; namespace_names_globally_unique is enabled and there is another namespace with the same name<br>
                    INVALID_CUSTOMFIELD &bull; Invalid custom field(s) name or value were passed. The <i>error_subtype</i> holds an array of the error details<br>
                    INVALID_JSON &bull; The field is not in valid JSON format. The <i>error_subtype</i> holds the name of the field<br>
                    ROLE_NAMESPACE_MISMATCH (INCOMPATIBLE_ROLE) &bull; The role cannot be used for a group, data contains role_id and namespace_id<br>
                    ROLE_NAMESPACE_MISMATCH (GLOBAL_USER_WITH_RESTRICTED_ROLE) &bull; You are adding the group to the account with a global user with restricted role, data contains role_id and user_id<br>
                    SITE_NOT_ALLOWED &bull; The account is not listed in the site account's linked_study_accounts setting
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#group-idx">top</a>

        <p><a name="group_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Save a group</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/group/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The group uuid<br>
                    <i>name</i> &bull; Name of the group (optional)<br>
                    <i>must_approve</i> &bull; Flag if shared studies must be approved for the group (optional)<br>
                    <i>must_approve_upload</i> &bull; Flag if uploaded studies must be approved (optional)<br>
                    <i>must_approve_harvest</i> &bull; Flag if harvested studies must be approved (optional)<br>
                    <i>must_approve_move</i> &bull; Flag if moved studies must be approved (optional)<br>
                    <i>no_share</i> &bull; Flag if studies can not be shared with this group (optional). Studies can still be shared with users in the group.<br>
                    <i>share_code</i> &bull; The share code of the group (optional)<br>
                    <i>share_description</i> &bull; The share description of the group (optional)<br>
                    <i>share_settings</i> &bull; <a href="#share-settings">Share settings</a> JSON structure of the share display settings (optional)<br>
                    <i>share_via_gateway</i> &bull; Flag if a gateway share is allowed (optional)<br>
                    <i>hl7_template</i> &bull; The HL7 reporting template for the group (optional)<br>
                    <i>search_threshold</i> &bull; The number of studies record in the namespace to switch the UI from list to search mode (optional)<br>
                    <i>role_id</i> &bull; Id for the default role for the group (optional)<br>
                    <i>customfield-{CUSTOMFIELD_UUID}</i> &bull; Custom field(s) (optional)<br>
                    <i>site_id</i> &bull; The associated site id. Required in case require_site_id_for_groups account setting is set (optional)<br>
                    <i>site_qualified</i> &bull; Flag if the site is qualified for the trial (optional)<br>
                    <i>site_inactive</i> &bull; Inactive flag to deactivate the site in a Trial Account (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                   group_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The object was not found. The <i>error_subtype</i> holds the name of field that triggered the error<br>
                    NOT_PERMITTED &bull; You are not permitted to edit the location<br>
                    INVALID_FLAG &bull; An invalid flag was passed. The <i>error_subtype</i> holds the name of the invalid flag<br>
                    DUP_SHARE_CODE &bull; The share code is already used<br>
                    DUP_NAMESPACE_NAME &bull; namespace_names_globally_unique is enabled and there is another namespace with the same name<br>
                    INVALID_CUSTOMFIELD &bull; Invalid custom field(s) name or value were passed. The <i>error_subtype</i> holds an array of the error details<br>
                    INVALID_JSON &bull; The field is not in valid JSON format. The <i>error_subtype</i> holds the name of the field<br>
                    ROLE_NAMESPACE_MISMATCH (INCOMPATIBLE_ROLE) &bull; The role cannot be used for groups, data contains role_id and namespace_id<br>
                    SITE_NOT_ALLOWED &bull; The account is not listed in the site account's linked_study_accounts setting
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#group-idx">top</a>

        <p><a name="group_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a group</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/group/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The group uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The group uuid<br>
                    <i>name</i> &bull; Name of the group<br>
                    <i>namespace_id</i> &bull; Namespace of the group<br>
                    <i>must_approve</i> &bull; Flag if shared studies must be approved<br>
                    <i>must_approve_upload</i> &bull; Flag if uploaded studies must be approved<br>
                    <i>must_approve_harvest</i> &bull; Flag if harvested studies must be approved<br>
                    <i>must_approve_move</i> &bull; Flag if moved studies must be approved<br>
                    <i>no_share</i> &bull; Flag to stop sharing into this group<br>
                    <i>share_code</i> &bull; The share code of the group<br>
                    <i>share_description</i> &bull; The share description of the group<br>
                    <i>share_settings</i> &bull; <a href="#share-settings">Share settings</a> JSON structure of the share display settings<br>
                    <i>share_via_gateway</i> &bull; Flag if a gateway share is allowed (optional)<br>
                    <i>hl7_template</i> &bull; The HL7 reporting template for the group<br>
                    <i>search_threshold</i> &bull; The number of studies record in the namespace to switch the UI from list to search mode<br>
                    <i>tags</i> &bull; An array of user tags associated with this object (This is only returned if the object has tags)<br>
                    <i>role_id</i> &bull; Id of the default role for the group<br>
                    <i>role_name</i> &bull; Name of the default role for the group<br>
                    <i>customfields</i> &bull; An array of the custom fields associated with this group. Each object has the following <a href="#customfields">fields</a> (This is only returned if the group has custom fields)<br>
                    <div class="comment">-- The following fields are returned when there is a site association for the group --</div>
                    <i>site_id</i> &bull; The associated site id<br>
                    <i>site_name</i> &bull; The associated site name<br>
                    <i>site_qualified</i> &bull; Flag if the site is qualified for the trial<br>
                    <i>site_inactive</i> &bull; Inactive flag to deactivate the site in a Trial Account<br>
                    <i>scanners_validated</i> &bull; An array of the scanners validated for the group. Each object has the following fields.<br>
                    * <i>uuid</i> &bull; Scanner Id<br>
                    * <i>name</i> &bull; Scanner name<br>
                    * <i>study_uid</i> &bull; The study UID used in the process of scanner validation for the group<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    group_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The group can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view this group<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#group-idx">top</a>

        <p><a name="group_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete a group</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/group/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The group uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    group_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The group can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to delete this group<br>
                    NOT_EMPTY &bull; The group still has studies in it<br>
                    ACTIVE_QUERY &bull; The group has outstanding Queries<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#group-idx">top</a>

        <p><a name="group_user_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add or update a user to a group</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/group/user/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The group id<br>
                    <i>user_id</i> &bull; Id of the user<br>
                    <i>role_id</i> &bull; Id of the users role within the group (optional). If not passed the default group role will be assigned<br>
                    <i>event_share</i> &bull; Notify the user on a share into the group namespace (optional)<br>
                    <i>event_approve</i> &bull; Notify the user on a approval needed into the group namespace (optional)<br>
                    <i>event_upload</i> &bull; Notify the user on an upload into the group namespace (optional)<br>
                    <i>event_upload_fail</i> &bull; Notify the user on a failed upload into the group namespace (optional)<br>
                    <i>event_harvest</i> &bull; Notify the user on a harvest into the group namespace (optional)<br>
                    <i>event_new_report</i> &bull; Notify the user when a report is attached in the group namespace (optional)<br>
                    <i>event_report_remove</i> &bull; Notify the user when a report is removed in the group namespace (optional)<br>
                    <i>event_study_comment</i> &bull; Notify the user when a comment is attached to a study in the namespace (optional)<br>
                    <i>event_status_change</i> &bull; Notify the user when the status of a study is changed (optional)<br>
                    <i>event_message</i> &bull; Notify the user when a message is sent to the group namespace (optional)<br>
                    <i>event_node</i> &bull; Notify the user when a group node sends an event (optional)<br>
                    <i>event_link</i> &bull; Notify the user when an anonymous link is hit in the namespace (optional)<br>
                    <i>event_link_mine</i> &bull; Notify the user when an anonymous link created by the user is hit in the namespace (optional)<br>
                    <i>event_thin_study_success</i> &bull; Notify the user when a thin study retrieval they initiated succeeds (optional)<br>
                    <i>event_thin_study_fail</i> &bull; Notify the user when a thin study retrieval they initiated fails (optional) <br>
                    <i>event_case_assignment</i> &bull; Notify the user when they are assigned a case as a medical or admin user (optional)<br>
                    <i>event_incoming_study_request</i> &bull; Notify the user when they get an incoming study request (optional)<br>
                    <i>event_query_add</i> &bull; Notify the user when a new query is issued (optional)<br>
                    <i>event_query_edit</i> &bull; Notify the user when a query is edited (optional)<br>
                    <i>event_query_new_recipient</i> &bull; Notify the user when they are added to a query as a new recipient (optional)<br>
                    <i>event_query_reply</i> &bull; Notify the user when they leave a new reply in a query (optional)<br>
                    <i>event_site_qualified</i> &bull; Notify the user when a trial site is qualified for the clinical trial account (optional)<br>
                    <i>no_physician_alias_share</i> &bull; Flag to exclude this group from a physician alias share (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    group_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The group can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to edit the group<br>
                    ROLE_NAMESPACE_MISMATCH (INCOMPATIBLE_ROLE) &bull; The role cannot be used for groups, data contains role_id and namespace_id<br>
                    USER_NOT_FOUND &bull; The user was not found or is not in the account<br>
                    ROLE_NOT_FOUND &bull; The role was not found or is not in the account<br>
                    INVALID_FLAG &bull; An invalid flag was passed. The <i>error_subtype</i> holds the name of the invalid flag<br>
                    CAN_NOT_PROMOTE &bull; A user can not switch themselves to an admin role if they are currently not in an admin role<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#group-idx">top</a>

        <p><a name="group_user_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Remove a user from a group</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/group/user/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The group id<br>
                    <i>user_id</i> &bull; Id of the user<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    group_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The group can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to edit the group<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#group-idx">top</a>

        <p><a name="group_user_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>List the users in a group</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/group/user/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The group id<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>users</i> &bull; An array of the users.  Each object holds the following fields<br>
                    * <i>user_id</i> &bull; The user id<br>
                    * <i>user_name</i> &bull; The user name<br>
                    * <i>role_id</i> &bull; The users role id<br>
                    * <i>role_name</i> &bull; The users role name<br>
                    * <i>event_share</i> &bull; Notify the user on a share into the group namespace <br>
                    * <i>event_approve</i> &bull; Notify the user on a approval needed into the group namespace <br>
                    * <i>event_upload</i> &bull; Notify the user on an upload into the group namespace <br>
                    * <i>event_upload_fail</i> &bull; Notify the user on a failed upload into the group namespace<br>
                    * <i>event_harvest</i> &bull; Notify the user on a harvest into the group namespace <br>
                    * <i>event_new_report</i> &bull; Notify the user when a report is attached in the group namespace<br>
                    * <i>event_report_remove</i> &bull; Notify the user when a report is removed in the group namespace<br>
                    * <i>event_study_comment</i> &bull; Notify the user when a comment is attached to a study in the namespace<br>
                    * <i>event_status_change</i> &bull; Notify the user when the status of a study is changed<br>
                    * <i>event_message</i> &bull; Notify the user when a message is sent to the group namespace<br>
                    * <i>event_node</i> &bull; Notify the user when a group node sends an event<br>
                    * <i>event_link</i> &bull; Notify the user when an anonymous link is hit in the namespace<br>
                    * <i>event_link_mine</i> &bull; Notify the user when an anonymous link created by the user is hit in the namespace<br>
                    * <i>event_thin_study_success</i> &bull; Notify the user when a thin study retrieval they initiated succeeds<br>
                    * <i>event_thin_study_fail</i> &bull; Notify the user when a thin study retrieval they initiated fails<br>
                    * <i>event_case_assignment</i> &bull; Notify the user when they are assigned a case as a medical or admin user<br>
                    * <i>event_incoming_study_request</i> &bull; Notify the user when they get an incoming study request<br>
                    * <i>event_query_add</i> &bull; Notify the user when a new query is issued<br>
                    * <i>event_query_edit</i> &bull; Notify the user when a query is edited<br>
                    * <i>event_query_new_recipient</i> &bull; Notify the user when they are added to a query as a new recipient<br>
                    * <i>event_query_reply</i> &bull; Notify the user when they leave a new reply in a query<br>
                    * <i>event_site_qualified</i> &bull; Notify the user when a trial site is qualified for the clinical trial account<br>
                    * <i>no_physician_alias_share</i> &bull; Flag to exclude this group from a physician alias share<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    group_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The group can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted list the group<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#group-idx">top</a>

        <p><a name="group_scanner_validate"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Validate scanners in the group</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/group/scanner/validate</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The group id<br>
                    <i>scanner_id</i> &bull; The scanner id<br>
                    <i>study_uid</i> &bull; The study uid used to validate the scaner. Required when validating (optional)<br>
                    <i>invalidate</i> &bull; Flag  if the scaner is being invalidated <br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    scanner_validate
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The group or scanner was not found. The <i>error_subtype</i> holds the type of field not found<br>
                    NOT_PERMITTED &bull; You are not permitted to validate scanners<br>
                    ALREADY &bull; The scanner is already validated/invalidated<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#group-idx">top</a>

        <a name="role"><h3>Role commands</h3></a>

        <p><a name="role_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>List the roles for an account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/role/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; uuid of the account<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>roles</i> &bull; An array of the roles.  Each object holds the following same fields as the <a href="#role_get">/role/get</a> call<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    role_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view this list<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#role-idx">top</a>

        <p><a name="role_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add a role</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/role/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>name</i> &bull; Name of the role<br>
                    <i>for_account</i> &bull; A flag that the role can be used in an account, default is on (optional)<br>
                    <i>for_group</i> &bull; A flag that the role can be used in a group, default is on (optional)<br>
                    <i>for_location</i> &bull; A flag that the role can be used in a location, default is on (optional)<br>
                    <i>account_id</i> &bull; uuid of the account<br>
                    <i>permissions</i> &bull; A hash of the role <a href="#permissions">permissions</a> (optional)<br>
                    <i>settings</i> &bull; A hash of the <a href="#account-settings">role settings</a> (optional)<br>
                    <i>setting_{SETTING_NAME}</i> &bull; Set an individual setting. This is an alternative to the settings hash for easier use in the API tester (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The uuid<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    role_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    ACCOUNT_NOT_FOUND &bull; The account was not found<br>
                    NOT_PERMITTED &bull; You are not permitted to add a role to that account<br>
                    INVALID_JSON &bull; The field is not in valid JSON format. The <i>error_subtype</i> holds the name of the field<br>
                    INVALID_PERMISSION &bull; Invalid permission flag. The <i>error_subtype</i> holds the name of the permission flag.<br>
                    INVALID_PERMISSION_VALUE &bull; The permission flag has an invalid value. The <i>error_subtype</i> holds the name of the permission flag.<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    If permissions are not passed the role is given the default set of permissions
                </td>
            </tr>
        </table>
        <a href="#role-idx">top</a>

        <p><a name="role_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Save a role</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/role/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The role uuid<br>
                    <i>name</i> &bull; Name of the role (optional)<br>
                    <i>description</i> &bull; Description of the role (optional)<br>
                    <i>for_account</i> &bull; A flag that the role can be used in an account (optional)<br>
                    <i>for_group</i> &bull; A flag that the role can be used in a group (optional)<br>
                    <i>for_location</i> &bull; A flag that the role can be used in a location (optional)<br>
                    <i>permissions</i> &bull; A hash of the role <a href="#permissions">permissions</a> (optional)<br>
                    <i>permission_{PERMISSION_NAME}</i> &bull; Set an individual permission. This is an alternative to the permissions hash for easier use in the API tester (optional)<br>
                    <i>settings</i> &bull; A hash of the <a href="#account-settings">role settings</a> (optional)<br>
                    <i>setting_{SETTING_NAME}</i> &bull; Set an individual setting. This is an alternative to the settings hash for easier use in the API tester (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    role_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The role can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to edit the role<br>
                    INVALID_JSON &bull; The field is not in valid JSON format. The <i>error_subtype</i> holds the name of the field<br>
                    INVALID_PERMISSION &bull; Invalid permission flag. The <i>error_subtype</i> holds the name of the permission flag.<br>
                    INVALID_PERMISSION_VALUE &bull; The permission flag has an invalid value. The <i>error_subtype</i> holds the name of the permission flag.<br>
                    NO_OTHER_ROLE_EDIT &bull; No other role has role_edit permissions so you can not disable role_edit for this role<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    The permissions hash does not need to be complete. It can include only the items you want to update or the entire set.
                </td>
            </tr>
        </table>
        <a href="#role-idx">top</a>

        <p><a name="role_settings"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Set some role settings fields</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/role/settings</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id<br>
                    <i>uuid</i> &bull; The role uuid<br>
                    <i>settings</i> &bull; A hash of the <a href="#account-settings">role settings</a> (optional)<br>
                    <i>setting_{SETTING_NAME}</i> &bull; Set an individual setting. This is an alternative to the settings hash for easier use in the API tester (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    --- Settings after change. ---<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    role_setting_edit IF there is some setting passed to set, and for each setting there is check against <a href="#permission_setting_">permissions.setting_{SETTING_NAME}</a><br>
                    user have to be in the same account if no setting is passed to change, as if get current settings<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The role can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to edit the role settings or user is not in the same account<br>
                    NOT_PERMITTED_SETTING &bull; You are not permitted to edit this settings field. The <i>error_subtype</i> holds the name of the invalid setting<br>
                    NO_ROLE_OVERRIDE &bull; The setting does not allow a role override<br>
                    INVALID_SETTING &bull; An invalid setting was passed. The <i>error_subtype</i> holds the name of the invalid setting<br>
                    INVALID_SETTING_VALUE &bull; An invalid setting value was passed. The <i>error_subtype</i> holds the name of the setting with the invalid value<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>This overwrites only provided keys for settings, not touching the others.
                </td>
            </tr>
        </table>
        <a href="#role-idx">top</a>

        <p><a name="role_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a role</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/role/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The role uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The role uuid<br>
                    <i>name</i> &bull; Name of the role<br>
                    <i>description</i> &bull; Description of the role.<br>
                    <i>for_account</i> &bull; A flag that the role can be used in an account<br>
                    <i>for_group</i> &bull; A flag that the role can be used in a group<br>
                    <i>for_location</i> &bull; A flag that the role can be used in a location,<br>
                    <i>type</i> &bull; Type of the role. If it is system generated this will be either admin or user<br>
                    <i>permissions</i> &bull; The role <a href="#permissions">permissions</a> as a JSON hash<br>
                    <i>settings</i> &bull; The role <a href="#account-settings">settings</a> as a JSON hash<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    role_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The role can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view this role<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#role-idx">top</a>

        <p><a name="role_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete a role</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/role/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The role uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    role_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The role can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to delete this role<br>
                    IN_USE &bull; The role is in use. The <i>error_subtype</i> holds a array of the objects that are using it<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#role-idx">top</a>

        <p><a name="role_default_permissions"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get the default permissions</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/role/default/permissions</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; The account id (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>permissions</i> &bull; A hash of the permissions. Each key is a permission and the value list is the default admin/user values as per the <a href="#permissions">permissions</a> documentation<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#role-idx">top</a>

        <p><a name="role_report_detail"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Build a detailed role report</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/role/report/detail</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; The account id<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>report_id</i> &bull; The report id<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    role_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account was not found<br>
                    NOT_PERMITTED &bull; You are not permitted to run this report<br>
                    REPORT_ERROR &bull; Unable to start the report<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    This call will kick off the building of the report. Poll for the report status with /report/status command and download it with the /report/zip command.
                </td>
            </tr>
        </table>
        <a href="#role-idx">top</a>

        <a name="activity"><h3>Activity commands</h3></a>

        <p><a name="activity_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>List the activities for the user</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/activity/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; Limit to activities in this account and the personal activities<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                    <i>strict_account_filter</i> &bull; Flag to apply the account_id to personal activites as well (optional)<br>
                    <i>study_extra</i> &bull; Flag to return extra study fields (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>activities</i> &bull; An array of the activities.  Each object holds the same fields as the <a href="#activity_get">/activity/get</a> call<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#activity-idx">top</a>

        <p><a name="activity_list_count"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Count the activities for the user</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/activity/list/count</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; Limit to activities in this account and the personal activities<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>count</i> &bull; Count of the activities<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    RUNNING &bull; This call is currently runnning for the user<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#activity-idx">top</a>

        <p><a name="activity_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get the activity</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/activity/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The activity uuid<br>
                    <i>study_extra</i> &bull; Flag to return extra study fields (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The activity uuid<br>
                    <i>created</i> &bull; The date and time the activity was created.<br>
                    <i>created_by</i> &bull; The name of the user who created the activity.<br>
                    <i>type</i> &bull; Type of activities. Based on the type different fields are returned as follows
                    <i>priority</i> &bull; Activity priority<br>
                    <ul>
                        <li>STUDY_APPROVE - Notification to approve a study
                        <ul>
                            <li><i>study_id</i> &bull; Id of the study to approve<br>
                            <li><i>namespace_id</i> &bull; Id of the namespace the study is to be approved into<br>
                            <li><i>namespace_name</i> &bull; Name of the namespace<br>
                            <li><i>share_message</i> &bull; The share message<br>
                            <li><i>study</i> &bull; The study object. The fields are the same as the <a href="#study_get">/study/get</a> command<br>
                            <li><i>mwl_orders</i> &bull; An array of the MWL orders that were found. The orders structure is as per the <a href="#node_found_mwl">/node/found/mwl</a> command<br>
                            <li><i>approval_reason</i> &bull; A reason why the study must be approved. 'S' - the study has been shared, 'M' - moved, 'H' - harvested, 'U' - uploaded, 'D' - it duplicated another study with the same UID, 'E' - miscellaneous auto edits (Epic patient update, MPI workflow).<br>
                        </ul>
                        <li>JOIN_REQUEST - A user has requested to join the account
                        <ul>
                            <li><i>account_id</i> &bull; Id of the account they have requested to join<br>
                            <li><i>account_name</i> &bull; Name of the account they have requested to join<br>
                            <li><i>user_id</i> &bull; Id of the user<br>
                            <li><i>user_name</i> &bull; User name<br>
                            <li><i>user_email</i> &bull; User email address<br>
                            <li><i>customfields</i> &bull; A JSON array of the customfield data optionally provided in <a href="#user_join">/user/join</a>. Each item is a hash with the customfield uuid, name, and value.
                        </ul>
                        <li>DESTINATION_SEARCH - Result of a destination search
                        <ul>
                            <li><i>namespace_id</i> &bull; Id of the namespace the study is to be imported into<br>
                            <li><i>namespace_name</i> &bull; Name of the namespace<br>
                            <li><i>destination_name</i> &bull; Name of the destination that was searched<br>
                            <li><i>study</i> &bull; The study object. The fields are the same as the study fields in the  <a href="#node_found">/node/found</a> command<br>
                            <li><i>copy_to</i> &bull; If <a href="#destination_search">/destination/search</a> had <i>copy_to</i> parameter, then it is showed here.<br>
                        </ul>
                        <li>USER_INVITE- An invitation to join the account to user has being sent to a user
                        <ul>
                            <li><i>account_id</i> &bull; Id of the account they have been invited to<br>
                            <li><i>account_name</i> &bull; Name of the account they have been invited to<br>
                            <li><i>user_id</i> &bull; Id of the user that sent the invitation<br>
                            <li><i>user_name</i> &bull; User name that sent the invitation<br>
                            <li><i>invite_email</i> &bull; Email address the invitation was sent to<br>
                            <li><i>role_name</i> &bull; Name of their role in the account they have been invited to<br>
                            <li><i>locations</i> &bull; An array of locations specified in the invitation. Each item is a hash with <i>name</i> and <i>role_name</i>
                            <li><i>groups</i> &bull; An array of groups specified in the invitation. Each item is a hash with <i>name</i> and <i>role_name</i>
                        </ul>
                        <li>NODE_CONNECT- A user has requested to connect the public node
                        <ul>
                            <li><i>node_id</i> &bull; Id of the node they have requested to connect<br>
                            <li><i>node_name</i> &bull; Name of the node they have requested to connect<br>
                            <li><i>account_id</i> &bull; Id of the account the request came from<br>
                            <li><i>account_name</i> &bull; Name of the account the request came from<br>
                        </ul>
                        <li>STUDY_REQUEST_INBOUND - An incoming study request
                        <ul>
                            <li><i>study_request_id</i> &bull; Id of the incoming study request<br>
                            <li><i>status</i> &bull; Status of the study request<br>
                            <li><i>account_id</i> &bull; Id of the account that requests a study<br>
                            <li><i>account_name</i> &bull; Name of the account that requests a study<br>
                            <li><i>patientid</i> &bull; The MRN they want a study to match<br>
                            <li><i>patient_first_name</i> &bull;  The patient first name they want a study to match<br>
                            <li><i>patient_last_name</i> &bull;  The patient last name they want a study to match<br>
                            <li><i>patient_sex</i> &bull;  The patient sex they want a study to match<br>
                            <li><i>patient_birth_date</i> &bull;  The patient date of birth they want a study to match<br>
                            <li><i>modality</i> &bull; The modality a study should match<br>
                            <li><i>study_date_start</i> &bull; The DICOM date that a study date should be greater or equal to<br>
                            <li><i>study_date_end</i> &bull; The DICOM date that a study date should be less or equal to<br>
                            <li><i>study_description</i> &bull; The string a study description should partially match<br>
                            <li><i>message_count</i> &bull; The number of message passed through the study request. Returned if the user has message_view permission<br>
                        </ul>
                        <li>STUDY_REQUEST_OUTBOUND - An outgoing study request
                        <ul>
                            <li><i>study_request_id</i> &bull; Id of the study request<br>
                            <li><i>status</i> &bull; Status of the study request<br>
                            <li><i>account_id</i> &bull; Id of the account the request is sent to<br>
                            <li><i>account_name</i> &bull; Name of the account the request is sent to<br>
                            <li><i>patientid</i> &bull; The MRN a study should match<br>
                            <li><i>patient_first_name</i> &bull;  The patient first name a study should match<br>
                            <li><i>patient_last_name</i> &bull;  The patient last name a study should match<br>
                            <li><i>patient_sex</i> &bull;  The patient sex a study should match<br>
                            <li><i>patient_birth_date</i> &bull;  The patient date of birth a study should match<br>
                            <li><i>modality</i> &bull; The modality a study should match<br>
                            <li><i>study_date_start</i> &bull; The DICOM date that a study date should be greater or equal to<br>
                            <li><i>study_date_end</i> &bull; The DICOM date that a study date should be less or equal to<br>
                            <li><i>study_description</i> &bull; The string a study description should partially match<br>
                            <li><i>message_count</i> &bull; The number of message passed through the study request. Returned if the user has message_view permission<br>
                        </ul>
                        <li>TRIAL_QC_TASK - A pending clinical trial QC task
                        <ul>
                            <li><i>qctask_id</i> &bull; Id of the QC task<br>
                            <li><i>namespace_id</i> &bull; A namespace the QC task is assigned to<br>
                            <li><i>namespace_name</i> &bull; Name of the namespace the QC task is assigned to<br>
                            <li><i>user_id</i> &bull; A user the QC task is assigned to<br>
                            <li><i>message</i> &bull; An explanatory message for the QC task<br>
                            <li><i>studies</i> &bull; An array of the study uuid(s)<br>
                            <li><i>qctask_status</i> &bull; Status of the QC task<br>
                            <li><i>external</i> &bull; Flag if this an external QC Task and should be opened in an external UI<br>
                        </ul>
                    </ul>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The activity was not found<br>
                    NOT_PERMITTED &bull; You are not permitted to access this activity<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> mwl_orders is not returned if no results are available
                        <li> If multiple MWL searches were run mwl_orders returns the results of the last search
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#activity-idx">top</a>

        <p><a name="activity_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete an activity</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/activity/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The activity uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The activity was not found<br>
                    NOT_PERMITTED &bull; You are not permitted to delete this activity<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#activity-idx">top</a>

        <a name="audit"><h3>Audit commands</h3></a>

        <p><a name="audit_object"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Audit the changes to an object</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/audit/object</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The uuid of the object to audit<br>
                    <i>filter.*</i> &bull; <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>reverse</i> &bull; Flag to reverse the default sort order (optional)<br>
                    <i>download</i> &bull; Flag to create a zipped CSV file. A report_id will be returned and the file can be accessed via /report/status and /report/zip (optional)<br>
                    <i>customfield_detail</i> &bull; Flag to include the customfield name in the detail (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>report_id</i> &bull; The report id if the download flag was set. The rest of the parameters will not be returned (optional)<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>events</i> &bull; An array of the events associated with this object. Each object in the array will have the following fields<br>
                    * <i>uuid</i> &bull; uuid of the object<br>
                    * <i>action</i> &bull; The type of change or event<br>
                    * <i>what</i> &bull; Name of the object the action was on<br>
                    * <i>who</i> &bull; Name of the user who did this<br>
                    * <i>proxy</i> &bull; Name of the proxy user who did this if the action was done by a proxy<br>
                    * <i>when</i> &bull; Date and time<br>
                    * <i>type</i> &bull; Type of object the action was on<br>
                    * <i>detail</i> &bull; Details - see the notes<br>
                    * <i>with</i> &bull; If this event involves another entity (e.g. a share) this field will exist and have the name of the other entity (optional)<br>
                    * <i>track</i> &bull; A JSON hash of tracking keys and values if tracking is applied to this event (optional)<br>
                    * <i>client_address</i> &bull; IP address that performed the action<br>
                    * <i>sid</i> &bull; sid that performed the action<br>
                    * <i>webhook_id</i> &bull; webhook that triggered the action. NOTE: This field exists only if action was triggered by webhook.<br>
                    * <i>causality</i> &bull; A hash that give a clue of what triggered the change. All the hash keys are optional:<br>
                    ** <i>timer_rule_id</i> &bull; <a href="#timer_rule_add">Timer rule</a> that applied on the event<br>
                    ** <i>webhook_id</i> &bull; Webhook that triggered the action<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    audit_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_PERMITTED &bull; You are not permitted to audit this object<br>
                    NOT_FOUND &bull; The object was not found<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> The detail field holds a json structure structured as following for different event types
                        <ul>
                            <li> EDIT - A hash, each key is the name of the changed field and the value is a list of the original and new values
                            <li> DELETED - A hash of the record that was deleted
                            <li> VIEWER_ACTION - A hash with key 'action' to indicate which action was run and 'detail' to provide an identifier
                        </ul>
                        <li> The default sort order is most recent first
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#audit-idx">top</a>

        <p><a name="audit_user"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Audit a user's public key edits and what a user has done in an account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/audit/user</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>user_id</i> &bull; The id of the user to audit<br>
                    <i>account_id</i> &bull; The id of the account<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>reverse</i> &bull; Flag to reverse the default sort order (optional)<br>
                    <i>study_fields</i> &bull; JSON list of study fields to include in the response (optional)<br>
                    <i>download</i> &bull; Flag to create a zipped CSV file. A report_id will be returned and the file can be accessed via /report/status and /report/zip (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>report_id</i> &bull; The report id if the download flag was set. The rest of the parameters will not be returned (optional)<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>events</i> &bull; An array of the events associated with this object. Each object in the array will have the following fields<br>
                    * <i>uuid</i> &bull; uuid of the object<br>
                    * <i>action</i> &bull; The type of change or event<br>
                    * <i>what</i> &bull; Name of the object the action was on<br>
                    * <i>who</i> &bull; Name of the user who did this<br>
                    * <i>proxy</i> &bull; Name of the proxy user who did this if the action was done by a proxy<br>
                    * <i>when</i> &bull; Date and time<br>
                    * <i>type</i> &bull; Type of object the action was on<br>
                    * <i>detail</i> &bull; Details - see the notes in <a href="#audit_object">/audit/object</a><br>
                    * <i>with</i> &bull; If this event involves another entity (e.g. a share) this field will exist and have the name of the other entity (optional)<br>
                    * <i>track</i> &bull; A JSON hash of tracking keys and values if tracking is applied to this event (optional)<br>
                    * <i>client_address</i> &bull; IP address that performed the action<br>
                    * <i>sid</i> &bull; sid that performed the action<br>
                    * <i>study</i> &bull; A JSON hash of study fields for study events. Returned only if study_fields are provided in the parameters<br>
                    * <i>webhook_id</i> &bull; webhook that triggered the action. NOTE: This field exists only if action was triggered by webhook.<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    audit_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_PERMITTED &bull; You are not permitted to access this user record<br>
                    NOT_FOUND &bull; The user was not found<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> The default sort order is most recent first
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#audit-idx">top</a>

        <p><a name="audit_account"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Audit all events in an account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/audit/account</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; The id of the account<br>
                    <i>filter.*</i> &bull; <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> &bull; <a href="#pagination">Pagination</a> (optional)<br>
                    <i>reverse</i> &bull; Flag to reverse the default sort order (optional)<br>
                    <i>download</i> &bull; Flag to create a zipped CSV file. A report_id will be returned and the file can be accessed via /report/status and /report/zip (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>report_id</i> &bull; The report id if the download flag was set. The rest of the parameters will not be returned (optional)<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>events</i> &bull; An array of the events associated with this object. Each object in the array will have the following fields<br>
                    * <i>uuid</i> &bull; uuid of the object<br>
                    * <i>action</i> &bull; The type of change or event<br>
                    * <i>what</i> &bull; Name of the object the action was on<br>
                    * <i>who</i> &bull; Name of the user who did this<br>
                    * <i>proxy</i> &bull; Name of the proxy user who did this if the action was done by a proxy<br>
                    * <i>when</i> &bull; Date and time<br>
                    * <i>type</i> &bull; Type of object the action was on<br>
                    * <i>detail</i> &bull; Details - see the notes in <a href="#audit_object">/audit/object</a><br>
                    * <i>with</i> &bull; If this event involves another entity (e.g. a share) this field will exist and have the name of the other entity (optional)<br>
                    * <i>track</i> &bull; A JSON hash of tracking keys and values if tracking is applied to this event (optional)<br>
                    * <i>client_address</i> &bull; IP address that performed the action<br>
                    * <i>sid</i> &bull; sid that performed the action<br>
                    * <i>webhook_id</i> &bull; webhook that triggered the action. NOTE: This field exists only if action was triggered by webhook.<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    audit_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_PERMITTED &bull; You are not permitted to access this information<br>
                    NOT_FOUND &bull; The account was not found<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> To filter by a time range use the created field with either a date or date time value. e.g. filter.created.ge=>'2014-01-08 05:38:30'
                        <li> The default sort order is most recent first
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#audit-idx">top</a>

        <p><a name="audit_deleted"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Return deleted records</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/audit/deleted</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; The id of the account<br>
                    <i>type</i> &bull; The type of the object (Study|User etc.)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>objects</i> &bull; An array of the objects . Each object in the array will have the following fields<br>
                    * <i>uuid</i> &bull; uuid of the deleted object<br>
                    * <i>who</i> &bull; Name of the user who deleted the object<br>
                    * <i>proxy</i> &bull; Name of the proxy user who did this if the action was done by a proxy<br>
                    * <i>when</i> &bull; Date and time<br>
                    * <i>client_address</i> &bull; IP address that performed the action<br>
                    * <i>sid</i> &bull; sid that performed the action<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    audit_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_PERMITTED &bull; You are not permitted to access this record<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    Use the uuid to retrieve the full history from /audit/object
                </td>
            </tr>
        </table>
        <a href="#audit-idx">top</a>

        <p><a name="audit_log"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Log a message</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/audit/log</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; sid (optional)<br>
                    <i>bucket</i> &bull; Name of the bucket to log to<br>
                    <i>rest_params**</i> &bull; Parameters are logged to a message in the bucket<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    INVALID_BUCKET &bull; The bucket name can only contain A-z characters and must be between 4 and 16 characters long<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#audit-idx">top</a>

        <p><a name="audit_failedlogins"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get the failed login events</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/audit/failedlogins</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; The id of the account<br>
                    <i>from_time</i> &bull; Only return events after the epoch time (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>events</i> &bull; An array of the events. Each event is an array with the following fields<br>
                    * Epoch time of the event<br>
                    * LOCKOUT if the login failed due to the lockout or PRIMARY if the login failed due to invalid credentials<br>
                    * The vanity of the event<br>
                    * The client IP address<br>
                    * The rest of the fields hold the email and account information depending on the parameters used for /session/login<br>
                </td>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_PERMITTED &bull; You are not permitted to access this information<br>
                    NOT_FOUND &bull; The account was not found<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    Collection of this data needs to be enabled via the audit_failed_logins account switch
                </td>
            </tr>
        </table>
        <a href="#audit-idx">top</a>

        <a name="namespace"><h3>Namespace commands</h3></a>

        <p><a name="namespace_permissions"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get the study permissions for the namespace</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/namespace/permissions</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>(sid || uuid && serial_no)</i> &bull; Either the sid or the node id and serial number<br>
                    <i>(namespace_id || study_id || study_uid && storage_namespace && phi_namespace)</i> &bull; The uuid of the namespace or study or the study_uid/storage_namespace/phi_namespace triplet<br>
                    <i>oauth</i> &bull; Flag to return the OAuth token information for the user (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>study_edit</i> &bull; The permission flag setting<br>
                    <i>&#8627; study_edit_approved</i> &bull; The permission flag setting<br>
                    <i>&#8627; study_edit_unapproved</i> &bull; The permission flag setting<br>
                    <i>study_download</i> &bull; The permission flag setting<br>
                    <i>study_browse</i> &bull; The permission flag setting<br>
                    <i>study_share</i> &bull; The permission flag setting<br>
                    <i>&#8627; study_share_email</i> &bull; The permission flag setting<br>
                    <i>&#8627; study_share_share_code</i> &bull; The permission flag setting<br>
                    <i>&#8627; study_share_account</i> &bull; The permission flag setting<br>
                    <i>&#8627; study_share_location</i> &bull; The permission flag setting<br>
                    <i>&#8627; study_share_group</i> &bull; The permission flag setting<br>
                    <i>&#8627; study_share_user</i> &bull; The permission flag setting<br>
                    <i>&#8627; study_share_rsna</i> &bull; The permission flag setting<br>
                    <i>&#8627; study_share_npi</i> &bull; The permission flag setting<br>
                    <i>&#8627; study_share_request</i> &bull; The permission flag setting<br>
                    <i>study_push</i> &bull; The permission flag setting<br>
                    <i>study_delete</i> &bull; The permission flag setting<br>
                    <i>study_approve</i> &bull; The permission flag setting<br>
                    <i>study_view</i> &bull; The permission flag setting<br>
                    <i>study_upload</i> &bull; The permission flag setting<br>
                    <i>study_report_upload</i> &bull; The permission flag setting<br>
                    <i>study_report_delete</i> &bull; The permission flag setting<br>
                    <i>study_sync</i> &bull; The permission flag setting<br>
                    <i>study_merge</i> &bull; The permission flag setting<br>
                    <i>reports</i> &bull; A JSON array of the report ids they can view. This is not returned if they can view all reports<br>
                    <i>oauth</i> &bull; A JSON hash containing the the OAuth token and ttl<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    INVALID_CREDENTIALS &bull; The sid or node credentials are invalid<br>
                    NOT_FOUND &bull; The object was not found<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#namespace-idx">top</a>

        <p><a name="namespace_settings"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Set/get the settings for the namespace</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/namespace/settings</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The uuid of the namespace<br>
                    <i>no_dup_share</i> &bull; Flag to stop duplicate studies (same study_uid and image count) from getting shared into the namespace (optional)<br>
                    <i>study_field_flags</i> &bull; A JSON hash of study_field_* role values to override the role values for studies in the namespace (optional)<br>
                    <i>study_size_soft_threshold_per_user</i> &bull; A threshold for studies size per user. An email (by study_quota_exceeded template) will be sent when this limit is exceeded by a user. A JSON hash of study_field_* role values to override the role values for studies in the namespace (optional)<br>
                    <i>share_related</i> &bull; Flag to make study shares with this namespace include related studies (same PHI namespace, same MRN) (optional)<br>
                    <i>ira_namespace</i> &bull; Flag to make the namespace viable owner namespace for Queries (optional)<br>
                    <i>download_anonymize</i> &bull; Anonymization rules to apply on study download. The setting format should follow the <code>anonymize_tags</code> parameter format of the Storage <code>/study/{namespace}/{studyUid}/download</code> call (optional)<br>
                    <i>storage_always_dicom_tags</i> &bull; A JSON list of DICOM tags that should always be loaded from storage. This is useful for mapped custom fields which should always show the latest value in storage.  (optional)<br>
                    <div class="comment">-- The following account settings can be over-ridden in the namespace --</div>
                    <i>remove_private_tags_on_upload</i> &bull; Flag the storage to anonymize or remove all private tags from a study (optional)<br>
                    <i>enable_dicom_wrapping</i> &bull; Value for the setting (optional)<br>
                    <i>auto_enable_dicom_wrapping</i> &bull; Value for the setting (optional)<br>
                    <i>single_file_dicom_wrapping</i> &bull; Value for the setting (optional)<br>
                    <i>disable_duplicate_study_upload</i> &bull; Value for the setting (optional)<br>
                    <i>force_new_study_on_upload</i> &bull; Value for the setting (optional)<br>
                    <i>enable_multipart_uploader</i> &bull; Value for the setting (optional)<br>
                    <i>allow_drag_and_drop_in_study_uploader</i> &bull; Value for the setting (optional)<br>
                    <i>link_defaults</i> &bull; Value for the setting (optional)<br>
                    <i>upload_settings</i> &bull; Value for the setting (optional)<br>
                    <i>auto_create_patient</i> &bull; Value for the setting (optional)<br>
                    <i>enable_epic_patient_lookup</i> &bull; Value for the setting (optional)<br>
                    <i>ui_json</i> &bull; JSON for UI setting (optional) <span>possible options:</span>
                    <ul>
                        <li>pixel_de_id_by_default (boolean) &bull; Pixel de-id tool is set by default when uploading study to this namespace</li>
                        <li>show_image_on_upload_page (boolean)  &bull; Show computer image with CD on upload page when image is uploading to this namespace </li>
                    </ul>
                    <i>cloud_storage_config</i> &bull; Value for the setting (optional)<br>
                    <i>pixel_anonymize_color</i> &bull; Value for the setting (optional)<br>
                    <i>priority_notifications</i> &bull; Value for the setting (optional)<br>
                    <i>enable_namespace_ai_questions</i> &bull; Value for the setting (optional)<br>
                    <i>disable_mobile_dicom_wrapping</i> &bull; Value for the setting (optional)<br>
                    <i>enable_dicom_deidentification</i> &bull; Value for the setting (optional)<br>
                    <i>try_update_original_study</i> &bull; Value for the setting (optional)<br>
                    <i>try_update_original_study_from_namespaces</i> &bull; Value for the setting (optional)<br>
                    <i>try_update_original_study_to_namespaces</i> &bull; Value for the setting (optional)<br>
                    <i>must_approve_duplicate_study_uid</i> &bull; Value for the setting (optional)<br>
                    <i>reverse_patient_name</i> &bull; Value for the setting (optional)<br>
                    <i>epic_prompt_for_anonymize</i> &bull; Value for the setting (optional)<br>
                    <i>viewer_study_enable_cpp_transcoding</i> &bull; Value for the setting (optional). Can be set only by sysdamin.<br>
                    <i>ai_settings**</i> &bull; Other AI settings<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>no_dup_share</i> &bull; The setting value<br>
                    <i>study_field_flags</i> &bull; The setting value<br>
                    ------ Account settings that have been over-ridden in the namespace ------
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    account_edit or ownership for a PHR namespace to modify the settings
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The namespace was not found<br>
                    INVALID_SETTING &bull; An invalid setting was passed. The <i>error_subtype</i> holds the name of the invalid setting<br>
                    INVALID_SETTING_VALUE &bull; An invalid setting value was passed. The <i>error_subtype</i> holds the name of the setting with the invalid value<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#namespace-idx">top</a>

        <p><a name="namespace_share_code"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Validate and get the full description of a share code</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/namespace/share_code</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>(share_code || namespace_id)</i> &bull; The share code or namespace id<br>
                    <i>(sid || uuid && serial_no)</i> &bull; Either the sid or the node id and serial number (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>share_code</i> &bull; The share code<br>
                    <i>share_description</i> &bull; The share description<br>
                    <i>share_settings</i> &bull; <a href="#share-settings">Share settings</a> JSON structure of the share display settings<br>
                    <i>share_type</i> &bull; What are you sharing with (account|location|group|user)<br>
                    <i>share_name</i> &bull; The name of what you are sharing with<br>
                    <i>namespace_id</i> &bull; Namespace for the share code<br>
                    <i>account_id</i> &bull; Id of the account<br>
                    <i>currency</i> &bull; 3-letter ISO code for currency to charge in (optional - see notes)<br>
                    <i>charge_description</i> &bull; The description of the charge (optional - see notes)<br>
                    <i>second_opinion_share</i> &bull; Flag if this is a  second opinion workflow (optional)<br>
                    <i>second_opinion_config</i> &bull; JSON configuration for the second opinion workflow (optional)<br>
                    <i>second_opinion_case</i> &bull; The second opinion case. The fields are per <a href="#case_get">/case/get</a> (optional)<br>
                    <i>pricing</i> &bull; <a href="#share-pricing">Pricing table</a> in JSON format. (optional - see notes)<br>
                    <i>customfields_pricing</i> &bull; <a href="#share-pricing">Pricing table</a> in JSON format. (optional - see notes)<br>
                    <i>sum_price_matches</i> &bull; A flag to be used with <i>customfields_pricing</i> pricing table<br>
                    <i>payment_processor</i> &bull; JSON hash of the payment processor information (optional)<br>
                    <i>cc_description</i> &bull; A description of the users credit card on file (optional - see notes)<br>
                    <i>enable_dicom_wrapping</i> &bull; Is dicom wrapping enabled for the associated account<br>
                    <i>enable_dicom_deidentification</i> &bull; Is the dicom de-identification tool enabled for the associated account<br>
                    <i>enable_dicomdir_scan</i> &bull; Is dicomdir scanning enabled for the associated account<br>
                    <i>consolidate_wrapped_jpegs</i> &bull; Is consolidated wrapped jpegs enabled for the associated account<br>
                    <i>upload_one_study</i> &bull; Only allow one study to be selected and uploaded<br>
                    <i>render_wrapped_pdf</i> &bull; Value of the flag for the associated account<br>
                    <i>render_wrapped_avi</i> &bull; Value of the flag for the associated account<br>
                    <i>render_wrapped_video</i> &bull; Value of the flag for the associated account<br>
                    <i>render_wrapped_docx</i> &bull; Value of the flag for the associated account<br>
                    <i>sr_render_css</i> &bull; Value of the flag for the associated account<br>
                    <i>auto_wrap_images</i> &bull; Value of the flag for the associated account<br>
                    <i>reencode_dicom_mp4</i> &bull; Value of the flag for the associated account<br>
                    <i>duplicate_study_check</i> &bull; Value of the flag for the associated account<br>
                    <i>disable_duplicate_study_upload</i> &bull; Flag for the setting<br>
                    <i>force_new_study_on_upload</i> &bull; Flag for the setting<br>
                    <i>confirm_before_upload</i> &bull; Value of the flag for the associated account<br>
                    <i>study_download_no_reports</i> &bull; Value of the flag for the associated account<br>
                    <i>share_charge_by_modality</i> &bull; Charge shares (including second opinion) by modality of a shared study<br>
                    <i>auto_enable_dicom_wrapping</i> &bull; Flag for the setting<br>
                    <i>single_file_dicom_wrapping</i> &bull; Flag for the setting<br>
                    <i>enable_multipart_uploader</i> &bull; Flag for the setting<br>
                    <i>allow_drag_and_drop_in_study_uploader</i> &bull; Flag for the setting<br>
                    <i>upload_select_none</i> &bull; Flag for the setting<br>
                    <i>hide_help_tool</i> &bull; Flag for the setting<br>
                    <i>is_production</i> &bull; Flag if this is a production site<br>
                    <i>is_anonymous</i> &bull; Flag if this is an anonymous upload<br>
                    <i>anonymize_rules</i> &bull; If the upload should anonymize the study this will hold the rules from the <a href="#namespace_anonymize">/namespace/anonymize</a> calls<br>
                    <i>dicom_tag_map</i> &bull; If the upload should anonymize the study this will hold the dicom tag to name map<br>
                    <i>prompt_for_anonymize</i> &bull; Flag to prompt if the anonymization rules should be applied<br>
                    <i>batch_encode_cine</i> &bull; Value of the flag for the associated account<br>
                    <i>encapsulate_wrapped_pdf</i> &bull; Value of the flag for the associated account<br>
                    <i>dicom_deidentification_at_ingress</i> &bull; Value of the flag for the associated account<br>
                    <i>upload_settings</i> &bull; Value of the namespace setting<br>
                    <i>customfields</i> &bull; An array of the custom fields that should be captured during the share process ordered by display_order. Each object has the following <a href="#customfields">fields</a> plus these additional fields. (This is only returned if the share has custom fields). If a sid is passed all custom fields for the namespace will be returned<br>
                    * <i>capture_on_share_code</i> &bull; Should the field be capture on the share code<br>
                    * <i>wrapped_dicom_only</i> &bull; Only capture for wrapped DICOM uploads<br>
                    * <i>dicom_only</i> &bull; Only capture for non-wrapped DICOM uploads<br>
                    <i>link_parameters</i> &bull; A JSON hash of any additional parameters generated by a link usage (optional)<br>
                    <i>permissions</i> &bull; The namespace permissions<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The share code was not found or if gateway credentials are passed is not valid for gateway uploads<br>
                    INVALID_LINK &bull; The anonymous upload link is no longer valid<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li>The currency, charge_description, pricing and customfields_pricing are only returned if the namespace has pricing and the account is setup to process credit cards.
                        <li>The cc_description is only returned if the namespace has pricing and a sid was passed in the parameters
                        <li>The second_opinion_case is only returned if the sid for a non-anonymous user is passed
                        <li>If a vanity URL is used and the share code is not in the vanity account a NOT_FOUND error is returned
                        <li>If the call returns a link_id parameter the UUID should be used on for a /link/redirect call to start an anonymous upload
                    </ul>
                    <a name="share-settings">Share Settings</a>
                    <p>
                        Namespace share_settings is a JSON hash; keys are the action, value are specific to the action and defined here:
                        <ul>
                            <li> <i>removeElements</i> &bull; value is an array of element selectors that will be removed from the share page (i.e. {"removeElements": ["#elementOne","#elementTwo"]})</li>
                            <li> <i>autoAttachFileTypes</i> &bull; value is an array of file extensions that will trigger the web uploader to detect during the directory scan and present as reports to automatically upload with the study (i.e. {"autoAttachFileTypes": ["html","pdf","doc"])</li>
                        </ul>
                    </p>
                </td>
            </tr>
        </table>
        <a href="#namespace-idx">top</a>

        <p><a name="namespace_share_pricing"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Set/get the price for sharing with a namespace, also enable and configure the second opinion workflow</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/namespace/share/pricing</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The uuid of the namespace<br>
                    <i>currency</i> &bull; 3-letter ISO code for currency to charge in (USD|GBP) (optional) <br>
                    <i>charge_description</i> &bull; The description of the charge (optional)<br>
                    <i>pricing</i> &bull; <a href="#share-pricing">Pricing table</a> in JSON format (optional)<br>
                    <i>customfields_pricing</i> &bull; <a href="#share-pricing">Pricing table</a> in JSON format (optional)<br>
                    <i>sum_price_matches</i> &bull; Flag to search for all matches in customfields_pricing table and to add them up (optional)<br>
                    <i>second_opinion_share</i> &bull; Flag to enable/disable the second opinion workflow for the share (optional)<br>
                    <i>second_opinion_config</i> &bull; JSON configuration for the second opinion workflow (optional)<br>
                    <i>share_charge_by_modality</i> &bull; Charge shares (including second opinion) by modality of a shared study if this flag is set (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>currency</i> &bull; 3-letter ISO code for currency to charge in<br>
                    <i>is_production</i> &bull; Flag if this is a production site<br>
                    <i>charge_description</i> &bull; The description of the charge<br>
                    <i>pricing</i> &bull; <a href="#share-pricing">Pricing table</a> in JSON format.<br>
                    <i>customfields_pricing</i> &bull; <a href="#share-pricing">Pricing table</a> in JSON format.<br>
                    <i>sum_price_matches</i> &bull; Flag to search for all matches in pricing table and to add them up<br>
                    <i>second_opinion_share</i> &bull; Flag to enable/disable the second opinion workflow for the share<br>
                    <i>second_opinion_config</i> &bull; JSON configuration for the second opinion workflow<br>
                    <i>share_charge_by_modality</i> &bull; Charge shares (including second opinion) by modality of a shared study if this flag is set<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    account_edit if setting
                    account_view if getting
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_PERMITTED &bull; You are not permitted to price this namespace<br>
                    NOT_FOUND &bull; The namespace was not found<br>
                    INVALID_JSON &bull; The field is not in valid JSON format. The <i>error_subtype</i> holds the name of the field<br>
                    INVALID_INTEGER &bull; The price is not an integer number<br>
                    INVALID_CONDITION &bull; The pricing condition is invalid<br>
                    INVALID_FLAG &bull; The field is not a valid flag
                    NOT_LIST &bull; The customfields_pricing table is not a JSON list <br>
                    NOT_HASH &bull; The pricing field is not a hash <br>
                    INVALID_CURRENCY &bull; Invalid currency <br>
                    NEEDS_ANY_OR_ALL &bull; The hash needs an "ANY" or "ALL" key <br>
                    ONLY_ALL &bull; If the hash has an ALL value it can't have any other values<br>
                    INVALID_AMOUNT &bull; An invalid amount. The <i>error_subtype</i> holds the invalid amount <br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <a name="share-pricing">Pricing table</a><p>
                    <ul>
                        <li>pricing
                            <ul>
                                <li> The table is a JSON hash, keys are the modality of the study and the value is the price in cents.
                                <li> The price can be either zero or greater than or equal to 50 cents.
                                <li> The special key 'ANY' holds the price for any modality not specifically named and is required.
                                <li> The special key 'ALL' holds the price for all studies uploaded during a single session
                                <li> The sharer is charged for the study when it is successfully shared with the recipient.
                                <li> Send an empty hash to clear out the pricing rules for the namespace.
                            </ul>
                        </li>
                        <li>customfields_pricing
                            <ul>
                                <li> The table is a JSON array, each element is a price item consisting of a condition and a price value (a hash with two keys, <i>price</i> and <i>condition</i>)
                                <li> The price must be integer number of cents/pennies.
                                <li> The condition is an logical expression compatible with Customfield's <i>show_when</i> expression.
                                <li> There can be customfield references in condition. Customfield is referenced with string 'customfield-UUID', where UUID is an actual UUID on customfield object.
                                <li> if <i>sum_price_matches</i> flag is false, table is searched line by line for the first condition match. The price amount from the match is the value to charge.
                                <li> if <i>sum_price_matches</i> flag is true, all table rows are checked for a match, prices from all matched rows are added up together, and the total is the value charge.
                                <li> Send an empty array to clear out the pricing rules for the namespace.
                            </ul>
                        </li>
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#namespace-idx">top</a>

        <p><a name="namespace_share_price"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Calculate price for sharing with this namespace. The price is calculated based on customfields, so it is useless for namespaces set up to charge by modality.</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/namespace/share/price</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>uuid</i> &bull; The uuid of the namespace<br>
                    <i>customfield-{CUSTOMFIELD_UUID}</i> &bull; Custom field(s) defined for the case (or study) account objects with values entered in the second opinion wizard (or in the image share screen) (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>price</i> &bull; Calculated price in pennies or null for no price match<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The namespace can not be found<br>
                    NOT_CUSTOMFIELDS_PRICING &bull; The namespace is set up to charge by modality<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> To be used when <i>share_charge_by_modality</i> namespace flag is false
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#user-idx">top</a>

        <p><a name="namespace_anonymize"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Set/get the anonymization rules for the namespace</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/namespace/anonymize</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The uuid of the namespace<br>
                    <i>rules</i> &bull; Anonymization rules in JSON format. The format is a hash with the keys the names of the fields to anonymize and the values the regular expressions to apply. (optional)<br>
                    <i>anonymization_id</i> &bull; The uuid of the <a href="#anonymization">anonymization profile</a> to connect to the namespace. (optional)<br>
                    <i>prompt_for_anonymize</i> &bull; Flag to prompt if the anonymization rules should be applied. Only applicable to ingress anonymization. (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>rules</i> &bull; The anonymization rules in JSON format.<br>
                    <i>anonymization_id</i> &bull; The uuid of the <a href="#anonymization">anonymization profile</a> the namespace is connected to<br>
                    <i>anonymize_at_ingress</i> &bull; If the anonymize at ingress feature is turned on this flag is returned<br>
                    <i>prompt_for_anonymize</i> &bull; Flag to prompt if the anonymization rules should be applied. Only applicable to ingress anonymization<br>
                    <i>dicom_tag_map</i> &bull; If the anonymize at ingress feature is turned on this map of field names to dicom tags is returned<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    account_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_PERMITTED &bull; You are not permitted to anonymize this namespace<br>
                    NOT_FOUND &bull; The namespace or anonymization profile was not found. The <i>error_subtype</i> holds the type of the not found item<br>
                    INVALID_JSON &bull; The field is not in valid JSON format. The <i>error_subtype</i> holds the name of the field<br>
                    NOT_HASH &bull; The rules field is not a hash <br>
                    INVALID_FIELD_NAME &bull; The field name is n the rules hash is invalid. The <i>error_subtype</i> holds the invalid field name<br>
                    INVALID_REGEXP &bull; Invalid regular expression. The <i>error_subtype</i> holds the invalid regexp.<br>
                    ONLY_ONE &bull; You can pass either the rules parameter with non-empty rule set or non-empty  anonymization_id parameter, but not both<br>
                    HAS_ANONYMIZATION_PROFILE &bull; The namespace has an anonymization profile connected, the anonymization rules cannot be set<br>
                    HAS_ANONYMIZATION_RULES &bull; The namespace has anonymization rules set, the namespace cannot be connected to an anonymization profile therefore<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> Valid field names are patient_name, patient_sex, patient_birth_date, patient_address, accession_number, study_description, study_date, patientid, referring_physician and the special fields OTHER_INGRESS_TAGS and ALL_PRIVATE_TAGS
                        <li> The regular expression should be a substitution expression of the form s/.*/TEST/
                        <li> Send an empty hash to clear out the anonymization rules for the namespace
                        <li> The href variables $study and $sharer are available for use in the right side of the substitution regexp. $study contains the fields in /study/get and $sharer contains the fields in /user/get for the person who shared the study
                        <li>
                        <li> The special OTHER_INGRESS_TAGS field is a meta field for a large number of other DICOM tags that will get the regexp for ingress anonymization. The values for this meta field can be modified for the account via the other_ingress_tags setting.
                        <li> The special ALL_PRIVATE_TAGS field is a meta field that means anonymize all tags with an <a href="http://dicom.nema.org/dicom/2013/output/chtml/part05/sect_7.8.html">odd group number</a>. This meta field is only applied for client side anonymization.
                        <li> The special __MD5_HASH__ value in the right side of the regexp will be replaced with the MD5 hex transformation on the full field value. If the field is empty a UUID will be generate for the field then MD5 hashed.
                        <li> The special __MD5_COUNTER__ value in the right side of the regexp will be replaced with the a counter value for the MD5 hex transformation on the full field value using the /account/md5/counter call.
                        <li> The special __USER_EMAIL__ value in the right side of the regexp will be replaced with the users email address.
                        <li> The special __UUID__ value in the right side of the regexp will be replaced with a UUID.
                        <li> The special __COUNTER-000010__ value in the right side of the regexp will be replaced with a counter that will be formatted as per the pattern, in this case it will start at 10 and be padded to 6 places. Adjust starting number and padding as desired. Padding is not required i.e. DG-__COUNTER-20__ will start at twenty and not be padded and will start with DG-. Each different pattern will be a unique counter and the counter is scoped to the phi namespace.
                        <li> The special __LCOUNTER-XXX__ value will be replaced with the last counter value
                        <li> If anonymization is performed on the server side the original field values will be saved to any named customfields of the form <code>pre_anon_FIELDNAME</code> if the value is changed
                        <li> Connecting an anonymization profile and setting anonymization rules are mutually exclusive.
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#namespace-idx">top</a>

        <p><a name="namespace_coverpage"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Set/get the cover page template for the namespace</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/namespace/coverpage</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The uuid of the namespace<br>
                    <i>coverpage</i> &bull; The coverpage value. See the notes for formatting details or pass an empty string to remove the current cover page. (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>coverpage</i> &bull; The coverpage value.<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    account_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_PERMITTED &bull; You are not permitted to do this
                    NOT_FOUND &bull; The namespace was not found<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                       If a coverpage is set a DICOM image will get generated and prepended to the study on creation of the study in the namespace.<br>
                       The coverpage value should be a JSON structure with Text::Template expressions for the key values. e.g.<p>
                        <pre>
                            \{
                            "title": "This is an outside study",
                            "footer": "Dicomgrid.com",
                            "uploadedDate": "{$created_at}",
                            "uploadedBy": "{$created_by_name}",
                            "studyInstanceUid": "{$study_uid}",
                            "modality": "{$modality}",
                            "accessionNumber": "{$accession_number}",
                            "studyDescription": "{$study_description}",
                            "studyDate": "{$study_date}"
                            \}
                        </pre>
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#namespace-idx">top</a>

        <p><a name="namespace_validate_customfields"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Validate custom field values for a namespace</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/namespace/validate/customfields</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>share_code</i> &bull; The share code<br>
                    <i>customfield-{CUSTOMFIELD_UUID}</i> &bull; Custom field(s)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    INVALID_CUSTOMFIELD &bull; Invalid custom field(s) name or value were passed. The <i>error_subtype</i> holds an array of the error details<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#namespace-idx">top</a>

        <p><a name="namespace_event_defaults"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Set/get the event default values that are applied when a user is added to a namespace</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/namespace/event/defaults</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The uuid of the namespace<br>
                    <i>event_share</i> &bull; Notify the user on a share into the namespace (optional)<br>
                    <i>event_approve</i> &bull; Notify the user on a approval needed into the namespace (optional)<br>
                    <i>event_upload</i> &bull; Notify the user on an upload into the namespace (optional)<br>
                    <i>event_upload_fail</i> &bull; Notify the user on a failed upload into the namespace (optional)<br>
                    <i>event_harvest</i> &bull; Notify the user on a harvest into the namespace (optional)<br>
                    <i>event_new_report</i> &bull; Notify the user when a report is attached in the namespace (optional)<br>
                    <i>event_report_remove</i> &bull; Notify the user when a report is removed in the namespace (optional)<br>
                    <i>event_study_comment</i> &bull; Notify the user when a comment is attached to a study in the namespace (optional)<br>
                    <i>event_status_change</i> &bull; Notify the user when the status of a study is changed (optional)<br>
                    <i>event_message</i> &bull; Notify the user when a message is sent to the namespace (optional)<br>
                    <i>event_node</i> &bull; Notify the user when a namespace node sends an event (optional)<br>
                    <i>event_link</i> &bull; Notify the user when an anonymous link is hit in the namespace (optional)<br>
                    <i>event_link_mine</i> &bull; Notify the user when an anonymous link created by the user is hit in the namespace (optional)<br>
                    <i>event_thin_study_success</i> &bull; Notify the user when a thin study retrieval they initiated succeeds (optional)<br>
                    <i>event_thin_study_fail</i> &bull; Notify the user when a thin study retrieval they initiated fails (optional) <br>
                    <i>event_case_assignment</i> &bull; Notify the user when they are assigned a case as a medical or admin user (optional)<br>
                    <i>event_incoming_study_request</i> &bull; Notify the user when they get an incoming study request (optional)<br>
                    <i>event_query_add</i> &bull; Notify the user when a new query is issued (optional)<br>
                    <i>event_query_edit</i> &bull; Notify the user when a query is edited (optional)<br>
                    <i>event_query_new_recipient</i> &bull; Notify the user when they are added to a query as a new recipient (optional)<br>
                    <i>event_query_reply</i> &bull; Notify the user when they leave a new reply in a query (optional)<br>
                    <i>event_site_qualified</i> &bull; Notify the user when a trial site is qualified for the clinical trial account (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>event_share</i> &bull; Notify the user on a share into the namespace<br>
                    <i>event_approve</i> &bull; Notify the user on a approval needed into the namespace<br>
                    <i>event_upload</i> &bull; Notify the user on an upload into the namespace<br>
                    <i>event_upload_fail</i> &bull; Notify the user on a failed upload into the namespace<br>
                    <i>event_harvest</i> &bull; Notify the user on a harvest into the namespace<br>
                    <i>event_new_report</i> &bull; Notify the user when a report is attached in the namespace<br>
                    <i>event_report_remove</i> &bull; Notify the user when a report is removed in the namespace<br>
                    <i>event_study_comment</i> &bull; Notify the user when a comment is attached to a study in the namespace<br>
                    <i>event_status_change</i> &bull; Notify the user when the status of a study is changed<br>
                    <i>event_message</i> &bull; Notify the user when a message is sent to the namespace<br>
                    <i>event_node</i> &bull; Notify the user when a namespace node sends an event<br>
                    <i>event_link</i> &bull; Notify the user when an anonymous link is hit in the namespace<br>
                    <i>event_link_mine</i> &bull; Notify the user when an anonymous link created by the user is hit in the namespace<br>
                    <i>event_thin_study_success</i> &bull; Notify the user when a thin study retrieval they initiated succeeds<br>
                    <i>event_thin_study_fail</i> &bull; Notify the user when a thin study retrieval they initiated fails<br>
                    <i>event_case_assignment</i> &bull; Notify the user when they are assigned a case as a medical or admin user<br>
                    <i>event_incoming_study_request</i> &bull; Notify the user when they get an incoming study request<br>
                    <i>event_query_add</i> &bull; Notify the user when a new query is issued<br>
                    <i>event_query_edit</i> &bull; Notify the user when a query is edited<br>
                    <i>event_query_new_recipient</i> &bull; Notify the user when they are added to a query as a new recipient<br>
                    <i>event_query_reply</i> &bull; Notify the user when they leave a new reply in a query<br>
                    <i>event_site_qualified</i> &bull; Notify the user when a trial site is qualified for the clinical trial account<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    account_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_PERMITTED &bull; You are not permitted to apply defaults to this namespace<br>
                    NOT_FOUND &bull; The namespace was not found<br>
                    INVALID_FLAG &bull; An invalid flag was passed. The <i>error_subtype</i> holds the name of the invalid flag<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#namespace-idx">top</a>

        <p><a name="namespace_study_defaults"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Set/get the study default values for the namespace</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/namespace/study/defaults</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The uuid of the namespace<br>
                    <i>defaults</i> &bull; Default values in JSON format. The format is a hash with the keys the names of the fields and the values are the default value. The available field name are as listed in the returned field hash. (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>defaults</i> &bull; The default values  in JSON format.<br>
                    <i>fields</i> &bull; A hash of the fields that can have default values. The study fields have the DICOM tag as the value and the custom fields have the field name as the value.<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    account_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_PERMITTED &bull; You are not permitted to apply defaults to this namespace<br>
                    NOT_FOUND &bull; The namespace was not found<br>
                    INVALID_JSON &bull; The field is not in valid JSON format. The <i>error_subtype</i> holds the name of the field<br>
                    NOT_HASH &bull; The rules field is not a hash <br>
                    INVALID_FIELD_NAME &bull; The field name in the default hash is invalid. The <i>error_subtype</i> holds the invalid field name<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> The default values are set on a study when it is added to the namespace and does not have a value for the field
                        <li> Send an empty hash in rules to clear out the default rules for the namespace
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#namespace-idx">top</a>

        <p><a name="namespace_engine_fqdn"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get the FQDN for the storage engine</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/namespace/engine/fqdn</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>(namespace_id || study_id || study_uid && storage_namespace && phi_namespace)</i> &bull; The uuid of the namespace or study or the study_uid/storage_namespace/phi_namespace triplet<br>
                    <i>source</i> &bull; The source of the query (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>engine_fqdn</i> &bull; The FQDN of the storage engine to use<br>
                    <i>engine_url</i> &bull; URL of the storage engine to use<br>
                    <i>storage_namespace</i> &bull; Storage namespace to use<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The namespace was not found<br>
                    PENDING_RESTORE &bull; The study is getting retrieved from the archive. Try this call again after a delay<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#namespace-idx">top</a>

        <p><a name="namespace_removed_user_report"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Build a report of the users who have been removed from the namespace</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/namespace/removed/user/report</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id<br>
                    <i>uuid</i> &bull; The UUID of the namespace<br>
                    <i>account_id</i> &bull; The UUID of the account. A report will be produced for group, location and account namespaces of this account<br>
                    <i>email</i> &bull; Optional email address to send the report to<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>report_id</i> &bull; The report id<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    account_edit or sysadmin or support user
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The namespace was not found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#namespace-idx">top</a>

        <p><a name="namespace_question"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Ask an AI question for the namespace</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/namespace/question</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The namespace id<br>
                    <i>question</i> &bull; The question to ask or a JSON array of questions to ask<br>
                    <i>detail</i> &bull; Optional detail to pass through to the AI stack<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    group_edit, location_edit or account_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The namespace or question was not found.<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                    NODE_NOT_SETUP &bull; A node needs to be attached to the namespace for this question<br>
                    IN_PROCESS &bull; The question is currently in process<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> Any NAMESPACE_AI_QUESTION webhooks will be triggered for the answer.
                        <li> A JSON array of questions is processed sequentially and waits for the answer before asking the next question
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>

        <p><a name="namespace_audit"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Attach an audit action to a namespace</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/namespace/audit</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The id of the namespace<br>
                    <i>action</i> &bull; The audit action (AI_ACTION)<br>
                    <i>detail</i> &bull; Additional information<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The study can not be found<br>
                    INVALID_ACTION &bull; An invalid action was passed<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#study-idx">top</a>


        <a name="help"><h3>help commands</h3></a>

        <p><a name="help_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get help</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/help/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id<br>
                    <i>key</i> &bull; The help key<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>text</i> &bull; The help text<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The help was not found<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#help-idx">top</a>

        <p><a name="help_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Set help text</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/help/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id of a system administrator or account support user<br>
                    <i>key</i> &bull; The help key<br>
                    <i>text</i> &bull; The help text<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_SYSADMIN_OR_SUPPORT &bull; The user is not a sysadmin or support user<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#help-idx">top</a>

        <a name="terminology"><h3>Terminology commands</h3></a>

        <p><a name="terminology_account_overrides"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>List terminology overrides for the account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/terminology/account/overrides</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id of a system administrator or account administrator<br>
                    <i>(account_id || vanity || study_uid && storage_namespace && phi_namespace)</i> &bull; The uuid or vanity name of the account or study triplet to apply any account overrides for (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>tags</i> &bull; An array of hashes of tags<br>
                    *   <i>tag</i> &bull; The tag<br>
                    *   <i>val</i> &bull; The value of the tag<br>
                    *   <i>language</i> &bull; The language of the tag<br>
                    *   <i>vanity</i> &bull; The vanity of the tag<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account or vanity was not found<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                  If a tag is not overridden for the account or vanity it is not returned.
                </td>
            </tr>
        </table>

        <a href="#terminology-idx">top</a>
        <p><a name="terminology_tags"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get the terminology tags</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/terminology/tags</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>tags</i> &bull; A comma separated list of the terminology tags to look up (optional)<br>
                    <i>language</i> &bull; The ISO 639-1 language code<br>
                    <i>(account_id || vanity || study_uid && storage_namespace && phi_namespace)</i> &bull; The uuid or vanity name of the account or study triplet to apply any account overrides for (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>values</i> &bull; A hash of the tags and their values<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    If a tag does not have a value in the database the tag is not returned
                </td>
            </tr>
        </table>
        <a href="#terminology-idx">top</a>

        <p><a name="terminology_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Set terminology values</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/terminology/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id of a system administrator or account administrator<br>
                    <i>tag</i> &bull; The tag to set<br>
                    <i>language</i> &bull; The ISO 639-1 language code<br>
                    <i>account_id</i> &bull; The uuid of the account to apply the tag for (optional)<br>
                    <i>vanity</i> &bull; Vanity to apply the tag for (optional)<br>
                    <i>value</i> &bull; The value of the tag. If this is empty the tag is deleted<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    account_edit or sysadmin
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_SYSADMIN_OR_SUPPORT &bull; The user is not a sysadmin or support user and is trying to set global tags<br>
                    NOT_PERMITTED &bull; The user is not an account administrator  and is trying to set account tags<br>
                    NO_VALUE &bull; The value parameter was not passed<br>
                    NOT_FOUND &bull; The account was not found<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#terminology-idx">top</a>
        <p><a name="terminology_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a list of the terminology tags</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/terminology/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>tags</i> &bull; A comma separated list of the terminology tags to look up<br>
                    <i>language</i> &bull; The ISO 639-1 language code<br>
                    <i>(account_id || vanity)</i> &bull; The uuid or vanity name of the account to apply any account overrides for (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>tags</i> &bull; An array of hashes of tags<br>
                    *   <i>tag</i> &bull; The tag<br>
                    *   <i>val</i> &bull; The value of the tag<br>
                    *   <i>language</i> &bull; The language of the tag<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    If you pass in both a vanity and account_id the account/vanity override tags will be returned as well
                </td>
            </tr>
        </table>
        <a href="#terminology-idx">top</a>

        <p><a name="terminology_i18next"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get the terminology in i18next format</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/terminology/i18next</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>lng</i> &bull; The language code<br>
                    <i>(account_id || vanity)</i> &bull; The uuid or vanity name of the account to apply any account overrides for (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    The data in <a href="http://i18next.com">i18next</a> format
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#terminology-idx">top</a>

        <a name="analytics"><h3>Analytics commands</h3></a>

        <p><a name="analytics_study"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get the study analytics</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/analytics/study</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>(account_id || namespace_id)</i> &bull; The account or namespace to get the analytics for. <i>namespace_id</i> parameter accepts JSON arrays of namespace UUIDs<br>
                    <i>period</i> &bull; The time period (day|week|month|year)<br>
                    <i>count</i> &bull; The number of periods to get<br>
                    <i>end_date</i> &bull; The end date, default is today if not passed (optional)<br>
                    <i>modality</i> &bull; Filter analytics by modality (optional)<br>
                    <i>customfield-{CUSTOMFIELD_UUID}</i> &bull; Filter analytics by a subset of study customfields (optional)<br>
                    <i>time_zone</i> &bull; The report's time zone. Time zone selection order: current user's time zone, <i>time_zone</i> parameter, UTC by default.
                    <i>report</i> &bull; Flag if the result should be returned as a report (optional)<br>
                    <i>email</i> &bull; Send the report to this email address(es) when it is done (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>current</i> &bull; The date and timestamp for how current the analytics data is. This is not returned when report flag is passed.<br>
                    <i>periods</i> &bull; An array of the periods for earliest to latest each object in the array will have the following fields. This is not returned when report flag is passed.<br>
                    * <i>start</i> &bull; Starting date of the period<br>
                    * <i>end</i> &bull; Ending date of the period<br>
                    * <i>label</i> &bull; Display label for the period<br>
                    * <i>study_create</i> &bull; Number of studies created<br>
                    * <i>study_create_harvest</i> &bull; Number of harvested studies created<br>
                    * <i>study_create_upload</i> &bull; Number of uploaded studies created<br>
                    * <i>study_create_share</i> &bull; Number of shared studies created<br>
                    * <i>study_create_copy</i> &bull; Number of copied studies created<br>
                    * <i>study_delete</i> &bull; Number of studies deleted<br>
                    * <i>study_view</i> &bull; Number of studies viewed<br>
                    * <i>study_report_view</i> &bull; Number of reports viewed<br>
                    * <i>study_download</i> &bull; Number of studies downloaded<br>
                    * <i>study_push</i> &bull; Number of studies pushed<br>
                    * <i>study_share_out</i> &bull; Number of studies shared out of the account or namespace<br>
                    * <i>study_share_in</i> &bull; Number of studies shared into the account or namespace<br>
                    * <i>study_approve</i> &bull; Number of studies approved into the account or namespace<br>
                    * <i>study_auto_approve</i> &bull; Number of studies auto approved into the account or namespace<br>
                    * <i>study_view_load</i> &bull; Average time in ms for the study view load time<br>
                    <i>report_id</i> &bull; The report id. This is returned when report flag is passed.<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    analytics_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    INVALID_PARAMETERS &bull; Only pass a account_id or namespace_id<br>
                    PHR_NAMESPACE &bull; Only pass non-PHR namespaces<br>
                    NOT_LIST &bull; The field is not a JSON array. The <i>error_subtype</i> holds the name of the field<br>
                    INVALID_FLAG &bull; An invalid flag was passed. The <i>error_subtype</i> holds the name of the invalid flag<br>
                    INVALID_EMAIL &bull; An invalid email address was passed<br>
                    INVALID_UUID &bull; The field is not a valid UUID. The <i>error_subtype</i> holds the name of the field<br>
                    VALIDATION_FAILED &bull; The modality parameter validation failed<br>
                    MULTIPLE_ACCOUNTS &bull; Namespaces from different accounts provided<br>
                    NOT_FOUND &bull; The account or namespace can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view analytics for this account or namespace<br>
                    INVALID_PERIOD &bull; An invalid period<br>
                    INVALID_END_DATE &bull; An invalid period<br>
                    INVALID_COUNT &bull; Invalid or excessive count value<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li>If <i>report</i> flag is set, then this call will kick off the building of the report. Poll for the report status with /report/status command and download it with the /report/zip command.
                        <li>The report will contain a header line and additionally one line per period. The report fields are listed under periods key in the "Returns" setion
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#analytics-idx">top</a>

        <p><a name="analytics_patient_portal"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get the patient portal analytics</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/analytics/patient/portal</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; The account id<br>
                    <i>patient_id</i> &bull; Patient filter (optional)<br>
                    <i>period</i> &bull; The time period (day|week|month|year)<br>
                    <i>count</i> &bull; The number of periods to get<br>
                    <i>end_date</i> &bull; The end date, default is today if not passed (optional)<br>
                    <i>time_zone</i> &bull; The report's time zone. Time zone selection order: current user's time zone, <i>time_zone</i> parameter, UTC by default.
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>current</i> &bull; The date and timestamp for how current the analytics data is<br>
                    <i>periods</i> &bull; An array of the periods for earliest to latest each object in the array will have the following fields<br>
                    * <i>start</i> &bull; Starting date of the period<br>
                    * <i>end</i> &bull; Ending date of the period<br>
                    * <i>label</i> &bull; Display label for the period<br>
                    * <i>study_view</i> &bull; Number of studies viewed<br>
                    * <i>study_report_view</i> &bull; Number of reports viewed<br>
                    * <i>study_download</i> &bull; Number of studies downloaded<br>
                    * <i>study_share_out</i> &bull; Number of studies shared out of the account or namespace<br>
                    * <i>login</i> &bull; Number of logins<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    analytics_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account or patient can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view analytics for this account or namespace<br>
                    INVALID_PERIOD &bull; An invalid period<br>
                    INVALID_END_DATE &bull; An invalid period<br>
                    INVALID_COUNT &bull; Invalid or excessive count value<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#analytics-idx">top</a>

        <p><a name="analytics_radreport"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get the radreport analytics</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/analytics/radreport</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; The account id<br>
                    <i>namespace_id</i> &bull; Namespace filter (optional)<br>
                    <i>user_id</i> &bull; User filter (optional)<br>
                    <i>period</i> &bull; The time period (day|week|month|year)<br>
                    <i>count</i> &bull; The number of periods to get<br>
                    <i>end_date</i> &bull; The end date, default is today if not passed (optional)<br>
                    <i>time_zone</i> &bull; The report's time zone. Time zone selection order: current user's time zone, <i>time_zone</i> parameter, UTC by default.
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>current</i> &bull; The date and timestamp for how current the analytics data is<br>
                    <i>periods</i> &bull; An array of the periods for earliest to latest each object in the array will have the following fields<br>
                    * <i>start</i> &bull; Starting date of the period<br>
                    * <i>end</i> &bull; Ending date of the period<br>
                    * <i>label</i> &bull; Display label for the period<br>
                    * <i>radreport_create</i> &bull; Number of radreports created<br>
                    * <i>radreport_delete</i> &bull; Number of radreports deleted<br>
                    * <i>radreport_signed</i> &bull; Number of radreports signed<br>
                    * <i>radreport_report_generated</i> &bull; Number of radreports generated<br>
                    * <i>namespaces</i> &bull; A JSON array of unique namespaces covered by the period. Each array element is a hash with a id and name kv pair<br>
                    * <i>users</i> &bull; A JSON array of unique users covered by the period. Each array element is a hash with a id and name kv pair<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    analytics_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account or patient can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view analytics for this account or namespace<br>
                    INVALID_PERIOD &bull; An invalid period<br>
                    INVALID_END_DATE &bull; An invalid period<br>
                    INVALID_COUNT &bull; Invalid or excessive count value<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#analytics-idx">top</a>

        <p><a name="analytics_user"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get the user analytics</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/analytics/user</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; The account id<br>
                    <i>namespace_id</i> &bull; Namespace filter (optional)<br>
                    <i>user_id</i> &bull; User filter (optional)<br>
                    <i>period</i> &bull; The time period (hour|day|week|month|year)<br>
                    <i>count</i> &bull; The number of periods to get<br>
                    <i>end_date</i> &bull; The end date, for backwards compatibility (optional)<br>
                    <i>end_time</i> &bull; The end date and time, default is now if not passed (optional)<br>
                    <i>time_zone</i> &bull; The report's time zone. Time zone selection order: current user's time zone, <i>time_zone</i> parameter, UTC by default.
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>current</i> &bull; The date and timestamp for how current the analytics data is<br>
                    <i>periods</i> &bull; An array of the periods for earliest to latest each object in the array will have the following fields<br>
                    * <i>start</i> &bull; Starting date and time of the period<br>
                    * <i>end</i> &bull; Ending date and time of the period<br>
                    * <i>label</i> &bull; Display label for the period<br>
                    * <i>study_approve</i> &bull; Number of studies approved<br>
                    * <i>study_reject</i> &bull; Number of studies rejected<br>
                    * <i>study_upload_epic</i> &bull; Number of studies uploaded using Epic workflow<br>
                    * <i>study_view</i> &bull; Number of studies viewed<br>
                    * <i>study_view_load</i> &bull; Average time in ms for the study view load time<br>
                    * <i>namespaces</i> &bull; A JSON array of unique namespaces covered by the period. Each array element is a hash with a id and name kv pair<br>
                    * <i>users</i> &bull; A JSON array of unique users covered by the period. Each array element is a hash with a id and name kv pair<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    analytics_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account or patient can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view analytics for this account or namespace<br>
                    INVALID_PERIOD &bull; An invalid period<br>
                    INVALID_END_DATE &bull; An invalid period<br>
                    INVALID_COUNT &bull; Invalid or excessive count value<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#analytics-idx">top</a>

        <a name="sfilter"><h3>Filter commands</h3></a>

        <p><a name="filter_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>List the filters the user has</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/filter/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>type</i> &bull; The type of filter to list (repeat this to get multiple types)<br>
                    <i>account_id</i> &bull; Limit to global filters and filters within the account namespaces<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>filters</i> &bull; An array of the filters the user has. Each object holds the following same fields as the <a href="#filter_get">/filter/get</a> call<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#filter-idx">top</a>

        <p><a name="filter_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add a filter</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/filter/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>name</i> &bull; The name of the filter<br>
                    <i>type</i> &bull; The type of the filter<br>
                    <i>configuration</i> &bull; The configuration as a JSON data structure<br>
                    <i>account_id</i> &bull; The account id to link this filter with (optional)<br>
                    <i>tier_parent_id</i> &bull; The uuid of the filter that this filter should be a child of (optional, for tiered filters)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The filter uuid<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    INVALID_CONFIG &bull; The configuration is invalid
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    The configuration can be either of these forms<br>
                    <ul>
                        <li> A JSON hash containing a <a href="#filter">filter</a> expression that will be AND'ed together e.g. <code>{"filter.phi_namespace.equals":"45153eb8-3141-4265-9f38-fa4fc285018f","filter.patient_name.like":"%mulloy%"}</code>
                        <li> A JSON array containing the UUID of other filters. The filters will be combined as an OR expression.
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#filter-idx">top</a>

        <p><a name="filter_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a filter</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/filter/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The filter uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>name</i> &bull; The name of the filter<br>
                    <i>type</i> &bull; The type of the filter<br>
                    <i>configuration</i> &bull; The configuration as a JSON data structure<br>
                    <i>owner</i> &bull; Flag if the user is the owner of this filter<br>
                    <i>account_id</i> &bull; The account id this filter is linked with<br>
                    <i>namespace_id</i> &bull; The namespace id this filter is linked with<br>
                    <i>tier_children</i> &bull; The tree of tiered filter descendants (empty list if no tiered descendants)<br>
                    <i>tier_parent_id</i> &bull; The uuid of immediate tiered ancestor (not present if no tiered ancestor)<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The filter can not be found<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#filter-idx">top</a>

        <p><a name="filter_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Edit a filter</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/filter/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The filter uuid<br>
                    <i>name</i> &bull; The name of the filter (optional)<br>
                    <i>type</i> &bull; The type of the filter (optional)<br>
                    <i>configuration</i> &bull; The configuration as a JSON data structure (optional)<br>
                    <i>account_id</i> &bull; The account id to link this filter with (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The filter uuid<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The filter can not be found<br>
                    NOT_PERMITTED &bull; You are not the owner of the filter<br>
                    INVALID_CONFIG &bull; The configuration is invalid
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#filter-idx">top</a>

        <p><a name="filter_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete a filter</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/filter/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The filter uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The filter can not be found<br>
                    NOT_PERMITTED &bull; You are not the owner of the filter<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#filter-idx">top</a>

        <p><a name="filter_share"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Share a filter</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/filter/share</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The filter uuid<br>
                    <i>(account_id || location_id || group_id || user_id || role_id)</i> &bull; uuid of the account, location, group, user, or role to share this filter with<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The filter or share object can not be found. The <i>error_subtype</i> holds a the name of the key that can not be found<br>
                    NOT_PERMITTED &bull; You are not the owner of the filter or are not permitted to share a filter with the destination<br>
                    INVALID_PARAMETERS &bull; Only pass a account_id or a location_id or a group_id or a user_id<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#filter-idx">top</a>

        <p><a name="filter_share_stop"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Stop sharing a filter</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/filter/share/stop</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The filter uuid<br>
                    <i>(account_id || location_id || group_id || user_id || role_id)</i> &bull; uuid of the account, location, group, user, or role to stop sharing this filter with<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The filter can not be found<br>
                    NOT_PERMITTED &bull; You are not the owner of the filter<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#filter-idx">top</a>

        <p><a name="filter_share_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get the filter shares</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/filter/share/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The filter uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>account_id</i> &bull; A list of the account_id's the filter is shared with<br>
                    <i>location_id</i> &bull; A list of the location_id's the filter is shared with<br>
                    <i>group_id</i> &bull; A list of the group_id's the filter is shared with<br>
                    <i>user_id</i> &bull; A list of the user_id's the filter is shared with<br>
                    <i>role_id</i> &bull; A list of the role_id's the filter is shared with<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The filter can not be found<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#filter-idx">top</a>

        <a name="customfield"><h3>Custom field commands</h3></a>
        Custom fields

        <p><a name="customfield_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>List the custom fields for the account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/customfield/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; uuid of the account<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>customfields</i> &bull; An array of the customfields.  Each object holds the following same fields as the <a href="#customfield_get">/customfield/get</a> call<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    customfield_view or role_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view this list<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#customfield-idx">top</a>

        <p><a name="customfield_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add a custom field to the account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/customfield/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; uuid of the account<br>
                    <i>name</i> &bull; Name of the customfield<br>
                    <i>object</i> &bull; The object to associate the customfield with (Study|User_account|Group|Location|Account|Patient|Case|Order|Appointment|Dicomdata|Scanner|Query)<br>
                    <i>type</i> &bull; Type of the custom field (text|number|date|memo|select|multiselect|radio|checkbox|search|bool|picker) (optional)<br>
                    <i>capture_on_share_code</i> &bull; Flag if the field should be captured during a share code exchange (only applicable to study fields) (optional)<br>
                    <i>capture_on_destination_search</i> &bull; Flag if the field should be captured during query retrieve on /destination/search call (only applicable to study fields) (optional)<br>
                    <i>display_order</i> &bull; Integer to order how the fields should be displayed (optional)<br>
                    <i>wrapped_dicom_only</i> &bull; Only capture for wrapped DICOM uploads during a share code exchange (optional)<br>
                    <i>dicom_only</i> &bull; Only capture for non-wrapped DICOM uploads during a share code exchange (optional)<br>
                    <i>required</i> &bull; Flag if the field is required (optional)<br>
                    <i>options</i> &bull; Additional options in JSON format (optional)<br>
                    <i>hl7_segment</i> &bull; Segment to map this field to in HL7 ORM messages. Valid values are (NTE|PID|PID1|PV1|PV2|OBR|DG1|OBX|CTI|BLG|ORC) (only applicable to study fields) (optional)<br>
                    <i>hl7_field</i> &bull; Segment field number to map  this field to in HL7 ORM messages. Valid values are 1 to 64. (only applicable to study fields) (optional)<br>
                    <i>hl7_component</i> &bull; Component number to map  this field to in HL7 ORM messages. Valid values are 1 to 64. (only applicable to study fields) (optional)<br>
                    <i>load_hl7</i> &bull; If this is set to a HL7 message type the value of this field will be updated from the hl7_segment, hl7_field and hl7_component from incoming HL7 messages of the matching message type (only applicable to study fields) (optional)<br>
                    <i>load_hl7_filter</i> &bull; Filter token for the load_hl7 option (only applicable to study fields) (optional)<br>
                    <i>dicom_tag</i> &bull; DICOM tag to map this field to. Format should be of form (1234,1234). (only applicable to study fields) (optional)<br>
                    <i>other_dicom_tags</i> &bull; JSON array of other DICOM tags to map this field to. (only applicable to study fields) (optional)<br>
                    <i>load_dicom_tag</i> &bull; Flag to load the current value from the study into this field. (only applicable if a dicom_tag is specified) (optional)<br>
                    <i>dicom_tag_ignore_empty</i> &bull; Flag to not map an empty custom field to the DICOM tag. (only applicable if a dicom_tag is specified) (optional)<br>
                    <i>load_from_sr</i> &bull; Load the value from the structured reports in the study (only applicable to study fields) .(optional)<br>
                    <i>field_flag</i> &bull; Default customfield flag (optional)<br>
                    <i>ui_json</i> &bull; JSON for UI settings (optional)<br>
                    <i>load_order</i> &bull; If this flag is on the value of this field will be loaded from a customfield of the matching Order. The customfield is defined by the other_customfield_id parameter (optional)<br>
                    <i>other_customfield_id</i> &bull; Id of a customfield to map its value to this customfield's value (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; uuid of the customfield<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    customfield_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    ACCOUNT_NOT_FOUND &bull; The account can not be found<br>
                    NOT_FOUND &bull; The Customfield can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to add a customfield to this account<br>
                    INVALID_FLAG &bull; An invalid flag was passed. The <i>error_subtype</i> holds the name of the invalid flag<br>
                    INVALID_INTEGER &bull; Invalid integer. The <i>error_subtype</i> holds the invalid integer.<br>
                    INVALID_TYPE &bull; An invalid type was passed.<br>
                    INVALID_OBJECT &bull; An invalid object was passed.<br>
                    INVALID_JSON &bull; The field is not in valid JSON format. The <i>error_subtype</i> holds the name of the field<br>
                    INVALID_OPTIONS &bull; An option is invalid. The <i>error_subtype</i> holds the specific error message<br>
                    INVALID_HL7_OBJECT &bull; HL7 fields can only be applied to study fields<br>
                    INVALID_HL7_SEGMENT &bull; Invalid segment name<br>
                    INVALID_DICOM_TAG_OBJECT &bull; DICOM tags can only be applied to study fields<br>
                    INVALID_DICOM_TAG &bull; The DICOM tag is invalid<br>
                    INVALID_SEARCH_SOURCE &bull; An invalid search source was passed.<br>
                    NO_DICOM_TAG_DEFINED &bull; The load_dicom_tag flag is set but the dicom_tag field is not defined<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> Date fields must be saved in a YYYY-MM-DD format
                        <li> Checkboxes must be saved as a 1/0 flag
                        <li> Multiselect, picker and radio fields must be saved as a CSV list of the values
                        <li> Boolean values are serialized to true/false JSON values and are passed as 0/1 flags or true/false strings to API. show_when rules coerces booleans to 0/1 so they can be used in logical operations.
                        <li>JSON format for options. Options is a hash with the following key value pairs
                        <ul>
                            <li> values - array of values for a select, multiselect, picker, radio or search field. Macro values can be used to dynamically generate values as documented below.
                            <li> suggested_values - array of values for a search field, shown as default options when the user clicks into the field, before they enter a search string. Macro values can be used as documented below.
                            <li> inactive_options - array of disabled values. Already set values from this list are left intact. This list of values is hidden for further user selection.
                            <li> values_FIELD_NAME - hash of arrays of values for a select, multiselect, picker or radio field. FIELD_NAME should be name of the field to lookup and the field value is the key to the hash.<br> e.g. <code>"values_modality":{"CT":["A","B"],"MR":["C","D"]}</code>. Only one values_FIELD_NAME key can exist.
                            <li> labels - hash of labels for a select, multiselect or picker field (optional)
                            <li> validate - a regular expression the field must validate against
                            <li> validate_error - An error message to display for a failed validation
                            <li> validate_pages - A list of pages to validate fields. Supported pages: study_add, study_set, study_set_must_approve, study_share. Empty list enables validation in all cases.
                            <li> hint - A textual hint for the field
                            <li> field_label - The label for the field
                            <li> max_length - The maximum length of the field
                            <li> show_when - A hash keyed by uuid of other customfield(s), the hash value is an array of values. If the referenced customfield has a value that is in the array of values this field should be shown. If it doesn't this field should be hidden.
                            <li> admin_only - Only show customfield to administrators (only applies to User_account customfields)
                            <li> hint_as_help_text - Make the hint appear below the field input
                            <li> forbid_future_dates - Make the customfield accept only today and days in the past. User time zone is considered.
                            <li> block_id - Any string identifier, optional. Custom fields with the same block_id will be rendered on one line
                            <li> show_in_qr_activity - Flag if the custom field should be exposed in study retrieve activities
                            <li> search_source - The data source for a search field. The available options are:
                            <ul>
                                <li> athena_providers &bull; Search Athena for the provider
                                <li> athena_order_types &bull; Search Athena for the order types
                                <li> us_states &bull; Search US states
                                <li> account_users &bull; Search the users in the account
                                <li> customfield_values &bull; Search the array of values in the options JSON
                            </ul>
                        </ul>
                        <li> Filter tokens for the load_hl7_filter
                        <ul>
                            <li> SEGMENT_FIELD_VALUE - The field in the segment must contain the value i.e. OBR_4_8LW means that OBR-4 must contain the value 8LW
                        </ul>
                        <li> The following value macros are supported. Macros are evaluated when the customfield is returned as part of an object.
                        <ul>
                            <li> __USER_NAMES__ &bull; The macro value will be replaced by an ordered list of the user names in the account (can be used in customfield options: <code>values</code>)
                            <li> __CUSTOMFIELD-uuid__ &bull; The macro value will be replaced by a list generated from CSV data stored in the object customfield value (can be used in customfield options: <code>suggested_values</code>)
                        </ul>
                        <li> Nested DICOM tags are supported by specifying all the tags in the path separated by colons e.g. <code>(0002,0003):(0002,0006)</code>
                        <li> The load_from_sr is a JSON array of the keys to traverse to get to the structured report value to load e.g. <code>["Summary","EDD from LMP"]</code>
                        <li> If a study has multiple SR they are checked in sequential order for the first value of traverse keys
                        <li> If you would like the second or more value of the traverse keys use the special tag <code>_INSTANCE_N_</code> where N is the number to select as the first element in the array e.g. <code>["_INSTANCE_2_","Summary","EDD from LMP"]</code>
                        <li> DICOM tags must be uppercase e.g. <code>(0020,002D)</code>
                        <li> If a customfield is named _DATA_FIELD_fieldname the value will be loaded from the named database field e.g. <code>_DATA_FIELD_integration_key</code>
                        <li> Customfield default flag is overridable with <i>study_field_customfield_UUID</i> role permissions and <i>study_field_flags</i> namespace setting
                        <li> Customfield can be mapped from another customfield by the means of <i>other_customfield_id</i>. Sysadmin and support users are allowed to map customfields between accounts. Order->Study and Study->Study mappings are supported currently. Order customfield does not override current Study customfield. Studies match orders by MRN and accession number.
                        <li> other_customfield_id parameter is DEPRECATED, use <a href="#customfield_mapping_add">/customfield/mapping/add</a> instead
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#customfield-idx">top</a>

        <p><a name="customfield_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Edit a custom field</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/customfield/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; uuid of the customfield<br>
                    <i>name</i> &bull; Name of the customfield (optional)<br>
                    <i>capture_on_share_code</i> &bull; Flag if the study type field should be captured during a share code exchange (optional)<br>
                    <i>capture_on_destination_search</i> &bull; Flag if the field should be captured during query retrieve on /destination/search call (optional)<br>
                    <i>display_order</i> &bull; Integer to order how the fields should be displayed (optional)<br>
                    <i>wrapped_dicom_only</i> &bull; Only capture for wrapped DICOM uploads during a share code exchange (optional)<br>
                    <i>dicom_only</i> &bull; Only capture for non-wrapped DICOM uploads during a share code exchange (optional)<br>
                    <i>required</i> &bull; Flag if the field is required (optional)<br>
                    <i>options</i> &bull; Additional options in JSON format (optional)<br>
                    <i>hl7_segment</i> &bull; Segment to map this field to in HL7 ORM messages. Valid values are (NTE|PID|PID1|PV1|PV2|OBR|DG1|OBX|CTI|BLG|ORC) (only applicable to study fields) (optional)<br>
                    <i>hl7_field</i> &bull; Segment field number to map  this field to in HL7 ORM messages. Valid values are 1 to 64. (only applicable to study fields) (optional)<br>
                    <i>hl7_component</i> &bull; Component number to map  this field to in HL7 ORM messages. Valid values are 1 to 64. (only applicable to study fields) (optional)<br>
                    <i>load_hl7</i> &bull; If this is set to a HL7 message type the value of this field will be updated from the hl7_segment, hl7_field and hl7_component from incoming HL7 messages of the matching message type (only applicable to study fields) (optional)<br>
                    <i>load_hl7_filter</i> &bull; Filter token for the load_hl7 option (only applicable to study fields) (optional)<br>
                    <i>dicom_tag</i> &bull; Dicom tag to map this field to. Format should be of form (1234,1234). (only applicable to study fields) (optional)<br>
                    <i>other_dicom_tags</i> &bull; JSON array of other DICOM tags to map this field to. (only applicable to study fields) (optional)<br>
                    <i>load_dicom_tag</i> &bull; Flag to load the current value from the study into this field. (only applicable if a dicom_tag is specified) (optional)<br>
                    <i>dicom_tag_ignore_empty</i> &bull; Flag to not map an empty custom field to the DICOM tag. (only applicable if a dicom_tag is specified) (optional)<br>
                    <i>load_from_sr</i> &bull; Load the value from the structured reports in the study. (only applicable to study fields) .(optional)<br>
                    <i>field_flag</i> &bull; Default customfield flag (optional)<br>
                    <i>ui_json</i> &bull; JSON for UI settings (optional)<br>
                    <i>load_order</i> &bull; If this flag is on the value of this field will be loaded from a customfield of the matching Order. The customfield is defined by the other_customfield_id parameter (optional)<br>
                    <i>other_customfield_id</i> &bull; Id of a customfield to map its value to this customfield's value (optional)<br>
                    <i>other_customfield_no_overwrite_with_blank</i> &bull; Flag if the customfield should be updated with a blank value (optional)<br>
                    <i>other_customfield_no_refresh_on_reshare</i> &bull; Flag if the customfield should be updated on Study reshare (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    customfield_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The object was not found. The <i>error_subtype</i> holds the name of the key for the object that can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to edit the customfield<br>
                    INVALID_FLAG &bull; An invalid flag was passed. The <i>error_subtype</i> holds the name of the invalid flag<br>
                    INVALID_INTEGER &bull; Invalid integer. The <i>error_subtype</i> holds the invalid integer.<br>
                    INVALID_JSON &bull; The field is not in valid JSON format. The <i>error_subtype</i> holds the name of the field<br>
                    INVALID_OPTIONS &bull; An option is invalid. The <i>error_subtype</i> holds the specific error message<br>
                    INVALID_HL7_OBJECT &bull; HL7 fields can only be applied to study fields<br>
                    INVALID_HL7_SEGMENT &bull; Invalid segment name<br>
                    INVALID_HL7_FIELD &bull; Invalid field number<br>
                    INVALID_DICOM_TAG_OBJECT &bull; DICOM tags can only be applied to study fields<br>
                    INVALID_DICOM_TAG &bull; The DICOM tag is invalid<br>
                    NO_DICOM_TAG_DEFINED &bull; The load_dicom_tag flag is set but the dicom_tag field is not defined<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> See the <a href="#customfield_add">/customfield/add</a> command notes for the format of the options field
                        <li> other_customfield_id, other_customfield_no_overwrite_with_blank and other_customfield_no_refresh_on_reshare parameters are DEPRECATED, use <a href="#customfield_mapping_add">/customfield/mapping/add</a> instead
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#customfield-idx">top</a>

        <p><a name="customfield_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a custom field</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/customfield/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; uuid of the customfield<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; uuid of the customfield<br>
                    <i>name</i> &bull; Name of the customfield<br>
                    <i>object</i> &bull; The object the customfield is associated with<br>
                    <i>type</i> &bull; The type of the custom field<br>
                    <i>capture_on_share_code</i> &bull; Flag if the study type field should be captured during a share code exchange<br>
                    <i>capture_on_destination_search</i> &bull; Flag if the field should be captured during query retrieve on /destination/search call<br>
                    <i>display_order</i> &bull; Integer to order how the fields should be displayed<br>
                    <i>wrapped_dicom_only</i> &bull; Flag if only capture for wrapped DICOM uploads during a share code exchange<br>
                    <i>dicom_only</i> &bull; Flag if only capture for non-wrapped DICOM uploads during a share code exchange<br>
                    <i>required</i> &bull; Flag if the field is required<br>
                    <i>options</i> &bull; Additional options in JSON format<br>
                    <i>hl7_segment</i> &bull; Segment to map this field to in HL7 ORM messages. (only applicable to study fields)<br>
                    <i>hl7_field</i> &bull; Segment field number to map  this field to in HL7 ORM messages. (only applicable to study fields)<br>
                    <i>hl7_component</i> &bull; Component number to map  this field to in HL7 ORM messages. Valid values are 1 to 64. (only applicable to study fields) (optional)<br>
                    <i>load_hl7</i> &bull; If this is set to a HL7 message type the value of this field will be updated from the hl7_segment, hl7_field and hl7_component from incoming HL7 messages of the matching message type (only applicable to study fields)<br>
                    <i>load_hl7_filter</i> &bull; Filter token for the load_hl7 option (only applicable to study fields)<br>
                    <i>dicom_tag</i> &bull; Dicom tag to map this field to.  (only applicable to study fields)<br>
                    <i>other_dicom_tags</i> &bull; JSON array of other DICOM tags to map this field to. (only applicable to study fields) (optional)<br>
                    <i>load_dicom_tag</i> &bull; Flag to load the current value from the study into this field. (only applicable if a dicom_tag is specified)<br>
                    <i>dicom_tag_ignore_empty</i> &bull; Flag to not map an empty custom field to the DICOM tag. (only applicable if a dicom_tag is specified)<br>
                    <i>load_from_sr</i> &bull; Load the value from the structured reports in the study<br>
                    <i>field_flag</i> &bull; Default customfield flag<br>
                    <i>ui_json</i> &bull; JSON for UI settings.<br>
                    <i>load_order</i> &bull; If this flag is on the value of this field will be loaded from a customfield of the matching Order. The customfield is defined by the other_customfield_id parameter<br>
                    <i>other_customfield_id</i> &bull; Id of a customfield to map its value to this customfield's value<br>
                    <i>other_customfield_no_overwrite_with_blank</i> &bull; Flag if the customfield should be updated with a blank value<br>
                    <i>other_customfield_no_refresh_on_reshare</i> &bull; Flag if the customfield should be updated on Study reshare<br>
                    <i>customfield_mapping</i> &bull; An array of the customfield mapping rules, each object in the array will have the following fields<br>
                    * <i>uuid</i> &bull; uuid if the mapping rule<br>
                    * <i>to_customfield_id</i> &bull; uuid of the destination customfield<br>
                    * <i>overwrite_with_blank</i> &bull; Flag if the destination customfield should be updated with a blank value<br>
                    * <i>refresh_on_reshare</i> &bull; Flag if the destination customfield should be updated on Study reshare<br>
                    * <i>refresh_on_edit</i> &bull; Flag if the destination customfield should be updated on the source customfield edit<br>
                    * <i>reverse_refresh_on_edit</i> &bull; Flag if the mapping should apply in reverse, i.e. to the customfield of the original study when a shared version of the study is edited<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    customfield_view or role_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    <a name="customfields"></a>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The customfield can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view the customfield<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li>Customfields mapped from orders (the <i>load_order</i> flag) do not overwrite existing Study cutomfield values
                        <li>When customfields are returned as part of an object the following fields are returned<br>
                            <ul>
                                <li> <i>uuid</i> &bull; Id of the custom field
                                <li> <i>name</i> &bull; Name of the custom field
                                <li> <i>type</i> &bull; Type of the custom field
                                <li> <i>value</i> &bull; Value of the custom field
                                <li> <i>required</i> &bull; Is the field required
                                <li> <i>options</i> &bull; Field options
                                <li> <i>ui_json</i> &bull; JSON for UI settings.
                            </ul>
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#customfield-idx">top</a>

        <p><a name="customfield_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete a customfield</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/customfield/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; uuid of the customfield<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    customfield_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The customfield can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to delete the customfield<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#customfield-idx">top</a>

        <p><a name="customfield_lookup"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Lookup a custom field by name</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/customfield/lookup</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; uuid of the account<br>
                    <i>name</i> &bull; Name of the customfield<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; Id of the customfield<br>
                    <i>object</i> &bull; Object it is associated with<br>
                    <i>type</i> &bull; Type of the customfield<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    You need to be a member of the account
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The customfield can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#customfield-idx">top</a>

        <p><a name="customfield_search"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Search and return the results for a search type customfield</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/customfield/search</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; uuid of the customfield<br>
                    <i>search</i> &bull; The value to search for (optional)<br>
                    <i>extended</i> &bull; If provided then below parameters are used instead of <i>search</i>, see Notes. (optional)<br>
                    <i>filter.*</i> &bull; <a href="#filter">Filters</a>, used for <i>search_source</i>=<code>account_users only (optional)<br>
                    <i>page.*</i> &bull; <a href="#pagination">Pagination</a>, used for <i>search_source</i>=<code>account_users only (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a>, used for <i>search_source</i>=<code>account_users only (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>results</i> &bull; An array of the search results<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    You need to be a member of the account<br>
                    For <i>search_source</i>=<code>account_users</code> and <i>extended=1</i> account_user_view or case_edit is required.
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The customfield can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                    NOT_A_SEARCH &bull; This is not a search type of customfield<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>If <i>extended=1</i> provided, then for <i>search_source</i>=<code>account_users</code> not <i>search</i> but <i>filter.*</i> are applied and data returned is the same way as in <a href="#account_user_list">/account/user/list</a>. Plus extended <i>filter.user_first_last.like=%part</i> matches "first last" like "%part".
                </td>
            </tr>
        </table>
        <a href="#customfield-idx">top</a>

        <p><a name="customfield_mapping_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add a mapping rule to the customfield</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/customfield/mapping/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>from_customfield_id</i> &bull; The source custom field id<br>
                    <i>to_customfield_id</i> &bull; The destination custom field id<br>
                    <i>overwrite_with_blank</i> &bull; Flag if the destination customfield should be updated with a blank value, 1 by default (optional)<br>
                    <i>refresh_on_reshare</i> &bull; Flag if the destination customfield should be updated on Study reshare, 1 by default (optional)<br>
                    <i>refresh_on_edit</i> &bull; Flag if the destination customfield should be updated on the source customfield edit, 1 by default (optional)<br>
                    <i>reverse_refresh_on_edit</i> &bull; Flag if the mapping should apply in reverse, ie to the customfield designated as a <i>from_customfield_id</i> of the original study when a shared version of the study is edited, 0 by default (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; uuid of the mapping rule<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    customfield_edit in the account of the source customfield
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                    NOT_FOUND &bull; The customfield can not be found, The <i>error_subtype</i> refers to a customfield by the following values: FROM_CUSTOMFIELD or TO_CUSTOMFIELD<br>
                    ALREADY_EXISTS &bull; The mapping rule already exists<br>
                    INVALID_FLAG &bull; An invalid flag was passed. The <i>error_subtype</i> holds the name of the invalid flag<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    The calling user should be a support or sysadmin user to add a mapping rule to map custom fields between accounts.
                </td>
            </tr>
        </table>
        <a href="#customfield-idx">top</a>

        <p><a name="customfield_mapping_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Edit a customfield mapping rule</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/customfield/mapping/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; uuid of the customfield mapping rule<br>
                    <i>overwrite_with_blank</i> &bull; Flag if the destination customfield should be updated with a blank value, 1 by default (optional)<br>
                    <i>refresh_on_reshare</i> &bull; Flag if the destination customfield should be updated on Study reshare, 1 by default (optional)<br>
                    <i>refresh_on_edit</i> &bull; Flag if the destination customfield should be updated on the source customfield edit, 1 by default (optional)<br>
                    <i>reverse_refresh_on_edit</i> &bull; Flag if the mapping should apply in reverse, ie to the customfield designated as a <i>from_customfield_id</i> of the original study when a shared version of the study is edited, 0 by default (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    customfield_edit in the account of the source customfield
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                    NOT_FOUND &bull; The customfield mapping rule can not be found<br>
                    INVALID_FLAG &bull; An invalid flag was passed. The <i>error_subtype</i> holds the name of the invalid flag<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#customfield-idx">top</a>

        <p><a name="customfield_mapping_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete a customfield mapping rule</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/customfield/mapping/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; uuid of the customfield mapping rule<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    customfield_edit in the account of the source customfield
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                    NOT_FOUND &bull; The customfield mapping rule can not be found<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#customfield-idx">top</a>

        <a name="webhook"><h3>Webhook commands</h3></a>

        <p><a name="webhook_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>List the webhooks for the account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/webhook/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; uuid of the account<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>webhooks</i> &bull; An array of the webhooks.  Each object holds the following same fields as the <a href="#webhook_get">/webhook/get</a> call<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    webhook_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view this list<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#webhook-idx">top</a>

        <p><a name="webhook_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add a webhook to the account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/webhook/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; uuid of the account<br>
                    <i>node_id</i> &bull; uuid of the node to proxy the webhook through (optional)<br>
                    <i>name</i> &bull; Name of the webhook<br>
                    <i>event</i> &bull; Event to call it on (See the notes for the available events)<br>
                    <i>url</i> &bull; URL to call<br>
                    <i>method</i> &bull; Method to call it with (POST|GET|POST_JSON|PUT|GET_JSON)<br>
                    <i>suspended</i> &bull; This webhook is suspended and not triggered (optional)<br>
                    <i>parameters</i> &bull; A JSON object of the parameter names and values (optional)<br>
                    <i>retry</i> &bull; Retry the webhook if it fails (optional)<br>
                    <i>sid_user_id</i> &bull; UUID of the user to generate a sid as (optional)<br>
                    <i>filter_field</i> &bull; Name of the study field (by default) or another object's field (should have prefix like "webhook.") to filter on (optional)<br>
                    <i>filter_regexp</i> &bull; Regular expression to match the value of the filter_field against (optional)<br>
                    <i>once</i> &bull; Flag that this webhook should only be run once for a specific study (optional)<br>
                    <i>by_uid</i> &bull; Flag to expand the once search to include studies with the same study_uid (optional)<br>
                    <i>by_accession_number</i> &bull; Flag to expand the once search to include studies with the same accession_number (optional)<br>
                    <i>by_webhook_event</i> &bull; Flag to fire WEBHOOK_FAILED once at final unsuccessful try of a failing webhook (optional)<br>
                    <i>delay</i> &bull; Number of seconds to delay running this webhook for after it is triggered (optional)<br>
                    <i>max_age</i> &bull; Ignore studies that are more than this number of days old based on the study_date (optional)<br>
                    <i>auth</i> &bull; A JSON hash with the authentication details (optional)<br>
                    <i>cron</i> &bull; Cron timing string for CRON events e.g <code>0 9 * * mon-fri</code>(optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; uuid of the webhook<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    webhook_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    ACCOUNT_NOT_FOUND &bull; The account can not be found<br>
                    NODE_NOT_FOUND &bull; The node can not be found<br>
                    USER_NOT_FOUND &bull; The basic authentication user can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to add a webhook to this account<br>
                    INVALID_METHOD &bull; An invalid method was passed<br>
                    INVALID_EVENT &bull; An invalid event was passed<br>
                    INVALID_JSON &bull; The parameters field is not in valid JSON format.<br>
                    NOT_HASH &bull; The parameter or auth field is not a hash.<br>
                    SID_USER_NOT_FOUND &bull; The sid user can not be found<br>
                    SID_USER_NOT_IN_ACCOUNT &bull; The sid user is not a member of this account<br>
                    INVALID_REGEXP &bull; Invalid regular expression<br>
                    INVALID_FILTER_FIELD &bull; Invalid filter field name<br>
                    INCOMPLETE_FILTER &bull; Both a field and regexp are required<br>
                    INVALID_TRANSFORM_CONDITION &bull; The transform condition is invalid<br>
                    SFDC_NOT_HASH &bull; The SFDC auth value is not a JSON hash<br>
                    SFDC_JWT_NOT_HASH &bull; The SFDC auth value is not a JSON hash<br>
                    SFDC_MISSING_FIELDS &bull; Fields are missing for the SFDC auth hash<br>
                    SFDC_JWT_MISSING_FIELDS &bull; Fields are missing for the SFDC auth hash<br>
                    FDC_JWT_INVALID_PRIVATE_KEY &bull; The private key is invalid
                    CUSTOM_NOT_HASH &bull; The custom auth value is not a JSON hash<br>
                    INVALID_URL &bull; The url value is invalid<br>
                    INVALID_CRON &bull; The cron value is invalid<br>
                    NOT_WITH_CRON &bull; The delay or retry option can not be used for cron events<br>
                    SID_USER_PRIVILEGE_ESCALATION &bull; The user for sid_user_id has higher privileges that the calling user<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> GET and POST will send the parameters and values as a URL encoded POST or GET (type application/x-www-form-urlencoded).
                        <li> POST_JSON will POST a JSON hash (type application/json).
                        <li> GET_JSON will send a GET request with JSON data (type application/json).
                        <li> If the parameter value is of the form study.field where field is a field in /study/get the value will be set to the value of that field for the triggering study. e.g. name=>study.patient_name
                        <li> If the parameter value is of the form study.customfield-CUSTOMFIELD_UUID it will be set to the customfield value of the triggering study.
                        <li> If the parameter hash is of the form <code>{"_REPLACE_WITH_JSON_":"study.FIELD_NAME"}</code> the parameters will be replaced with a JSON evaluated of the value of the named field
                        <li> The available events are:
                        <ul>
                            <li>STUDY_SYNC - Called when a study is fully stored in the system
                            <li>STUDY_REQUEST_APPROVAL - Called when a study is queued for approval
                            <li>STUDY_APPROVE - Called when a study is approved
                            <li>STUDY_SHARE - Called when an study is successfully shared (after any approvals)
                            <li>STUDY_WAS_SHARED - Called on the study that was successfully shared (after any approvals)
                            <li>ROUTE_RULE - This webhook is called by routing rules
                            <li>STUDY_PUSH_STATUS - Called when a study push status is updated from a destination that has the fire_webhooks flag enabled
                            <li>STUDY_UPLOAD_FAIL - Called when an individual study upload fails
                            <li>STUDY_UPLOAD_SUCCESS - Called when an individual study upload succeeds
                            <li>STUDY_UPLOAD_START - Called when a study upload session starts
                            <li>STUDY_UPLOAD_END - Called when a study upload session ends
                            <li>STUDY_UPLOAD_LINK - Called when a study upload link is accessed
                            <li>STUDY_STATUS - Called when the study status changes
                            <li>STUDY_REPORT - Called when a report is added to a study
                            <li>STUDY_REPORT_REMOVE - Called when a report is removed from a study
                            <li>STUDY_RADREPORT - Called when a rad report is attached to a study
                            <li>STUDY_RADREPORT_SIGNED - Called when a rad report is signed
                            <li>STUDY_THIN_FAIL - Called when a thin study fails to retrieve
                            <li>STUDY_VIEW - Called when a study is viewed
                            <li>STUDY_DOWNLOAD - Called when the the study is downloaded
                            <li>STUDY_HL7 - Called when an HL7 message is attached to the study
                            <li>STUDY_FIRST_IMAGE - Called when the first image(s) for the study hit storage
                            <li>STUDY_DUPLICATE_UPLOAD - Called when a study is re-uploaded
                            <li>STUDY_VIEWER_ERROR - Called when a viewer error occurs
                            <li>STUDY_ANNOTATION - Called when an annotation is added to the study
                            <li>STUDY_AI_QUESTION - Called when an answer to the AI question is returned. e.g. <code>STUDY_AI_has_scanned_docs</code>
                            <li>NAMESPACE_AI_QUESTION - Called when an answer to the AI question is returned. e.g. <code>NAMESPACE_AI_run_custom_code_namespace_scripts</code>
                            <li>STUDY_REJECT - Called when the share of the study is rejected
                            <li>STUDY_DELETE - Called when the the study is deleted. Use the study_deleted object for parameters e.g. <code>study_deleted.study_uid</code>
                            <li>STUDY_REPORT_VIEW - Called when a report is viewed
                            <li>STUDY_EDIT - Called when a study is edited via the UI
                            <li>STUDY_MOVE - Called when a study is moved to a namespace
                            <li>STUDY_MERGE - Called for a study when another study merges in
                            <li>STUDY_MERGE_FAIL - Called for a study when the storage fails to merge in another study
                            <li>STUDY_SPLIT - Called when a study is split
                            <li>HL7_ADD - Called when an HL7 is added to Ambra
                            <li>DESTINATION_SEARCH_RESULTS - Called for the results (/node/found) for a /destination/search query
                            <li>DESTINATION_FETCH_FAIL - Called when a /destination/retrieve fails
                            <li>DESTINATION_FETCH_SUCCESS - Called when a /destination/retrieve succeeds
                            <li>WEBHOOK_FAILED - Called when a webhook fails
                            <li>MANUAL - The webhook needs to be manually or programmatically triggered
                            <li>CRON - The webhook is time triggered by the cron value
                            <li>STUDY_DEID_FAIL - Called for a study when the storage fails to de-identify it
                            <li>STUDY_IMAGE_COUNT - Called when image count for a study changes, not called for new studies
                            <li>STUDY_COPY - Called when an study is successfully copied into a namespace
                            <li>QUERY_ADD - Called when a new Query is issued
                            <li>QUERY_STATUS - Called when the Query status changes
                            <li>SITE_QUALIFIED - Called when the Site is qualified for a trial
                            <li>QCTASK_COMPLETED - Called when the QC task is deleted
                            <li>QCTASK_STATUS - Called when the QC task status changes
                            <li>ACCOUNT_USER_ADD - Called when a user is added to the account
                            <li>ACCOUNT_USER_EDIT - Called when a user in the account is edited
                            <li>ACCOUNT_USER_DELETE - Called when a user is removed from the account
                        </ul>
                        <li> For the STUDY_PUSH_STATUS event the destination fields are available as destination.field and the push status as study_push.status for the letter status or study_push.success for a 1/0 flag where 0 is success and 1 is failed
                        <li> For the STUDY_UPLOAD_FAIL event the reason the upload failed is available in the study.failed_upload_reason field
                        <li> The information for the user who fired the webhook is available in the user.* fields e.g. user.name
                        <li> If the retry flag is set on the web hook will retry up to three times until it succeeds. The spacing on the retries is a minute later, then 10 minutes later and then an hour later.
                        <li> The sid_user_id is useful for calling API methods that require a sid. A sid will be generated and added to the call parameters.
                        <li> The filter_field can be a customfield in the <code>customfield-CUSTOMFIELD_UUID</code> format
                        <li> If the event is STUDY_RADREPORT or STUDY_RADREPORT_SIGNED both the study.* and radreport.* fields will be available for use
                        <li> If the event is STUDY_REPORT or STUDY_REPORT_REMOVE and the filter_field is S-attachment_mime_type the mime type of the attachment will be filtered against the filter regular expression
                        <li> If the event is STUDY_HL7 or HL7_ADD and the filter_field is S-hl7_type the HL7 message type will be filtered against the filter regular expression. The fields in the HL7 object related to the Hl7 message that triggered the webhook are also for use in the webhook e.g. hl7.uuid. Hl7 message fields are accessible through hl7.hash prefix e.g. hl7.hash.PID_5
                        <li> If the event is STUDY_HL7 or HL7_ADD and the filter_field is S-hl7_transform_condition the filter_field_regexp should be a transform condition expression to match against the HL7 message. See /hl7/transform/add for the format for the transform condition format.
                        <li> A <a href="#filter">filter</a> expression can be passed in the filter_field_regexp if the filter_field is S-list_filter (for studies) or OBJECT_TYPE.S-list_filter (for other objects). The filter will be evaluated against the object allowing fine grained and multi-field filtering e.g. <code>filter.phi_namespace.equals=UUID&filter.study_push_status.equals=S</code>
                        <li> If multiple filter expressions are required pass JSON arrays to both the filter_field and filter_regexp fields. The webhook will only run if all the filter conditions are satisfied.
                        <li> If the once flag is set the webhook is only run one time (after the flag is set) for a specific study. If by_uid or by_accession_number flag is specified as well the exclusion is expanded to include studies with the same study_uid or accession_number
                        <li> If the once flag is set with the additional by_webhook_event then the webhook is only run once after a series of retries of a failing webhook (and also in case no retries enabled).
                        <li> For the WEBHOOK_FAILED event the parameter values from the failed webhook will be available for use as well as the webhook.* values e.g. webhook.name, webhook.last_error etc.
                        <li> For the ROUTE_RULE event the <a href="#study_manual_route">/study/manual/route</a> parameter values will be available for use through parameters.* fields
                        <li> For the STUDY_UPLOAD_START and STUDY_UPLOAD_END event the parameters passed to /webhook/event are available in the webhook_event.* fields e.g. webhook_event.study_count, webhook_event.integration_key, webhook_event.namespace_id, webhook_event.share_code. These fields can also be used in the filter_field to filter the webhook.
                        <li> For the STUDY_UPLOAD_LINK event and other events for session created via a study upload link the following additional parameters are available: link_usage.client_email, link_usage.client_address, link_usage.link_id, link_usage.account_id also the user who is associated with or created the link is available via the <code>user_account.*</code> parameters
                        <li> For the STUDY_ANNOTATION event the annotation data is available as <code>annotation.*</code> parameters
                        <li> For the NAMESPACE_AI_* event the namespace data is available as <code>namespace.*</code> parameters, the question data is available as <code>ai_question.*</code> parameters
                        <li> For the DESTINATION_SEARCH_RESULTS event the returned study list is in the <code>destination_search.results</code> field and the count is in the <code>destination_search.count</code> field, customfields passed to <a href="#destination_search">/destination/search</a> are in the <code>destination_search.customfield-*</code> fields.
                        <li> For the DESTINATION_FETCH_FAIL and DESTINATION_FETCH_SUCCESS events the details are available in the following fields <code>study_fetch.(accession_number|study_uid|patientid|destination_name|destination_uuid|customfield-*)</code> and study.* fields for the DESTINATION_FETCH_SUCCESS event
                        <li> For the ACCOUNT_USER_ADD and ACCOUNT_USER_EDIT events the account user data is available as <code>user_account.*</code> parameters
                        <li> The auth fields is a JSON hash with a single key that describes the type of auth and the value for the key is a hash with the auth details. The following types of auth are supported.
                            <ul>
                                <li> sfdc - <a href="https://developer.salesforce.com/docs/atlas.en-us.api_rest.meta/api_rest/intro_understanding_username_password_oauth_flow.htm">Salesforce Username-Password OAuth Authentication</a>. The following keys must be in the details hash, client_id, client_secret, username, and password. e.g. <nobr><code>{"sfdc":{"client_id":"3MVG9lK","client_secret":"1955279","username":"testuser@salesforce.com","password":"mypassword1234"}}</code></nobr>. /webhook/get will return the md5 of the password.
                                <li> sfdc_jwt - <a href="https://help.salesforce.com/articleView?id=remoteaccess_oauth_jwt_flow.htm">Salesforce JWT Authentication</a>. The following keys must be in the details hash iss, sub, aud, private_key, salesforce_url. /webhook/get will return the md5 of the private key. To convert the private key to a single line for JSON usage run the following command<br><code>jq -sR < privatekey.pem</code>
                                <li> token_from_webhook - Get the access_token from the JSON returned from another webhook. Put the uuid of a manual webhook into the webhook_id key of the hash
                                <li> basic - a hash with username and password keys and values
                                <li> custom - a hash of keys and values that will be passed in the HTTP header of the webhook e.g. <nobr><code>{"custom":{"name":"test"}}</code></nobr>
                            </ul>
                        <li> For the QUERY_ADD and QUERY_STATUS events the query data is available as <code>query.*</code> parameters
                        <li> For the SITE_QUALIFIED event the site and group data is available as <code>site.*</code> and <code>group.*</code> parameters respectively. The webhook can be defined in both site management and trial accounts.
                        <li> For the QCTASK_COMPLETED and QCTASK_STATUS events the QC task data is available as <code>qctask.*</code> parameters.
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#webhook-idx">top</a>

        <p><a name="webhook_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Edit a webhook</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/webhook/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; uuid of the webhook<br>
                    <i>name</i> &bull; Name of the webhook (optional)<br>
                    <i>event</i> &bull; Event to call it on (optional see add command for options)<br>
                    <i>url</i> &bull; URL to call (optional)<br>
                    <i>method</i> &bull; Method to call it with (optional see add command for options)<br>
                    <i>suspended</i> &bull; This webhook is suspended and not triggered (optional)<br>
                    <i>parameters</i> &bull; A JSON object of the parameter names and values (optional see add command for options)<br>
                    <i>node_id</i> &bull; uuid of the node to proxy the webhook through (optional)<br>
                    <i>retry</i> &bull; Retry the webhook if it fails (optional)<br>
                    <i>sid_user_id</i> &bull; UUID of the user to generate a sid as (optional)<br>
                    <i>filter_field</i> &bull; Name of the field to filter on (optional)<br>
                    <i>filter_regexp</i> &bull; Regular expression to match the value of the filter_field against (optional)<br>
                    <i>once</i> &bull; Flag that this webhook should only be run once for a specific study (optional)<br>
                    <i>by_uid</i> &bull; Flag to expand the once search to include studies with the same study_uid (optional)<br>
                    <i>by_accession_number</i> &bull; Flag to expand the once search to include studies with the same accession_number (optional)<br>
                    <i>by_webhook_event</i> &bull; Flag to fire WEBHOOK_FAILED once at final unsuccessful try of a failing webhook (optional)<br>
                    <i>delay</i> &bull; Number of seconds to delay running this webhook for after it is triggered (optional)<br>
                    <i>max_age</i> &bull; Ignore studies that are more than this number of days old based on the study_date (optional)<br>
                    <i>auth</i> &bull; A JSON hash with the authentication details (optional)<br>
                    <i>cron</i> &bull; Cron timing string for CRON events (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    webhook_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The webhook can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to edit the webhook<br>
                    INVALID_METHOD &bull; An invalid method was passed<br>
                    INVALID_EVENT &bull; An invalid event was passed<br>
                    INVALID_JSON &bull; The parameters field is not in valid JSON format.<br>
                    NOT_HASH &bull; The parameter field is not a hash.<br>
                    NODE_NOT_FOUND &bull; The node can not be found<br>
                    SID_USER_NOT_FOUND &bull; The sid user can not be found<br>
                    SID_USER_NOT_IN_ACCOUNT &bull; The sid user is not a member of this account<br>
                    INVALID_REGEXP &bull; Invalid regular expression<br>
                    INVALID_FILTER_FIELD &bull; Invalid filter field name<br>
                    INCOMPLETE_FILTER &bull; Both a field and regexp are required<br>
                    INVALID_TRANSFORM_CONDITION &bull; The transform condition is invalid<br>
                    SFDC_NOT_HASH &bull; The SFDC auth value is not a JSON hash<br>
                    SFDC_MISSING_FIELDS &bull; Fields are missing for the SFDC auth hash<br>
                    INVALID_URL &bull; The url value is invalid<br>
                    INVALID_CRON &bull; The cron value is invalid<br>
                    NOT_WITH_CRON &bull; The delay or retry option can not be used for cron events<br>
                    SID_USER_PRIVILEGE_ESCALATION &bull; The user for sid_user_id has higher privileges that the calling user<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#webhook-idx">top</a>

        <p><a name="webhook_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a webhook</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/webhook/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; uuid of the webhook<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; uuid of the webhook<br>
                    <i>name</i> &bull; Name of the webhook<br>
                    <i>event</i> &bull; Event to call it on<br>
                    <i>url</i> &bull; URL to call<br>
                    <i>method</i> &bull; Method to call it with<br>
                    <i>suspended</i> &bull; This webhook is suspended and not triggered<br>
                    <i>parameters</i> &bull; An object of the parameter names and values<br>
                    <i>node_id</i> &bull; uuid of the node to proxy the webhook through<br>
                    <i>retry</i> &bull; Retry the webhook if it fails<br>
                    <i>sid_user_id</i> &bull; UUID of the user to generate a sid as<br>
                    <i>filter_field</i> &bull; Name of the field to filter on<br>
                    <i>filter_regexp</i> &bull; Regular expression to match the value of the filter_field against<br>
                    <i>once</i> &bull; Flag that this webhook should only be run once for a specific study<br>
                    <i>by_uid</i> &bull; Flag to expand the once search to include studies with the same study_uid<br>
                    <i>by_accession_number</i> &bull; Flag to expand the once search to include studies with the same accession_number<br>
                    <i>by_webhook_event</i> &bull; Flag to fire WEBHOOK_FAILED once at final unsuccessful try of a failing webhook<br>
                    <i>last_error</i> &bull; Error text from the last time this webhook failed<br>
                    <i>delay</i> &bull; Number of seconds to delay running this webhook for after it is triggered<br>
                    <i>max_age</i> &bull; Ignore studies that are more than this number of days old based on the study_date<br>
                    <i>auth</i> &bull; A JSON hash with the authentication details<br>
                    <i>cron</i> &bull; Cron timing string for CRON events<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    webhook_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The webhook can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view the webhook<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#webhook-idx">top</a>

        <p><a name="webhook_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete a webhook</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/webhook/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; uuid of the webhook<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    webhook_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The webhook can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to delete the webhook<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#webhook-idx">top</a>

        <p><a name="webhook_trigger"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Manually trigger a webhook</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/webhook/trigger</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; uuid of the webhook<br>
                    <i>study_id</i> &bull; uuid of the study to fire the webhook for<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    webhook_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The webhook or study can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to trigger the webhook<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    This is an administrative call that can be used to re-fire triggers
                </td>
            </tr>
        </table>
        <a href="#webhook-idx">top</a>

        <p><a name="webhook_run"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Run a webhook and return the results</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/webhook/run</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; uuid of the webhook<br>
                    <i>study_id</i> &bull; uuid of the study to run the webhook for<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>results</i> &bull; The content returned from the webhook call<br>

                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    webhook_run
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The webhook or study can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to run the webhook<br>
                    INVALID_WEBHOOK_SETUP &bull; The webhook must be a MANUAL webhook with no delay or retry options enabled
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> Additional parameters can be passed and will be inserted into the webhook if the webhook parameters value has fields named "parameters.PARAMETER_NAME"
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#webhook-idx">top</a>

        <p><a name="webhook_event"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Send an event that may trigger a webhook</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/webhook/event</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>type</i> &bull; The type of event (STUDY_UPLOAD_START|STUDY_UPLOAD_END)<br>
                    <i>(namespace_id || share_code)</i> &bull; The namespace or share code for the event<br>
                    <i>integration_key</i> &bull; The integration key associated with the event (optional)<br>
                    <i>study_count</i> &bull; The number of studies associated with the event (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    INVALID_TYPE &bull; Invalid event type<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#webhook-idx">top</a>

        <p><a name="webhook_email"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Send an email (a helper method for webhooks)</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/webhook/email</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>webhook_id</i> &bull; The uuid of the calling webhook<br>
                    <i>to</i> &bull; The email address(es) to send the email to<br>
                    <i>subject</i> &bull; The subject of the email<br>
                    <i>text</i> &bull; The text part of the email<br>
                    <i>html</i> &bull; The HTML part of the email<br>
                    <i>template_id</i> &bull; The email template UUID to be used<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    This can only be called by a webhook
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_PERMITTED &bull; This is not a call from a valid webhook
                    PARSE_FAILED &bull; Template parsing failed for a field. The <i>error_subtype</i> holds the name of the field<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> You can pass the template_id parameter to use a preexisting mail template or to, subject and text/html parameters as separate values.
                        <li> The to, subject, text/html fields will be evaluated as text templates
                        <li> The to, subject, text/html fields or a template will be evaluated using any other parameters passed in the call .e.g if the subject is <code>Hi {$first_name}</code> and the parameter first_name is set to Joe the subject will be <code>Hi Joe</code>
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#webhook-idx">top</a>

        <a name="link"><h3>Link commands</h3></a>
        Links allow you to generate static URLs that give controlled access to the application

        <p><a name="link_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>List the links for the study, user or account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/link/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>(study_id || user_id || account_id)</i> &bull; uuid of the study, user or account to get the links for<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>links</i> &bull; An array of the links.  Each object holds the following same fields as the <a href="#link_get">/link/get</a> call<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    link_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view this list<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#link-idx">top</a>

        <p><a name="link_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add a link</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/link/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>(study_id || filter && account_id || namespace_id || user_id && account_id)</i> &bull; uuid of the study or a JSON hash of the study filter expression and the account_id or the namespace_id if the action is STUDY_UPLOAD or the user_id and the account_id if the action is LOGIN<br>
                    <i>action</i> &bull; Link action (STUDY_LIST|STUDY_VIEW|STUDY_UPLOAD|LOGIN)<br>
                    <i>password</i> &bull; Link password (optional)<br>
                    <i>password_max_attempts</i> &bull; The maximum number of failed password attempt (optional)<br>
                    <i>password_is_dob</i> &bull; Flag that the password is the patient_birth_date for the study (study_id is required) (optional)<br>
                    <i>skip_email_prompt</i> &bull; Skip the prompt for email step (optional)<br>
                    <i>pin_auth</i> &bull; An account member email and PIN authentication is required (optional) <br>
                    <i>include_priors</i> &bull; Include prior studies (optional)<br>
                    <i>max_hits</i> &bull; The maximum number of times the link can be used (optional)<br>
                    <i>minutes_alive</i> &bull; The maximum number of minutes the link will be alive for (optional)<br>
                    <i>email</i> &bull; Email the link to these addresses (optional)<br>
                    <i>mobile_phone</i> &bull; Send the link to this phone number (optional)<br>
                    <i>message</i> &bull; Message to include in the email (optional)<br>
                    <i>share_on_view</i> &bull; Flag to share the study with the email after it is viewed (optional)<br>
                    <i>notify</i> &bull; Comma or space separated list of additional emails to notify of link usage (optional)<br>
                    <i>use_share_code</i> &bull; Flag to use the namespace share code settings for a STUDY_UPLOAD (optional)<br>
                    <i>share_code</i> &bull;  share code for a STUDY_UPLOAD (optional)<br>
                    <i>parameters</i> &bull; JSON array of parameters to add to the redirect URL or return in /namespace/share_code if an upload e.g. <code>["integration_key","abc"]</code> Where <code>abc</code> is integration key. (optional) <br>
                    <i>meeting_id</i> &bull; UUID of the meeting to associate the link with (optional)<br>
                    <i>anonymize</i> &bull; Anonymization rules to the applied to any STUDY_UPLOAD done with this link. Rules are formatted as per the rules parameter in <a href="#namespace_anonymize">/namespace/anonymize</a>  (optional)<br>
                    <i>prompt_for_anonymize</i> &bull; Flag to prompt if the anonymization rules should be applied on ingress<br>
                    <i>referer</i> &bull; The link can only be accessed from the specified referer. The referer can be a regexp to match multiple referers (optional)<br>
                    <i>acceptance_required</i> &bull; Flag that acceptance of TOS is required (optional) <br>
                    <i>mfm_page</i> &bull; Flag to launch the MFM page instead of the viewer (optional) <br>
                    <i>charge_amount</i> &bull; Amount to charge in pennies before the link can be accessed (optional) <br>
                    <i>charge_currency</i> &bull; Charge currency (optional) <br>
                    <i>charge_description</i> &bull; Charge description (optional) <br>
                    <i>upload_match</i> &bull; A JSON hash of DICOM tags and regular expressions they must match uploaded against this link (optional) <br>
                    <i>upload_study_customfields</i> &bull; A JSON hash of customfields that will be mapped to a study on study upload. A key is a customfield UUID, a value is a value for the field (optional) <br>
                    <i>workflow</i> &bull; The workflow this link is intended for (patient_studies) (optional)<br>
                    <i>ui_json</i> &bull; JSON for UI settings (optional)<br>
                    <i>inherit_permissions</i> &bull; Flag for the link sessions to inherit permissions from the user stored in the <i>user_id</i> link attribute (optional)<br>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The link uuid<br>
                    <i>url</i> &bull; URL for the link which will take you to the UI entry point for links to enter email, password etc.<br>
                    <i>redirect_url</i> &bull; URL for the /link/redirect API  which will take you directly to the study viewer or uploader<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    link_edit for STUDY_(VIEW|LIST) or LOGIN and link_edit_upload for STUDY_UPLOAD<br>
                    can_proxy_login is required to pass the <i>user_id</i> parameter
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The patient or study could not be found. The <i>error_subtype</i> holds the type of object not found<br>
                    NOT_PERMITTED &bull; You are not permitted to create links<br>
                    INVALID_ACTION &bull; An invalid action was passed<br>
                    INVALID_EMAIL &bull; An invalid email address was passed<br>
                    INVALID_PHONE &bull; An invalid cellular phone number was passed<br>
                    NOT_LIST &bull; The field is not a JSON array. The <i>error_subtype</i> holds the name of the field<br>
                    INVALID_JSON &bull; The field is not in valid JSON format. The <i>error_subtype</i> holds the name of the field<br>
                    NOT_HASH &bull; The rules field is not a hash <br>
                    INVALID_FIELD_NAME &bull; The field name in the rules hash is invalid. The <i>error_subtype</i> holds the invalid field name<br>
                    INVALID_REGEXP &bull; Invalid regular expression. The <i>error_subtype</i> holds the invalid regexp.<br>
                    INVALID_PHI_FIELD &bull; The password_is_phi field is invalid or a study_id was not passed<br>
                    VALIDATE &bull; A validation error. The <i>error_subtype</i> holds the details on the error<br>
                    INVALID_CHARGE &bull; The charge is invalid. The <i>error_subtype</i> holds the details on the error<br>
                    INVALID_UPLOAD_MATCH &bull; The upload_match is invalid. The <i>error_subtype</i> holds the details on the error<br>
                    VALIDATION_FAILED &bull; The workflow parameter validation failed<br>
                    INSECURE_PARAMETERS &bull; The LOGIN link is not a one-time link and not secured by a password<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> The STUDY_LIST action will open up the study in the list view
                        <li> The STUDY_VIEW action will open up the study in the viewer
                        <li> The STUDY_UPLOAD action will allow the user to upload a study to the namespace
                        <li> The LOGIN action will start a new session as the link user and open up the study in the list view
                        <li> If a filter is used STUDY_LIST or STUDY_VIEW is determined by the count of the studies that match the filter. More than 1 is opened in a list.
                        <li> The parameters are an array of parameter keys and values and should not be URL encoded e.g. <code>["name","jack frost","age",30]</code>
                        <li> If the password_is_dob feature is used the password can be in any date format and it will be parsed and compared against the study date
                        <li> A sample upload_match field to restrict the study to a specific birth date would look like this <code>{"(0010,0030)":"/^19800401$/"}</code>
                        <li> The email parameter can contain comma separated list of emails. Only the first one will be saved as link's email attribute.
                        <li> The user_id will be recorded as a proxy user for the link events in the audit trail.
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#link-idx">top</a>

        <p><a name="link_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a link</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/link/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; Id of the link<br>
                    <i>short_id</i> &bull; Short ID of the link for the 'patient_studies' workflow<br>
                    <i>url</i> &bull; URL for the link which will take you to the UI entry point for links to enter email, password etc.<br>
                    <i>redirect_url</i> &bull; URL for the /link/redirect API  which will take you directly to the study viewer or uploader<br>
                    <i>description</i> &bull; Description of the link<br>
                    <i>email</i> &bull; Email address the link was sent to<br>
                    <i>mobile_phone</i> &bull; Cellular phone number the link was sent to<br>
                    <i>message</i> &bull; Message to include in the email<br>
                    <i>share_on_view</i> &bull; Flag to share the study with the email after it is viewed<br>
                    <i>notify</i> &bull; Comma or space separated list of additional emails to notify of link usage<br>
                    <i>study_id</i> &bull; uuid of the study<br>
                    <i>filter</i> &bull; The filter expression<br>
                    <i>user_id</i> &bull; The user id<br>
                    <i>account_id</i> &bull; The account id<br>
                    <i>action</i> &bull; Link action<br>
                    <i>has_password</i> &bull; Flag if the link has a password or not<br>
                    <i>password_is_dob</i> &bull; Flag that the password is the patient_birth_date for the study<br>
                    <i>skip_email_prompt</i> &bull; Skip the prompt for email step<br>
                    <i>pin_auth</i> &bull; An account member email and PIN authentication is required<br>
                    <i>password_max_attempts</i> &bull; The maximum number of failed password attempt<br>
                    <i>is_meeting</i> &bull; Flag if the link is for a meeting<br>
                    <i>max_hits</i> &bull; The maximum number of times the link can be used<br>
                    <i>include_priors</i> &bull; Include prior studies<br>
                    <i>minutes_alive</i> &bull; The maximum number of minutes the link will be alive for<br>
                    <i>namespace_id</i> &bull; Id of the namespace for upload links<br>
                    <i>namespace_name</i> &bull; Name of the namespace for upload links<br>
                    <i>use_share_code</i> &bull; Flag to use the namespace share code settings for a STUDY_UPLOAD <br>
                    <i>parameters</i> &bull; JSON array parameters to add to the redirect URL <br>
                    <i>anonymize</i> &bull; Any anonymization rules<br>
                    <i>prompt_for_anonymize</i> &bull; Flag to prompt if the anonymization rules should be applied on ingress<br>
                    <i>referer</i> &bull; The link can only be accessed from the specified referer<br>
                    <i>acceptance_required</i> &bull; Flag that acceptance of TOS is required<br>
                    <i>mfm_page</i> &bull; Flag to launch the MFM page instead of the viewer<br>
                    <i>charge_amount</i> &bull; Amount to charge in pennies before the link can be accessed<br>
                    <i>charge_currency</i> &bull; Charge currency<br>
                    <i>charge_description</i> &bull; Charge description<br>
                    <i>upload_match</i> &bull; A JSON hash of DICOM tags and regular expressions they must match uploaded against this link<br>
                    <i>upload_study_customfields</i> &bull; A JSON hash of customfields that will be mapped to a study on study upload<br>
                    <i>created</i> &bull; Created datetime stamp of the link<br>
                    <i>workflow</i> &bull; The workflow this link is intended for<br>
                    <i>ui_json</i> &bull; JSON for UI settings<br>
                    <i>inherit_permissions</i> &bull; Flag for the link sessions to inherit permissions from the user stored in the <i>user_id</i> link attribute<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    link_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The link was not found<br>
                    NOT_PERMITTED &bull; You are not permitted to view the link<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#link-idx">top</a>

        <p><a name="link_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete a link</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/link/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; Id of the link<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    link_edit or link_edit_upload
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The link was not found<br>
                    NOT_PERMITTED &bull; You are not permitted to delete the link<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> Any active sessions against the link are dropped
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#link-idx">top</a>

        <p><a name="link_status"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get the status of a link</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/link/status</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>(uuid || pin)</i> &bull; Id or PIN of the link<br>
                    <i>link_charge_id</i> &bull; The uuid of the prior charge against this link (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>action</i> &bull; Link action<br>
                    <i>has_password</i> &bull; Flag if the link has a password or not<br>
                    <i>is_meeting</i> &bull; Flag if the link is for a meeting<br>
                    <i>skip_email_prompt</i> &bull; Flag to skip the prompt for email step<br>
                    <i>pin_auth</i> &bull; An account member email and PIN authentication is required<br>
                    <i>pin_auth_text</i> &bull; The account setting value, only returned if pin_auth is required<br>
                    <i>acceptance_required</i> &bull; Flag that acceptance of TOS is required<br>
                    <i>charge_amount</i> &bull; Amount to charge in pennies before the link can be accessed<br>
                    <i>charge_currency</i> &bull; Charge currency<br>
                    <i>charge_description</i> &bull; Charge description<br>
                    <i>upload_match</i> &bull; A JSON hash of DICOM tags and the values they must match for a study to be uploaded against this link (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The link was not found<br>
                    INVALID_SOURCE &bull; The referer is invalid<br>
                    IP_BLOCKED &bull; An IP whitelist blocked access<br>
                    INVALID_PIN &bull; An invalid PIN was entered<br>
                    PIN_LOCKOUT &bull; Too many invalid PIN entries<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#link-idx">top</a>

        <p><a name="link_session"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a session for the link</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/link/session</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>(uuid || pin || short_id)</i> &bull; Id, short Id or PIN of the link<br>
                    <i>password</i> &bull; Password if needed (optional)<br>
                    <i>email_address</i> &bull; The users email (optional)<br>
                    <i>link_charge_id</i> &bull; The uuid of the prior charge against this link (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>sid</i> &bull; sid<br>
                    <i>action</i> &bull; Link action<br>
                    <i>study_count</i> &bull; The study count for the list<br>
                    <i>share_code</i> &bull; The share code to use if this is an upload<br>
                    <i>pin_required</i> &bull; Flag if a PIN is required to validate this session<br>
                    <i>pin_via</i> &bull; How was the PIN sent, the options are TOKEN,EMAIL or SMS<br>
                    <i>acceptance_required</i> &bull; Flag that acceptance of TOS is required<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The link was not found<br>
                    INVALID_CREDENTIALS &bull; Invalid password or email if pin_auth is required.<br>
                    INVALID_SOURCE &bull; The referer is invalid<br>
                    IP_BLOCKED &bull; An IP whitelist blocked access<br>
                    CHARGE_REQUIRED &bull; A charge is required to access this link<br>
                    DISABLED &bull; This call is disabled for the account, you must use /link/redirect<br>
                    INVALID_PIN &bull; An invalid PIN was entered<br>
                    PIN_LOCKOUT &bull; Too many invalid PIN entries<br>
                    ONLY_ONE &bull; You can pass either uuid or short_id, not both<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#link-idx">top</a>

        <p><a name="link_redirect"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Try a link and get a redirect to the study</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/link/redirect</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>(uuid || pin || short_id)</i> &bull; Id, short Id or PIN of the link<br>
                    <i>sid</i> &bull; sid from /link/session (optional)<br>
                    <i>password</i> &bull; Password if needed (optional)<br>
                    <i>link_charge_id</i> &bull; The uuid of the prior charge against this link (optional)<br>
                    <i>v</i> &bull; A JSON hash with the following keys pairs. The JSON must be encrypted (optional)<br>
                    <ul>
                        <li> <i>context_user_id</i> - an account user id for eUnity
                    </ul>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    This call returns a 302 redirect to either the study list or study viewer or uploader page  with the session setup in a cookie or in the URL if the link is valid
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    LINK_NOT_FOUND &bull; The link was not found<br>
                    INVALID_CREDENTIALS &bull; Invalid password.<br>
                    EXPIRED &bull; The link has expired<br>
                    INVALID_SOURCE &bull; The referer is invalid<br>
                    IP_BLOCKED &bull; An IP whitelist blocked access<br>
                    NOT_PERMITTED &bull; The configuration of this link requires the link UI be used instead of direct access<br>
                    INVALID_PIN &bull; An invalid PIN was entered<br>
                    PIN_LOCKOUT &bull; Too many invalid PIN entries<br>
                    ONLY_ONE &bull; You can pass either uuid or short_id, not both<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> This is an alternate method to the /link/(status|session) method that requires no client side work and avoids the flash of the client side redirect for a valid link
                        <li> Typical usage would be to get the link uuid and direct the user to https://site/api/v3/link/redirect?uuid=UUID
                        <li> Any extra parameters will be stored for auditing
                        <li> The parameters email_address, redirect_url, integration_key, skip_email_prompt, pin_auth and upload_match will be available in /namespace/share_code if this is an upload link and the parameters exist
                        <li> If the link is valid but an associated study is not found an HTML "Study not found." message is returned for display in the browser.</li>
                        <li> If the link is valid but more than 100 studies match it an HTML "Too many studies found." message is returned for display in the browser.</li>
                        <li> If the link comes from a different vanity than the study an "Invalid vanity" message is returned for display in the browser</li>
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#link-idx">top</a>

        <p><a name="link_external"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Construct a link from external data. This enables creation of links without other API calls</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/link/external</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>u</i> &bull; The uuid of the user_account record to create the guest link as<br>
                    <i>v</i> &bull; A JSON hash with the following keys pairs. The JSON must be encrypted and base64 encoded<br>
                    <ul>
                        <li> filter.*=>Filter field(s) as per the /study/list to specify the study(s) to construct the link for
                        <li> The include_priors link option value can be passed as a key
                        <li> Any additional fields will be saved in the study audit trail and the following fields <code>email_address, redirect_url, integration_key and skip_email_prompt</code> will be available in /namespace/share_code if this is an upload link
                    </ul>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    This creates a link and uses the /link/redirect call to redirect the user to either the study viewer or a study list if multiple studies are found
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_PARAMETERS &bull; The u or v parameter is missing<br>
                    ACCOUNT_USER_NOT_FOUND &bull; The account user record was not found<br>
                    ACCOUNT_NOT_SET &bull; The account is not setup for the integration<br>
                    DECRYPT_FAILED &bull; The decryption failed<br>
                    NOT_HASH &bull; The v parameter is not a JSON hash<br>
                    NO_FILTER &bull; A filter expressions was not passed<br>
                    INVALID_SOURCE &bull; The referer is invalid<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    Setup and encryption details are <a href="link_external">here</a><br>
                    If the link is valid but an associated study is not found this returns an HTML "Study not found." error for display in the browser.
                </td>
            </tr>
        </table>

        <p><a name="link_sso"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Construct a link for a SSO with share to PHR account access</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/link/sso</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>u</i> &bull; The uuid of the user_account record<br>
                    <i>v</i> &bull; An encrypted JSON hash as per the instructions in the <a href="link_external.html#sso_share_phr_workflow">SSO to a PHR account with a study share</a> section of the documentation
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    This link logs the user into a PHR account with any associated studies shared into it
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    ACCOUNT_USER_NOT_FOUND &bull; The account user record was not found<br>
                    ACCOUNT_NOT_SET &bull; The account is not setup for the integration<br>
                    DECRYPT_FAILED &bull; The decryption failed<br>
                    NOT_HASH &bull; The v parameter is not a JSON hash<br>
                    MISSING_INFO &bull; User information is missing from the hash<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>

        <p><a name="link_sid"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Return the sid for a link usage</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/link/sid</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>uuid</i> &bull; The uuid of the link usage<br>
                    <i>email</i> &bull; Email address to associate with this usage<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>sid</i> &bull; sid<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The usage was not found<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>

        <p><a name="link_mail"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>email the link to another person</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/link/mail</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; sid<br>
                    <i>uuid</i> &bull; The uuid of the link<br>
                    <i>email</i> &bull; Email address<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    link_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The link was not found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                    INVALID_EMAIL &bull; Enter a valid email address<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>

        <p><a name="link_charge"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Apply a charge against the link</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/link/charge</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>uuid</i> &bull; The uuid of the link<br>
                    <i>charge_token</i> &bull; The stripe charge token<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The link charge uuid<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The link was not found<br>
                    CHARGE_FAILED &bull; The charge failed. The <i>error_subtype</i> holds the details on the error<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>

        <p><a name="link_pin"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Generate a one time PIN to access the link</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/link/pin</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; sid<br>
                    <i>uuid</i> &bull; The uuid of the link<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>pin</i> &bull; The PIN<br>
                    <i>duration</i> &bull; The number of seconds the PIN is valid for<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    link_view
                    link_edit_pin
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The link was not found<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    The PIN can we used in place of the UUID in the link session or redirect calls
                </td>
            </tr>
        </table>

        <a name="purge"><h3>Purge commands</h3></a>
        Purging rules

        <p><a name="purge_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>List the purging rules for the account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/purge/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; uuid of the account<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>purges</i> &bull; An array of the purging rules.  Each object holds the following same fields as the <a href="#purge_get">/purge/get</a> call<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    purge_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view this list<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#purge-idx">top</a>

        <p><a name="purge_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add a purging rule</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/purge/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>name</i> &bull; Name of the purge rule<br>
                    <i>account_id</i> &bull; uuid of the account the rule is for<br>
                    <i>object</i> &bull; The object to be purged, Study by default (Study|Hl7) (optional)<br>
                    <i>days_old</i> &bull; Studies greater than or equal to these days old will be purged<br>
                    <i>days_old_how</i> &bull; How should the days old value be calculated using the 'U'pdated, 'C'reated or 'S'tudy date<br>
                    <i>namespaces</i> &bull; A JSON array of namespace uuid to limit the rule to (optional)<br>
                    <i>modalities</i> &bull; A JSON array of modalities to limit the rule to (optional)<br>
                    <i>minors</i> &bull; Apply this rule to minors - flag (optional)<br>
                    <i>adults</i> &bull; Apply this rule to adults - flag (optional)<br>
                    <i>thin</i> &bull; Make the studies thin rather than deleting - flag (optional)<br>
                    <i>archive</i> &bull; Archive the studies rather than deleting them - flag (optional)<br>
                    <i>skinny</i> &bull; Make the studies skinny rather than deleting - flag (optional)<br>
                    <i>owned_phr</i> &bull; Apply this rule to owned PHR namespaces - flag (optional)<br>
                    <i>shared_from_phr</i> &bull; If a study was shared from a PHR namespace delete the copy in the PHR namespace as well - flag (optional)<br>
                    <i>suspended</i> &bull; This rule is suspended and not applied - flag (optional)<br>
                    <i>max_deletes</i> &bull; Maximum number of purges per run of the rule (optional)<br>
                    <i>study_status_tags</i> &bull; A comma separated list of study status tags to purge (optional)<br>
                    <i>global</i> &bull; Flag to make this a global purge rule (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The purge uuid<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    purge_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_LIST &bull; The field is not a JSON array. The <i>error_subtype</i> holds the name of the field<br>
                    INVALID_FLAG &bull; An invalid flag was passed. The <i>error_subtype</i> holds the name of the invalid flag<br>
                    VALIDATION_FAILED &bull; A field failed validation. The <i>error_subtype</i> holds the name of the invalid field<br>
                    GT_ZERO &bull; The parameter must be great than zero. The <i>error_subtype</i> holds the name of the parameter<br>
                    NOT_A_NUMBER &bull; The parameter must be a valid number. The <i>error_subtype</i> holds the name of the parameter<br>
                    NOT_FOUND &bull; The account or namespace was not found. The <i>error_subtype</i> holds the uuid of the not found item<br>
                    NOT_PERMITTED &bull; You are not permitted to add a purge to that account<br>
                    ONLY_ONE_FLAG &bull; You can set either the skinny, thin or archive flag, not multiple<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> If the thin, skinny or archive flag is set the following rules will be effect
                        <ol>
                            <li> The study will only be made thin, skinny or archived if it is the last or primary copy of the study
                            <li> To retrieve a thin study the PHI namespace needs to have a gateway setup to support the /study/retrieve workflow
                            <li> A study will only be archived if an up to date archive copy exists
                            <li> You can only set one of the flags
                            <li> A skinny study is one in which all the DICOM images are deleted but the attachments still remain
                        </ol>
                        <li> A coverpage must exists for the PHI namespace before a skinny study will be generated
                        <li> A purge rule can only be made global by a sysadmin and the site needs to have global purge rule support enabled
                        <li> The definition of minor is "was the study created before they were 21 years old"
                        <li> The following parameters are applicable to Hl7 objects: account_id, name, days_old, object, suspended, max_deletes and global
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#purge-idx">top</a>

        <p><a name="purge_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Modify a purging rule</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/purge/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; Id of the purge rule<br>
                    <i>name</i> &bull; Name of the purge rule (optional)<br>
                    <i>days_old</i> &bull; Studies greater than or equal to these days old will be purged (optional)<br>
                    <i>days_old_how</i> &bull; How should the days old value be calculated using the 'U'pdated, 'C'reated or 'S'tudy date (optional)<br>
                    <i>namespaces</i> &bull; A JSON array of namespace uuid to limit the rule to (optional)<br>
                    <i>modalities</i> &bull; A JSON array of modalities to limit the rule to) (optional)<br>
                    <i>minors</i> &bull; Apply this rule to minors - flag (optional)<br>
                    <i>adults</i> &bull; Apply this rule to adults - flag (optional)<br>
                    <i>thin</i> &bull; Make the studies thin rather than deleting - flag (optional)<br>
                    <i>archive</i> &bull; Archive the studies rather than deleting them - flag (optional)<br>
                    <i>skinny</i> &bull; Make the studies skinny rather than deleting - flag (optional)<br>
                    <i>owned_phr</i> &bull; Apply this rule owned PHR namespaces - flag (optional)<br>
                    <i>shared_from_phr</i> &bull; If a study was shared from a PHR namespace delete the copy in the PHR namespace as well - flag (optional)<br>
                    <i>suspended</i> &bull; This rule is suspended and not applied - flag (optional)<br>
                    <i>max_deletes</i> &bull; Maximum number of purges per run of the rule (optional)<br>
                    <i>study_status_tags</i> &bull; A comma separated list of study status tags to purge (optional)<br>
                    <i>global</i> &bull; Flag to make this a global purge rule (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    purge_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    INVALID_JSON &bull; The field is not in valid JSON format. The <i>error_subtype</i> holds the name of the field<br>
                    INVALID_FLAG &bull; An invalid flag was passed. The <i>error_subtype</i> holds the name of the invalid flag<br>
                    VALIDATION_FAILED &bull; A field failed validation. The <i>error_subtype</i> holds the name of the invalid field<br>
                    GT_ZERO &bull; The parameter must be great than zero. The <i>error_subtype</i> holds the name of the parameter<br>
                    NOT_A_NUMBER &bull; The parameter must be a valid number. The <i>error_subtype</i> holds the name of the parameter<br>
                    NOT_FOUND &bull; The account or namespace was not found. The <i>error_subtype</i> holds the uuid of the not found item<br>
                    NOT_PERMITTED &bull; You are not permitted to edit a purge rule<br>
                    ONLY_ONE_FLAG &bull; You can set either the skinny, thin or archive flag, not multiple<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#purge-idx">top</a>

        <p><a name="purge_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a purging rule</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/purge/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; Id of the purge rule<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>account_id</i> &bull; uuid of the account the rule is for<br>
                    <i>object</i> &bull; The object to be purged<br>
                    <i>name</i> &bull; Name of the purge rule<br>
                    <i>days_old</i> &bull; Studies greater than or equal to these days old will be purged<br>
                    <i>days_old_how</i> &bull; How should the days old value be calculated using the 'U'pdated, 'C'reated or 'S'tudy date<br>
                    <i>namespaces</i> &bull; A JSON array of namespace uuid to limit the rule to<br>
                    <i>namespaces_names</i> &bull; A JSON array of the namespace names to limit the rule to<br>
                    <i>modalities</i> &bull; A JSON array of modalities to limit the rule to<br>
                    <i>minors</i> &bull; Apply this rule to minors - flag<br>
                    <i>adults</i> &bull; Apply this rule to adults - flag<br>
                    <i>thin</i> &bull; Make the studies thin rather than deleting - flag<br>
                    <i>archive</i> &bull; Archive the studies rather than deleting them - flag<br>
                    <i>skinny</i> &bull; Make the studies skinny rather than deleting - flag<br>
                    <i>owned_phr</i> &bull; Apply this rule owned PHR namespaces - flag<br>
                    <i>shared_from_phr</i> &bull; If a study was shared from a PHR namespace delete the copy in the PHR namespace as well - flag<br>
                    <i>suspended</i> &bull; This rule is suspended and not applied - flag<br>
                    <i>max_deletes</i> &bull; Maximum number of purges per run of the rule<br>
                    <i>study_status_tags</i> &bull; A comma separated list of study status tags to purge<br>
                    <i>global</i> &bull; Is this a global purge rule<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    purge_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The rule was not found<br>
                    NOT_PERMITTED &bull; You are not permitted to view purge rules for this account<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#purge-idx">top</a>

        <p><a name="purge_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete a purging rule</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/purge/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; Id of the purge rule<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    purge_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The rule was not found<br>
                    NOT_PERMITTED &bull; You are not permitted to delete purge rules for this account<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#purge-idx">top</a>

        <p><a name="purge_run"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Run purge rule(s)</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/purge/run</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>(rule_id || account_id)</i> &bull; Id of the purge rule or the account id if all purge rules should be run<br>
                    <i>object</i> &bull; Limit purging to this object only (optional)<br>
                    <i>dry_run</i> &bull; Do a dry run of the rule - flag<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    purge_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The rule or account was not found<br>
                    NOT_PERMITTED &bull; You are not permitted to run purge rules for this account<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> This call queues a purging job and the results are emailed to all users who are subscribed to the purge notification event for the account
                        <li> In a dry run studies are not deleted but the rule is evaluated and notifications sent
                        <li> The account purge rules are automatically run every night
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#purge-idx">top</a>

        <a name="message"><h3>Message commands</h3></a>

        <p><a name="message_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a list of the users messages</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/message/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>messages</i> &bull; An array of the messages.  Each object holds the following same fields as the <a href="#message_get">/message/get</a> call<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    message_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> The default sort order is most recent message first
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#message-idx">top</a>

        <p><a name="message_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Send a message</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/message/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>(namespace_id || user_id || group_id || location_id || account_id || email || share_code || study_id || study_request_id || query_id)</i> &bull; The namespace, entity, email, share code, study, study request or query to send the message to<br>
                    <i>body</i> &bull; The body of the message<br>
                    <i>subject</i> &bull; The subject of the message (optional)<br>
                    <i>parent_id</i> &bull; The uuid of the parent message (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The message uuid<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    message_edit
                    query_reply
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The recipient or the parent message cannot be found<br>
                    NOT_PERMITTED &bull; You are not permitted to send to the recipient<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#message-idx">top</a>

        <p><a name="message_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a message</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/message/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; Id of the message<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>user_id</i> &bull; Id of the user who send the message<br>
                    <i>user_name</i> &bull; Name of the user who sent the message<br>
                    <i>namespace_id</i> &bull; Id of the namespace the message was sent to<br>
                    <i>namespace_name</i> &bull; Name of the namespace the message was sent to<br>
                    <i>body</i> &bull; The message body<br>
                    <i>subject</i> &bull; The message subject<br>
                    <i>created</i> &bull; Created datetime stamp of the message<br>
                    <i>is_mine</i> &bull; Flag if I created this message<br>
                    <i>parent_id</i> &bull; The uuid of the parent message<br>
                    <i>study_id</i> &bull; The uuid of study associated with this message<br>
                    <i>query_id</i> &bull; The uuid of the Query associated with this message<br>
                    <i>tags</i> &bull; An array of user tags associated with this object (This is only returned if the object has tags)<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    message_view
                    query_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The message can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view this message<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#message-idx">top</a>

        <p><a name="message_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete a message</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/message/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; Id of the message<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    message_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The message can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to delete this message<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> You can only delete messages you created
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#message-idx">top</a>

        <p><a name="message_count"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Return the count of messages since the counter was reset</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/message/count</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>reset</i> &bull; Flag to reset counter back to zero (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>count</i> &bull; Number of messages<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#message-idx">top</a>

        <a name="dictionary"><h3>Dictionary commands</h3></a>
        Dictionaries are used to do a lookup and replace on records. Once defined they can be attached to accounts or namespaces and are triggered when a record is created or edited.

        <p><a name="dictionary_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a list of the account dictionaries</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/dictionary/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; The account id<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>dictionaries</i> &bull; An array of the dictionaries.  Each object holds the following same fields as the <a href="#dictionary_get">/dictionary/get</a> call<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    dictionary_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#dictionary-idx">top</a>

        <p><a name="dictionary_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add a dictionary</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/dictionary/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; The account id<br>
                    <i>name</i> &bull; The dictionary name<br>
                    <i>object</i> &bull; Object this is applied against (Study|Order|User_account|Case|Patient)<br>
                    <i>lookup</i> &bull; A JSON array of field names that will be concatenated and MD5 hashed for the dictionary lookup value<br>
                    <i>replace</i> &bull; A JSON array of the field names that will be replaced for a successful lookup<br>
                    <i>case_sensitive</i> &bull; Flag if the dictionary lookup is case sensitive or not<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The dictionary  uuid<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    dictionary_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                    NOT_LIST &bull; The field is not a JSON array. The <i>error_subtype</i> holds the name of the field<br>
                    INVALID_FLAG &bull; An invalid flag was passed. The <i>error_subtype</i> holds the name of the invalid flag<br>
                    INVALID_FIELD &bull; An invalid field name was passed. The <i>error_subtype</i> holds the name of the invalid field<br>
                    INVALID_OBJECT &bull; An invalid object was passed<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> The lookup and replace field(s) can be either standard field names or the UUID of a custom field
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#dictionary-idx">top</a>

        <p><a name="dictionary_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Edit a dictionary</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/dictionary/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The dictionary id<br>
                    <i>name</i> &bull; The dictionary name<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    dictionary_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The dictionary can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#dictionary-idx">top</a>

        <p><a name="dictionary_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a dictionary</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/dictionary/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The dictionary id<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The dictionary id<br>
                    <i>account_id</i> &bull; The account id<br>
                    <i>name</i> &bull; The dictionary name<br>
                    <i>object</i> &bull; The object this is applied against<br>
                    <i>lookup</i> &bull; A JSON array of field names that will be concatenated and MD5 hashed for the dictionary lookup value<br>
                    <i>replace</i> &bull; A JSON array of the field names to replace for a successful lookup<br>
                    <i>case_sensitive</i> &bull; Flag if the dictionary is case sensitive or not<br>
                    <i>attachments</i> &bull; An array of the attachments the dictionary has. Each record has the following fields<br>
                    * <i>uuid</i> &bull; Id of the attachment<br>
                    * <i>account_id|namespace_id</i> &bull; Id of the account or namespace it is attached to<br>
                    * <i>name</i> &bull; Name of the account or namespace it is attached to<br>
                    * <i>sequence</i> &bull; An integer value. Attachments are processed from low number to high number<br>
                    * <i>skip_if_lookup_unchanged</i> &bull; Flag to skip the lookup if the lookup field(s) are un-changed<br>
                    * <i>skip_if_replace_has_value</i> &bull; Flag to skip the lookup if the replace field already has a value<br>
                    * <i>add_if_no_match</i> &bull; Flag to add the lookup and replace values to the dictionary if no match occurs<br>
                    * <i>approve_if_match</i> &bull; Approve the object if there was a match (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    dictionary_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The dictionary can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#dictionary-idx">top</a>

        <p><a name="dictionary_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete a dictionary</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/dictionary/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The dictionary id<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    dictionary_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The dictionary can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#dictionary-idx">top</a>

        <p><a name="dictionary_entries"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>List all the entries in a dictionary</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/dictionary/entries</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The dictionary id<br>
                    <i>lookup</i> &bull; Only return the entry for the optional lookup entry (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>entries</i> &bull; An array of the entries with the following fields.<br>
                    * <i>lookup</i> &bull; The JSON array of the lookup values<br>
                    * <i>replace</i> &bull; The JSON array of the replacement fields<br>
                    * <i>md5</i> &bull; The md5 of the lookup values<br>
                    * <i>regexp</i> &bull; The regexp ordering number<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    dictionary_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The dictionary can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                    NOT_LIST &bull; The field is not a JSON array. The <i>error_subtype</i> holds the name of the field<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#dictionary-idx">top</a>

        <p><a name="dictionary_entry_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add or update an entry to the dictionary</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/dictionary/entry/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The dictionary id<br>
                    <i>lookup</i> &bull; The JSON array of the lookup values to add. Alternatively a regular expression if the regexp parameter is passed<br>
                    <i>replace</i> &bull; The JSON array of the replacement field values<br>
                    <i>regexp</i> &bull; An integer value that indicates that this entry is a regular expression (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    dictionary_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The dictionary can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                    NOT_LIST &bull; The field is not a JSON array. The <i>error_subtype</i> holds the name of the field<br>
                    INVALID_LOOKUP &bull; The lookup does not have the required number of fields<br>
                    INVALID_REGEXP &bull; Invalid regular expression. The <i>error_subtype</i> holds the invalid regexp.<br>
                    INVALID_INTEGER &bull; Invalid integer. The <i>error_subtype</i> holds the invalid integer.<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> Replacement values can be either literal values or a Text::Template expression. For example if this is a study dictionary and the replacement value is <code>{$patient_name}</code>
                        the replace value will be the current value of the patient_name field
                        <li> Functions available in the replace Text::Template expression are: full_years_between, dicom_to_date
                        <li> Customfields can get accessed from the template as follows {$customfield_h{'UUID_OF_CUSTOM_FIELD'}}
                        <li> Regular expressions are evaluated against the space concatenated value of the lookup field(s).
                        <li> Regular expressions are evaluated if there is no match against the normal JSON entries
                        <li> Regular expressions are evaluated in order from low to high regexp number and evaluation stops at the first match
                        <li> To wildcard match any lookup value use this regular expression <code>/.*/</code>
                        <li> To apply a entry only if the record is new or the field is empty use this regular expression <code>/^\s*$/</code>
                        <li> The __COUNTER-XXX__ , __LCOUNTER-XXX__ , __MD5_HASH__ and __MD5_COUNTER__ values as documented in /namespace/anonymize are supported as a replacement value. This does not need to be in a Text::Template expression and if it is it should be quoted as a literal string.
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#dictionary-idx">top</a>

        <p><a name="dictionary_entry_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete an entry form the dictionary</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/dictionary/entry/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The dictionary id<br>
                    <i>lookup</i> &bull; The JSON array of the lookup values or the regular expression to delete<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    dictionary_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The dictionary or entry  can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                    NOT_LIST &bull; The field is not a JSON array. The <i>error_subtype</i> holds the name of the field<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#dictionary-idx">top</a>

        <p><a name="dictionary_attach"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Attach a dictionary to an account or namespace</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/dictionary/attach</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The dictionary id<br>
                    <i>(account_id || namespace_id)</i> &bull; uuid of the account or namespace to the dictionary to<br>
                    <i>sequence</i> &bull; An integer value. Attachments are processed from low number to high number (optional)<br>
                    <i>skip_if_lookup_unchanged</i> &bull; Flag to skip the lookup if the lookup field(s) are un-changed (optional)<br>
                    <i>skip_if_replace_has_value</i> &bull; Flag to skip the lookup if the replace field already has a value (optional)<br>
                    <i>add_if_no_match</i> &bull; Flag to add the lookup and replace values to the dictionary if no match occurs (optional)<br>
                    <i>approve_if_match</i> &bull; Approve the object if there was a match (optional)<br>
                    <i>run_once</i> &bull; Flag to make dictionary apply only once per object (optional)<br>
                    <i>delay</i> &bull; An integer number of seconds to delay the dictionary application (optional)<br>
                    <i>global_counter</i> &bull; A flag if you want the counter to run against the account namespace instead of the object namespace (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; Id of the attachment<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    dictionary_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The dictionary or entry  can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> Once a dictionary is attached it will be checked every time a record in the account or namespace is created or edited
                        <li> If a dictionary is attached to an account it will be applied to all the namespaces in the account
                        <li> The add_if_no_match logic is not triggered if any of the skip conditions are true or the replace field is empty
                        <li> If there is a customfield called <code>approved_by_name</code> in the account then it will be populated with 'System' string for the Study in event of auto approval (the approve_if_match flag)
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#dictionary-idx">top</a>

        <p><a name="dictionary_attach_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Modify a dictionary attachment</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/dictionary/attach/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The dictionary attach id<br>
                    <i>sequence</i> &bull; An integer value. Attachments are processed from low number to high number (optional)<br>
                    <i>skip_if_lookup_unchanged</i> &bull; Flag to skip the lookup if the lookup field(s) are un-changed (optional)<br>
                    <i>skip_if_replace_has_value</i> &bull; Flag to skip the lookup if any of the replace fields already has a value (optional)<br>
                    <i>add_if_no_match</i> &bull; Flag to add the lookup and replace values to the dictionary if no match occurs (optional)<br>
                    <i>approve_if_match</i> &bull; Approve the object if there was a match (optional)<br>
                    <i>run_once</i> &bull; Flag to make dictionary apply only once per object (optional)<br>
                    <i>delay</i> &bull; An integer number of seconds to delay the dictionary application (optional)<br>
                    <i>global_counter</i> &bull; A flag if you want the counter to run against the account namespace instead of the object namespace (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    dictionary_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The dictionary attachment can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#dictionary-idx">top</a>
        <p><a name="dictionary_detach"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Detach a dictionary</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/dictionary/detach</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The dictionary attach id<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    dictionary_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The dictionary attachment can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#dictionary-idx">top</a>

        <a name="report"><h3>Report commands</h3></a>

        <p><a name="report_status"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get the status of the report</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/report/status</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>report_id</i> &bull; The report id<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>percent</i> &bull; The percent complete the report is. An integer from 0 to 100<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The report can not be found<br>
                    REPORT_FAILED &bull; The report failed<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    When the report is 100 percent complete download it using the /report/zip command
                </td>
            </tr>
        </table>
        <a href="#report-idx">top</a>

        <p><a name="report_zip"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Download the zipped report</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/report/zip</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>report_id</i> &bull; The report id
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    A binary stream of the zipped data with a content type of application/zip
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    [404] &bull; The report can not be found or is not available for download<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> Reports are expired either 4 hours after creation or 10 minutes after download
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#report-idx">top</a>

        <a name="meeting"><h3>Meeting commands</h3></a>
        A meeting is when a presenters actions in the viewer are broadcast to the meeting participants

        <p><a name="meeting_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Create a meeting</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/meeting/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>(study_id || study_uid && storage_namespace && phi_namespace)</i> &bull; The uuid of the study or the storage triplet<br>
                    <i>name</i> &bull; Title of the meeting<br>
                    <i>state</i> &bull; State of the meeting<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The uuid of the meeting<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    meeting_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The study can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to create a meeting for the study<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> A channel called meeting.MEETING_UUID is created
                        <li> The meetings for a study are returned in the /study/get call
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#meeting-idx">top</a>

        <p><a name="meeting_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Modify a meeting</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/meeting/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; UUID of the meeting<br>
                    <i>name</i> &bull; Title of the meeting (optional)<br>
                    <i>state</i> &bull; State of the meeting (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    meeting_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The meeting can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to modify the meeting<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#meeting-idx">top</a>

        <p><a name="meeting_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a meeting</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/meeting/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; UUID of the meeting<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; UUID of the meeting<br>
                    <i>name</i> &bull; Title of the meeting<br>
                    <i>state</i> &bull; Current state of the meeting<br>
                    <i>user_id</i> &bull; User who created the meeting<br>
                    <i>user_name</i> &bull; The user name<br>
                    <i>link_id</i> &bull; UUID of the associated link<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    meeting_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The meeting can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to get the meeting<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#meeting-idx">top</a>

        <p><a name="meeting_join"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Join a meeting</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/meeting/join</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; UUID of the meeting<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                 The fields from <a href="#meeting_get">/meeting/get</a>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    meeting_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The meeting can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#meeting-idx">top</a>

        <p><a name="meeting_leave"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Leave the meeting</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/meeting/leave</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; UUID of the meeting<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#meeting-idx">top</a>

        <p><a name="meeting_roster"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>List of meeting attendees</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/meeting/roster</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; UUID of the meeting<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>users</i> &bull; JSON array containing the following for each attendee:<br>
                    * <i>uuid</i> &bull; User id<br>
                    * <i>name</i> &bull; The user name<br>
                    * <i>presenter</i> &bull; 1/0 Flag if they are the presenter<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    meeting_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The meeting can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#meeting-idx">top</a>

        <p><a name="meeting_presenter"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Change the meeting presenters</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/meeting/presenter</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; UUID of the meeting<br>
                    <i>user_id</i> &bull; UUID of the user to make the presenter<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    meeting_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The meeting can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                    NOT_ATTENDING &bull; The user is not attending the meeting<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#meeting-idx">top</a>

        <p><a name="meeting_ping"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>A keep alive ping by the meeting owner</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/meeting/ping</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; UUID of the meeting<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    meeting_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The meeting can not be found<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> The meeting will end and be deleted if a ping has not being received within the last 60 seconds
                        <li> Other users can ping with no negative effects
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#meeting-idx">top</a>

        <p><a name="meeting_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete a meeting</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/meeting/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; UUID of the meeting<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    meeting_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The meeting can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to delete the meeting<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> Meetings are automatically deleted 30 minutes after the last state change is sent
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#meeting-idx">top</a>

        <p><a name="meeting_events_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Send an event to a meeting</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/meeting/events/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; UUID of the meeting<br>
                    <i>event</i> &bull; Event to send to the meeting<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    meeting_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The meeting can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to do this<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#meeting-idx">top</a>

        <a name="appointment"><h3>Appointment commands</h3></a>

        <p><a name="appointment_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add a appointment</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/appointment/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; uuid of the account to add them to<br>
                    <i>patient_id</i> &bull; Id of the patient to create the appointment for<br>
                    <i>user_id</i> &bull; Id of the user to create the appointment for (optional defaults to current user)<br>
                    <i>description</i> &bull; Description of the appointment (optional)<br>
                    <i>start_time</i> &bull; Start date and time of the appointment<br>
                    <i>end_time</i> &bull; End date and time of the appointment<br>
                    <i>customfield-{CUSTOMFIELD_UUID}</i> &bull; Custom field(s) (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The uuid<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    appointment_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The object was not found. The <i>error_subtype</i> holds the type of object not found<br>
                    NOT_PERMITTED &bull; You are not permitted to add a appointment to the account<br>
                    INVALID_CUSTOMFIELD &bull; Invalid custom field(s) name or value were passed. The <i>error_subtype</i> holds an array of the error details<br>
                    INVALID_DATE_TIME &bull; The timestamp is invalid<br>
                    INVALID_RANGE &bull; An invalid time range was specified<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> The start and end times must be in 24hr YYYY-MM-DD HH:MM:SS format
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#appointment-idx">top</a>

        <p><a name="appointment_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get an appointment</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/appointment/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The appointment uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The appointment uuid<br>
                    <i>patient_id</i> &bull; Id of the patient<br>
                    <i>patient_name</i> &bull; Name of the patient<br>
                    <i>first</i> &bull; First name of the patient<br>
                    <i>last</i> &bull; Last name of the patient<br>
                    <i>patient_mrn</i> &bull; MRN of the patient<br>
                    <i>user_id</i> &bull; Id of the user<br>
                    <i>user_name</i> &bull; Name of the user<br>
                    <i>description</i> &bull; Description of the appointment<br>
                    <i>start_time</i> &bull; Start date and time of the appointment<br>
                    <i>end_time</i> &bull; End date and time of the appointment<br>
                    <i>customfields</i> &bull; An array of the custom fields associated with this appointment. Each object has the following <a href="#customfields">fields</a> (This is only returned if the group has custom fields)<br>
                    <i>external_id</i> &bull; The appointment ID in a placer/filler Hl7 application<br>
                    <i>appointment_status</i> &bull; Status of the appointment (A|C|D) - Active, Cancelled, Discontinued<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    appointment_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The appointment can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view this appointment<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#appointment-idx">top</a>

        <p><a name="appointment_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Edit a appointment</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/appointment/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The appointment uuid<br>
                    <i>user_id</i> &bull; Id of the user<br>
                    <i>description</i> &bull; Description of the appointment<br>
                    <i>start_time</i> &bull; Start date and time of the appointment<br>
                    <i>end_time</i> &bull; End date and time of the appointment<br>
                    <i>customfields</i> &bull; An array of the custom fields associated with this appointment. Each object has the following <a href="#customfields">fields</a> (This is only returned if the group has custom fields)<br>
                    <i>status</i> &bull; Status of the appointment (A|C|D) - Active, Cancelled, Discontinued (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    appointment_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The appointment can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to edit the appointment<br>
                    INVALID_CUSTOMFIELD &bull; Invalid custom field(s) name or value were passed. The <i>error_subtype</i> holds an array of the error details<br>
                    INVALID_DATE_TIME &bull; The timestamp is invalid<br>
                    INVALID_RANGE &bull; An invalid time range was specified<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#appointment-idx">top</a>

        <p><a name="appointment_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete a appointment</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/appointment/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The appointment uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    appointment_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The appointment can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to delete the appointment<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#appointment-idx">top</a>

        <p><a name="appointment_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a list of the appointments in the account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/appointment/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; uuid of the account<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>appointments</i> &bull; An array of the appointments. Each object holds the same fields as the <a href="#appointment_get">/appointment/get</a> call<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    appointment_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view appointments in this account<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> The default sort order is by start_time
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#appointment-idx">top</a>

        <a name="training"><h3>Training commands</h3></a>

        <p><a name="training_todo"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get the training forms to be done</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/training/todo</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>account_id</i> &bull; Id of the account the training is for<br>
                    <i>account_name</i> &bull; The name of the account the training is for<br>
                    <i>group_number</i> &bull; The group number<br>
                    <i>group_description</i> &bull; The description for the group of forms<br>
                    <i>forms</i> &bull; JSON array containing the forms to be done<br>
                    * <i>form_number</i> &bull; The formstack id of the form<br>
                    * <i>form_description</i> &bull; The form description<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    ALL_DONE &bull; No more training is needed<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#training-idx">top</a>

        <p><a name="training_done"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Mark the form as done</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/training/done</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; Id of the account the training is for<br>
                    <i>form_number</i> &bull; The formstack id of the form<br>
                    <i>additional_parameters**</i> &bull; Additional parameters will be logged as part of the TRAINING_DONE user audit event<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>next</i> &bull; If the user has more training this will contain a hash of the fields from /training/todo<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The form was not found for this user<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#training-idx">top</a>

        <a name="rsna"><h3>RSNA commands</h3></a>

        <p><a name="rsna_phr_study"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Retrieve RSNA Image Share exam</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/rsna/phr_study</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>exam_id</i> &bull; RSNA-generated exam ID/token/email (DEPRECATED June 2015 - use access_code)<br>
                    <i>dob</i> &bull; Patient's date of birth YYYYMMDD<br>
                    <i>pin</i> &bull; RSNA-generated PIN (DEPRECATED June 2015 - use access_code)<br>
                    <i>access_code</i> &bull; RSNA-generated access code<br>
                    <i>namespace</i> &bull; Namespace where retrieved exam will be stored<br>
                    <i>clearinghouse</i> &bull; Clearinghouse to retrieve exam from: <code>test</code> or blank (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>studies</i> &bull; JSON array containing the following for each study in the exam:<br>
                    * <i>study_uuid</i> &bull; The study_uuid<br>
                    * <i>study_uid</i> &bull; The study_uid<br>
                    * <i>report</i> &bull; Is a report associated to the study (0 = no, 1 = yes)<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    EXAM_NOT_FOUND &bull; Exam cannot be found in designated RSNA Image Share clearinghouse<br>
                    ERROR_CREATING_STUDY &bull; An unknown error was received when study was added via <code>/study/add</code>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    The exam is retrieved in a background job. Poll <code>/api/v3/storage/study/{namespace}/{study_uid}/schema</code> to determine when the retrieval is complete.
                </td>
            </tr>
        </table>
        <a href="#rsna-idx">top</a>

        <a name="npi"><h3>NPI commands</h3></a>

        <p><a name="npi_find"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Find an NPI number</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/npi/find</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>last</i> &bull; Last name<br>
                    <i>state</i> &bull; 2 letter state code<br>
                    <i>first</i> &bull; First name (optional)<br>
                    <i>zip</i> &bull; Zip code (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>providers</i> &bull; JSON array containing the following fields for each provider:<br>
                    * <i>npi</i> &bull; The NPI<br>
                    * <i>name</i> &bull; The providers name<br>
                    * <i>city</i> &bull; The city the provider is located in<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    LOOKUP_FAILED &bull; The lookup against the NPI registry failed<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#npi-idx">top</a>

        <a name="site"><h3>Site commands</h3></a>

        <p><a name="site_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a list of the sites in the account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/site/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; uuid of the account<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>sites</i> &bull; An array of the sites. Each object holds the same fields as the <a href="#site_get">/site/get</a> call<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    site_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view sites in this account<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#site-idx">top</a>

        <p><a name="site_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add a site</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/site/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; uuid of the account to add them to<br>
                    <i>name</i> &bull; The sites name<br>
                    <i>site_id</i> &bull; The site to attach them to as a satellite site (optional)<br>
                    <i>country</i> &bull; The country of the site (optional)<br>
                    <i>state</i> &bull; The state code of the site (optional)<br>
                    <i>zip</i> &bull; The zip code of the site (optional)<br>
                    <i>city</i> &bull; The city the site is located in (optional)<br>
                    <i>address1</i> &bull; Address line 1 of the site (optional)<br>
                    <i>address2</i> &bull; Address line 2 of the site (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The uuid<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    site_add
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The object was not found. The <i>error_subtype</i> holds the type of object not found<br>
                    NOT_PERMITTED &bull; You are not permitted to add a site to the account<br>
                    DIFFERENT_ACCOUNTS &bull; The site and satellite sites are from different accounts<br>
                    NESTED_SATELLITE_SITE &bull; The satellite site has its satellite sites<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#site-idx">top</a>

        <p><a name="site_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Edit a site</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/site/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The site uuid<br>
                    <i>name</i> &bull; The sites name (optional)<br>
                    <i>site_id</i> &bull; The site to attach them to as a satellite site (optional)<br>
                    <i>country</i> &bull; The country of the site (optional)<br>
                    <i>state</i> &bull; The state code of the site (optional)<br>
                    <i>zip</i> &bull; The zip code of the site (optional)<br>
                    <i>city</i> &bull; The city the site is located in (optional)<br>
                    <i>inactive</i> &bull; Flag if the site is actively used. Might be used to filter out inactive sites (optional)<br>
                    <i>address1</i> &bull; Address line 1 of the site (optional)<br>
                    <i>address2</i> &bull; Address line 2 of the site (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    site_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The site can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to edit the site<br>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    DIFFERENT_ACCOUNTS &bull; The site and satellite sites are from different accounts<br>
                    NESTED_SATELLITE_SITE &bull; The satellite site has its satellite sites<br>
                    INVALID_FLAG &bull; An invalid flag was passed. The <i>error_subtype</i> holds the name of the invalid flag<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#site-idx">top</a>

        <p><a name="site_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a site</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/site/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The site uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The site uuid<br>
                    <i>name</i> &bull; The sites name<br>
                    <i>site_id</i> &bull; The site to attach them to as a satellite site<br>
                    <i>country</i> &bull; The country of the site<br>
                    <i>state</i> &bull; The state code of the site<br>
                    <i>zip</i> &bull; The zip code of the site<br>
                    <i>city</i> &bull; The city the site is located in<br>
                    <i>address1</i> &bull; Address line 1 of the site<br>
                    <i>address2</i> &bull; Address line 2 of the site<br>
                    <i>account_id</i> &bull; UUID of the account<br>
                    <i>satellite_sites</i> &bull; An array of the satellite sites. Each object has the following fields.<br>
                    * <i>uuid</i> &bull; Site Id<br>
                    * <i>name</i> &bull; Site name<br>
                    <i>trials</i> &bull; An array of the associated trials (groups). Each object has the following fields.<br>
                    * <i>uuid</i> &bull; Group Id<br>
                    * <i>name</i> &bull; Group name<br>
                    * <i>account_name</i> &bull; The group's account (Trial study) name<br>
                    * <i>inactive</i> &bull; Flag if the trial is inactive (corresponds to the group's <i>site_inactive</i> flag)<br>
                    * <i>qualified</i> &bull; Flag if the trial is qualified (corresponds to the group's <i>site_qualified</i> flag)<br>
                    <i>inactive</i> &bull; Flag if the site is actively used. Might be used to filter out inactive sites<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    site_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The site can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view this site<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#site-idx">top</a>

        <p><a name="site_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete a site</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/site/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The site uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    site_delete
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The site can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to delete the site<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#site-idx">top</a>

        <p><a name="site_user_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add a user to a site contact list</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/site/user/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The site id<br>
                    <i>(user_id || email)</i> &bull; Id or email of the user<br>
                    <i>role_name</i> &bull; The role name that should be used for the user in groups<br>
                    <i>site_email</i> &bull; Users contact email for the site. Only set this if it is different than the users login email (optional).<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    site_user_add
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The site can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to add users to the site<br>
                    USER_NOT_FOUND &bull; The user was not found<br>
                    ALREADY_EXISTS &bull; The user is in the contact list already<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#site-idx">top</a>

        <p><a name="site_user_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Edit a site contact list record</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/site/user/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The site id<br>
                    <i>user_id</i> &bull; Id of the user<br>
                    <i>role_name</i> &bull; The role name that should be used for the user in groups (optional)<br>
                    <i>site_email</i> &bull; Users contact email for the site. Only set this if it is different than the users login email (optional).<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    site_user_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The site can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to edit users in the site<br>
                    USER_NOT_FOUND &bull; The user was not found in the contact list<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#site-idx">top</a>

        <p><a name="site_user_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>List the users in a site contact list</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/site/user/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The site id<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>users</i> &bull; An array of the users.  Each object holds the following fields<br>
                    * <i>user_id</i> &bull; The user id<br>
                    * <i>user_name</i> &bull; The user name<br>
                    * <i>user_email</i> &bull; The user email<br>
                    * <i>role_name</i> &bull; The users role name<br>
                    * <i>site_email</i> &bull; Users contact email for the site.<br>
                    * <i>groups</i> &bull; An array of trials the user is a member of. Each object in the array will have the following fields<br>
                    ** <i>group_name</i> &bull; The trial site name<br>
                    ** <i>group_account_name</i> &bull; The trial account name<br>
                    ** <i>group_role_name</i> &bull; The role name of the user in the trial site<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    site_user_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The site can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted list the site contact list<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#site-idx">top</a>

        <p><a name="site_user_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Remove a user from a site contact list</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/site/user/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The site id<br>
                    <i>user_id</i> &bull; Id of the user<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    site_user_delete
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The site can not be found<br>
                    USER_NOT_FOUND &bull; The user can not be found in the contact list<br>
                    NOT_PERMITTED &bull; You are not permitted to delete users from the contact list<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#site-idx">top</a>

        <a name="scanner"><h3>Scanner commands</h3></a>

        <p><a name="scanner_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a list of the scanners in the account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/scanner/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; uuid of the account<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>scanners</i> &bull; An array of the scanners. Each object holds the same fields as the <a href="#scanner_get">/scanner/get</a> call<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    scanner_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view scanners in this account<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#scanner-idx">top</a>

        <p><a name="scanner_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add a scanner</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/scanner/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>site_id</i> &bull; Id of the site to add them to<br>
                    <i>name</i> &bull; Name of the scanner<br>
                    <i>modality</i> &bull; Modality (optional)<br>
                    <i>serial_no</i> &bull; The serial number of the scanner (optional)<br>
                    <i>manufacturer</i> &bull; The manufacturer of the scanner (optional)<br>
                    <i>model</i> &bull; The scanner model (optional)<br>
                    <i>customfield-{CUSTOMFIELD_UUID}</i> &bull; Custom field(s) (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The uuid<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    scanner_add
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The object was not found. The <i>error_subtype</i> holds the type of object not found<br>
                    NOT_PERMITTED &bull; You are not permitted to add a scanner to the account<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#scanner-idx">top</a>

        <p><a name="scanner_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Edit a scanner</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/scanner/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The scanner uuid<br>
                    <i>name</i> &bull; Name of the scanner (optional)<br>
                    <i>modality</i> &bull; Modality (optional)<br>
                    <i>serial_no</i> &bull; The serial number of the scanner (optional)<br>
                    <i>manufacturer</i> &bull; The manufacturer of the scanner (optional)<br>
                    <i>model</i> &bull; The scanner model (optional)<br>
                    <i>customfield-{CUSTOMFIELD_UUID}</i> &bull; Custom field(s) (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    scanner_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The scanner can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to edit the scanner<br>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#scaner-idx">top</a>

        <p><a name="scanner_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a scanner</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/scanner/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The scanner uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The scanner uuid<br>
                    <i>name</i> &bull; The scanner name<br>
                    <i>modality</i> &bull; The scanner modality<br>
                    <i>serial_no</i> &bull; The serial number of the scanner<br>
                    <i>manufacturer</i> &bull; The manufacturer of the scanner<br>
                    <i>model</i> &bull; The scanner model<br>
                    <i>customfields</i> &bull; An array of the custom fields associated with this scanner. Each object has the following <a href="#customfields">fields</a> (This is only returned if the scanner has custom fields)<br>
                    <i>validated_for</i> &bull; An array of the trials (groups) the scanner is validated for. Each object has the following fields.<br>
                    * <i>uuid</i> &bull; Group Id<br>
                    * <i>name</i> &bull; Group name<br>
                    * <i>study_uid</i> &bull; The study UID used in the process of scanner validation for the group<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    scanner_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The scanner can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view the scaner<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#scanner-idx">top</a>

        <p><a name="scanner_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete a scanner</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/scanner/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The scanner uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    scanner_delete
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The scanner can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to delete the scanner<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#scanner-idx">top</a>

        <a name="query"><h3>Query commands</h3></a>

        <p><a name="query_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a list of the queries</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/query/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>queries</i> &bull; An array of the queries. Each object holds the same fields as the <a href="#query_get">/query/get</a> call<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    query_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#query-idx">top</a>

        <p><a name="query_count"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Count the user queries needing attention</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/query/count</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>count_assigned</i> &bull; The number of queries assigned to the current user, but not seen yet<br>
                    <i>count_unassigned</i> &bull; The number of Queries not assigned to a specific user<br>
                    <i>count_unread</i> &bull; The number of Queries having new messages<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#query-idx">top</a>

        <p><a name="query_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add a query</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/query/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>group_id</i> &bull; Id of the group associated to a trial site to add them to<br>
                    <i>subject</i> &bull; Subject line of the query (optional)<br>
                    <i>body</i> &bull; The query body (optional)<br>
                    <i>query_type</i> &bull; The query type (optional)<br>
                    <i>owner_namespace_id</i> &bull; The namespace owning the query. The account default from the <i>default_query_owner_namespace</i> account setting is used if not passed through the parameter (optional)<br>
                    <i>owner_user_id</i> &bull; The user owning the query (optional)<br>
                    <i>created_study_id</i> &bull; The study the query is related to (optional)<br>
                    <i>recipients</i> &bull; JSON array of the user UUIDs to add to the query as recipients (optional)<br>
                    <i>notify</i> &bull; Comma delimited list of the emails to be notified of the query events (optional)<br>
                    <i>customfield-{CUSTOMFIELD_UUID}</i> &bull; Custom field(s) (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The uuid<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    query_add
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The object was not found. The <i>error_subtype</i> holds the type of object not found<br>
                    NOT_PERMITTED &bull; You are not permitted to add a query to the namespace<br>
                    INVALID_GROUP &bull; The group passed is not linked to a trial site<br>
                    NOT_CONFIGURED &bull; The group's account is not configured<br>
                    INVALID_TYPE &bull; The passed type is not valid for the group and patient arm<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    The query is created with the first status defined for the acount using the <i>query_status_tags</i> account setting
                </td>
            </tr>
        </table>
        <a href="#query-idx">top</a>

        <p><a name="query_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Edit a query</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/query/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The query uuid<br>
                    <i>query_type</i> &bull; The query type (optional)<br>
                    <i>group_id</i> &bull; Id of the group associated to a trial site to add them to. Group change is not allowed for study-related queries (optional)<br>
                    <i>subject</i> &bull; Subject line of the query (optional)<br>
                    <i>body</i> &bull; The query body (optional)<br>
                    <i>owner_user_id</i> &bull; The user owning the query (optional)<br>
                    <i>recipients</i> &bull; JSON array of the user UUIDs to add to the query as recipients (optional)<br>
                    <i>notify</i> &bull; Comma delimited list of the emails to be notified of the query events (optional)<br>
                    <i>customfield-{CUSTOMFIELD_UUID}</i> &bull; Custom field(s) (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    query_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The object was not found. The <i>error_subtype</i> holds the type of object not found<br>
                    NOT_PERMITTED &bull; You are not permitted to edit the query<br>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    STUDY_QUERY_GROUP_CHANGE &bull; Cannot change group for the study-related query<br>
                    INVALID_GROUP &bull; The group passed is not linked to a trial site or is from another account<br>
                    NOT_CONFIGURED &bull; The group's account is not configured<br>
                    INVALID_TYPE &bull; The passed type is not valid for the group and patient arm<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#query-idx">top</a>

        <p><a name="query_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a Query</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/query/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The query uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The query uuid<br>
                    <i>query_type</i> &bull; The query type<br>
                    <i>query_status</i> &bull; The query status tag<br>
                    <i>subject</i> &bull; Subject line of the query<br>
                    <i>body</i> &bull; The query body<br>
                    <i>query_no</i> &bull; The query number<br>
                    <i>created</i> &bull; Date and time the query was created<br>
                    <i>owner_namespace_id</i> &bull; The namespace UUID owning the query<br>
                    <i>owner_namespace_name</i> &bull; The owning namespace's name<br>
                    <i>owner_user_id</i> &bull; The user owning user's UUID<br>
                    <i>owner_user_name</i> &bull; The user owning user's name<br>
                    <i>owner_user_email</i> &bull; The user owning user's email<br>
                    <i>created_study_id</i> &bull; The study the query was associated to during query creation<br>
                    <i>study_uid</i> &bull; The study UID the query is related to<br>
                    <i>study_storage_namespace</i> &bull; The study storage namespace the query is related to<br>
                    <i>study_modality</i> &bull; The related study modality<br>
                    <i>group_id</i> &bull; Id of the group associated to a trial site<br>
                    <i>group_name</i> &bull; Name of the group associated to a trial site<br>
                    <i>visit_name</i> &bull; The visit name defined by a study named custom field called <code>trial_visit_name</code><br>
                    <i>subject_number</i> &bull; The subject number<br>
                    <i>attachments</i> &bull; An array of the query attachments. Each object has the following fields.<br>
                    * <i>uuid</i> &bull; Attachment Id<br>
                    * <i>created</i> &bull; Date and time the attachment was created<br>
                    * <i>created_by_id</i> &bull; UUID of the user who added the attachment<br>
                    * <i>length</i> &bull; The attachment size in bytes<br>
                    * <i>type</i> &bull; The attachment MIME-type<br>
                    * <i>name</i> &bull; The attachment display name<br>
                    * <i>url</i> &bull; The URL to download the attachment<br>
                    * <i>headers</i> &bull; The headers to include in the download request. For the headers format see <a href="#query_attachment_add">/query/attachment/add</a><br>
                    * <i>thumbnail_url</i> &bull; The URL to download the attachment thumbnail. Returned when there is a thumbnail for the attachment<br>
                    * <i>thumbnail_headers</i> &bull; The headers to include in the thumbnail download request. Returned when there is a thumbnail for the attachment<br>
                    --- The following fields are only returned if the user has query_view_meta permission ---<br>
                    <i>notify</i> &bull; Comma delimited list of the emails to be notified of the query events<br>
                    <i>recipients</i> &bull; JSON array of the study recipients. Each array element is a HASH with two keys: uuid and email<br>
                    <i>last_reply</i> &bull; Date and time when the last reply was added<br>
                    <i>last_status_change</i> &bull; Date and time when the query status changes for the last time<br>
                    <i>last_reminder</i> &bull; Date and time when the last reminder was sent out for the query<br>
                    <i>escalation_count_since_status_change</i> &bull; The escalation count since the last status change for the query<br>
                    <i>reminder_count_since_reply</i> &bull; The count o remiders sent out since the last reply<br>
                    <i>patient_id</i> &bull; The patient id<br>
                    <i>patient_mrn</i> &bull; The patient MRN<br>
                    <i>patient_name</i> &bull; The patient name<br>
                    <i>patient_arm</i> &bull; The patient arm (defined by the <code>trial_arm</code> named customfield)<br>
                    <i>tags</i> &bull; An array of user tags associated with this object (This is only returned if the object has tags)<br>
                    <i>customfields</i> &bull; An array of the custom fields associated with this query. Each object has the following <a href="#customfields">fields</a> (This is only returned if the query has custom fields)<br>
                    <i>unread_message_count</i> &bull; Number of unread messages in the Query<br>
                    <i>created_by_name</i> &bull; Name of the user who created the query<br>
                    <i>created_by_email</i> &bull; Email of the user who created the query<br>
                    <i>created_by_type</i> &bull; Type of user who created the query<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    query_view
                    query_view_meta
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The query can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view the query<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#query-idx">top</a>

        <p><a name="query_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete a query</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/query/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The query uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    query_delete
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The query can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to delete the query<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#query-idx">top</a>

        <p><a name="query_seen"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Mark query messages seen</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/query/seen</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The query uuid<br>
                    <i>message_id</i> &bull; ID of the last seen message (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    query_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The query can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view the query<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#query-idx">top</a>


        <p><a name="query_status_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Set the status of a query</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/query/status/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; Query uuid<br>
                    <i>old</i> &bull; The old query status value<br>
                    <i>new</i> &bull; The new query status value<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The query can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to set the status for this query<br>
                    STALE &bull; The query status you have is stale<br>
                    INVALID_TAG &bull; The query status new value is not a valid value<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#query-idx">top</a>

        <p><a name="query_attachment_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add an attachment to a query</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/query/attachment/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>query_id</i> &bull; Query UUID<br>
                    <i>name</i> &bull; The attachment display name<br>
                    <i>length</i> &bull; The attachment size in bytes<br>
                    <i>type</i> &bull; The attachment MIME-type<br>
                    <i>thumbnail_length</i> &bull; The attachment's thumbnail MIME-type (optional)<br>
                    <i>thumbnail_type</i> &bull; The attachment's thumbnail size in bytes (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The attachment uuid<br>
                    <i>upload_url</i> &bull; The URL to use for content upload<br>
                    <i>upload_headers</i> &bull; The headers to include in the upload request<br>
                    <i>thumbnail_upload_url</i> &bull; The URL to use for content upload<br>
                    <i>thumbnail_upload_headers</i> &bull; The headers to include in the upload request<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The query can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to add attachments to this query<br>
                    TOO_BIG &bull; The attachment size exceeds the limit<br>
                    NOT_CONFIGURED &bull; The Azure keys are not configured<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li> <i>thumbnail_length</i> and <i>thumbnail_type</i> parameters must be used together.
                        <li> The request to put file contents should be of type PUT and include all the headers provided with the call result.
                        <li> The headers in the response are encoded as an array of two-element arrays, the first element is the name of a header, the second is the header's value.
                        <li> Current file size limit is 10MB
                        <li> <i>thumbnail_upload_url</i> and <i>thumbnail_upload_headers</i> are returned when thumbnail-related parameters are passed.
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#query-idx">top</a>

        <p><a name="query_attachment_commit"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Finish a query attachment upload</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/query/attachment/commit</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; Attachment UUID<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The query attachment can not be found<br>
                    NOT_PERMITTED &bull; You are not the creator of the query attachment<br>
                    NOT_PHANTOM &bull; The attachment is not phantom<br>
                    NOT_CONFIGURED &bull; The Azure keys are not configured<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#query-idx">top</a>

        <p><a name="query_attachment_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete an attachment from the query</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/query/attachment/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; Attachment UUID<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The query attachment can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to delete attachments from this query<br>
                    THUMBNAIL &bull; The attachment is a thumbnail for the attachment, Use the main attachment to delete the thumbnail<br>
                    NOT_CONFIGURED &bull; The Azure keys are not configured<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#query-idx">top</a>

        <a name="qctask"><h3>QC Task commands</h3></a>

        <p><a name="qctask_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add a QC Task</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/qctask/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>namespace_id</i> &bull; Id of the namespace assigned to the QC Task<br>
                    <i>user_id</i> &bull; Id of the user to assign the QC Task to (optional)<br>
                    <i>query_id</i> &bull; Id of the query to associate the QC Task to (optional)<br>
                    <i>priority</i> &bull; QC Task priority<br>
                    <i>customfield-{CUSTOMFIELD_UUID}</i> &bull; Custom field(s) (optional)<br>
                    <i>message</i> &bull; Explanatory message for the QC Task (optional)<br>
                    <i>studies</i> &bull; A JSON array of the study uuid(s) (optional)<br>
                    <i>queries</i> &bull; A JSON array of the query uuid(s) associate the QC Task to (optional)<br>
                    <i>qctask_status</i> &bull; Status of the QC task, <i>Open</i> by default (Open|InProgress|Closed) (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The uuid<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    qctask_add
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The object was not found. The <i>error_subtype</i> holds the type of object not found<br>
                    NOT_PERMITTED &bull; You are not permitted to assign a QC Task to the namespace<br>
                    NAMESPACE_NOT_ACCOUNT_RELATED &bull; The assigned namespace is not associated with an Account (it is a PHR account)<br>
                    NOT_OWNING_NAMESPACE &bull; The assigned namespace is not an owning namespace for the passed Query<br>
                    INVISIBLE_QUERY &bull; The passed Query is not visible to the user the QC Task is being assigned to<br>
                    INVALID_INTEGER &bull; An invalid integer was passed. The <i>error_subtype</i> holds the name of the invalid integer<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#qctask-idx">top</a>

        <p><a name="qctask_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Edit a QC Task</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/qctask/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The QC Task uuid<br>
                    <i>user_id</i> &bull; Id of the user to assign the QC Task to (optional)<br>
                    <i>priority</i> &bull; QC Task priority (optional)<br>
                    <i>customfield-{CUSTOMFIELD_UUID}</i> &bull; Custom field(s) (optional)<br>
                    <i>message</i> &bull; Explanatory message for the QC Task (optional)<br>
                    <i>studies</i> &bull; A JSON array of the study uuid(s) (optional)<br>
                    <i>queries</i> &bull; A JSON array of the query uuid(s) associate the QC Task to (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    qctask_edit
                    qctask_prioritize
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The object was not found. The <i>error_subtype</i> holds the type of object not found<br>
                    NOT_PERMITTED &bull; You are not permitted to edit the QC Task<br>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    INVALID_INTEGER &bull; An invalid integer was passed. The <i>error_subtype</i> holds the name of the invalid integer<br>
                    INVISIBLE_QUERY &bull; The passed Query is not visible to the user the QC Task is being assigned to<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#qctask-idx">top</a>

        <p><a name="qctask_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a QC Task</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/qctask/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The QC Task uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>namespace_id</i> &bull; Id of the namespace assigned to the QC Task<br>
                    <i>user_id</i> &bull; Id of the user to assign the QC Task to<br>
                    <i>priority</i> &bull; QC Task priority<br>
                    <i>customfields</i> &bull; An array of the custom fields associated with this QC Task. Each object has the following <a href="#customfields">fields</a> (This is only returned if the QC Task has custom fields)<br>
                    <i>message</i> &bull; Explanatory message for the QC Task<br>
                    <i>created</i> &bull; Date and time the QC Task was created<br>
                    <i>studies</i> &bull; An array of the study uuid(s)<br>
                    <i>queries</i> &bull; An array of the associated query uuid(s)<br>
                    <i>qctask_status</i> &bull; Status of the QC task<br>
                    <i>external</i> &bull; Flag if this an external QC Task and should be opened in an external UI<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    qctask_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The QC Task can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view the QC Task<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#qctask-idx">top</a>

        <p><a name="qctask_status_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Set the status of a QC task</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/qctask/status/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; QC task uuid<br>
                    <i>old</i> &bull; The old QC task status value<br>
                    <i>new</i> &bull; The new QC task status value (Open|InProgress|Closed)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The QC task can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to set the status for this QC task<br>
                    STALE &bull; The QC task status you have is stale<br>
                    INVALID_TAG &bull; The QC task status new value is not a valid value<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#qctask-idx">top</a>

        <a name="anonymization"><h3>Anonymization profile commands</h3></a>

        <p><a name="anonymization_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a list of the anonymization profiles in the account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/anonymization/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; uuid of the account<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>anonymization_profiles</i> &bull; An array of the anonymization profiles. Each object holds the same fields as the <a href="#anonymization_get">/anonymization/get</a> call<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    account_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view anonymization profiles in this account<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#anonymization-idx">top</a>

        <p><a name="anonymization_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add an anonymization profile</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/anonymization/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; uuid of the account to add them to<br>
                    <i>name</i> &bull; Name of the anonymization profile<br>
                    <i>rules</i> &bull; A JSON hash of <a href="#namespace_anonymize">anonymization rules</a> to apply to retrieved studies<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The uuid<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    account_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account was not found. The <i>error_subtype</i> holds the type of object not found<br>
                    NOT_HASH &bull; The rules field is not a hash <br>
                    NOT_PERMITTED &bull; You are not permitted to add an anonymization profile to the account<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#anonymization-idx">top</a>

        <p><a name="anonymization_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Edit an anonymization profile</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/anonymization/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The anonymization profile uuid<br>
                    <i>name</i> &bull; Name of the anonymization profile (optional)<br>
                    <i>rules</i> &bull; A JSON hash of <a href="#namespace_anonymize">anonymization rules</a> to apply to retrieved studies (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    account_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The anonymization profile can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to edit the anonymization profile<br>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_HASH &bull; The rules field is not a hash <br>
                    IN_USE &bull; The anonymization profile is connected to an account, its rule set cannot be changed<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li>Rules in an anonymization profile becomes read-only when connected to a namespace
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#anonymization-idx">top</a>

        <p><a name="anonymization_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get an anonymization profile</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/anonymization/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The anonymization profile uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The anonymization profile uuid<br>
                    <i>name</i> &bull; Name of the anonymization profile<br>
                    <i>rules</i> &bull; A JSON hash of <a href="#namespace_anonymize">anonymization rules</a> to apply to retrieved studies<br>
                    <i>account_id</i> &bull; account uuid<br>
                    <i>namespaces</i> &bull; An array of the namespaces the anonymization profile applies to. Each namespace holds the following fields.<br>
                    * <i>uuid</i> &bull; Id of the namespace<br>
                    * <i>name</i> &bull; Description of the namespace<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    account_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The anonymization profile can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view the anonymization profile<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#anonymization-idx">top</a>

        <p><a name="anonymization_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete an anonymization profile</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/anonymization/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The anonymization profile uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    account_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The anonymization profile can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to delete the anonymization profile<br>
                    IN_USE &bull; The anonymization profile is connected to an account and cannot be removed<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#anonymization-idx">top</a>

        <a name="rule_set"><h3>Rule set commands</h3></a>

        <p><a name="rule_set_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a list of the rule sets in the account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/rule_set/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; uuid of the account<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>rule_sets</i> &bull; An array of the account rule sets. Each object holds the same fields as the <a href="#rule_set_get">/rule_set/get</a> call<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    account_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view rule sets in this account<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#rule_set-idx">top</a>

        <p><a name="rule_set_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add a rule set</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/rule_set/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; uuid of the account to add them to<br>
                    <i>name</i> &bull; Name of the rule set<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The uuid<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    account_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account was not found. The <i>error_subtype</i> holds the type of object not found<br>
                    NOT_PERMITTED &bull; You are not permitted to add a rule set to the account<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#rule_set-idx">top</a>

        <p><a name="rule_set_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Edit a rule set</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/rule_set/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The rule set uuid<br>
                    <i>name</i> &bull; Name of the rule set (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    account_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    NOT_FOUND &bull; The rule set can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to edit the rule set<br>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#rule_set-idx">top</a>

        <p><a name="rule_set_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a rule set</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/rule_set/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The rule set uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The rule set uuid<br>
                    <i>name</i> &bull; Name of the rule set<br>
                    <i>account_id</i> &bull; account uuid<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    account_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The rule set can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view the rule set<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#rule_set-idx">top</a>

        <p><a name="rule_set_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete a rule set</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/rule_set/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The rule set uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    account_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The rule set can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to delete the rule set<br>
                    IN_USE &bull; The rule set contains study status timet rules and cannot be removed<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#rule_set-idx">top</a>

        <a name="timer_rule"><h3>Study timer rule commands</h3></a>

        <p><a name="timer_rule_list"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a list of the study timer rules in the account</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/timer_rule/list</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>account_id</i> &bull; uuid of the account<br>
                    <i>filter.*</i> <a href="#filter">Filters</a> (optional)<br>
                    <i>page.*</i> <a href="#pagination">Pagination</a> (optional)<br>
                    <i>sort_by</i> &bull; <a href="#sort">Sorting</a> (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>page</i> &bull; The pagination status hash<br>
                    <i>timer_rules</i> &bull; An array of the account timer rules. Each object holds the same fields as the <a href="#timer_rule_get">/timer_rule/get</a> call<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    account_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The account can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view timer rules in this account<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#timer_rule-idx">top</a>

        <p><a name="timer_rule_add"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Add a timer rule</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/timer_rule/add</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>rule_set_id</i> &bull; uuid of the rule set to add them to<br>
                    <i>action</i> &bull; The action to perform on rule match (reset|reset_and_stop|reset_and_resume|resume|stop|do_nothing)<br>
                    <i>sequence</i> &bull; An integer value. Rules are processed from low number to high number (optional)<br>
                    <i>old_values</i> &bull; JSON hash of the values to compare with the previous study state. Keys correspond to study fields, each hash element is an ARRAY of actual values to use in comparison (optional)<br>
                    <i>new_values</i> &bull; JSON hash of the values to compare with the next study state. Keys correspond to study fields, each hash element is an ARRAY of actual values to use in comparison (optional)<br>
                    <i>name</i> &bull; Name of the timer rule<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The uuid<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    account_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The rule set can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to add a rule set to the account<br>
                    INVALID_INTEGER &bull; An invalid integer was passed. The <i>error_subtype</i> holds the name of the invalid integer<br>
                    VALIDATION_FAILED &bull; A field failed validation. The <i>error_subtype</i> holds the name of the invalid field<br>
                    NOT_HASH &bull; The field is not a JSON hash. The <i>error_subtype</i> holds the name of the field<br>
                    UNSUPPORTED_STUDY_FIELD &bull; The referred study field is not supported<br>
                    NAMESPACE_NOT_FOUND &bull; The namespace referred by the rule was not found<br>
                    INVALID_VALUE &bull; The rule condition value is not an array<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                    <ul>
                        <li>Each study change initiates timer rules processing. The account timer rules are processed from low sequence number to high sequence number.
                            For each rule <i>old_values</i> and <i>new_values</i> are compared (if set) with the old study state (prior to the study change) and the new study state.
                            Each of the <i>old_values</i> and <i>new_values</i> keys are compared with the corresponding study attribute in turn, any key array value for every key must be equal to the study attribute to trigger the rule action for the study.
                            Rules processing stops on the first match. If none of the rules match then no action is taken. Timer is stopped for new studies by default. If neither of <i>old_values</i> and <i>new_values</i> are set, then the rule matches unconditionally.
                        <li>The following study attributes are supported in condition definitions: <i>study_status</i>, <i>phi_namespace</i>
                    </ul>
                </td>
            </tr>
        </table>
        <a href="#timer_rule-idx">top</a>

        <p><a name="timer_rule_set"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Edit a timer rule</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/timer_rule/set</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The timer rule uuid<br>
                    <i>action</i> &bull; The action to perform on rule match (reset|reset_and_stop|reset_and_resume|resume|stop|do_nothing) (optional)<br>
                    <i>sequence</i> &bull; An integer value. Rules are processed from low number to high number (optional)<br>
                    <i>old_values</i> &bull; JSON hash of the values to compare with the previous study state. Keys correspond to study fields, each hash element is an ARRAY of actual values to use in comparison (optional)<br>
                    <i>new_values</i> &bull; JSON hash of the values to compare with the next study state. Keys correspond to study fields, each hash element is an ARRAY of actual values to use in comparison (optional)<br>
                    <i>name</i> &bull; Name of the timer rule (optional)<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    account_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The timer rule was not found<br>
                    NOT_PERMITTED &bull; You are not permitted to edit the timer rule<br>
                    INVALID_INTEGER &bull; An invalid integer was passed. The <i>error_subtype</i> holds the name of the invalid integer<br>
                    VALIDATION_FAILED &bull; A field failed validation. The <i>error_subtype</i> holds the name of the invalid field<br>
                    NOT_HASH &bull; The field is not a JSON hash. The <i>error_subtype</i> holds the name of the field<br>
                    UNSUPPORTED_STUDY_FIELD &bull; The referred study field is not supported<br>
                    NAMESPACE_NOT_FOUND &bull; The namespace referred by the rule was not found<br>
                    INVALID_VALUE &bull; The rule condition value is not an array<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#timer_rule-idx">top</a>

        <p><a name="timer_rule_get"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Get a timer rule</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/timer_rule/get</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The timer rule uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                    <i>uuid</i> &bull; The timer rule uuid<br>
                    <i>name</i> &bull; Name of the timer rule<br>
                    <i>rule_set_id</i> &bull; uuid of the rule set<br>
                    <i>action</i> &bull; The action to perform on rule match<br>
                    <i>sequence</i> &bull; An integer value. Rules are processed from low number to high number<br>
                    <i>old_values</i> &bull; JSON hash of the values to compare with the previous study state<br>
                    <i>new_values</i> &bull; JSON hash of the values to compare with the next study state<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    account_view
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The timer rule can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to view the timer rule<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#timer_rule-idx">top</a>

        <p><a name="timer_rule_delete"></a>
        <table class="bordered-table">
            <tr>
                <th>Description</th>
                <td>Delete a timer rule</td>
            </tr>
            <tr>
                <th>URL</th>
                <td>/timer_rule/delete</td>
            </tr>
            <tr>
                <th>Parameters</th>
                <td>
                    <i>sid</i> &bull; The session id (optional if basic authentication or an OAuth token is used)<br>
                    <i>uuid</i> &bull; The timer rule uuid<br>
                </td>
            </tr>
            <tr>
                <th>Returns</th>
                <td>
                    <i>status</i> &bull; OK<br>
                </td>
            </tr>
            <tr>
                <th>Permission</th>
                <td>
                    account_edit
                </td>
            </tr>
            <tr>
                <th>Errors</th>
                <td>
                    MISSING_FIELDS &bull; A required field is missing or does not have data in it. The <i>error_subtype</i> holds a array of all the missing fields<br>
                    NOT_FOUND &bull; The timer rule can not be found<br>
                    NOT_PERMITTED &bull; You are not permitted to delete the timer rule<br>
                </td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>
                </td>
            </tr>
        </table>
        <a href="#timer_rule-idx">top</a>

    <footer>LBL0022 v55.0 2022-08-03</footer>
    </div>
</body>
</html>
